{"version":3,"sources":["webpack://filestack/webpack/universalModuleDefinition","webpack://filestack/webpack/bootstrap","webpack://filestack/./node_modules/tslib/tslib.es6.js","webpack://filestack/../../src/lib/utils/index.ts","webpack://filestack/../../src/lib/utils/extensions.ts","webpack://filestack/./build/module/lib/utils/index.node.js","webpack://filestack/../../src/lib/request/error.ts","webpack://filestack/./node_modules/debug/src/browser.js","webpack://filestack/../src/is.ts","webpack://filestack/./build/module/lib/request/utils.node.js","webpack://filestack/../../src/lib/request/utils.ts","webpack://filestack/../../src/lib/request/types.ts","webpack://filestack/./node_modules/eventemitter3/index.js","webpack://filestack/../src/misc.ts","webpack://filestack/../src/string.ts","webpack://filestack/../../src/lib/request/helpers/cookies.ts","webpack://filestack/../../src/lib/request/helpers/headers.ts","webpack://filestack/../../src/lib/request/helpers/data.ts","webpack://filestack/../../src/lib/request/helpers/url.ts","webpack://filestack/./node_modules/jsonschema/lib/helpers.js","webpack://filestack/../src/node.ts","webpack://filestack/(webpack)/buildin/global.js","webpack://filestack/../../src/lib/request/helpers/shouldRetry.ts","webpack://filestack/./node_modules/file-type/index.js","webpack://filestack/./node_modules/jsonschema/lib/index.js","webpack://filestack/./node_modules/node-libs-browser/node_modules/url/url.js","webpack://filestack/./node_modules/jsonschema/lib/scan.js","webpack://filestack/./node_modules/fast-xml-parser/src/fxp.js","webpack://filestack/../src/browser.ts","webpack://filestack/(webpack)/buildin/module.js","webpack://filestack/(webpack)/buildin/amd-options.js","webpack://filestack/./node_modules/process/browser.js","webpack://filestack/./node_modules/fast-xml-parser/src/validator.js","webpack://filestack/./node_modules/fast-xml-parser/src/util.js","webpack://filestack/./node_modules/isutf8/index.js","webpack://filestack/./node_modules/spark-md5/spark-md5.js","webpack://filestack/./node_modules/p-queue/index.js","webpack://filestack/./node_modules/lodash.clonedeep/index.js","webpack://filestack/../src/stacktrace.ts","webpack://filestack/../src/memo.ts","webpack://filestack/./node_modules/jsonschema/lib/validator.js","webpack://filestack/./node_modules/punycode/punycode.js","webpack://filestack/./node_modules/node-libs-browser/node_modules/url/util.js","webpack://filestack/./node_modules/querystring-es3/index.js","webpack://filestack/./node_modules/querystring-es3/decode.js","webpack://filestack/./node_modules/querystring-es3/encode.js","webpack://filestack/./node_modules/jsonschema/lib/attribute.js","webpack://filestack/./node_modules/debug/src/common.js","webpack://filestack/./node_modules/ms/index.js","webpack://filestack/../../src/lib/request/adapters/xhr.ts","webpack://filestack/./node_modules/fast-xml-parser/src/xmlparser/XMLParser.js","webpack://filestack/./node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js","webpack://filestack/./node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js","webpack://filestack/./node_modules/fast-xml-parser/src/xmlparser/xmlNode.js","webpack://filestack/./node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js","webpack://filestack/./node_modules/strnum/strnum.js","webpack://filestack/./node_modules/fast-xml-parser/src/xmlparser/node2json.js","webpack://filestack/./node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js","webpack://filestack/./node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js","webpack://filestack/./node_modules/p-queue/node_modules/eventemitter3/index.js","webpack://filestack/(webpack)/buildin/harmony-module.js","webpack://filestack/../src/session.ts","webpack://filestack/FilestackLoader/webpack/bootstrap","webpack://filestack/FilestackLoader/dist/module/index.js","webpack://filestack/./build/module/lib/api/security.node.js","webpack://filestack/../src/logger.ts","webpack://filestack/../src/syncpromise.ts","webpack://filestack/../src/scope.ts","webpack://filestack/../src/hub.ts","webpack://filestack/../src/index.ts","webpack://filestack/../../src/config.ts","webpack://filestack/../../src/filestack_error.ts","webpack://filestack/../../src/schema/transforms.schema.ts","webpack://filestack/../../src/schema/definitions.schema.ts","webpack://filestack/../../src/schema/validator.ts","webpack://filestack/../../src/lib/filelink.ts","webpack://filestack/../../src/schema/store.schema.ts","webpack://filestack/../../src/schema/preview.schema.ts","webpack://filestack/../../src/schema/upload.schema.ts","webpack://filestack/../../src/schema/picker.schema.ts","webpack://filestack/../../src/schema/metadata.schema.ts","webpack://filestack/../../src/schema/retrieve.schema.ts","webpack://filestack/../../src/lib/request/dispatch.ts","webpack://filestack/./build/module/lib/request/request_adapter.node.js","webpack://filestack/../../src/lib/request/request.ts","webpack://filestack/../../src/lib/request/token.ts","webpack://filestack/../../src/lib/api/file.ts","webpack://filestack/../../src/lib/api/transform.ts","webpack://filestack/../../src/lib/api/upload/file.ts","webpack://filestack/../../src/lib/utils/store.ts","webpack://filestack/./build/module/lib/api/upload/file_tools.node.js","webpack://filestack/../../src/lib/api/upload/uploaders/abstract.ts","webpack://filestack/../../src/lib/api/upload/uploaders/s3.ts","webpack://filestack/../../src/lib/api/upload/upload.ts","webpack://filestack/../../src/lib/api/preview.ts","webpack://filestack/./build/module/lib/utils/store.node.js","webpack://filestack/../../src/lib/api/cloud.ts","webpack://filestack/../../src/lib/api/prefetch.ts","webpack://filestack/../../src/lib/picker.ts","webpack://filestack/../../src/lib/client.ts","webpack://filestack/../../src/lib/api/store.ts","webpack://filestack/../../src/index.ts","webpack://filestack/../src/time.ts","webpack://filestack/../src/object.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","extendStatics","b","setPrototypeOf","__proto__","Array","__extends","__","this","constructor","__assign","assign","arguments","length","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","iterator","v","op","TypeError","pop","push","__values","__read","ar","error","__spread","concat","last","ExtensionsMap","mobileRegexp","md5","data","btoa","hash","b64","safeUrl","replace","getVersion","isMobile","navigator","userAgent","test","isFacebook","resolveCdnUrl","session","handle","cdnURL","urls","cdnUrl","indexOf","apikey","Error","resolveHost","cname","hosts","keys","forEach","obj","newObj","k","uniqueTime","time","Date","now","uniqueId","len","join","Math","random","toString","file","type","mime","isutf8","console","warn","ext","split","toLocaleLowerCase","mapLen","sanitizeName","options","replacement","exclude","fileParts","map","char","toFilter","requiredFields","filter","reduce","cleanUpCallbacks","undefined","FsRequestErrorCode","message","config","response","code","target","log","formatArgs","args","useColors","namespace","humanize","diff","color","splice","index","lastC","match","save","namespaces","storage","setItem","removeItem","load","getItem","process","env","DEBUG","__nwjs","toLowerCase","document","documentElement","style","WebkitAppearance","firebug","exception","table","parseInt","RegExp","$1","localStorage","localstorage","colors","require","formatters","j","JSON","stringify","isError","wat","isInstanceOf","isString","isPrimitive","isPlainObject","isEvent","Event","isElement","Element","isRegExp","isThenable","Boolean","isSyntheticEvent","base","_e","isBuffer","isStream","isArrayBuffer","val","isObject","isFile","isBlob","isURLSearchParams","URLSearchParams","isFormData","FormData","trim","str","FsHttpMethod","has","prefix","Events","EE","fn","context","once","addListener","emitter","event","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","eventNames","events","names","slice","getOwnPropertySymbols","listeners","handlers","ee","listenerCount","emit","a1","a2","a3","a4","a5","removeListener","on","removeAllListeners","off","prefixed","fallbackGlobalObject","getGlobalObject","global","self","uuid4","crypto","msCrypto","getRandomValues","arr","Uint16Array","pad","num","consoleSandbox","callback","originalConsole","wrappedLevels","level","__sentry_original__","truncate","max","substr","snipLine","line","colno","newLine","ll","start","end","min","ignoreDuplicates","headers","parsed","set","setIFExists","normalizedName","normalizeName","parse","dnt","etag","tcn","te","text","charAt","toUpperCase","debug","filestackHeaders","floor","contentType","bufferToString","validate","parser","ignoreDeclaration","ignoreAttributes","trimValues","buffer","bufView","addition","pow","String","fromCharCode","subarray","combineURL","url","params","serialized","urlfy","hashIndex","encodeURIComponent","uri","ValidationError","instance","schema","propertyPath","argument","id","stack","ValidatorResult","ctx","errors","throwError","disableFormat","stringizer","addError","detail","err","importErrors","res","validatorType","SchemaError","msg","captureStackTrace","SchemaContext","schemas","makeChild","propertyName","makeSuffix","FORMAT_REGEXPS","input","parseFloat","isNaN","regexp","regex","pattern","ipv4","isFormat","format","validator","customFormats","deepMerger","dst","deepMerge","copyist","src","copyistWithDeepMerge","array","isArray","pathEncoder","deepCompareStrict","a","every","aKeys","bKeys","objectGetPath","parts","shift","decodeURIComponent","encodePath","getDecimalPlaces","number","decimalPlaces","Number","decimalParts","isNodeEnv","dynamicRequire","mod","request","Function","shouldRetry","status","NETWORK","SERVER","TIMEOUT","ABORTED","toBytes","charCodeAt","xpiZipFilename","oxmlContentTypes","oxmlRels","readUInt64LE","buf","offset","mul","fileType","Uint8Array","ArrayBuffer","Buffer","check","header","mask","checkString","findNextZipHeaderIndex","startAt","findIndex","el","zipHeaderIndex","oxmlFound","sliced","idPos","docTypePos","findDocType","objectSize","default","stream","readableStream","eval","pass","PassThrough","chunk","read","minimumBytes","unshift","pipeline","pipe","Validator","SchemaScanResult","scan","punycode","util","Url","protocol","slashes","auth","host","port","hostname","search","query","pathname","path","href","urlParse","source","relative","resolveObject","protocolPattern","portPattern","simplePathPattern","unwise","autoEscape","nonHostChars","hostEndingChars","hostnamePartPattern","hostnamePartStart","unsafeProtocol","hostlessProtocol","slashedProtocol","querystring","parseQueryString","slashesDenoteHost","u","queryIndex","splitter","uSplit","rest","simplePath","exec","proto","lowerProto","atSign","hostEnd","hec","lastIndexOf","parseHost","ipv6Hostname","hostparts","part","newpart","validParts","notHost","bit","toASCII","h","ae","esc","escape","qm","rel","tkeys","tk","tkey","rkeys","rk","rkey","relPath","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","isNullOrUndefined","authInHost","isNull","hasTrailingSlash","up","isAbsolute","urilib","helpers","found","ref","scanSchema","baseuri","$ref","resolvedUri","ourBase","substring","scanArray","items","extends","additionalItems","scanObject","properties","additionalProperties","definitions","patternProperties","dependencies","disallow","allOf","anyOf","oneOf","not","XMLParser","XMLBuilder","XMLValidator","htmlTreeAsString","elem","currentElem","out","height","sepLength","nextStr","_htmlElementAsString","parentNode","reverse","_oO","className","classes","attr","tagName","allowedAttrs","getAttribute","webpackPolyfill","deprecate","paths","children","__webpack_amd_options__","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","noop","nextTick","title","browser","argv","version","versions","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","defaultOptions","allowBooleanAttributes","unpairedTags","isWhiteSpace","readPI","xmlData","tagname","getErrorObject","getLineNumberForPosition","readCommentAndCDATA","angleBracketsCount","tags","tagFound","reachedRoot","tagStartPos","closingTag","isName","readAttributeStr","attrStr","attrStrStart","isValid","validateAttributeString","tagClosed","otg","openPos","col","afterAmp","validateAmpersand","startChar","validAttrStrRegxp","matches","getAllMatches","attrNames","getPositionFromMatch","attrName","validateAttrName","re","validateNumberAmpersand","count","lineNumber","lines","startIndex","nameStartChar","nameRegexp","regexName","isExist","isEmptyObject","merge","arrayMode","getValue","string","allmatches","lastIndex","hex_chr","md5cycle","x","md5blk","md5blks","md5blk_array","md51","tail","tmp","lo","hi","state","rhex","hex","toUtf8","unescape","hexToBinaryString","bytes","SparkMD5","reset","clamp","from","to","targetArray","sourceArray","byteLength","begin","append","appendBinary","contents","_buff","_length","_hash","raw","ret","buff","_finish","getState","setState","destroy","hashBinary","content","first","second","returnUInt8Array","utf8Str2ArrayBuffer","md51_array","PriorityQueue","_queue","element","priority","size","comp","it","lowerBound","PQueue","carryoverConcurrencyCount","intervalCap","Infinity","interval","concurrency","autoStart","queueClass","isFinite","_carryoverConcurrencyCount","_isIntervalIgnored","_intervalCount","_intervalCap","_interval","_intervalId","_intervalEnd","_timeoutId","_queueClass","_pendingCount","_concurrency","_isPaused","_resolveEmpty","_resolveIdle","_tryToStartAnother","_onInterval","_initializeIntervalIfNeeded","delay","_onResumeInterval","clearInterval","_resolvePromises","canInitializeInterval","_intervalPaused","_doesIntervalAllowAnother","_doesConcurrentAllowAnother","dequeue","setInterval","enqueue","_next","fns","all","add","existingResolve","argsTag","funcTag","genTag","mapTag","setTag","reFlags","reIsHostCtor","reIsUint","cloneableTags","freeGlobal","freeSelf","freeExports","nodeType","freeModule","moduleExports","addMapEntry","pair","addSetEntry","arrayReduce","iteratee","accumulator","initAccum","isHostObject","mapToArray","overArg","func","transform","arg","setToArray","uid","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","IE_PROTO","funcToString","objectToString","reIsNative","getPrototype","getPrototypeOf","objectCreate","propertyIsEnumerable","nativeGetSymbols","nativeIsBuffer","nativeKeys","DataView","getNative","Map","Set","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","valueOf","Hash","entries","clear","entry","ListCache","MapCache","Stack","__data__","arrayLikeKeys","inherited","isObjectLike","isArrayLike","isArrayLikeObject","isArguments","baseTimes","skipIndexes","isIndex","assignValue","objValue","eq","assocIndexOf","baseClone","isDeep","isFull","customizer","isArr","initCloneArray","copyArray","tag","getTag","isFunc","copy","cloneBuffer","isPrototype","initCloneObject","copyObject","getSymbols","copySymbols","baseAssign","cloneFunc","Ctor","cloneArrayBuffer","dataView","byteOffset","cloneDataView","typedArray","cloneTypedArray","cloneMap","cloneRegExp","cloneSet","symbol","initCloneByTag","stacked","props","keysFunc","symbolsFunc","values","arrayPush","baseGetAllKeys","getAllKeys","arrayEach","subValue","baseIsNative","isFunction","arrayBuffer","newValue","getMapData","cache","pairs","LARGE_ARRAY_SIZE","other","ctorString","isLength","baseKeys","getFunctionName","_hasWeakSet","WeakSet","_inner","memoize","unmemoize","delete","attribute","unresolvedRefs","types","attributes","validators","shouldResolve","addSchema","ourUri","addSubSchemaArray","addSubSchema","addSubSchemaObject","setSchemas","getSchema","urn","sch","validateSchema","switchSchema","schemaobj","schemaTraverser","superResolve","resolved","subctx","subschema","skipAttributes","ignoreProperties","validatorErr","allowUnknownAttributes","rewrite","fragment","testType","integer","boolean","date","any","maxInt","regexPunycode","regexNonASCII","regexSeparators","stringFromCharCode","RangeError","mapDomain","ucs2decode","extra","output","counter","ucs2encode","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","baseMinusTMin","decode","basic","oldi","w","baseMinusT","codePoint","inputLength","bias","encode","handledCPCount","basicLength","q","currentValue","handledCPCountPlusOne","qMinusT","prop","qs","sep","maxKeys","kstr","vstr","idx","xs","stringifyPrimitive","objectKeys","ks","testSchemaNoThrow","valid","testAdditionalProperty","preValidateProperty","some","list","inner","nestedErrors","minProperties","maxProperties","minimum","exclusiveMinimum","maximum","exclusiveMaximum","validateMultipleOfOrDivisbleBy","validationType","errorMessage","validationArgument","instanceDecimals","divisorDecimals","maxDecimals","multiplier","round","testArrays","multipleOf","divisibleBy","required","minLength","hsp","maxLength","minItems","maxItems","uniqueItems","dep","childContext","notTypes","schemaId","selectColor","createDebug","abs","prevTime","enabled","curr","ms","prev","coerce","formatter","logFn","extend","init","instances","delimiter","newDebug","toNamespace","disable","skips","enable","plural","msAbs","isPlural","long","fmtLong","fmtShort","XMLHttpRequest","blobResponse","responseType","username","password","Authorization","open","method","cancelListener","cancelToken","reason","abort","onreadystatechange","readyState","responseURL","responseHeaders","getAllResponseHeaders","responseData","statusText","REQUEST","onabort","onerror","ontimeout","setRequestHeader","onProgress","POST","PUT","upload","addEventListener","send","buildOptions","OrderedObjParser","prettify","externalEntities","validationOption","orderedObjParser","addExternalEntities","orderedResult","parseXml","preserveOrder","attributeNamePrefix","attributesGroupName","textNodeName","removeNSPrefix","parseTagValue","parseAttributeValue","cdataPropName","numberParseOptions","leadingZeros","eNotation","tagValueProcessor","attributeValueProcessor","stopNodes","alwaysCreateTextNode","commentPropName","processEntities","htmlEntities","ignorePiTags","transformTagName","transformAttributeName","updateTag","jPath","attrs","xmlNode","readDocType","toNumber","entKeys","ent","lastEntities","parseTextData","dontTrim","hasAttributes","isLeafNode","escapeEntities","replaceEntitiesValue","newval","parseValue","resolveNameSpace","attrsRegx","buildAttributesMap","oldVal","aName","newVal","attrCollection","xmlObj","currentNode","textData","closeIndex","findClosingIndex","colonIndex","saveTextToParentTag","lastTagName","propIndex","tagsNodeStack","tagData","readTagExp","childNode","tagExp","attrExpPresent","addChild","endIndex","comment","docTypeEntities","entities","lastTag","isItStopNode","tagContent","readStopNodeData","child","entityName","entity","regx","ampEntity","currentTagName","allNodesExp","stopNodePath","stopNodeExp","tagExpWithClosingIndex","attrBoundary","closingChar","ch","errMsg","closingIndex","separatorIndex","openTagCount","shouldParse","XmlNode","node","readEntityExp","isComment","isEntity","isAttlist","isNotation","validateEntityName","hasBody","hexRegex","numRegex","consider","decimalPoint","trimZeros","numStr","trimmedStr","skipLike","sign","numTrimmedByZeros","propName","assignAttributes","attrMap","jpath","atrrName","isLeafTag","propCount","compress","compressedObj","tagObj","newJpath","isLeaf","buildFromOrderedJs","indentBy","suppressEmptyNode","suppressUnpairedNode","suppressBooleanAttributes","oneListGroup","Builder","isAttribute","attrPrefixLen","processTextOrObjNode","indentate","tagEndChar","j2x","buildTextValNode","buildObjectNode","repeat","startsWith","build","jObj","arrayNodeName","buildAttrPairStr","arrLen","listTagVal","item","Ks","L","closeTag","tagEndExp","piClosingChar","textValue","attr_to_str","attrVal","isStopNode","jArray","indentation","arrToStr","xmlStr","isPreviousElementTag","newJPath","newIdentation","attStr","tagStart","tagValue","endsWith","includes","tempInd","piTextNodeName","tagText","originalModule","FILESTACK_MODULES","globalHolder","filestackInternals","holder","detachEvent","removeEventListener","loadModules","modulesList","loadModule","toReturn","moduleDefinition","promise","readyStateChange","currentTarget","srcElement","script","createElement","attachEvent","setAttribute","appendChild","registerModule","metadata","loadCss","querySelector","head","getElementsByTagName","link","loaded","getSecurity","policyOptions","appSecret","validateWebhookSignature","secret","rawBody","toCompare","PREFIX","_enabled","__SENTRY__","States","logger","executor","_state","PENDING","_handlers","_resolve","_setResult","RESOLVED","_reject","REJECTED","is","_value","_executeHandlers","_attachHandler","handler","cachedHandlers","onfulfilled","onrejected","SyncPromise","collection","resolvedCollection","catch","finally","onfinally","isRejected","_notifyingListeners","_scopeListeners","_eventProcessors","_breadcrumbs","_user","_tags","_extra","_contexts","clone","scope","newScope","Scope","_level","_span","_session","_transactionName","_fingerprint","addScopeListener","addEventProcessor","setUser","user","update","_notifyScopeListeners","getUser","setTags","setExtras","extras","setExtra","setFingerprint","fingerprint","setLevel","setTransactionName","setTransaction","setContext","setSpan","span","getSpan","getTransaction","transaction","spanRecorder","spans","setSession","getSession","captureContext","updatedScope","contexts","addBreadcrumb","breadcrumb","maxBreadcrumbs","mergedBreadcrumb","timestamp","clearBreadcrumbs","applyToEvent","hint","trace","getTraceContext","transactionName","_applyFingerprint","breadcrumbs","_notifyEventProcessors","getGlobalEventProcessors","processors","processor","final","globalEventProcessors","sid","started","duration","SessionStatus","Ok","ip_address","ipAddress","did","email","release","environment","close","Exited","toJSON","toISOString","user_agent","client","_version","_stack","getStackTop","bindClient","isOlderThan","setupIntegrations","pushScope","getScope","getStack","getClient","popScope","withScope","captureException","eventId","_lastEventId","finalHint","syntheticException","originalException","_invokeClient","event_id","captureMessage","captureEvent","lastEventId","beforeBreadcrumb","finalBreadcrumb","configureScope","oldHub","makeMain","getIntegration","integration","startSpan","_callExtensionMethod","startTransaction","customSamplingContext","traceHeaders","captureSession","endSession","_sendSessionUpdate","startSession","currentSession","carrier","getMainCarrier","sentry","extensions","hub","registry","getHubFromCarrier","setHubOnCarrier","getCurrentHub","hasHubOnCarrier","activeDomain","domain","active","registryHubTopStack","_Oo","getHubFromActiveDomain","callOnHub","FilestackErrorType","processUrl","fileApiUrl","uploadApiUrl","cloudApiUrl","pickerUrl","details","FilestackError","TransformSchema","description","flip","auto_image","no_metadata","flop","enhance","preset","enum","redeye","monochrome","negative","sfw","imagesize","smart_crop","width","animate","loop","fit","background","align","resize","crop","dim","rotate","deg","exif","detect_faces","maxsize","minsize","export","crop_faces","faces","pixelate_faces","amount","blur","blur_faces","rounded_corners","radius","vignette","blurmode","polaroid","torn_edges","spread","shadow","opacity","vector","circle","border","sharpen","blackwhite","threshold","sepia","tone","pixelate","oil_paint","modulate","brightness","saturation","hue","ascii","foreground","colored","collage","files","margin","autorotate","urlscreenshot","agent","orientation","device","upscale","noise","page","density","quality","secure","docinfo","strip","colorspace","pageformat","pageorientation","pjpg","expiry","video_convert","force","extname","aspect_mode","audio_sample_rate","two_pass","video_bitrate","fps","keyframe_interval","audio_bitrate","audio_channels","clip_length","clip_offset","watermark_url","watermark_top","watermark_right","watermark_bottom","watermark_left","frame_count","filename","location","container","access","store","region","base64decode","workflows","watermark","position","partial_blur","objects","partial_pixelate","security","policy","signature","pdfinfo","colorinfo","pdfconvert","pages","fallback","zip","minify_css","gzip","minify_js","use_babel_polyfill","keep_fn_name","keep_class_name","mangle","merge_vars","remove_console","remove_undefined","targets","DefinitionsSchema","workflowsDef","securityCallDef","regionsDef","locationsDef","colorDef","pageFormatDef","pageRangeDef","facesDef","objectsDef","positionDef","HTMLContainer","Align","FitOptions","BlurMode","ShapeType","NoiseType","StyleType","ColorspaceType","CropfacesType","ImageWatermarkPosition","SmartCropMode","VideoTypes","URLScreenshotAgent","URLScreenshotMode","URLScreenshotOrientation","Locations","VideoAccess","VideoAccessMode","EnhancePreset","handleRegexp","transforms","useValidator","arrayToObject","nameKey","dataKey","setSource","setBase64","setUseValidator","setCname","setCustomDomain","customDomain","isExternal","isSourceExternal","getValidationSchema","getTransformations","validateTasks","returnUrl","getCdnHost","transformsString","generateTransformString","arrayToString","escapeValue","addTask","getTasks","autoImage","noMetadata","smartCrop","detectFaces","cropFaces","pixelateFaces","blurFaces","roundedCorners","tornEdges","oilPaint","partialPixelate","partialBlur","videoConvert","URLScreenshot","PDFInfo","PDFConvert","minifyCss","minifyJs","toTest","transformations","Filelink","VALIDATION","optionToString","optionsString","StoreParamsSchema","disableStorageKey","sanitizer","PreviewParamsSchema","css","UploadParamsSchema","$schema","partSize","progressInterval","retry","retryFactor","retryMaxTime","intelligent","intelligentChunkSize","onRetry","disableIntegrityCheck","maxlength","PickerParamsSchema","allowManualRetry","accept","acceptFn","fromSources","cleanupImageExif","keepOrientation","keepICCandAPP","displayMode","supportEmail","customSourceContainer","customSourcePath","customSourceName","disableTransformer","disableThumbnails","exposeOriginalFile","globalDropZone","hideModalWhenUploading","imageDim","imageMax","imageMin","imageMinMaxBlock","lang","minFiles","maxFiles","maxSize","modalSize","rootId","startUploadingWhenMaxFilesReached","uploadInBackground","videoResolution","onCancel","onClose","onOpen","onFileSelected","onFileUploadCancel","onFileUploadStarted","onFileUploadFinished","onFileUploadFailed","onFileUploadProgress","onUploadStarted","onUploadDone","onFileCropped","storeTo","viewType","aspectRatio","customText","cropFiles","failOverMaxFiles","dropPane","disableClick","overlay","showIcon","showProgress","onDragEnter","onDragLeave","onDragOver","onDrop","onSuccess","onError","onClick","errorsTimeout","customAuthText","top","bottom","uploadConfig","useSentryBreadcrumbs","pasteMode","pasteToFirstInViewPort","pasteToFirstInstance","MetadataParamsSchema","mimetype","uploaded","writeable","cloud","sourceUrl","sha1","sha224","sha256","sha384","sha512","RetrieveParamsSchema","dl","extension","adapter","retryConfig","attempts","runtime","retryCount","retryDelay","RequestAdapter","XhrAdapter","defaults","dispatcher","getInstance","FsRequest","dispatch","GET","HEAD","OPTIONS","purge","PURGE","DELETE","post","put","PATH","cancel","skipStorage","baseURL","skip_storage","EAlignOptions","EAlignFacesOptions","EFitOptions","EBlurMode","EShapeType","ENoiseType","EStyleType","EColorspaceType","ECropfacesType","ESmartCropMode","EImageWatermarkPosition","EVideoTypes","EUrlscreenshotAgent","EUrlscreenshotMode","EUrlscreenshotOrientation","EVideoLocations","EVideoAccess","EVideoAccessMode","toSnakeCase","original","snakeCased","newKey","filelink","STORE_TYPE","_file","_sanitizeOptions","getPartsCount","ceil","getPartMetadata","partNum","startByte","endByte","partNumber","getPartByMetadata","meta","md5Enabled","getChunkByMetadata","chunkSize","uploadTags","base64Regexp","readPart","FileReader","blob","onload","readAsArrayBuffer","getFile","sanitizeOptions","isFileNamed","File","isFileBrowser","atob","isFileBase","b64Data","sliceSize","byteCharacters","byteArrays","byteNumbers","Blob","b64toBlob","isFileBlob","_a","readFile","_b","storeOptions","uploadMode","isModeLocked","integrityCheck","setSecurity","setApikey","setRetryConfig","cfg","setUrl","setUploadTags","setIntegrityCheck","setUploadMode","lock","setPartSize","getPartSize","setIntelligentChunkSize","getIntelligentChunkSize","getUrl","payloads","partsQueue","pause","resume","isPaused","execute","tasks","startRequest","prepareParts","startPartsQueue","completeRequest","getPayloadById","addFile","getUploadUrl","location_url","getStoreOptions","payload","getDefaultFields","fiiFallback","fields","upload_id","getDefaultHeaders","location_region","partsCount","setPayloadStatus","updatePayload","upload_type","rejectUpload","waitingLength","startPart","onIdle","uploadRegular","uploadIntelligent","getS3PartMetadata","partMetadata","pr","onProgressUpdate","setPartETag","resp","uploadNextChunk","commitPart","newOffset","setPartData","nextChunkSize","partsHandle","partLen","part_number","upload_tags","emitProgress","totalSize","totalBytes","filesProgress","totalParts","progress","totalPercent","parseError","normalizeProgress","current","lastProgress","validateRes","storeValidateRes","overrideFileName","sanitizerOptions","uploader","handleProgress","setToken","token","customName","startProgressInterval","stopProgressInterval","multiupload","progressIntervalHandler","opts","hasSecurity","baseUrl","previewTask","iframe","domElement","getElementById","Store","availableTypes","LOCAL","sessionStorage","SESSION","hasAccess","prefType","getStore","PrefetchEvents","PICKER_KEY","storeAdapter","sessionCache","isInAppBrowser","_token","prefetch","settings","inapp_browser","clouds","cancelTokenInput","flow","appurl","currentAppUrl","customSource","customsource","requestOptions","logout","tokInit","tokStart","sessionId","session_id","tokStop","archiveId","archive_id","searchParams","RotateDirection","PickerDisplayMode","param","getConfig","pickerOptions","permissions","paramsToSend","pickerOptionsToSend","picker_config","updated_config","reassignCallbacks","objOld","objTarget","_initialized","PICKER","category","forwardErrors","prefetchInstance","source_url","picker","preview","remove","removeMetadata","storeURL","storeParams","workflowIds","sources","retrieve","info","download","fl","uploadOptions","FILESTACK_SDK","dateTimestampSource","nowSeconds","platformPerformance","performance","getNodePerformance","timeOrigin","getBrowserPerformance","timestampSource","dateTimestampInSeconds","timing","navigationStart","dropUndefinedKeys","rv"],"mappings":"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","file":"filestack.umd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"filestack\"] = factory();\n\telse\n\t\troot[\"filestack\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 55);\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Session } from '../client';\nimport { Hosts } from './../../config';\nimport { ExtensionsMap } from './extensions';\nimport fileType from 'file-type';\nimport * as isutf8 from 'isutf8';\n\n/**\n * Resolve cdn url based on handle type\n *\n * @private\n * @param session session object\n * @param handle file handle (hash, src://alias, url)\n */\nexport const resolveCdnUrl = (session: Session, handle: string): string => {\n  const cdnURL = session.urls.cdnUrl;\n\n  if (handle && (handle.indexOf('src:') === 0 || handle.indexOf('http') === 0)) {\n    if (!session.apikey) {\n      throw new Error('Api key is required when storage alias is provided');\n    }\n\n    // apikey is required for alias or external sources call\n    return `${cdnURL}/${session.apikey}`;\n  }\n\n  return cdnURL;\n};\n\n/**\n * Resolve all urls with provided cnames\n *\n * @private\n * @param urls\n * @param cname\n */\nexport const resolveHost = (urls: Hosts, cname: string): Hosts => {\n  if (!cname) {\n    return urls;\n  }\n\n  const hosts = /filestackapi.com|filestackcontent.com/i;\n\n  Object.keys(urls).forEach(key => {\n    urls[key] = urls[key].replace(hosts, cname);\n  });\n\n  return urls;\n};\n\n/**\n * Removes empty options from object\n *\n * @private\n * @param obj\n */\nexport const removeEmpty = (obj: any) => {\n  const newObj = { ...obj };\n  Object.keys(newObj).forEach(k => !newObj[k] && typeof newObj[k] !== 'boolean' && delete newObj[k]);\n  return newObj;\n};\n\n/**\n * Returns unique time\n */\nlet last;\nexport const uniqueTime = () => {\n  const time = Date.now();\n  last = time === last ? time + 1 : time;\n  return last;\n};\n\n/**\n * Generates random string with provided length\n *\n * @param len\n */\nexport const uniqueId = (len: number = 10): string => {\n  return new Array(len).join().replace(/(.|$)/g, () => ((Math.random() * 36) | 0).toString(36)[Math.random() < 0.5 ? 'toString' : 'toUpperCase']());\n};\n\n/**\n * Check if input is a svg\n *\n * @param {Uint8Array | Buffer} file\n * @returns {string} - mimetype\n */\nexport const getMimetype = (file: Uint8Array | Buffer, name?: string): string => {\n  let type = fileType(file);\n\n  const excludedMimetypes = ['text/plain', 'application/octet-stream', 'application/x-ms', 'application/x-msi', 'application/zip'];\n\n  if (type && excludedMimetypes.indexOf(type.mime) === -1) {\n    return type.mime;\n  }\n\n  if (name && name.indexOf('.') > -1) {\n    const mime = extensionToMime(name);\n\n    if (mime) {\n      return mime;\n    }\n  }\n\n  try {\n    if (isutf8(file)) {\n      return 'text/plain';\n    }\n  } catch (e) {\n    /* istanbul ignore next */\n    console.warn('Additional mimetype checks (text/plain) are currently not supported for browsers');\n  }\n  // this is only fallback, omit it in coverage\n  /* istanbul ignore next */\n\n  // if we cant find types by extensions and we have magic bytes fallback to it\n  if (type) {\n    return type.mime;\n  }\n\n  return 'application/octet-stream';\n};\n\n/**\n * Change extension to according mimetype using ext=>mimetype map\n *\n * @param ext - string\n * @return string|boolean\n */\nexport const extensionToMime = (ext: string) => {\n  if (!ext || ext.length === 0) {\n    return;\n  }\n\n  if (ext.split('/').length === 2) {\n    return ext;\n  }\n\n  if (ext.indexOf('.') > -1) {\n    ext = ext.split('.').pop();\n  }\n\n  ext = ext.toLocaleLowerCase();\n\n  const keys = Object.keys(ExtensionsMap);\n  const mapLen = keys.length;\n\n  for (let i = 0; i < mapLen; i++) {\n    if (ExtensionsMap[keys[i]].indexOf(ext) > -1) {\n      return keys[i];\n    }\n  }\n\n  return;\n};\n\n/**\n * Sanitizer Options\n */\nexport type SanitizeOptions =\n  | boolean\n  | {\n    exclude?: string[];\n    replacement?: string;\n  };\n\n/**\n * Sanitize file name\n *\n * @param name\n * @param {bool} options  - enable,disable sanitizer, default enabled\n * @param {string} options.replacement - replacement for sanitized chars defaults to \"-\"\n * @param {string[]} options.exclude - array with excluded chars default - ['\\', '{', '}','|', '%', '`', '\"', \"'\", '~', '[', ']', '#', '|', '^', '<', '>']\n */\nexport const sanitizeName = (name: string, options: SanitizeOptions = true): string => {\n  if (typeof options === 'boolean' && !options) {\n    return name;\n  }\n\n  let ext;\n\n  const replacement = typeof options !== 'boolean' && options.replacement ? options.replacement : '-';\n  const exclude = typeof options !== 'boolean' && options.exclude ? options.exclude : ['\\\\', '{', '}', '|', '%', '`', '\"', \"'\", '~', '[', ']', '#', '|', '^', '<', '>'];\n\n  if (!name || name.length === 0) {\n    return 'undefined';\n  }\n\n  const fileParts = name.split('.');\n\n  if (fileParts.length > 1) {\n    ext = fileParts.pop();\n  }\n\n  return `${fileParts\n    .join('.')\n    .split('')\n    .map(char => (exclude.indexOf(char) > -1 ? replacement : char))\n    .join('')}${ext ? '.' + ext : ''}`;\n};\n\n/**\n * Filter object to given fields\n *\n * @param toFilter\n * @param requiredFields\n */\nexport const filterObject = (toFilter, requiredFields: string[]) => {\n  if (!requiredFields || requiredFields.length === 0) {\n    return toFilter;\n  }\n\n  if (Object.keys(toFilter).length === 0) {\n    return toFilter;\n  }\n\n  return Object.keys(toFilter)\n    .filter(f => requiredFields.indexOf(f) > -1)\n    .reduce((obj, key) => ({ ...obj, [key]: toFilter[key] }), {});\n};\n\n/**\n * Deep cleanup object from functions\n *\n * @param obj\n */\nexport const cleanUpCallbacks = (obj: any) => {\n  if (!obj || Object.keys(obj).length === 0) {\n    return obj;\n  }\n\n  Object.keys(obj).forEach(k => {\n    if (typeof obj[k] === 'function') {\n      obj[k] = undefined;\n    }\n\n    if (obj[k] === Object(obj[k])) {\n      obj[k] = cleanUpCallbacks(obj[k]);\n    }\n  });\n\n  return obj;\n};\n\nexport * from './index.node';\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const ExtensionsMap = {\n  'application/andrew-inset': ['ez'],\n  'application/applixware': ['aw'],\n  'application/atom+xml': ['atom'],\n  'application/atomcat+xml': ['atomcat'],\n  'application/atomsvc+xml': ['atomsvc'],\n  'application/bdoc': ['bdoc'],\n  'application/ccxml+xml': ['ccxml'],\n  'application/cdmi-capability': ['cdmia'],\n  'application/cdmi-container': ['cdmic'],\n  'application/cdmi-domain': ['cdmid'],\n  'application/cdmi-object': ['cdmio'],\n  'application/cdmi-queue': ['cdmiq'],\n  'application/cu-seeme': ['cu'],\n  'application/dash+xml': ['mpd'],\n  'application/davmount+xml': ['davmount'],\n  'application/docbook+xml': ['dbk'],\n  'application/dssc+der': ['dssc'],\n  'application/dssc+xml': ['xdssc'],\n  'application/ecmascript': ['ecma', 'es'],\n  'application/emma+xml': ['emma'],\n  'application/epub+zip': ['epub'],\n  'application/exi': ['exi'],\n  'application/font-tdpfr': ['pfr'],\n  'application/geo+json': ['geojson'],\n  'application/gml+xml': ['gml'],\n  'application/gpx+xml': ['gpx'],\n  'application/gxf': ['gxf'],\n  'application/gzip': ['gz'],\n  'application/hjson': ['hjson'],\n  'application/hyperstudio': ['stk'],\n  'application/inkml+xml': ['ink', 'inkml'],\n  'application/ipfix': ['ipfix'],\n  'application/java-archive': ['jar', 'war', 'ear'],\n  'application/java-serialized-object': ['ser'],\n  'application/java-vm': ['class'],\n  'application/javascript': ['js', 'mjs'],\n  'application/json': ['json', 'map'],\n  'application/json5': ['json5'],\n  'application/jsonml+json': ['jsonml'],\n  'application/ld+json': ['jsonld'],\n  'application/lost+xml': ['lostxml'],\n  'application/mac-binhex40': ['hqx'],\n  'application/mac-compactpro': ['cpt'],\n  'application/mads+xml': ['mads'],\n  'application/manifest+json': ['webmanifest'],\n  'application/marc': ['mrc'],\n  'application/marcxml+xml': ['mrcx'],\n  'application/mathematica': ['ma', 'nb', 'mb'],\n  'application/mathml+xml': ['mathml'],\n  'application/mbox': ['mbox'],\n  'application/mediaservercontrol+xml': ['mscml'],\n  'application/metalink+xml': ['metalink'],\n  'application/metalink4+xml': ['meta4'],\n  'application/mets+xml': ['mets'],\n  'application/mods+xml': ['mods'],\n  'application/mp21': ['m21', 'mp21'],\n  'application/mp4': ['mp4s', 'm4p'],\n  'application/msword': ['doc', 'dot'],\n  'application/mxf': ['mxf'],\n  'application/n-quads': ['nq'],\n  'application/n-triples': ['nt'],\n  'application/octet-stream': [\n    'bin',\n    'dms',\n    'lrf',\n    'mar',\n    'so',\n    'dist',\n    'distz',\n    'pkg',\n    'bpk',\n    'dump',\n    'elc',\n    'deploy',\n    'exe',\n    'dll',\n    'deb',\n    'dmg',\n    'iso',\n    'msp',\n    'buffer',\n  ],\n  'application/oda': ['oda'],\n  'application/oebps-package+xml': ['opf'],\n  'application/ogg': ['ogx'],\n  'application/omdoc+xml': ['omdoc'],\n  'application/onenote': ['onetoc', 'onetoc2', 'onetmp', 'onepkg'],\n  'application/oxps': ['oxps'],\n  'application/patch-ops-error+xml': ['xer'],\n  'application/pdf': ['pdf'],\n  'application/pgp-encrypted': ['pgp'],\n  'application/pgp-signature': ['asc', 'sig'],\n  'application/pics-rules': ['prf'],\n  'application/pkcs10': ['p10'],\n  'application/pkcs7-mime': ['p7m', 'p7c'],\n  'application/pkcs7-signature': ['p7s'],\n  'application/pkcs8': ['p8'],\n  'application/pkix-attr-cert': ['ac'],\n  'application/pkix-cert': ['cer'],\n  'application/pkix-crl': ['crl'],\n  'application/pkix-pkipath': ['pkipath'],\n  'application/pkixcmp': ['pki'],\n  'application/pls+xml': ['pls'],\n  'application/postscript': ['ai', 'eps', 'ps'],\n  'application/pskc+xml': ['pskcxml'],\n  'application/raml+yaml': ['raml'],\n  'application/rdf+xml': ['rdf', 'owl'],\n  'application/reginfo+xml': ['rif'],\n  'application/relax-ng-compact-syntax': ['rnc'],\n  'application/resource-lists+xml': ['rl'],\n  'application/resource-lists-diff+xml': ['rld'],\n  'application/rls-services+xml': ['rs'],\n  'application/rpki-ghostbusters': ['gbr'],\n  'application/rpki-manifest': ['mft'],\n  'application/rpki-roa': ['roa'],\n  'application/rsd+xml': ['rsd'],\n  'application/rss+xml': ['rss'],\n  'application/rtf': ['rtf'],\n  'application/sbml+xml': ['sbml'],\n  'application/scvp-cv-request': ['scq'],\n  'application/scvp-cv-response': ['scs'],\n  'application/scvp-vp-request': ['spq'],\n  'application/scvp-vp-response': ['spp'],\n  'application/sdp': ['sdp'],\n  'application/set-payment-initiation': ['setpay'],\n  'application/set-registration-initiation': ['setreg'],\n  'application/shf+xml': ['shf'],\n  'application/sieve': ['siv', 'sieve'],\n  'application/smil+xml': ['smi', 'smil'],\n  'application/sparql-query': ['rq'],\n  'application/sparql-results+xml': ['srx'],\n  'application/srgs': ['gram'],\n  'application/srgs+xml': ['grxml'],\n  'application/sru+xml': ['sru'],\n  'application/ssdl+xml': ['ssdl'],\n  'application/ssml+xml': ['ssml'],\n  'application/tei+xml': ['tei', 'teicorpus'],\n  'application/thraud+xml': ['tfi'],\n  'application/timestamped-data': ['tsd'],\n  'application/voicexml+xml': ['vxml'],\n  'application/wasm': ['wasm'],\n  'application/widget': ['wgt'],\n  'application/winhlp': ['hlp'],\n  'application/wsdl+xml': ['wsdl'],\n  'application/wspolicy+xml': ['wspolicy'],\n  'application/xaml+xml': ['xaml'],\n  'application/xcap-diff+xml': ['xdf'],\n  'application/xenc+xml': ['xenc'],\n  'application/xhtml+xml': ['xhtml', 'xht'],\n  'application/xml': ['xml', 'xsl', 'xsd', 'rng'],\n  'application/xml-dtd': ['dtd'],\n  'application/xop+xml': ['xop'],\n  'application/xproc+xml': ['xpl'],\n  'application/xslt+xml': ['xslt'],\n  'application/xspf+xml': ['xspf'],\n  'application/xv+xml': ['mxml', 'xhvml', 'xvml', 'xvm'],\n  'application/yang': ['yang'],\n  'application/yin+xml': ['yin'],\n  'application/zip': ['zip'],\n  'audio/3gpp': ['*3gpp'],\n  'audio/adpcm': ['adp'],\n  'audio/basic': ['au', 'snd'],\n  'audio/midi': ['mid', 'midi', 'kar', 'rmi'],\n  'audio/mp3': ['*mp3'],\n  'audio/mp4': ['m4a', 'mp4a'],\n  'audio/mpeg': ['mpga', 'mp2', 'mp2a', 'mp3', 'm2a', 'm3a'],\n  'audio/ogg': ['oga', 'ogg', 'spx'],\n  'audio/s3m': ['s3m'],\n  'audio/silk': ['sil'],\n  'audio/wav': ['wav'],\n  'audio/wave': ['*wav'],\n  'audio/webm': ['weba'],\n  'audio/xm': ['xm'],\n  'font/collection': ['ttc'],\n  'font/otf': ['otf'],\n  'font/ttf': ['ttf'],\n  'font/woff': ['woff'],\n  'font/woff2': ['woff2'],\n  'image/aces': ['exr'],\n  'image/apng': ['apng'],\n  'image/bmp': ['bmp'],\n  'image/cgm': ['cgm'],\n  'image/dicom-rle': ['drle'],\n  'image/emf': ['emf'],\n  'image/fits': ['fits'],\n  'image/g3fax': ['g3'],\n  'image/gif': ['gif'],\n  'image/heic': ['heic'],\n  'image/heic-sequence': ['heics'],\n  'image/heif': ['heif'],\n  'image/heif-sequence': ['heifs'],\n  'image/ief': ['ief'],\n  'image/jls': ['jls'],\n  'image/jp2': ['jp2', 'jpg2'],\n  'image/jpeg': ['jpeg', 'jpg', 'jpe'],\n  'image/jpm': ['jpm'],\n  'image/jpx': ['jpx', 'jpf'],\n  'image/jxr': ['jxr'],\n  'image/ktx': ['ktx'],\n  'image/png': ['png'],\n  'image/sgi': ['sgi'],\n  'image/svg+xml': ['svg', 'svgz'],\n  'image/t38': ['t38'],\n  'image/tiff': ['tif', 'tiff'],\n  'image/tiff-fx': ['tfx'],\n  'image/webp': ['webp'],\n  'image/wmf': ['wmf'],\n  'message/disposition-notification': ['disposition-notification'],\n  'message/global': ['u8msg'],\n  'message/global-delivery-status': ['u8dsn'],\n  'message/global-disposition-notification': ['u8mdn'],\n  'message/global-headers': ['u8hdr'],\n  'message/rfc822': ['eml', 'mime'],\n  'model/3mf': ['3mf'],\n  'model/gltf+json': ['gltf'],\n  'model/gltf-binary': ['glb'],\n  'model/iges': ['igs', 'iges'],\n  'model/mesh': ['msh', 'mesh', 'silo'],\n  'model/stl': ['stl'],\n  'model/vrml': ['wrl', 'vrml'],\n  'model/x3d+binary': ['*x3db', 'x3dbz'],\n  'model/x3d+fastinfoset': ['x3db'],\n  'model/x3d+vrml': ['*x3dv', 'x3dvz'],\n  'model/x3d+xml': ['x3d', 'x3dz'],\n  'model/x3d-vrml': ['x3dv'],\n  'text/cache-manifest': ['appcache', 'manifest'],\n  'text/calendar': ['ics', 'ifb'],\n  'text/coffeescript': ['coffee', 'litcoffee'],\n  'text/css': ['css'],\n  'text/csv': ['csv'],\n  'text/html': ['html', 'htm', 'shtml'],\n  'text/jade': ['jade'],\n  'text/jsx': ['jsx'],\n  'text/less': ['less'],\n  'text/markdown': ['markdown', 'md'],\n  'text/mathml': ['mml'],\n  'text/mdx': ['mdx'],\n  'text/n3': ['n3'],\n  'text/plain': ['txt', 'text', 'conf', 'def', 'list', 'log', 'in', 'ini'],\n  'text/richtext': ['rtx'],\n  'application/font-ttf': 'ttf',\n  'application/vnd.ms-fontobject': 'eot',\n  'application/font-otf': 'otf',\n  'text/rtf': ['*rtf'],\n  'text/sgml': ['sgml', 'sgm'],\n  'text/shex': ['shex'],\n  'text/slim': ['slim', 'slm'],\n  'text/stylus': ['stylus', 'styl'],\n  'text/tab-separated-values': ['tsv'],\n  'text/troff': ['t', 'tr', 'roff', 'man', 'me', 'ms'],\n  'text/turtle': ['ttl'],\n  'text/uri-list': ['uri', 'uris', 'urls'],\n  'text/vcard': ['vcard', 'vcr'],\n  'text/vtt': ['vtt'],\n  'text/xml': ['*xml'],\n  'text/yaml': ['yaml', 'yml'],\n  'video/3gpp': ['3gp', '3gpp'],\n  'video/3gpp2': ['3g2'],\n  'video/h261': ['h261'],\n  'video/h263': ['h263'],\n  'video/h264': ['h264'],\n  'video/jpeg': ['jpgv'],\n  'video/jpm': ['*jpm', 'jpgm'],\n  'video/mj2': ['mj2', 'mjp2'],\n  'video/mp2t': ['ts'],\n  'video/mp4': ['mp4', 'mp4v', 'mpg4'],\n  'video/mpeg': ['mpeg', 'mpg', 'mpe', 'm1v', 'm2v'],\n  'video/ogg': ['ogv'],\n  'video/quicktime': ['qt', 'mov'],\n  'video/webm': ['webm'],\n  'application/prs.cww': ['cww'],\n  'application/vnd.3gpp.pic-bw-large': ['plb'],\n  'application/vnd.3gpp.pic-bw-small': ['psb'],\n  'application/vnd.3gpp.pic-bw-var': ['pvb'],\n  'application/vnd.3gpp2.tcap': ['tcap'],\n  'application/vnd.3m.post-it-notes': ['pwn'],\n  'application/vnd.accpac.simply.aso': ['aso'],\n  'application/vnd.accpac.simply.imp': ['imp'],\n  'application/vnd.acucobol': ['acu'],\n  'application/vnd.acucorp': ['atc', 'acutc'],\n  'application/vnd.adobe.air-application-installer-package+zip': ['air'],\n  'application/vnd.adobe.formscentral.fcdt': ['fcdt'],\n  'application/vnd.adobe.fxp': ['fxp', 'fxpl'],\n  'application/vnd.adobe.xdp+xml': ['xdp'],\n  'application/vnd.adobe.xfdf': ['xfdf'],\n  'application/vnd.ahead.space': ['ahead'],\n  'application/vnd.airzip.filesecure.azf': ['azf'],\n  'application/vnd.airzip.filesecure.azs': ['azs'],\n  'application/vnd.amazon.ebook': ['azw'],\n  'application/vnd.americandynamics.acc': ['acc'],\n  'application/vnd.amiga.ami': ['ami'],\n  'application/vnd.android.package-archive': ['apk'],\n  'application/vnd.anser-web-certificate-issue-initiation': ['cii'],\n  'application/vnd.anser-web-funds-transfer-initiation': ['fti'],\n  'application/vnd.antix.game-component': ['atx'],\n  'application/vnd.apple.installer+xml': ['mpkg'],\n  'application/vnd.apple.keynote': ['keynote', 'key'],\n  'application/vnd.apple.mpegurl': ['m3u8'],\n  'application/vnd.apple.numbers': ['numbers'],\n  'application/vnd.apple.pages': ['pages'],\n  'application/vnd.apple.key': ['key'],\n  'application/vnd.apple.pkpass': ['pkpass'],\n  'application/vnd.aristanetworks.swi': ['swi'],\n  'application/vnd.astraea-software.iota': ['iota'],\n  'application/vnd.audiograph': ['aep'],\n  'application/vnd.blueice.multipass': ['mpm'],\n  'application/vnd.bmi': ['bmi'],\n  'application/vnd.businessobjects': ['rep'],\n  'application/vnd.chemdraw+xml': ['cdxml'],\n  'application/vnd.chipnuts.karaoke-mmd': ['mmd'],\n  'application/vnd.cinderella': ['cdy'],\n  'application/vnd.citationstyles.style+xml': ['csl'],\n  'application/vnd.claymore': ['cla'],\n  'application/vnd.cloanto.rp9': ['rp9'],\n  'application/vnd.clonk.c4group': ['c4g', 'c4d', 'c4f', 'c4p', 'c4u'],\n  'application/vnd.cluetrust.cartomobile-config': ['c11amc'],\n  'application/vnd.cluetrust.cartomobile-config-pkg': ['c11amz'],\n  'application/vnd.commonspace': ['csp'],\n  'application/vnd.contact.cmsg': ['cdbcmsg'],\n  'application/vnd.cosmocaller': ['cmc'],\n  'application/vnd.crick.clicker': ['clkx'],\n  'application/vnd.crick.clicker.keyboard': ['clkk'],\n  'application/vnd.crick.clicker.palette': ['clkp'],\n  'application/vnd.crick.clicker.template': ['clkt'],\n  'application/vnd.crick.clicker.wordbank': ['clkw'],\n  'application/vnd.criticaltools.wbs+xml': ['wbs'],\n  'application/vnd.ctc-posml': ['pml'],\n  'application/vnd.cups-ppd': ['ppd'],\n  'application/vnd.curl.car': ['car'],\n  'application/vnd.curl.pcurl': ['pcurl'],\n  'application/vnd.dart': ['dart'],\n  'application/vnd.data-vision.rdz': ['rdz'],\n  'application/vnd.dece.data': ['uvf', 'uvvf', 'uvd', 'uvvd'],\n  'application/vnd.dece.ttml+xml': ['uvt', 'uvvt'],\n  'application/vnd.dece.unspecified': ['uvx', 'uvvx'],\n  'application/vnd.dece.zip': ['uvz', 'uvvz'],\n  'application/vnd.denovo.fcselayout-link': ['fe_launch'],\n  'application/vnd.dna': ['dna'],\n  'application/vnd.dolby.mlp': ['mlp'],\n  'application/vnd.dpgraph': ['dpg'],\n  'application/vnd.dreamfactory': ['dfac'],\n  'application/vnd.ds-keypoint': ['kpxx'],\n  'application/vnd.dvb.ait': ['ait'],\n  'application/vnd.dvb.service': ['svc'],\n  'application/vnd.dynageo': ['geo'],\n  'application/vnd.ecowin.chart': ['mag'],\n  'application/vnd.enliven': ['nml'],\n  'application/vnd.epson.esf': ['esf'],\n  'application/vnd.epson.msf': ['msf'],\n  'application/vnd.epson.quickanime': ['qam'],\n  'application/vnd.epson.salt': ['slt'],\n  'application/vnd.epson.ssf': ['ssf'],\n  'application/vnd.eszigno3+xml': ['es3', 'et3'],\n  'application/vnd.ezpix-album': ['ez2'],\n  'application/vnd.ezpix-package': ['ez3'],\n  'application/vnd.fdf': ['fdf'],\n  'application/vnd.fdsn.mseed': ['mseed'],\n  'application/vnd.fdsn.seed': ['seed', 'dataless'],\n  'application/vnd.flographit': ['gph'],\n  'application/vnd.fluxtime.clip': ['ftc'],\n  'application/vnd.framemaker': ['fm', 'frame', 'maker', 'book'],\n  'application/vnd.frogans.fnc': ['fnc'],\n  'application/vnd.frogans.ltf': ['ltf'],\n  'application/vnd.fsc.weblaunch': ['fsc'],\n  'application/vnd.fujitsu.oasys': ['oas'],\n  'application/vnd.fujitsu.oasys2': ['oa2'],\n  'application/vnd.fujitsu.oasys3': ['oa3'],\n  'application/vnd.fujitsu.oasysgp': ['fg5'],\n  'application/vnd.fujitsu.oasysprs': ['bh2'],\n  'application/vnd.fujixerox.ddd': ['ddd'],\n  'application/vnd.fujixerox.docuworks': ['xdw'],\n  'application/vnd.fujixerox.docuworks.binder': ['xbd'],\n  'application/vnd.fuzzysheet': ['fzs'],\n  'application/vnd.genomatix.tuxedo': ['txd'],\n  'application/vnd.geogebra.file': ['ggb'],\n  'application/vnd.geogebra.tool': ['ggt'],\n  'application/vnd.geometry-explorer': ['gex', 'gre'],\n  'application/vnd.geonext': ['gxt'],\n  'application/vnd.geoplan': ['g2w'],\n  'application/vnd.geospace': ['g3w'],\n  'application/vnd.gmx': ['gmx'],\n  'application/vnd.google-apps.document': ['gdoc'],\n  'application/vnd.google-apps.presentation': ['gslides'],\n  'application/vnd.google-apps.spreadsheet': ['gsheet'],\n  'application/vnd.google-earth.kml+xml': ['kml'],\n  'application/vnd.google-earth.kmz': ['kmz'],\n  'application/vnd.grafeq': ['gqf', 'gqs'],\n  'application/vnd.groove-account': ['gac'],\n  'application/vnd.groove-help': ['ghf'],\n  'application/vnd.groove-identity-message': ['gim'],\n  'application/vnd.groove-injector': ['grv'],\n  'application/vnd.groove-tool-message': ['gtm'],\n  'application/vnd.groove-tool-template': ['tpl'],\n  'application/vnd.groove-vcard': ['vcg'],\n  'application/vnd.hal+xml': ['hal'],\n  'application/vnd.handheld-entertainment+xml': ['zmm'],\n  'application/vnd.hbci': ['hbci'],\n  'application/vnd.hhe.lesson-player': ['les'],\n  'application/vnd.hp-hpgl': ['hpgl'],\n  'application/vnd.hp-hpid': ['hpid'],\n  'application/vnd.hp-hps': ['hps'],\n  'application/vnd.hp-jlyt': ['jlt'],\n  'application/vnd.hp-pcl': ['pcl'],\n  'application/vnd.hp-pclxl': ['pclxl'],\n  'application/vnd.hydrostatix.sof-data': ['sfd-hdstx'],\n  'application/vnd.ibm.minipay': ['mpy'],\n  'application/vnd.ibm.modcap': ['afp', 'listafp', 'list3820'],\n  'application/vnd.ibm.rights-management': ['irm'],\n  'application/vnd.ibm.secure-container': ['sc'],\n  'application/vnd.iccprofile': ['icc', 'icm'],\n  'application/vnd.igloader': ['igl'],\n  'application/vnd.immervision-ivp': ['ivp'],\n  'application/vnd.immervision-ivu': ['ivu'],\n  'application/vnd.insors.igm': ['igm'],\n  'application/vnd.intercon.formnet': ['xpw', 'xpx'],\n  'application/vnd.intergeo': ['i2g'],\n  'application/vnd.intu.qbo': ['qbo'],\n  'application/vnd.intu.qfx': ['qfx'],\n  'application/vnd.ipunplugged.rcprofile': ['rcprofile'],\n  'application/vnd.irepository.package+xml': ['irp'],\n  'application/vnd.is-xpr': ['xpr'],\n  'application/vnd.isac.fcs': ['fcs'],\n  'application/vnd.jam': ['jam'],\n  'application/vnd.jcp.javame.midlet-rms': ['rms'],\n  'application/vnd.jisp': ['jisp'],\n  'application/vnd.joost.joda-archive': ['joda'],\n  'application/vnd.kahootz': ['ktz', 'ktr'],\n  'application/vnd.kde.karbon': ['karbon'],\n  'application/vnd.kde.kchart': ['chrt'],\n  'application/vnd.kde.kformula': ['kfo'],\n  'application/vnd.kde.kivio': ['flw'],\n  'application/vnd.kde.kontour': ['kon'],\n  'application/vnd.kde.kpresenter': ['kpr', 'kpt'],\n  'application/vnd.kde.kspread': ['ksp'],\n  'application/vnd.kde.kword': ['kwd', 'kwt'],\n  'application/vnd.kenameaapp': ['htke'],\n  'application/vnd.kidspiration': ['kia'],\n  'application/vnd.kinar': ['kne', 'knp'],\n  'application/vnd.koan': ['skp', 'skd', 'skt', 'skm'],\n  'application/vnd.kodak-descriptor': ['sse'],\n  'application/vnd.las.las+xml': ['lasxml'],\n  'application/vnd.llamagraphics.life-balance.desktop': ['lbd'],\n  'application/vnd.llamagraphics.life-balance.exchange+xml': ['lbe'],\n  'application/vnd.lotus-1-2-3': ['123'],\n  'application/vnd.lotus-approach': ['apr'],\n  'application/vnd.lotus-freelance': ['pre'],\n  'application/vnd.lotus-notes': ['nsf'],\n  'application/vnd.lotus-organizer': ['org'],\n  'application/vnd.lotus-screencam': ['scm'],\n  'application/vnd.lotus-wordpro': ['lwp'],\n  'application/vnd.macports.portpkg': ['portpkg'],\n  'application/vnd.mcd': ['mcd'],\n  'application/vnd.medcalcdata': ['mc1'],\n  'application/vnd.mediastation.cdkey': ['cdkey'],\n  'application/vnd.mfer': ['mwf'],\n  'application/vnd.mfmp': ['mfm'],\n  'application/vnd.micrografx.flo': ['flo'],\n  'application/vnd.micrografx.igx': ['igx'],\n  'application/vnd.mif': ['mif'],\n  'application/vnd.mobius.daf': ['daf'],\n  'application/vnd.mobius.dis': ['dis'],\n  'application/vnd.mobius.mbk': ['mbk'],\n  'application/vnd.mobius.mqy': ['mqy'],\n  'application/vnd.mobius.msl': ['msl'],\n  'application/vnd.mobius.plc': ['plc'],\n  'application/vnd.mobius.txf': ['txf'],\n  'application/vnd.mophun.application': ['mpn'],\n  'application/vnd.mophun.certificate': ['mpc'],\n  'application/vnd.mozilla.xul+xml': ['xul'],\n  'application/vnd.ms-artgalry': ['cil'],\n  'application/vnd.ms-cab-compressed': ['cab'],\n  'application/vnd.ms-excel': ['xls', 'xlm', 'xla', 'xlc', 'xlt', 'xlw'],\n  'application/vnd.ms-excel.addin.macroenabled.12': ['xlam'],\n  'application/vnd.ms-excel.sheet.binary.macroenabled.12': ['xlsb'],\n  'application/vnd.ms-excel.sheet.macroenabled.12': ['xlsm'],\n  'application/vnd.ms-excel.template.macroenabled.12': ['xltm'],\n  'application/vnd.ms-htmlhelp': ['chm'],\n  'application/vnd.ms-ims': ['ims'],\n  'application/vnd.ms-lrm': ['lrm'],\n  'application/vnd.ms-officetheme': ['thmx'],\n  'application/vnd.ms-outlook': ['msg'],\n  'application/vnd.ms-pki.seccat': ['cat'],\n  'application/vnd.ms-pki.stl': ['*stl'],\n  'application/vnd.ms-powerpoint': ['ppt', 'pps', 'pot'],\n  'application/vnd.ms-powerpoint.addin.macroenabled.12': ['ppam'],\n  'application/vnd.ms-powerpoint.presentation.macroenabled.12': ['pptm'],\n  'application/vnd.ms-powerpoint.slide.macroenabled.12': ['sldm'],\n  'application/vnd.ms-powerpoint.slideshow.macroenabled.12': ['ppsm'],\n  'application/vnd.ms-powerpoint.template.macroenabled.12': ['potm'],\n  'application/vnd.ms-project': ['mpp', 'mpt'],\n  'application/vnd.ms-word.document.macroenabled.12': ['docm'],\n  'application/vnd.ms-word.template.macroenabled.12': ['dotm'],\n  'application/vnd.ms-works': ['wps', 'wks', 'wcm', 'wdb'],\n  'application/vnd.ms-wpl': ['wpl'],\n  'application/vnd.ms-xpsdocument': ['xps'],\n  'application/vnd.mseq': ['mseq'],\n  'application/vnd.musician': ['mus'],\n  'application/vnd.muvee.style': ['msty'],\n  'application/vnd.mynfc': ['taglet'],\n  'application/vnd.neurolanguage.nlu': ['nlu'],\n  'application/vnd.nitf': ['ntf', 'nitf'],\n  'application/vnd.noblenet-directory': ['nnd'],\n  'application/vnd.noblenet-sealer': ['nns'],\n  'application/vnd.noblenet-web': ['nnw'],\n  'application/vnd.nokia.n-gage.data': ['ngdat'],\n  'application/vnd.nokia.n-gage.symbian.install': ['n-gage'],\n  'application/vnd.nokia.radio-preset': ['rpst'],\n  'application/vnd.nokia.radio-presets': ['rpss'],\n  'application/vnd.novadigm.edm': ['edm'],\n  'application/vnd.novadigm.edx': ['edx'],\n  'application/vnd.novadigm.ext': ['ext'],\n  'application/vnd.oasis.opendocument.chart': ['odc'],\n  'application/vnd.oasis.opendocument.chart-template': ['otc'],\n  'application/vnd.oasis.opendocument.database': ['odb'],\n  'application/vnd.oasis.opendocument.formula': ['odf'],\n  'application/vnd.oasis.opendocument.formula-template': ['odft'],\n  'application/vnd.oasis.opendocument.graphics': ['odg'],\n  'application/vnd.oasis.opendocument.graphics-template': ['otg'],\n  'application/vnd.oasis.opendocument.image': ['odi'],\n  'application/vnd.oasis.opendocument.image-template': ['oti'],\n  'application/vnd.oasis.opendocument.presentation': ['odp'],\n  'application/vnd.oasis.opendocument.presentation-template': ['otp'],\n  'application/vnd.oasis.opendocument.spreadsheet': ['ods'],\n  'application/vnd.oasis.opendocument.spreadsheet-template': ['ots'],\n  'application/vnd.oasis.opendocument.text': ['odt'],\n  'application/vnd.oasis.opendocument.text-master': ['odm'],\n  'application/vnd.oasis.opendocument.text-template': ['ott'],\n  'application/vnd.oasis.opendocument.text-web': ['oth'],\n  'application/vnd.olpc-sugar': ['xo'],\n  'application/vnd.oma.dd2+xml': ['dd2'],\n  'application/vnd.openofficeorg.extension': ['oxt'],\n  'application/vnd.openxmlformats-officedocument.presentationml.presentation': ['pptx'],\n  'application/vnd.openxmlformats-officedocument.presentationml.slide': ['sldx'],\n  'application/vnd.openxmlformats-officedocument.presentationml.slideshow': ['ppsx'],\n  'application/vnd.openxmlformats-officedocument.presentationml.template': ['potx'],\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': ['xlsx'],\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.template': ['xltx'],\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document': ['docx'],\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.template': ['dotx'],\n  'application/vnd.osgeo.mapguide.package': ['mgp'],\n  'application/vnd.osgi.dp': ['dp'],\n  'application/vnd.osgi.subsystem': ['esa'],\n  'application/vnd.palm': ['pdb', 'pqa', 'oprc'],\n  'application/vnd.pawaafile': ['paw'],\n  'application/vnd.pg.format': ['str'],\n  'application/vnd.pg.osasli': ['ei6'],\n  'application/vnd.picsel': ['efif'],\n  'application/vnd.pmi.widget': ['wg'],\n  'application/vnd.pocketlearn': ['plf'],\n  'application/vnd.powerbuilder6': ['pbd'],\n  'application/vnd.previewsystems.box': ['box'],\n  'application/vnd.proteus.magazine': ['mgz'],\n  'application/vnd.publishare-delta-tree': ['qps'],\n  'application/vnd.pvi.ptid1': ['ptid'],\n  'application/vnd.quark.quarkxpress': ['qxd', 'qxt', 'qwd', 'qwt', 'qxl', 'qxb'],\n  'application/vnd.realvnc.bed': ['bed'],\n  'application/vnd.recordare.musicxml': ['mxl'],\n  'application/vnd.recordare.musicxml+xml': ['musicxml'],\n  'application/vnd.rig.cryptonote': ['cryptonote'],\n  'application/vnd.rim.cod': ['cod'],\n  'application/vnd.rn-realmedia': ['rm'],\n  'application/vnd.rn-realmedia-vbr': ['rmvb'],\n  'application/vnd.route66.link66+xml': ['link66'],\n  'application/vnd.sailingtracker.track': ['st'],\n  'application/vnd.seemail': ['see'],\n  'application/vnd.sema': ['sema'],\n  'application/vnd.semd': ['semd'],\n  'application/vnd.semf': ['semf'],\n  'application/vnd.shana.informed.formdata': ['ifm'],\n  'application/vnd.shana.informed.formtemplate': ['itp'],\n  'application/vnd.shana.informed.interchange': ['iif'],\n  'application/vnd.shana.informed.package': ['ipk'],\n  'application/vnd.simtech-mindmapper': ['twd', 'twds'],\n  'application/vnd.smaf': ['mmf'],\n  'application/vnd.smart.teacher': ['teacher'],\n  'application/vnd.solent.sdkm+xml': ['sdkm', 'sdkd'],\n  'application/vnd.spotfire.dxp': ['dxp'],\n  'application/vnd.spotfire.sfs': ['sfs'],\n  'application/vnd.stardivision.calc': ['sdc'],\n  'application/vnd.stardivision.draw': ['sda'],\n  'application/vnd.stardivision.impress': ['sdd'],\n  'application/vnd.stardivision.math': ['smf'],\n  'application/vnd.stardivision.writer': ['sdw', 'vor'],\n  'application/vnd.stardivision.writer-global': ['sgl'],\n  'application/vnd.stepmania.package': ['smzip'],\n  'application/vnd.stepmania.stepchart': ['sm'],\n  'application/vnd.sun.wadl+xml': ['wadl'],\n  'application/vnd.sun.xml.calc': ['sxc'],\n  'application/vnd.sun.xml.calc.template': ['stc'],\n  'application/vnd.sun.xml.draw': ['sxd'],\n  'application/vnd.sun.xml.draw.template': ['std'],\n  'application/vnd.sun.xml.impress': ['sxi'],\n  'application/vnd.sun.xml.impress.template': ['sti'],\n  'application/vnd.sun.xml.math': ['sxm'],\n  'application/vnd.sun.xml.writer': ['sxw'],\n  'application/vnd.sun.xml.writer.global': ['sxg'],\n  'application/vnd.sun.xml.writer.template': ['stw'],\n  'application/vnd.sus-calendar': ['sus', 'susp'],\n  'application/vnd.svd': ['svd'],\n  'application/vnd.symbian.install': ['sis', 'sisx'],\n  'application/vnd.syncml+xml': ['xsm'],\n  'application/vnd.syncml.dm+wbxml': ['bdm'],\n  'application/vnd.syncml.dm+xml': ['xdm'],\n  'application/vnd.tao.intent-module-archive': ['tao'],\n  'application/vnd.tcpdump.pcap': ['pcap', 'cap', 'dmp'],\n  'application/vnd.tmobile-livetv': ['tmo'],\n  'application/vnd.trid.tpt': ['tpt'],\n  'application/vnd.triscape.mxs': ['mxs'],\n  'application/vnd.trueapp': ['tra'],\n  'application/vnd.ufdl': ['ufd', 'ufdl'],\n  'application/vnd.uiq.theme': ['utz'],\n  'application/vnd.umajin': ['umj'],\n  'application/vnd.unity': ['unityweb'],\n  'application/vnd.uoml+xml': ['uoml'],\n  'application/vnd.vcx': ['vcx'],\n  'application/vnd.visio': ['vsd', 'vst', 'vss', 'vsw'],\n  'application/vnd.visionary': ['vis'],\n  'application/vnd.vsf': ['vsf'],\n  'application/vnd.wap.wbxml': ['wbxml'],\n  'application/vnd.wap.wmlc': ['wmlc'],\n  'application/vnd.wap.wmlscriptc': ['wmlsc'],\n  'application/vnd.webturbo': ['wtb'],\n  'application/vnd.wolfram.player': ['nbp'],\n  'application/vnd.wordperfect': ['wpd'],\n  'application/vnd.wqd': ['wqd'],\n  'application/vnd.wt.stf': ['stf'],\n  'application/vnd.xara': ['xar'],\n  'application/vnd.xfdl': ['xfdl'],\n  'application/vnd.yamaha.hv-dic': ['hvd'],\n  'application/vnd.yamaha.hv-script': ['hvs'],\n  'application/vnd.yamaha.hv-voice': ['hvp'],\n  'application/vnd.yamaha.openscoreformat': ['osf'],\n  'application/vnd.yamaha.openscoreformat.osfpvg+xml': ['osfpvg'],\n  'application/vnd.yamaha.smaf-audio': ['saf'],\n  'application/vnd.yamaha.smaf-phrase': ['spf'],\n  'application/vnd.yellowriver-custom-menu': ['cmp'],\n  'application/vnd.zul': ['zir', 'zirz'],\n  'application/vnd.zzazz.deck+xml': ['zaz'],\n  'application/x-7z-compressed': ['7z'],\n  'application/x-abiword': ['abw'],\n  'application/x-ace-compressed': ['ace'],\n  'application/x-apple-diskimage': ['*dmg'],\n  'application/x-arj': ['arj'],\n  'application/x-authorware-bin': ['aab', 'x32', 'u32', 'vox'],\n  'application/x-authorware-map': ['aam'],\n  'application/x-authorware-seg': ['aas'],\n  'application/x-bcpio': ['bcpio'],\n  'application/x-bdoc': ['*bdoc'],\n  'application/x-bittorrent': ['torrent'],\n  'application/x-blorb': ['blb', 'blorb'],\n  'application/x-bzip': ['bz'],\n  'application/x-bzip2': ['bz2', 'boz'],\n  'application/x-cbr': ['cbr', 'cba', 'cbt', 'cbz', 'cb7'],\n  'application/x-cdlink': ['vcd'],\n  'application/x-cfs-compressed': ['cfs'],\n  'application/x-chat': ['chat'],\n  'application/x-chess-pgn': ['pgn'],\n  'application/x-chrome-extension': ['crx'],\n  'application/x-cocoa': ['cco'],\n  'application/x-conference': ['nsc'],\n  'application/x-cpio': ['cpio'],\n  'application/x-csh': ['csh'],\n  'application/x-debian-package': ['*deb', 'udeb'],\n  'application/x-dgc-compressed': ['dgc'],\n  'application/x-director': ['dir', 'dcr', 'dxr', 'cst', 'cct', 'cxt', 'w3d', 'fgd', 'swa'],\n  'application/x-doom': ['wad'],\n  'application/x-dtbncx+xml': ['ncx'],\n  'application/x-dtbook+xml': ['dtb'],\n  'application/x-dtbresource+xml': ['res'],\n  'application/x-dvi': ['dvi'],\n  'application/x-envoy': ['evy'],\n  'application/x-eva': ['eva'],\n  'application/x-font-bdf': ['bdf'],\n  'application/x-font-ghostscript': ['gsf'],\n  'application/x-font-linux-psf': ['psf'],\n  'application/x-font-pcf': ['pcf'],\n  'application/x-font-snf': ['snf'],\n  'application/x-font-type1': ['pfa', 'pfb', 'pfm', 'afm'],\n  'application/x-freearc': ['arc'],\n  'application/x-futuresplash': ['spl'],\n  'application/x-gca-compressed': ['gca'],\n  'application/x-glulx': ['ulx'],\n  'application/x-gnumeric': ['gnumeric'],\n  'application/x-gramps-xml': ['gramps'],\n  'application/x-gtar': ['gtar'],\n  'application/x-hdf': ['hdf'],\n  'application/x-httpd-php': ['php'],\n  'application/x-install-instructions': ['install'],\n  'application/x-iso9660-image': ['*iso'],\n  'application/x-java-archive-diff': ['jardiff'],\n  'application/x-java-jnlp-file': ['jnlp'],\n  'application/x-latex': ['latex'],\n  'application/x-lua-bytecode': ['luac'],\n  'application/x-lzh-compressed': ['lzh', 'lha'],\n  'application/x-makeself': ['run'],\n  'application/x-mie': ['mie'],\n  'application/x-mobipocket-ebook': ['prc', 'mobi'],\n  'application/x-ms-application': ['application'],\n  'application/x-ms-shortcut': ['lnk'],\n  'application/x-ms-wmd': ['wmd'],\n  'application/x-ms-wmz': ['wmz'],\n  'application/x-ms-xbap': ['xbap'],\n  'application/x-msaccess': ['mdb'],\n  'application/x-msbinder': ['obd'],\n  'application/x-mscardfile': ['crd'],\n  'application/x-msclip': ['clp'],\n  'application/x-msdos-program': ['*exe'],\n  'application/x-msdownload': ['*exe', '*dll', 'com', 'bat', '*msi'],\n  'application/x-msmediaview': ['mvb', 'm13', 'm14'],\n  'application/x-msmetafile': ['*wmf', '*wmz', '*emf', 'emz'],\n  'application/x-msmoney': ['mny'],\n  'application/x-mspublisher': ['pub'],\n  'application/x-msschedule': ['scd'],\n  'application/x-msterminal': ['trm'],\n  'application/x-mswrite': ['wri'],\n  'application/x-netcdf': ['nc', 'cdf'],\n  'application/x-ns-proxy-autoconfig': ['pac'],\n  'application/x-nzb': ['nzb'],\n  'application/x-perl': ['pl', 'pm'],\n  'application/x-pilot': ['*prc', '*pdb'],\n  'application/x-pkcs12': ['p12', 'pfx'],\n  'application/x-pkcs7-certificates': ['p7b', 'spc'],\n  'application/x-pkcs7-certreqresp': ['p7r'],\n  'application/x-rar-compressed': ['rar'],\n  'application/x-redhat-package-manager': ['rpm'],\n  'application/x-research-info-systems': ['ris'],\n  'application/x-sea': ['sea'],\n  'application/x-sh': ['sh'],\n  'application/x-shar': ['shar'],\n  'application/x-shockwave-flash': ['swf'],\n  'application/x-silverlight-app': ['xap'],\n  'application/x-sql': ['sql'],\n  'application/x-stuffit': ['sit'],\n  'application/x-stuffitx': ['sitx'],\n  'application/x-subrip': ['srt'],\n  'application/x-sv4cpio': ['sv4cpio'],\n  'application/x-sv4crc': ['sv4crc'],\n  'application/x-t3vm-image': ['t3'],\n  'application/x-tads': ['gam'],\n  'application/x-tar': ['tar'],\n  'application/x-tcl': ['tcl', 'tk'],\n  'application/x-tex': ['tex'],\n  'application/x-tex-tfm': ['tfm'],\n  'application/x-texinfo': ['texinfo', 'texi'],\n  'application/x-tgif': ['obj'],\n  'application/x-ustar': ['ustar'],\n  'application/x-virtualbox-hdd': ['hdd'],\n  'application/x-virtualbox-ova': ['ova'],\n  'application/x-virtualbox-ovf': ['ovf'],\n  'application/x-virtualbox-vbox': ['vbox'],\n  'application/x-virtualbox-vbox-extpack': ['vbox-extpack'],\n  'application/x-virtualbox-vdi': ['vdi'],\n  'application/x-virtualbox-vhd': ['vhd'],\n  'application/x-virtualbox-vmdk': ['vmdk'],\n  'application/x-wais-source': ['src'],\n  'application/x-web-app-manifest+json': ['webapp'],\n  'application/x-x509-ca-cert': ['der', 'crt', 'pem'],\n  'application/x-xfig': ['fig'],\n  'application/x-xliff+xml': ['xlf'],\n  'application/x-xpinstall': ['xpi'],\n  'application/x-xz': ['xz'],\n  'application/x-zmachine': ['z1', 'z2', 'z3', 'z4', 'z5', 'z6', 'z7', 'z8'],\n  'audio/vnd.dece.audio': ['uva', 'uvva'],\n  'audio/vnd.digital-winds': ['eol'],\n  'audio/vnd.dra': ['dra'],\n  'audio/vnd.dts': ['dts'],\n  'audio/vnd.dts.hd': ['dtshd'],\n  'audio/vnd.lucent.voice': ['lvp'],\n  'audio/vnd.ms-playready.media.pya': ['pya'],\n  'audio/vnd.nuera.ecelp4800': ['ecelp4800'],\n  'audio/vnd.nuera.ecelp7470': ['ecelp7470'],\n  'audio/vnd.nuera.ecelp9600': ['ecelp9600'],\n  'audio/vnd.rip': ['rip'],\n  'audio/x-aac': ['aac'],\n  'audio/x-aiff': ['aif', 'aiff', 'aifc'],\n  'audio/x-caf': ['caf'],\n  'audio/x-flac': ['flac'],\n  'audio/x-m4a': ['*m4a'],\n  'audio/x-matroska': ['mka'],\n  'audio/x-mpegurl': ['m3u'],\n  'audio/x-ms-wax': ['wax'],\n  'audio/x-ms-wma': ['wma'],\n  'audio/x-pn-realaudio': ['ram', 'ra'],\n  'audio/x-pn-realaudio-plugin': ['rmp'],\n  'audio/x-realaudio': ['*ra'],\n  'audio/x-wav': ['*wav'],\n  'chemical/x-cdx': ['cdx'],\n  'chemical/x-cif': ['cif'],\n  'chemical/x-cmdf': ['cmdf'],\n  'chemical/x-cml': ['cml'],\n  'chemical/x-csml': ['csml'],\n  'chemical/x-xyz': ['xyz'],\n  'image/prs.btif': ['btif'],\n  'image/prs.pti': ['pti'],\n  'image/vnd.adobe.photoshop': ['psd'],\n  'image/vnd.airzip.accelerator.azv': ['azv'],\n  'image/vnd.dece.graphic': ['uvi', 'uvvi', 'uvg', 'uvvg'],\n  'image/vnd.djvu': ['djvu', 'djv'],\n  'image/vnd.dvb.subtitle': ['*sub'],\n  'image/vnd.dwg': ['dwg'],\n  'image/vnd.dxf': ['dxf'],\n  'image/vnd.fastbidsheet': ['fbs'],\n  'image/vnd.fpx': ['fpx'],\n  'image/vnd.fst': ['fst'],\n  'image/vnd.fujixerox.edmics-mmr': ['mmr'],\n  'image/vnd.fujixerox.edmics-rlc': ['rlc'],\n  'image/vnd.microsoft.icon': ['ico'],\n  'image/vnd.ms-modi': ['mdi'],\n  'image/vnd.ms-photo': ['wdp'],\n  'image/vnd.net-fpx': ['npx'],\n  'image/vnd.tencent.tap': ['tap'],\n  'image/vnd.valve.source.texture': ['vtf'],\n  'image/vnd.wap.wbmp': ['wbmp'],\n  'image/vnd.xiff': ['xif'],\n  'image/vnd.zbrush.pcx': ['pcx'],\n  'image/x-3ds': ['3ds'],\n  'image/x-cmu-raster': ['ras'],\n  'image/x-cmx': ['cmx'],\n  'image/x-freehand': ['fh', 'fhc', 'fh4', 'fh5', 'fh7'],\n  'image/x-icon': ['*ico'],\n  'image/x-jng': ['jng'],\n  'image/x-mrsid-image': ['sid'],\n  'image/x-ms-bmp': ['*bmp'],\n  'image/x-pcx': ['*pcx'],\n  'image/x-pict': ['pic', 'pct'],\n  'image/x-portable-anymap': ['pnm'],\n  'image/x-portable-bitmap': ['pbm'],\n  'image/x-portable-graymap': ['pgm'],\n  'image/x-portable-pixmap': ['ppm'],\n  'image/x-rgb': ['rgb'],\n  'image/x-tga': ['tga'],\n  'image/x-xbitmap': ['xbm'],\n  'image/x-xpixmap': ['xpm'],\n  'image/x-xwindowdump': ['xwd'],\n  'message/vnd.wfa.wsc': ['wsc'],\n  'model/vnd.collada+xml': ['dae'],\n  'model/vnd.dwf': ['dwf'],\n  'model/vnd.gdl': ['gdl'],\n  'model/vnd.gtw': ['gtw'],\n  'model/vnd.mts': ['mts'],\n  'model/vnd.opengex': ['ogex'],\n  'model/vnd.parasolid.transmit.binary': ['x_b'],\n  'model/vnd.parasolid.transmit.text': ['x_t'],\n  'model/vnd.usdz+zip': ['usdz'],\n  'model/vnd.valve.source.compiled-map': ['bsp'],\n  'model/vnd.vtu': ['vtu'],\n  'text/prs.lines.tag': ['dsc'],\n  'text/vnd.curl': ['curl'],\n  'text/vnd.curl.dcurl': ['dcurl'],\n  'text/vnd.curl.mcurl': ['mcurl'],\n  'text/vnd.curl.scurl': ['scurl'],\n  'text/vnd.dvb.subtitle': ['sub'],\n  'text/vnd.fly': ['fly'],\n  'text/vnd.fmi.flexstor': ['flx'],\n  'text/vnd.graphviz': ['gv'],\n  'text/vnd.in3d.3dml': ['3dml'],\n  'text/vnd.in3d.spot': ['spot'],\n  'text/vnd.sun.j2me.app-descriptor': ['jad'],\n  'text/vnd.wap.wml': ['wml'],\n  'text/vnd.wap.wmlscript': ['wmls'],\n  'text/x-asm': ['s', 'asm'],\n  'text/x-c': ['c', 'cc', 'cxx', 'cpp', 'h', 'hh', 'dic'],\n  'text/x-component': ['htc'],\n  'text/x-fortran': ['f', 'for', 'f77', 'f90'],\n  'text/x-handlebars-template': ['hbs'],\n  'text/x-java-source': ['java'],\n  'text/x-lua': ['lua'],\n  'text/x-markdown': ['mkd'],\n  'text/x-nfo': ['nfo'],\n  'text/x-opml': ['opml'],\n  'text/x-org': ['*org'],\n  'text/x-pascal': ['p', 'pas'],\n  'text/x-processing': ['pde'],\n  'text/x-sass': ['sass'],\n  'text/x-scss': ['scss'],\n  'text/x-setext': ['etx'],\n  'text/x-sfv': ['sfv'],\n  'text/x-suse-ymp': ['ymp'],\n  'text/x-uuencode': ['uu'],\n  'text/x-vcalendar': ['vcs'],\n  'text/x-vcard': ['vcf'],\n  'video/vnd.dece.hd': ['uvh', 'uvvh'],\n  'video/vnd.dece.mobile': ['uvm', 'uvvm'],\n  'video/vnd.dece.pd': ['uvp', 'uvvp'],\n  'video/vnd.dece.sd': ['uvs', 'uvvs'],\n  'video/vnd.dece.video': ['uvv', 'uvvv'],\n  'video/vnd.dvb.file': ['dvb'],\n  'video/vnd.fvt': ['fvt'],\n  'video/vnd.mpegurl': ['mxu', 'm4u'],\n  'video/vnd.ms-playready.media.pyv': ['pyv'],\n  'video/vnd.uvvu.mp4': ['uvu', 'uvvu'],\n  'video/vnd.vivo': ['viv'],\n  'video/x-f4v': ['f4v'],\n  'video/x-fli': ['fli'],\n  'video/x-flv': ['flv'],\n  'video/x-m4v': ['m4v'],\n  'video/x-matroska': ['mkv', 'mk3d', 'mks'],\n  'video/x-mng': ['mng'],\n  'video/x-ms-asf': ['asf', 'asx'],\n  'video/x-ms-vob': ['vob'],\n  'video/x-ms-wm': ['wm'],\n  'video/x-ms-wmv': ['wmv'],\n  'video/x-ms-wmx': ['wmx'],\n  'video/x-ms-wvx': ['wvx'],\n  'video/x-msvideo': ['avi'],\n  'video/x-sgi-movie': ['movie'],\n  'video/x-smv': ['smv'],\n  'x-conference/x-cooltalk': ['ice'],\n  'application/x-msi': 'msi',\n  'application/x-ms': 'ms',\n  'application/vnd.geo+json': 'geojson',\n  'application/vnd.debian.binary-package': 'deb',\n  'application/font-woff': 'woff',\n  'application/font-woff2': 'woff2',\n  'application/x-font-ttf': ['ttc', 'ttf'],\n  'font/opentype': 'otf',\n  'application/x-bb-appworld': 'bbaw',\n  'application/x-cd-image': 'iso',\n  'application/x-opera-extension': 'oex',\n  'application/x-ms-dos-executable': 'exe',\n  'text/vnd.rim.location.xloc': 'xloc',\n  'application/x-desktop': 'desktop',\n  'application/x-typescript': 'ts',\n  'application/x-java-archive': 'jar',\n  'application/x-sharedlib': 'so',\n};\n","/*\n * Copyright (c) 2019 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as SparkMD5 from 'spark-md5';\nvar mobileRegexp = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series[46]0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;\n/**\n * Calculates a MD5 checksum for passed buffer\n * @private\n * @param data  Data to be hashed\n * @returns     base64 encoded MD5 hash\n */\nexport var md5 = function (data) {\n    /* istanbul ignore next */\n    return btoa(SparkMD5.ArrayBuffer.hash(data, true));\n};\n/**\n * return based string\n *\n * @param data\n */\nexport var b64 = function (data, safeUrl) {\n    if (safeUrl === void 0) { safeUrl = false; }\n    var b64 = btoa(data);\n    if (safeUrl) {\n        return b64.replace(/\\//g, '_').replace(/\\+/g, '-');\n    }\n    return b64;\n};\n/**\n * Return currently used filestack-js sdk version\n */\nexport var getVersion = function () {\n    return 'JS-3.27.0';\n};\n/**\n * Returns if browser is a mobile device (if node env always return false)\n */\n/* istanbul ignore next */\nexport var isMobile = function () { return navigator && navigator.userAgent && mobileRegexp.test(navigator.userAgent); };\n/**\n * Check if application is runned in facebook browser\n */\nexport var isFacebook = function () { return navigator && navigator.userAgent && /\\[FB.*;/i.test(navigator.userAgent); };\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvdXRpbHMvaW5kZXguYnJvd3Nlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFDSCxPQUFPLEtBQUssUUFBUSxNQUFNLFdBQVcsQ0FBQztBQUV0QyxJQUFNLFlBQVksR0FBRyw0VkFBNFYsQ0FBQztBQUVsWDs7Ozs7R0FLRztBQUNILE1BQU0sQ0FBQyxJQUFNLEdBQUcsR0FBRyxVQUFDLElBQVM7SUFDM0IsMEJBQTBCO0lBQzFCLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ3JELENBQUMsQ0FBQztBQUVGOzs7O0dBSUc7QUFDSCxNQUFNLENBQUMsSUFBTSxHQUFHLEdBQUcsVUFBQyxJQUFZLEVBQUUsT0FBd0I7SUFBeEIsd0JBQUEsRUFBQSxlQUF3QjtJQUN4RCxJQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFFdkIsSUFBSSxPQUFPLEVBQUU7UUFDWCxPQUFPLEdBQUcsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUM7S0FDcEQ7SUFFRCxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUMsQ0FBQztBQUVGOztHQUVHO0FBQ0gsTUFBTSxDQUFDLElBQU0sVUFBVSxHQUFHO0lBQ3hCLE9BQU8sZUFBZSxDQUFDO0FBQ3pCLENBQUMsQ0FBQztBQUVGOztHQUVHO0FBQ0gsMEJBQTBCO0FBQzFCLE1BQU0sQ0FBQyxJQUFNLFFBQVEsR0FBRyxjQUFNLE9BQUEsU0FBUyxJQUFJLFNBQVMsQ0FBQyxTQUFTLElBQUksWUFBWSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLEVBQTFFLENBQTBFLENBQUM7QUFFekc7O0dBRUc7QUFDSCxNQUFNLENBQUMsSUFBTSxVQUFVLEdBQUcsY0FBTSxPQUFBLFNBQVMsSUFBSSxTQUFTLENBQUMsU0FBUyxJQUFJLFVBQVUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxFQUF4RSxDQUF3RSxDQUFDIiwiZmlsZSI6ImxpYi91dGlscy9pbmRleC5icm93c2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAoYykgMjAxOSBieSBGaWxlc3RhY2suXG4gKiBTb21lIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCAqIGFzIFNwYXJrTUQ1IGZyb20gJ3NwYXJrLW1kNSc7XG5cbmNvbnN0IG1vYmlsZVJlZ2V4cCA9IC8oYW5kcm9pZHxiYlxcZCt8bWVlZ28pLittb2JpbGV8YXZhbnRnb3xiYWRhXFwvfGJsYWNrYmVycnl8YmxhemVyfGNvbXBhbHxlbGFpbmV8ZmVubmVjfGhpcHRvcHxpZW1vYmlsZXxpcChob25lfG9kKXxpcmlzfGtpbmRsZXxsZ2UgfG1hZW1vfG1pZHB8bW1wfG1vYmlsZS4rZmlyZWZveHxuZXRmcm9udHxvcGVyYSBtKG9ifGluKWl8cGFsbSggb3MpP3xwaG9uZXxwKGl4aXxyZSlcXC98cGx1Y2tlcnxwb2NrZXR8cHNwfHNlcmllc1s0Nl0wfHN5bWJpYW58dHJlb3x1cFxcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIChjZXxwaG9uZSl8eGRhfHhpaW5vfGFuZHJvaWR8aXBhZHxwbGF5Ym9va3xzaWxrL2k7XG5cbi8qKlxuICogQ2FsY3VsYXRlcyBhIE1ENSBjaGVja3N1bSBmb3IgcGFzc2VkIGJ1ZmZlclxuICogQHByaXZhdGVcbiAqIEBwYXJhbSBkYXRhICBEYXRhIHRvIGJlIGhhc2hlZFxuICogQHJldHVybnMgICAgIGJhc2U2NCBlbmNvZGVkIE1ENSBoYXNoXG4gKi9cbmV4cG9ydCBjb25zdCBtZDUgPSAoZGF0YTogYW55KTogc3RyaW5nID0+IHtcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgcmV0dXJuIGJ0b2EoU3BhcmtNRDUuQXJyYXlCdWZmZXIuaGFzaChkYXRhLCB0cnVlKSk7XG59O1xuXG4vKipcbiAqIHJldHVybiBiYXNlZCBzdHJpbmdcbiAqXG4gKiBAcGFyYW0gZGF0YVxuICovXG5leHBvcnQgY29uc3QgYjY0ID0gKGRhdGE6IHN0cmluZywgc2FmZVVybDogYm9vbGVhbiA9IGZhbHNlKTogc3RyaW5nID0+IHtcbiAgY29uc3QgYjY0ID0gYnRvYShkYXRhKTtcblxuICBpZiAoc2FmZVVybCkge1xuICAgIHJldHVybiBiNjQucmVwbGFjZSgvXFwvL2csICdfJykucmVwbGFjZSgvXFwrL2csICctJyk7XG4gIH1cblxuICByZXR1cm4gYjY0O1xufTtcblxuLyoqXG4gKiBSZXR1cm4gY3VycmVudGx5IHVzZWQgZmlsZXN0YWNrLWpzIHNkayB2ZXJzaW9uXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRWZXJzaW9uID0gKCkgPT4ge1xuICByZXR1cm4gJ0pTLUB7VkVSU0lPTn0nO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGlmIGJyb3dzZXIgaXMgYSBtb2JpbGUgZGV2aWNlIChpZiBub2RlIGVudiBhbHdheXMgcmV0dXJuIGZhbHNlKVxuICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IGNvbnN0IGlzTW9iaWxlID0gKCkgPT4gbmF2aWdhdG9yICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbW9iaWxlUmVnZXhwLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5cbi8qKlxuICogQ2hlY2sgaWYgYXBwbGljYXRpb24gaXMgcnVubmVkIGluIGZhY2Vib29rIGJyb3dzZXJcbiAqL1xuZXhwb3J0IGNvbnN0IGlzRmFjZWJvb2sgPSAoKSA9PiBuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiAvXFxbRkIuKjsvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuIl19\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { FsRequestOptions, FsResponse } from './types';\n\n/**\n * Filestack error codes (common for browser and node)\n *\n * @export\n * @enum {number}\n */\nexport enum FsRequestErrorCode {\n  ABORTED = 'ABORTED',\n  NETWORK = 'NETWORK',\n  TIMEOUT = 'TIMEDOUT',\n  SERVER = 'SERVER',\n  REQUEST = 'REQUEST',\n  OTHER = 'OTHER',\n  REDIRECT = 'REDIRECT',\n}\n\n/**\n * Custom Filestack Request error class\n *\n * @export\n * @class FsRequestError\n * @extends {Error}\n */\nexport class FsRequestError extends Error {\n  /**\n   * Error details, ie validation errors\n   *\n   * @type {*}\n   * @memberof FilestackError\n   */\n  public readonly config: FsRequestOptions;\n  public readonly response: FsResponse;\n  public readonly code: FsRequestErrorCode;\n\n  /**\n   * Creates an instance of FsRequestError.\n   *\n   * @param {string} message\n   * @param {*} config\n   * @param {FsResponse} [response]\n   * @param {FsRequestErrorCode} [code]\n   * @memberof FsRequestError\n   */\n  constructor(message: string, config: any, response?: FsResponse, code?: FsRequestErrorCode) {\n    /* istanbul ignore next */\n    super(message);\n\n    this.config = config;\n    this.response = response;\n    this.code = code;\n\n    // const captureStackTrace: Function = (Error as any).captureStackTrace;\n    // captureStackTrace && captureStackTrace(this);\n    fixProto(this, new.target.prototype);\n  }\n}\n\nfunction fixProto(target: Error, prototype: {}) {\n  const setPrototypeOf: Function = (Object as any).setPrototypeOf;\n  /* istanbul ignore next */\n  setPrototypeOf ? setPrototypeOf(target, prototype) : ((target as any).__proto__ = prototype);\n}\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\nfunction log(...args) {\n\t// This hackery is required for IE8/9, where\n\t// the `console.log` function doesn't have 'apply'\n\treturn typeof console === 'object' &&\n\t\tconsole.log &&\n\t\tconsole.log(...args);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n\nimport { Primitive } from '@sentry/types';\n/**\n * Checks whether given value's type is one of a few Error or Error-like\n * {@link isError}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nexport function isError(wat: any): boolean {\n  switch (Object.prototype.toString.call(wat)) {\n    case '[object Error]':\n      return true;\n    case '[object Exception]':\n      return true;\n    case '[object DOMException]':\n      return true;\n    default:\n      return isInstanceOf(wat, Error);\n  }\n}\n\n/**\n * Checks whether given value's type is ErrorEvent\n * {@link isErrorEvent}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nexport function isErrorEvent(wat: any): boolean {\n  return Object.prototype.toString.call(wat) === '[object ErrorEvent]';\n}\n\n/**\n * Checks whether given value's type is DOMError\n * {@link isDOMError}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nexport function isDOMError(wat: any): boolean {\n  return Object.prototype.toString.call(wat) === '[object DOMError]';\n}\n\n/**\n * Checks whether given value's type is DOMException\n * {@link isDOMException}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nexport function isDOMException(wat: any): boolean {\n  return Object.prototype.toString.call(wat) === '[object DOMException]';\n}\n\n/**\n * Checks whether given value's type is a string\n * {@link isString}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nexport function isString(wat: any): boolean {\n  return Object.prototype.toString.call(wat) === '[object String]';\n}\n\n/**\n * Checks whether given value's is a primitive (undefined, null, number, boolean, string, bigint, symbol)\n * {@link isPrimitive}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nexport function isPrimitive(wat: any): wat is Primitive {\n  return wat === null || (typeof wat !== 'object' && typeof wat !== 'function');\n}\n\n/**\n * Checks whether given value's type is an object literal\n * {@link isPlainObject}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nexport function isPlainObject(wat: any): boolean {\n  return Object.prototype.toString.call(wat) === '[object Object]';\n}\n\n/**\n * Checks whether given value's type is an Event instance\n * {@link isEvent}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nexport function isEvent(wat: any): boolean {\n  return typeof Event !== 'undefined' && isInstanceOf(wat, Event);\n}\n\n/**\n * Checks whether given value's type is an Element instance\n * {@link isElement}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nexport function isElement(wat: any): boolean {\n  return typeof Element !== 'undefined' && isInstanceOf(wat, Element);\n}\n\n/**\n * Checks whether given value's type is an regexp\n * {@link isRegExp}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nexport function isRegExp(wat: any): boolean {\n  return Object.prototype.toString.call(wat) === '[object RegExp]';\n}\n\n/**\n * Checks whether given value has a then function.\n * @param wat A value to be checked.\n */\nexport function isThenable(wat: any): boolean {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  return Boolean(wat && wat.then && typeof wat.then === 'function');\n}\n\n/**\n * Checks whether given value's type is a SyntheticEvent\n * {@link isSyntheticEvent}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nexport function isSyntheticEvent(wat: any): boolean {\n  return isPlainObject(wat) && 'nativeEvent' in wat && 'preventDefault' in wat && 'stopPropagation' in wat;\n}\n/**\n * Checks whether given value's type is an instance of provided constructor.\n * {@link isInstanceOf}.\n *\n * @param wat A value to be checked.\n * @param base A constructor to be used in a check.\n * @returns A boolean representing the result.\n */\nexport function isInstanceOf(wat: any, base: any): boolean {\n  try {\n    return wat instanceof base;\n  } catch (_e) {\n    return false;\n  }\n}\n","/*\n * Copyright (c) 2018 by Filestack\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nexport var isBuffer = function () { return false; };\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nexport var isStream = function () { return false; };\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvcmVxdWVzdC91dGlscy5icm93c2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVIOzs7OztHQUtHO0FBQ0gsTUFBTSxDQUFDLElBQU0sUUFBUSxHQUFHLGNBQU0sT0FBQSxLQUFLLEVBQUwsQ0FBSyxDQUFDO0FBRXBDOzs7OztHQUtHO0FBQ0gsTUFBTSxDQUFDLElBQU0sUUFBUSxHQUFHLGNBQU0sT0FBQSxLQUFLLEVBQUwsQ0FBSyxDQUFDIiwiZmlsZSI6ImxpYi9yZXF1ZXN0L3V0aWxzLmJyb3dzZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IGJ5IEZpbGVzdGFja1xuICogU29tZSByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBCdWZmZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmV4cG9ydCBjb25zdCBpc0J1ZmZlciA9ICgpID0+IGZhbHNlO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyZWFtXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJlYW0sIG90aGVyd2lzZSBmYWxzZVxuICovXG5leHBvcnQgY29uc3QgaXNTdHJlYW0gPSAoKSA9PiBmYWxzZTtcbiJdfQ==\n","/*\n * Copyright (c) 2018 by Filestack\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nexport const isArray = (val: any[]) => Object.prototype.toString.call(val) === '[object Array]';\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nexport const isArrayBuffer = (val: ArrayBuffer) => Object.prototype.toString.call(val) === '[object ArrayBuffer]';\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nexport const isArrayBufferView = (val: ArrayBufferView) => {\n  let result;\n  if (typeof ArrayBuffer !== 'undefined' && ArrayBuffer.isView) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = val && val.buffer && val.buffer instanceof ArrayBuffer;\n  }\n\n  return result;\n};\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nexport const isObject = (val: any) => val !== null && typeof val === 'object';\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nexport const isString = (val: any) => typeof val === 'string' || val instanceof String;\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nexport const isFile = (val: File) => Object.prototype.toString.call(val) === '[object File]';\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nexport const isBlob = (val: Blob) => Object.prototype.toString.call(val) === '[object Blob]';\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nexport const isURLSearchParams = (val: URLSearchParams) => typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n\n/**\n * Determine if value is form data\n *\n * @param val\n */\nexport const isFormData = val => typeof FormData !== 'undefined' && val instanceof FormData;\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nexport const trim = str => str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n\nexport * from './utils.node';\n","/*\n * Copyright (c) 2018 by Filestack\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { FsCancelToken } from './token';\n\nexport enum FsHttpMethod {\n  GET = 'GET',\n  DELETE = 'DELETE',\n  HEAD = 'HEAD',\n  PURGE = 'PURGE',\n  OPTIONS = 'OPTIONS',\n  POST = 'POST',\n  PUT = 'PUT',\n  PATH = 'PATH',\n}\n\nexport interface FsRetryConfig {\n  retry: number;\n  onRetry?: (requestConfig: any) => void;\n  retryMaxTime?: number;\n  retryFactor?: number;\n}\n\nexport interface FsAuthConfig {\n  username: string;\n  password: string;\n}\n\nexport interface FsRequestHeaders {\n  [name: string]: string;\n}\n\nexport interface FsRequestParams {\n  [name: string]: string | number;\n}\n\n/**\n * Request runtime data like retryCount etc\n */\nexport interface FsRequestRuntime {\n  retryCount?: number;\n  [name: string]: any;\n}\n\nexport interface FsRequestOptions {\n  url?: string;\n  data?: any;\n  method?: FsHttpMethod;\n  mode?: RequestMode;\n  cache?: RequestCache;\n  redirect?: RequestRedirect;\n  params?: FsRequestParams;\n  filestackHeaders?: boolean;\n  headers?: FsRequestHeaders;\n  blobResponse?: boolean; // blob response only for browsers\n  timeout?: number;\n  cancelToken?: FsCancelToken;\n  retry?: FsRetryConfig;\n  onProgress?: (pr: ProgressEvent) => any;\n  auth?: FsAuthConfig;\n  runtime?: FsRequestRuntime;\n}\n\nexport interface FsResponse {\n  status: number;\n  statusText: string;\n  headers: any;\n  data: any;\n  config: FsRequestOptions;\n}\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Event, Integration, StackFrame, WrappedFunction } from '@sentry/types';\n\nimport { isNodeEnv } from './node';\nimport { snipLine } from './string';\n\n/** Internal */\ninterface SentryGlobal {\n  Sentry?: {\n    Integrations?: Integration[];\n  };\n  SENTRY_ENVIRONMENT?: string;\n  SENTRY_DSN?: string;\n  SENTRY_RELEASE?: {\n    id?: string;\n  };\n  __SENTRY__: {\n    globalEventProcessors: any;\n    hub: any;\n    logger: any;\n  };\n}\n\nconst fallbackGlobalObject = {};\n\n/**\n * Safely get global scope object\n *\n * @returns Global scope object\n */\nexport function getGlobalObject<T>(): T & SentryGlobal {\n  return (isNodeEnv()\n    ? global\n    : typeof window !== 'undefined'\n    ? window\n    : typeof self !== 'undefined'\n    ? self\n    : fallbackGlobalObject) as T & SentryGlobal;\n}\n\n/**\n * Extended Window interface that allows for Crypto API usage in IE browsers\n */\ninterface MsCryptoWindow extends Window {\n  msCrypto?: Crypto;\n}\n\n/**\n * UUID4 generator\n *\n * @returns string Generated UUID4.\n */\nexport function uuid4(): string {\n  const global = getGlobalObject() as MsCryptoWindow;\n  const crypto = global.crypto || global.msCrypto;\n\n  if (!(crypto === void 0) && crypto.getRandomValues) {\n    // Use window.crypto API if available\n    const arr = new Uint16Array(8);\n    crypto.getRandomValues(arr);\n\n    // set 4 in byte 7\n    // eslint-disable-next-line no-bitwise\n    arr[3] = (arr[3] & 0xfff) | 0x4000;\n    // set 2 most significant bits of byte 9 to '10'\n    // eslint-disable-next-line no-bitwise\n    arr[4] = (arr[4] & 0x3fff) | 0x8000;\n\n    const pad = (num: number): string => {\n      let v = num.toString(16);\n      while (v.length < 4) {\n        v = `0${v}`;\n      }\n      return v;\n    };\n\n    return (\n      pad(arr[0]) + pad(arr[1]) + pad(arr[2]) + pad(arr[3]) + pad(arr[4]) + pad(arr[5]) + pad(arr[6]) + pad(arr[7])\n    );\n  }\n  // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/2117523#2117523\n  return 'xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    // eslint-disable-next-line no-bitwise\n    const r = (Math.random() * 16) | 0;\n    // eslint-disable-next-line no-bitwise\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\n/**\n * Parses string form of URL into an object\n * // borrowed from https://tools.ietf.org/html/rfc3986#appendix-B\n * // intentionally using regex and not <a/> href parsing trick because React Native and other\n * // environments where DOM might not be available\n * @returns parsed URL object\n */\nexport function parseUrl(\n  url: string,\n): {\n  host?: string;\n  path?: string;\n  protocol?: string;\n  relative?: string;\n} {\n  if (!url) {\n    return {};\n  }\n\n  const match = url.match(/^(([^:/?#]+):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$/);\n\n  if (!match) {\n    return {};\n  }\n\n  // coerce to undefined values to empty string so we don't get 'undefined'\n  const query = match[6] || '';\n  const fragment = match[8] || '';\n  return {\n    host: match[4],\n    path: match[5],\n    protocol: match[2],\n    relative: match[5] + query + fragment, // everything minus origin\n  };\n}\n\n/**\n * Extracts either message or type+value from an event that can be used for user-facing logs\n * @returns event's description\n */\nexport function getEventDescription(event: Event): string {\n  if (event.message) {\n    return event.message;\n  }\n  if (event.exception && event.exception.values && event.exception.values[0]) {\n    const exception = event.exception.values[0];\n\n    if (exception.type && exception.value) {\n      return `${exception.type}: ${exception.value}`;\n    }\n    return exception.type || exception.value || event.event_id || '<unknown>';\n  }\n  return event.event_id || '<unknown>';\n}\n\n/** JSDoc */\ninterface ExtensibleConsole extends Console {\n  [key: string]: any;\n}\n\n/** JSDoc */\nexport function consoleSandbox(callback: () => any): any {\n  const global = getGlobalObject<Window>();\n  const levels = ['debug', 'info', 'warn', 'error', 'log', 'assert'];\n\n  if (!('console' in global)) {\n    return callback();\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  const originalConsole = (global as any).console as ExtensibleConsole;\n  const wrappedLevels: { [key: string]: any } = {};\n\n  // Restore all wrapped console methods\n  levels.forEach(level => {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    if (level in (global as any).console && (originalConsole[level] as WrappedFunction).__sentry_original__) {\n      wrappedLevels[level] = originalConsole[level] as WrappedFunction;\n      originalConsole[level] = (originalConsole[level] as WrappedFunction).__sentry_original__;\n    }\n  });\n\n  // Perform callback manipulations\n  const result = callback();\n\n  // Revert restoration to wrapped state\n  Object.keys(wrappedLevels).forEach(level => {\n    originalConsole[level] = wrappedLevels[level];\n  });\n\n  return result;\n}\n\n/**\n * Adds exception values, type and value to an synthetic Exception.\n * @param event The event to modify.\n * @param value Value of the exception.\n * @param type Type of the exception.\n * @hidden\n */\nexport function addExceptionTypeValue(event: Event, value?: string, type?: string): void {\n  event.exception = event.exception || {};\n  event.exception.values = event.exception.values || [];\n  event.exception.values[0] = event.exception.values[0] || {};\n  event.exception.values[0].value = event.exception.values[0].value || value || '';\n  event.exception.values[0].type = event.exception.values[0].type || type || 'Error';\n}\n\n/**\n * Adds exception mechanism to a given event.\n * @param event The event to modify.\n * @param mechanism Mechanism of the mechanism.\n * @hidden\n */\nexport function addExceptionMechanism(\n  event: Event,\n  mechanism: {\n    [key: string]: any;\n  } = {},\n): void {\n  // TODO: Use real type with `keyof Mechanism` thingy and maybe make it better?\n  try {\n    // @ts-ignore Type 'Mechanism | {}' is not assignable to type 'Mechanism | undefined'\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    event.exception!.values![0].mechanism = event.exception!.values![0].mechanism || {};\n    Object.keys(mechanism).forEach(key => {\n      // @ts-ignore Mechanism has no index signature\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      event.exception!.values![0].mechanism[key] = mechanism[key];\n    });\n  } catch (_oO) {\n    // no-empty\n  }\n}\n\n/**\n * A safe form of location.href\n */\nexport function getLocationHref(): string {\n  try {\n    return document.location.href;\n  } catch (oO) {\n    return '';\n  }\n}\n\n// https://semver.org/#is-there-a-suggested-regular-expression-regex-to-check-a-semver-string\nconst SEMVER_REGEXP = /^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$/;\n\n/**\n * Represents Semantic Versioning object\n */\ninterface SemVer {\n  major?: number;\n  minor?: number;\n  patch?: number;\n  prerelease?: string;\n  buildmetadata?: string;\n}\n\n/**\n * Parses input into a SemVer interface\n * @param input string representation of a semver version\n */\nexport function parseSemver(input: string): SemVer {\n  const match = input.match(SEMVER_REGEXP) || [];\n  const major = parseInt(match[1], 10);\n  const minor = parseInt(match[2], 10);\n  const patch = parseInt(match[3], 10);\n  return {\n    buildmetadata: match[5],\n    major: isNaN(major) ? undefined : major,\n    minor: isNaN(minor) ? undefined : minor,\n    patch: isNaN(patch) ? undefined : patch,\n    prerelease: match[4],\n  };\n}\n\nconst defaultRetryAfter = 60 * 1000; // 60 seconds\n\n/**\n * Extracts Retry-After value from the request header or returns default value\n * @param now current unix timestamp\n * @param header string representation of 'Retry-After' header\n */\nexport function parseRetryAfterHeader(now: number, header?: string | number | null): number {\n  if (!header) {\n    return defaultRetryAfter;\n  }\n\n  const headerDelay = parseInt(`${header}`, 10);\n  if (!isNaN(headerDelay)) {\n    return headerDelay * 1000;\n  }\n\n  const headerDate = Date.parse(`${header}`);\n  if (!isNaN(headerDate)) {\n    return headerDate - now;\n  }\n\n  return defaultRetryAfter;\n}\n\n/**\n * This function adds context (pre/post/line) lines to the provided frame\n *\n * @param lines string[] containing all lines\n * @param frame StackFrame that will be mutated\n * @param linesOfContext number of context lines we want to add pre/post\n */\nexport function addContextToFrame(lines: string[], frame: StackFrame, linesOfContext: number = 5): void {\n  const lineno = frame.lineno || 0;\n  const maxLines = lines.length;\n  const sourceLine = Math.max(Math.min(maxLines, lineno - 1), 0);\n\n  frame.pre_context = lines\n    .slice(Math.max(0, sourceLine - linesOfContext), sourceLine)\n    .map((line: string) => snipLine(line, 0));\n\n  frame.context_line = snipLine(lines[Math.min(maxLines - 1, sourceLine)], frame.colno || 0);\n\n  frame.post_context = lines\n    .slice(Math.min(sourceLine + 1, maxLines), sourceLine + 1 + linesOfContext)\n    .map((line: string) => snipLine(line, 0));\n}\n\n/**\n * Strip the query string and fragment off of a given URL or path (if present)\n *\n * @param urlPath Full URL or path, including possible query string and/or fragment\n * @returns URL or path without query string or fragment\n */\nexport function stripUrlQueryAndFragment(urlPath: string): string {\n  // eslint-disable-next-line no-useless-escape\n  return urlPath.split(/[\\?#]/, 1)[0];\n}\n","import { isRegExp, isString } from './is';\n\n/**\n * Truncates given string to the maximum characters count\n *\n * @param str An object that contains serializable values\n * @param max Maximum number of characters in truncated string (0 = unlimited)\n * @returns string Encoded\n */\nexport function truncate(str: string, max: number = 0): string {\n  if (typeof str !== 'string' || max === 0) {\n    return str;\n  }\n  return str.length <= max ? str : `${str.substr(0, max)}...`;\n}\n\n/**\n * This is basically just `trim_line` from\n * https://github.com/getsentry/sentry/blob/master/src/sentry/lang/javascript/processor.py#L67\n *\n * @param str An object that contains serializable values\n * @param max Maximum number of characters in truncated string\n * @returns string Encoded\n */\nexport function snipLine(line: string, colno: number): string {\n  let newLine = line;\n  const ll = newLine.length;\n  if (ll <= 150) {\n    return newLine;\n  }\n  if (colno > ll) {\n    // eslint-disable-next-line no-param-reassign\n    colno = ll;\n  }\n\n  let start = Math.max(colno - 60, 0);\n  if (start < 5) {\n    start = 0;\n  }\n\n  let end = Math.min(start + 140, ll);\n  if (end > ll - 5) {\n    end = ll;\n  }\n  if (end === ll) {\n    start = Math.max(end - 140, 0);\n  }\n\n  newLine = newLine.slice(start, end);\n  if (start > 0) {\n    newLine = `'{snip} ${newLine}`;\n  }\n  if (end < ll) {\n    newLine += ' {snip}';\n  }\n\n  return newLine;\n}\n\n/**\n * Join values in array\n * @param input array of values to be joined together\n * @param delimiter string to be placed in-between values\n * @returns Joined values\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function safeJoin(input: any[], delimiter?: string): string {\n  if (!Array.isArray(input)) {\n    return '';\n  }\n\n  const output = [];\n  // eslint-disable-next-line @typescript-eslint/prefer-for-of\n  for (let i = 0; i < input.length; i++) {\n    const value = input[i];\n    try {\n      output.push(String(value));\n    } catch (e) {\n      output.push('[value cannot be serialized]');\n    }\n  }\n\n  return output.join(delimiter);\n}\n\n/**\n * Checks if the value matches a regex or includes the string\n * @param value The string value to be checked against\n * @param pattern Either a regex or a string that must be contained in value\n */\nexport function isMatchingPattern(value: string, pattern: RegExp | string): boolean {\n  if (!isString(value)) {\n    return false;\n  }\n\n  if (isRegExp(pattern)) {\n    return (pattern as RegExp).test(value);\n  }\n  if (typeof pattern === 'string') {\n    return value.indexOf(pattern) !== -1;\n  }\n  return false;\n}\n","/*\n * Copyright (c) 2018 by Filestack\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n /**\n  * Save cookie in browser\n  *\n  * @param name\n  * @param value\n  * @param expires\n  * @param path\n  * @param domain\n  * @param secure\n  */\nexport const write = (name: string, value: string, expires?: number, path?: string, domain?: string, secure?: boolean) => {\n  const cookie = [];\n  cookie.push(name + '=' + encodeURIComponent(value));\n\n  if (expires) {\n    cookie.push('expires=' + new Date(expires).toUTCString());\n  }\n\n  if (path) {\n    cookie.push('path=' + path);\n  }\n\n  if (domain) {\n    cookie.push('domain=' + domain);\n  }\n\n  if (secure) {\n    cookie.push('secure');\n  }\n\n  document.cookie = cookie.join('; ');\n};\n\n/**\n * Read cookie from browser with given name\n *\n * @param name\n */\nexport const read = (name: string) => {\n  const match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n  return (match ? decodeURIComponent(match[3]) : null);\n};\n\n/**\n * Clear cookie by name\n *\n * @param name\n */\nexport const remove = (name) => {\n  write(name, '', Date.now() - 86400000);\n};\n","/*\n * Copyright (c) 2018 by Filestack\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { trim } from './../utils';\nimport { FsRequestHeaders } from './../types';\n\nconst ignoreDuplicates = [\n  'expires',\n  'from',\n  'host',\n  'if-modified-since',\n  'if-unmodified-since',\n  'age',\n  'authorization',\n  'content-length',\n  'content-type',\n  'etag',\n  'last-modified',\n  'location',\n  'max-forwards',\n  'proxy-authorization',\n  'referer',\n  'retry-after',\n  'user-agent',\n];\n\n/**\n * Parse response raw header (xhr)\n *\n * @param {string} headers - raw headers string\n */\nexport const parse = headers => {\n  let parsed = {};\n  let key;\n  let val;\n  let i;\n\n  if (!headers) {\n    return parsed;\n  }\n\n  headers.split('\\n').forEach(line => {\n    i = line.indexOf(':');\n    key = trim(line.substr(0, i)).toLowerCase();\n    val = trim(line.substr(i + 1));\n\n    if (!key) {\n      return;\n    }\n\n    if (parsed[key] && ignoreDuplicates.indexOf(key) >= 0) {\n      return;\n    }\n\n    if (key === 'set-cookie') {\n      parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n    } else {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n\n/**\n * Normalize input headers\n *\n * @param headers\n */\nexport const normalizeHeaders = (headers: FsRequestHeaders): FsRequestHeaders => {\n  if (!headers) {\n    return {};\n  }\n\n  const toReturn = {};\n\n  for (let i in headers) {\n    toReturn[normalizeName(i)] =  headers[i];\n  }\n\n  return toReturn;\n};\n\n// expect(set({}, 'set-cookies', 'value')).toEqual({ 'Set-Cookies': 'value' });\n/**\n * Set request headers\n *\n * @param headers - object containing headers\n * @param name - header name\n * @param value - header value\n * @param setIFExists - determine if we should change header value if exists\n */\nexport const set = (headers: FsRequestHeaders, name: string, value: string, setIFExists = false) => {\n  const normalizedName = normalizeName(name);\n\n  if (!headers) {\n    headers = {};\n  }\n\n  // cleanup headers from undefined vals\n  headers = JSON.parse(JSON.stringify(headers));\n  if (headers[name] === undefined && headers[normalizedName] === undefined) {\n    headers[normalizedName] = value;\n  } else if (setIFExists) {\n    delete headers[name];\n    headers[normalizedName] = value;\n  }\n\n  return headers;\n};\n\n/**\n * Normalize header names according to rfc spec\n *\n * @param {string} name - header name\n */\nexport const normalizeName = (name: string) => {\n  // the exceptions\n  let result = {\n    'content-md5': 'Content-MD5',\n    dnt: 'DNT',\n    etag: 'ETag',\n    'last-event-id': 'Last-Event-ID',\n    tcn: 'TCN',\n    te: 'TE',\n    'www-authenticate': 'WWW-Authenticate',\n    'x-dnsprefetch-control': 'X-DNSPrefetch-Control',\n  }[name.toLowerCase()];\n\n  if (result) {\n    return result;\n  }\n\n  // the default\n  return name\n    .split('-')\n    .map(function(text) {\n      return text.charAt(0).toUpperCase() + text.substr(1).toLowerCase();\n    })\n    .join('-');\n};\n","/*\n * Copyright (c) 2018 by Filestack\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isURLSearchParams, isObject, isStream, isFormData, isArrayBuffer, isFile, isBlob, isBuffer } from './../utils';\nimport { getVersion, uniqueId } from './../../utils';\nimport { FsRequestOptions, FsResponse } from './../types';\nimport { set } from './headers';\nimport { XMLParser, XMLValidator } from 'fast-xml-parser';\nimport Debug from 'debug';\n\nconst debug = Debug('fs:request:data');\n\n/**\n * Prepare request and set content-type header based on data\n *\n * @param headers\n * @param data\n */\nexport const prepareData = (config: FsRequestOptions) => {\n  // set filestack debug headers first\n  config = filestackHeaders(config);\n\n  if (isFormData(config.data) || isBuffer(config.data) || isStream(config.data) || isFile(config.data) || isBlob(config.data)) {\n    return config;\n  }\n\n  // @todo convert it to ArrayBufferView for browser\n  if (isArrayBuffer(config.data)) {\n    return config;\n  }\n\n  if (isURLSearchParams(config.data)) {\n    config.headers = set(config.headers, 'content-type', 'application/x-www-form-urlencoded;charset=utf-8');\n    config.data = config.data.toString();\n  } else if (isObject(config.data)) {\n    config.headers = set(config.headers, 'content-type', 'application/json', true);\n    config.data = JSON.stringify(config.data);\n  }\n\n  return config;\n};\n\n/**\n * Add filestack debug headers to request\n *\n * @param config\n */\nexport const filestackHeaders = (config: FsRequestOptions) => {\n  if (!config.filestackHeaders) {\n    return config;\n  }\n\n  config.headers = set(config.headers, 'filestack-source', getVersion());\n  config.headers = set(config.headers, 'filestack-trace-id', `${Math.floor(Date.now() / 1000)}-${uniqueId()}`);\n  config.headers = set(config.headers, 'filestack-trace-span', `jssdk-${uniqueId()}`);\n\n  return config;\n};\n\n/**\n * Prepare response data based on content type\n *\n * @param response\n */\nexport const parseResponse = async (response: FsResponse): Promise<FsResponse> => {\n  if (!response.headers || !response.headers['content-type']) {\n    return Promise.resolve(response);\n  }\n\n  const contentType = response.headers['content-type'];\n\n  if (/application\\/json/.test(contentType)) {\n    try {\n      response.data = JSON.parse(response.data);\n    } catch (e) {\n      debug('Cannot parse response %O - %O', response.data, response.headers);\n    }\n  } else if (/text\\/(plain|html)/.test(contentType)) {\n    if (isBuffer(response.data)) {\n      response.data = bufferToString(response.data);\n    }\n  } else if (/application\\/xml/.test(contentType)) {\n    let data = response.data;\n\n    if (isBuffer(response.data)) {\n      data = bufferToString(response.data);\n    }\n\n    if (XMLValidator.validate(data) === true) {\n      const parser = new XMLParser({\n        ignoreDeclaration: true,\n        ignoreAttributes : true,\n        trimValues: true,\n      });\n\n      response.data = parser.parse(data);\n    }\n  }\n\n  return Promise.resolve(response);\n};\n\nfunction bufferToString(buffer) {\n  const bufView = new Uint16Array(buffer);\n  const length = bufView.length;\n\n  let result = '';\n  let addition = Math.pow(2, 16) - 1;\n\n  for (let i = 0; i < length; i += addition) {\n    if (i + addition > length) {\n      addition = length - i;\n    }\n    result += String.fromCharCode.apply(null, bufView.subarray(i, i + addition));\n  }\n\n  return result;\n}\n","/*\n * Copyright (c) 2018 by Filestack\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Combine url with qs parameters\n *\n * @param {String} url base url\n * @param {Object} params Query string params object\n */\nexport const combineURL = (url, params) => {\n  if (!params) {\n    return url;\n  }\n\n  const serialized = urlfy(params);\n  const hashIndex = url.indexOf('#');\n\n  if (hashIndex !== -1) {\n    url = url.slice(0, hashIndex);\n  }\n\n  return url + (url.indexOf('?') === -1 ? '?' : '&') + serialized;\n};\n\n/**\n * Change request json params to url search ones\n *\n * @param {Object} obj Object to transform\n */\nexport const urlfy = val =>\n  Object.keys(val)\n    .filter(k => k && typeof val[k] !== 'undefined')\n    .map(k => `${encodeURIComponent(k)}=${encodeURIComponent(val[k])}`)\n    .join('&');\n","'use strict';\n\nvar uri = require('url');\n\nvar ValidationError = exports.ValidationError = function ValidationError (message, instance, schema, propertyPath, name, argument) {\n  if (propertyPath) {\n    this.property = propertyPath;\n  }\n  if (message) {\n    this.message = message;\n  }\n  if (schema) {\n    if (schema.id) {\n      this.schema = schema.id;\n    } else {\n      this.schema = schema;\n    }\n  }\n  if (instance) {\n    this.instance = instance;\n  }\n  this.name = name;\n  this.argument = argument;\n  this.stack = this.toString();\n};\n\nValidationError.prototype.toString = function toString() {\n  return this.property + ' ' + this.message;\n};\n\nvar ValidatorResult = exports.ValidatorResult = function ValidatorResult(instance, schema, options, ctx) {\n  this.instance = instance;\n  this.schema = schema;\n  this.propertyPath = ctx.propertyPath;\n  this.errors = [];\n  this.throwError = options && options.throwError;\n  this.disableFormat = options && options.disableFormat === true;\n};\n\nValidatorResult.prototype.addError = function addError(detail) {\n  var err;\n  if (typeof detail == 'string') {\n    err = new ValidationError(detail, this.instance, this.schema, this.propertyPath);\n  } else {\n    if (!detail) throw new Error('Missing error detail');\n    if (!detail.message) throw new Error('Missing error message');\n    if (!detail.name) throw new Error('Missing validator type');\n    err = new ValidationError(detail.message, this.instance, this.schema, this.propertyPath, detail.name, detail.argument);\n  }\n\n  if (this.throwError) {\n    throw err;\n  }\n  this.errors.push(err);\n  return err;\n};\n\nValidatorResult.prototype.importErrors = function importErrors(res) {\n  if (typeof res == 'string' || (res && res.validatorType)) {\n    this.addError(res);\n  } else if (res && res.errors) {\n    Array.prototype.push.apply(this.errors, res.errors);\n  }\n};\n\nfunction stringizer (v,i){\n  return i+': '+v.toString()+'\\n';\n}\nValidatorResult.prototype.toString = function toString(res) {\n  return this.errors.map(stringizer).join('');\n};\n\nObject.defineProperty(ValidatorResult.prototype, \"valid\", { get: function() {\n  return !this.errors.length;\n} });\n\n/**\n * Describes a problem with a Schema which prevents validation of an instance\n * @name SchemaError\n * @constructor\n */\nvar SchemaError = exports.SchemaError = function SchemaError (msg, schema) {\n  this.message = msg;\n  this.schema = schema;\n  Error.call(this, msg);\n  Error.captureStackTrace(this, SchemaError);\n};\nSchemaError.prototype = Object.create(Error.prototype,\n  { constructor: {value: SchemaError, enumerable: false}\n  , name: {value: 'SchemaError', enumerable: false}\n  });\n\nvar SchemaContext = exports.SchemaContext = function SchemaContext (schema, options, propertyPath, base, schemas) {\n  this.schema = schema;\n  this.options = options;\n  this.propertyPath = propertyPath;\n  this.base = base;\n  this.schemas = schemas;\n};\n\nSchemaContext.prototype.resolve = function resolve (target) {\n  return uri.resolve(this.base, target);\n};\n\nSchemaContext.prototype.makeChild = function makeChild(schema, propertyName){\n  var propertyPath = (propertyName===undefined) ? this.propertyPath : this.propertyPath+makeSuffix(propertyName);\n  var base = uri.resolve(this.base, schema.id||'');\n  var ctx = new SchemaContext(schema, this.options, propertyPath, base, Object.create(this.schemas));\n  if(schema.id && !ctx.schemas[base]){\n    ctx.schemas[base] = schema;\n  }\n  return ctx;\n}\n\nvar FORMAT_REGEXPS = exports.FORMAT_REGEXPS = {\n  'date-time': /^\\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\\.\\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,\n  'date': /^\\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,\n  'time': /^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,\n\n  'email': /^(?:[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+\\.)*[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!\\.)){0,61}[a-zA-Z0-9]?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\\[(?:(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\.){3}(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\]))$/,\n  'ip-address': /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,\n  'ipv6': /^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$/,\n  'uri': /^[a-zA-Z][a-zA-Z0-9+-.]*:[^\\s]*$/,\n\n  'color': /^(#?([0-9A-Fa-f]{3}){1,2}\\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\\(\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*\\))|(rgb\\(\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*\\)))$/,\n\n  // hostname regex from: http://stackoverflow.com/a/1420225/5628\n  'hostname': /^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\\.?$/,\n  'host-name': /^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\\.?$/,\n\n  'alpha': /^[a-zA-Z]+$/,\n  'alphanumeric': /^[a-zA-Z0-9]+$/,\n  'utc-millisec': function (input) {\n    return (typeof input === 'string') && parseFloat(input) === parseInt(input, 10) && !isNaN(input);\n  },\n  'regex': function (input) {\n    var result = true;\n    try {\n      new RegExp(input);\n    } catch (e) {\n      result = false;\n    }\n    return result;\n  },\n  'style': /\\s*(.+?):\\s*([^;]+);?/,\n  'phone': /^\\+(?:[0-9] ?){6,14}[0-9]$/\n};\n\nFORMAT_REGEXPS.regexp = FORMAT_REGEXPS.regex;\nFORMAT_REGEXPS.pattern = FORMAT_REGEXPS.regex;\nFORMAT_REGEXPS.ipv4 = FORMAT_REGEXPS['ip-address'];\n\nexports.isFormat = function isFormat (input, format, validator) {\n  if (typeof input === 'string' && FORMAT_REGEXPS[format] !== undefined) {\n    if (FORMAT_REGEXPS[format] instanceof RegExp) {\n      return FORMAT_REGEXPS[format].test(input);\n    }\n    if (typeof FORMAT_REGEXPS[format] === 'function') {\n      return FORMAT_REGEXPS[format](input);\n    }\n  } else if (validator && validator.customFormats &&\n      typeof validator.customFormats[format] === 'function') {\n    return validator.customFormats[format](input);\n  }\n  return true;\n};\n\nvar makeSuffix = exports.makeSuffix = function makeSuffix (key) {\n  key = key.toString();\n  // This function could be capable of outputting valid a ECMAScript string, but the\n  // resulting code for testing which form to use would be tens of thousands of characters long\n  // That means this will use the name form for some illegal forms\n  if (!key.match(/[.\\s\\[\\]]/) && !key.match(/^[\\d]/)) {\n    return '.' + key;\n  }\n  if (key.match(/^\\d+$/)) {\n    return '[' + key + ']';\n  }\n  return '[' + JSON.stringify(key) + ']';\n};\n\nexports.deepCompareStrict = function deepCompareStrict (a, b) {\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (a instanceof Array) {\n    if (!(b instanceof Array)) {\n      return false;\n    }\n    if (a.length !== b.length) {\n      return false;\n    }\n    return a.every(function (v, i) {\n      return deepCompareStrict(a[i], b[i]);\n    });\n  }\n  if (typeof a === 'object') {\n    if (!a || !b) {\n      return a === b;\n    }\n    var aKeys = Object.keys(a);\n    var bKeys = Object.keys(b);\n    if (aKeys.length !== bKeys.length) {\n      return false;\n    }\n    return aKeys.every(function (v) {\n      return deepCompareStrict(a[v], b[v]);\n    });\n  }\n  return a === b;\n};\n\nfunction deepMerger (target, dst, e, i) {\n  if (typeof e === 'object') {\n    dst[i] = deepMerge(target[i], e)\n  } else {\n    if (target.indexOf(e) === -1) {\n      dst.push(e)\n    }\n  }\n}\n\nfunction copyist (src, dst, key) {\n  dst[key] = src[key];\n}\n\nfunction copyistWithDeepMerge (target, src, dst, key) {\n  if (typeof src[key] !== 'object' || !src[key]) {\n    dst[key] = src[key];\n  }\n  else {\n    if (!target[key]) {\n      dst[key] = src[key];\n    } else {\n      dst[key] = deepMerge(target[key], src[key])\n    }\n  }\n}\n\nfunction deepMerge (target, src) {\n  var array = Array.isArray(src);\n  var dst = array && [] || {};\n\n  if (array) {\n    target = target || [];\n    dst = dst.concat(target);\n    src.forEach(deepMerger.bind(null, target, dst));\n  } else {\n    if (target && typeof target === 'object') {\n      Object.keys(target).forEach(copyist.bind(null, target, dst));\n    }\n    Object.keys(src).forEach(copyistWithDeepMerge.bind(null, target, src, dst));\n  }\n\n  return dst;\n};\n\nmodule.exports.deepMerge = deepMerge;\n\n/**\n * Validates instance against the provided schema\n * Implements URI+JSON Pointer encoding, e.g. \"%7e\"=\"~0\"=>\"~\", \"~1\"=\"%2f\"=>\"/\"\n * @param o\n * @param s The path to walk o along\n * @return any\n */\nexports.objectGetPath = function objectGetPath(o, s) {\n  var parts = s.split('/').slice(1);\n  var k;\n  while (typeof (k=parts.shift()) == 'string') {\n    var n = decodeURIComponent(k.replace(/~0/,'~').replace(/~1/g,'/'));\n    if (!(n in o)) return;\n    o = o[n];\n  }\n  return o;\n};\n\nfunction pathEncoder (v) {\n  return '/'+encodeURIComponent(v).replace(/~/g,'%7E');\n}\n/**\n * Accept an Array of property names and return a JSON Pointer URI fragment\n * @param Array a\n * @return {String}\n */\nexports.encodePath = function encodePointer(a){\n\t// ~ must be encoded explicitly because hacks\n\t// the slash is encoded by encodeURIComponent\n\treturn a.map(pathEncoder).join('');\n};\n\n\n/**\n * Calculate the number of decimal places a number uses\n * We need this to get correct results out of multipleOf and divisibleBy\n * when either figure is has decimal places, due to IEEE-754 float issues.\n * @param number\n * @returns {number}\n */\nexports.getDecimalPlaces = function getDecimalPlaces(number) {\n\n  var decimalPlaces = 0;\n  if (isNaN(number)) return decimalPlaces;\n\n  if (typeof number !== 'number') {\n    number = Number(number);\n  }\n\n  var parts = number.toString().split('e');\n  if (parts.length === 2) {\n    if (parts[1][0] !== '-') {\n      return decimalPlaces;\n    } else {\n      decimalPlaces = Number(parts[1].slice(1));\n    }\n  }\n\n  var decimalParts = parts[0].split('.');\n  if (decimalParts.length === 2) {\n    decimalPlaces += decimalParts[1].length;\n  }\n\n  return decimalPlaces;\n};\n\n","/**\n * Checks whether we're in the Node.js or Browser environment\n *\n * @returns Answer to given question\n */\nexport function isNodeEnv(): boolean {\n  return Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';\n}\n\n/**\n * Requires a module which is protected against bundler minification.\n *\n * @param request The module path to resolve\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\nexport function dynamicRequire(mod: any, request: string): any {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  return mod.require(request);\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/*\n * Copyright (c) 2018 by Filestack\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FsRequestError, FsRequestErrorCode } from './../error';\nimport Debug from 'debug';\n\nconst debug = Debug('fs:request:shouldRetry');\n\n/**\n * Indicates if method should be retried\n *\n * @private\n * @param {FsRequestError} err\n * @returns\n * @memberof Dispatch\n */\nexport const shouldRetry = (err: FsRequestError) => {\n  debug('Checking error for retry. Code: %n, type: %s', (err.response ? err.response.status : 'Malformed response'), err.code);\n\n  // we always should retry on network failure\n  switch (err.code) {\n    case FsRequestErrorCode.NETWORK:\n    case FsRequestErrorCode.SERVER:\n    case FsRequestErrorCode.TIMEOUT:\n      return true;\n    // we should not make request on request aborted\n    case FsRequestErrorCode.ABORTED:\n      return false;\n  }\n\n  if (!err.response) {\n    return false;\n  }\n\n  // we should retry on all server errors (5xx)\n  // this should be handled by FsRequestErrorCode.SERVER but to be sure\n  if (500 <= err.response.status && err.response.status <= 599) {\n    return true;\n  }\n\n  // we should not retry on other errors (4xx) ie: BadRequest etc\n  return false;\n};\n","'use strict';\nconst toBytes = s => [...s].map(c => c.charCodeAt(0));\nconst xpiZipFilename = toBytes('META-INF/mozilla.rsa');\nconst oxmlContentTypes = toBytes('[Content_Types].xml');\nconst oxmlRels = toBytes('_rels/.rels');\n\nfunction readUInt64LE(buf, offset = 0) {\n\tlet n = buf[offset];\n\tlet mul = 1;\n\tlet i = 0;\n\twhile (++i < 8) {\n\t\tmul *= 0x100;\n\t\tn += buf[offset + i] * mul;\n\t}\n\n\treturn n;\n}\n\nconst fileType = input => {\n\tif (!(input instanceof Uint8Array || input instanceof ArrayBuffer || Buffer.isBuffer(input))) {\n\t\tthrow new TypeError(`Expected the \\`input\\` argument to be of type \\`Uint8Array\\` or \\`Buffer\\` or \\`ArrayBuffer\\`, got \\`${typeof input}\\``);\n\t}\n\n\tconst buf = input instanceof Uint8Array ? input : new Uint8Array(input);\n\n\tif (!(buf && buf.length > 1)) {\n\t\treturn null;\n\t}\n\n\tconst check = (header, options) => {\n\t\toptions = Object.assign({\n\t\t\toffset: 0\n\t\t}, options);\n\n\t\tfor (let i = 0; i < header.length; i++) {\n\t\t\t// If a bitmask is set\n\t\t\tif (options.mask) {\n\t\t\t\t// If header doesn't equal `buf` with bits masked off\n\t\t\t\tif (header[i] !== (options.mask[i] & buf[i + options.offset])) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else if (header[i] !== buf[i + options.offset]) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t};\n\n\tconst checkString = (header, options) => check(toBytes(header), options);\n\n\tif (check([0xFF, 0xD8, 0xFF])) {\n\t\treturn {\n\t\t\text: 'jpg',\n\t\t\tmime: 'image/jpeg'\n\t\t};\n\t}\n\n\tif (check([0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A])) {\n\t\treturn {\n\t\t\text: 'png',\n\t\t\tmime: 'image/png'\n\t\t};\n\t}\n\n\tif (check([0x47, 0x49, 0x46])) {\n\t\treturn {\n\t\t\text: 'gif',\n\t\t\tmime: 'image/gif'\n\t\t};\n\t}\n\n\tif (check([0x57, 0x45, 0x42, 0x50], {offset: 8})) {\n\t\treturn {\n\t\t\text: 'webp',\n\t\t\tmime: 'image/webp'\n\t\t};\n\t}\n\n\tif (check([0x46, 0x4C, 0x49, 0x46])) {\n\t\treturn {\n\t\t\text: 'flif',\n\t\t\tmime: 'image/flif'\n\t\t};\n\t}\n\n\t// Needs to be before `tif` check\n\tif (\n\t\t(check([0x49, 0x49, 0x2A, 0x0]) || check([0x4D, 0x4D, 0x0, 0x2A])) &&\n\t\tcheck([0x43, 0x52], {offset: 8})\n\t) {\n\t\treturn {\n\t\t\text: 'cr2',\n\t\t\tmime: 'image/x-canon-cr2'\n\t\t};\n\t}\n\n\tif (\n\t\tcheck([0x49, 0x49, 0x2A, 0x0]) ||\n\t\tcheck([0x4D, 0x4D, 0x0, 0x2A])\n\t) {\n\t\treturn {\n\t\t\text: 'tif',\n\t\t\tmime: 'image/tiff'\n\t\t};\n\t}\n\n\tif (check([0x42, 0x4D])) {\n\t\treturn {\n\t\t\text: 'bmp',\n\t\t\tmime: 'image/bmp'\n\t\t};\n\t}\n\n\tif (check([0x49, 0x49, 0xBC])) {\n\t\treturn {\n\t\t\text: 'jxr',\n\t\t\tmime: 'image/vnd.ms-photo'\n\t\t};\n\t}\n\n\tif (check([0x38, 0x42, 0x50, 0x53])) {\n\t\treturn {\n\t\t\text: 'psd',\n\t\t\tmime: 'image/vnd.adobe.photoshop'\n\t\t};\n\t}\n\n\t// Zip-based file formats\n\t// Need to be before the `zip` check\n\tif (check([0x50, 0x4B, 0x3, 0x4])) {\n\t\tif (\n\t\t\tcheck([0x6D, 0x69, 0x6D, 0x65, 0x74, 0x79, 0x70, 0x65, 0x61, 0x70, 0x70, 0x6C, 0x69, 0x63, 0x61, 0x74, 0x69, 0x6F, 0x6E, 0x2F, 0x65, 0x70, 0x75, 0x62, 0x2B, 0x7A, 0x69, 0x70], {offset: 30})\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'epub',\n\t\t\t\tmime: 'application/epub+zip'\n\t\t\t};\n\t\t}\n\n\t\t// Assumes signed `.xpi` from addons.mozilla.org\n\t\tif (check(xpiZipFilename, {offset: 30})) {\n\t\t\treturn {\n\t\t\t\text: 'xpi',\n\t\t\t\tmime: 'application/x-xpinstall'\n\t\t\t};\n\t\t}\n\n\t\tif (checkString('mimetypeapplication/vnd.oasis.opendocument.text', {offset: 30})) {\n\t\t\treturn {\n\t\t\t\text: 'odt',\n\t\t\t\tmime: 'application/vnd.oasis.opendocument.text'\n\t\t\t};\n\t\t}\n\n\t\tif (checkString('mimetypeapplication/vnd.oasis.opendocument.spreadsheet', {offset: 30})) {\n\t\t\treturn {\n\t\t\t\text: 'ods',\n\t\t\t\tmime: 'application/vnd.oasis.opendocument.spreadsheet'\n\t\t\t};\n\t\t}\n\n\t\tif (checkString('mimetypeapplication/vnd.oasis.opendocument.presentation', {offset: 30})) {\n\t\t\treturn {\n\t\t\t\text: 'odp',\n\t\t\t\tmime: 'application/vnd.oasis.opendocument.presentation'\n\t\t\t};\n\t\t}\n\n\t\t// The docx, xlsx and pptx file types extend the Office Open XML file format:\n\t\t// https://en.wikipedia.org/wiki/Office_Open_XML_file_formats\n\t\t// We look for:\n\t\t// - one entry named '[Content_Types].xml' or '_rels/.rels',\n\t\t// - one entry indicating specific type of file.\n\t\t// MS Office, OpenOffice and LibreOffice may put the parts in different order, so the check should not rely on it.\n\t\tconst findNextZipHeaderIndex = (arr, startAt = 0) => arr.findIndex((el, i, arr) => i >= startAt && arr[i] === 0x50 && arr[i + 1] === 0x4B && arr[i + 2] === 0x3 && arr[i + 3] === 0x4);\n\n\t\tlet zipHeaderIndex = 0; // The first zip header was already found at index 0\n\t\tlet oxmlFound = false;\n\t\tlet type = null;\n\n\t\tdo {\n\t\t\tconst offset = zipHeaderIndex + 30;\n\n\t\t\tif (!oxmlFound) {\n\t\t\t\toxmlFound = (check(oxmlContentTypes, {offset}) || check(oxmlRels, {offset}));\n\t\t\t}\n\n\t\t\tif (!type) {\n\t\t\t\tif (checkString('word/', {offset})) {\n\t\t\t\t\ttype = {\n\t\t\t\t\t\text: 'docx',\n\t\t\t\t\t\tmime: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'\n\t\t\t\t\t};\n\t\t\t\t} else if (checkString('ppt/', {offset})) {\n\t\t\t\t\ttype = {\n\t\t\t\t\t\text: 'pptx',\n\t\t\t\t\t\tmime: 'application/vnd.openxmlformats-officedocument.presentationml.presentation'\n\t\t\t\t\t};\n\t\t\t\t} else if (checkString('xl/', {offset})) {\n\t\t\t\t\ttype = {\n\t\t\t\t\t\text: 'xlsx',\n\t\t\t\t\t\tmime: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (oxmlFound && type) {\n\t\t\t\treturn type;\n\t\t\t}\n\n\t\t\tzipHeaderIndex = findNextZipHeaderIndex(buf, offset);\n\t\t} while (zipHeaderIndex >= 0);\n\n\t\t// No more zip parts available in the buffer, but maybe we are almost certain about the type?\n\t\tif (type) {\n\t\t\treturn type;\n\t\t}\n\t}\n\n\tif (\n\t\tcheck([0x50, 0x4B]) &&\n\t\t(buf[2] === 0x3 || buf[2] === 0x5 || buf[2] === 0x7) &&\n\t\t(buf[3] === 0x4 || buf[3] === 0x6 || buf[3] === 0x8)\n\t) {\n\t\treturn {\n\t\t\text: 'zip',\n\t\t\tmime: 'application/zip'\n\t\t};\n\t}\n\n\tif (check([0x75, 0x73, 0x74, 0x61, 0x72], {offset: 257})) {\n\t\treturn {\n\t\t\text: 'tar',\n\t\t\tmime: 'application/x-tar'\n\t\t};\n\t}\n\n\tif (\n\t\tcheck([0x52, 0x61, 0x72, 0x21, 0x1A, 0x7]) &&\n\t\t(buf[6] === 0x0 || buf[6] === 0x1)\n\t) {\n\t\treturn {\n\t\t\text: 'rar',\n\t\t\tmime: 'application/x-rar-compressed'\n\t\t};\n\t}\n\n\tif (check([0x1F, 0x8B, 0x8])) {\n\t\treturn {\n\t\t\text: 'gz',\n\t\t\tmime: 'application/gzip'\n\t\t};\n\t}\n\n\tif (check([0x42, 0x5A, 0x68])) {\n\t\treturn {\n\t\t\text: 'bz2',\n\t\t\tmime: 'application/x-bzip2'\n\t\t};\n\t}\n\n\tif (check([0x37, 0x7A, 0xBC, 0xAF, 0x27, 0x1C])) {\n\t\treturn {\n\t\t\text: '7z',\n\t\t\tmime: 'application/x-7z-compressed'\n\t\t};\n\t}\n\n\tif (check([0x78, 0x01])) {\n\t\treturn {\n\t\t\text: 'dmg',\n\t\t\tmime: 'application/x-apple-diskimage'\n\t\t};\n\t}\n\n\tif (check([0x33, 0x67, 0x70, 0x35]) || // 3gp5\n\t\t(\n\t\t\tcheck([0x0, 0x0, 0x0]) && check([0x66, 0x74, 0x79, 0x70], {offset: 4}) &&\n\t\t\t\t(\n\t\t\t\t\tcheck([0x6D, 0x70, 0x34, 0x31], {offset: 8}) || // MP41\n\t\t\t\t\tcheck([0x6D, 0x70, 0x34, 0x32], {offset: 8}) || // MP42\n\t\t\t\t\tcheck([0x69, 0x73, 0x6F, 0x6D], {offset: 8}) || // ISOM\n\t\t\t\t\tcheck([0x69, 0x73, 0x6F, 0x32], {offset: 8}) || // ISO2\n\t\t\t\t\tcheck([0x6D, 0x6D, 0x70, 0x34], {offset: 8}) || // MMP4\n\t\t\t\t\tcheck([0x4D, 0x34, 0x56], {offset: 8}) || // M4V\n\t\t\t\t\tcheck([0x64, 0x61, 0x73, 0x68], {offset: 8}) // DASH\n\t\t\t\t)\n\t\t)) {\n\t\treturn {\n\t\t\text: 'mp4',\n\t\t\tmime: 'video/mp4'\n\t\t};\n\t}\n\n\tif (check([0x4D, 0x54, 0x68, 0x64])) {\n\t\treturn {\n\t\t\text: 'mid',\n\t\t\tmime: 'audio/midi'\n\t\t};\n\t}\n\n\t// https://github.com/threatstack/libmagic/blob/master/magic/Magdir/matroska\n\tif (check([0x1A, 0x45, 0xDF, 0xA3])) {\n\t\tconst sliced = buf.subarray(4, 4 + 4096);\n\t\tconst idPos = sliced.findIndex((el, i, arr) => arr[i] === 0x42 && arr[i + 1] === 0x82);\n\n\t\tif (idPos !== -1) {\n\t\t\tconst docTypePos = idPos + 3;\n\t\t\tconst findDocType = type => [...type].every((c, i) => sliced[docTypePos + i] === c.charCodeAt(0));\n\n\t\t\tif (findDocType('matroska')) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'mkv',\n\t\t\t\t\tmime: 'video/x-matroska'\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (findDocType('webm')) {\n\t\t\t\treturn {\n\t\t\t\t\text: 'webm',\n\t\t\t\t\tmime: 'video/webm'\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n\tif (check([0x0, 0x0, 0x0, 0x14, 0x66, 0x74, 0x79, 0x70, 0x71, 0x74, 0x20, 0x20]) ||\n\t\tcheck([0x66, 0x72, 0x65, 0x65], {offset: 4}) || // Type: `free`\n\t\tcheck([0x66, 0x74, 0x79, 0x70, 0x71, 0x74, 0x20, 0x20], {offset: 4}) ||\n\t\tcheck([0x6D, 0x64, 0x61, 0x74], {offset: 4}) || // MJPEG\n\t\tcheck([0x6D, 0x6F, 0x6F, 0x76], {offset: 4}) || // Type: `moov`\n\t\tcheck([0x77, 0x69, 0x64, 0x65], {offset: 4})) {\n\t\treturn {\n\t\t\text: 'mov',\n\t\t\tmime: 'video/quicktime'\n\t\t};\n\t}\n\n\t// RIFF file format which might be AVI, WAV, QCP, etc\n\tif (check([0x52, 0x49, 0x46, 0x46])) {\n\t\tif (check([0x41, 0x56, 0x49], {offset: 8})) {\n\t\t\treturn {\n\t\t\t\text: 'avi',\n\t\t\t\tmime: 'video/vnd.avi'\n\t\t\t};\n\t\t}\n\n\t\tif (check([0x57, 0x41, 0x56, 0x45], {offset: 8})) {\n\t\t\treturn {\n\t\t\t\text: 'wav',\n\t\t\t\tmime: 'audio/vnd.wave'\n\t\t\t};\n\t\t}\n\n\t\t// QLCM, QCP file\n\t\tif (check([0x51, 0x4C, 0x43, 0x4D], {offset: 8})) {\n\t\t\treturn {\n\t\t\t\text: 'qcp',\n\t\t\t\tmime: 'audio/qcelp'\n\t\t\t};\n\t\t}\n\t}\n\n\t// ASF_Header_Object first 80 bytes\n\tif (check([0x30, 0x26, 0xB2, 0x75, 0x8E, 0x66, 0xCF, 0x11, 0xA6, 0xD9])) {\n\t\t// Search for header should be in first 1KB of file.\n\n\t\tlet offset = 30;\n\t\tdo {\n\t\t\tconst objectSize = readUInt64LE(buf, offset + 16);\n\t\t\tif (check([0x91, 0x07, 0xDC, 0xB7, 0xB7, 0xA9, 0xCF, 0x11, 0x8E, 0xE6, 0x00, 0xC0, 0x0C, 0x20, 0x53, 0x65], {offset})) {\n\t\t\t\t// Sync on Stream-Properties-Object (B7DC0791-A9B7-11CF-8EE6-00C00C205365)\n\t\t\t\tif (check([0x40, 0x9E, 0x69, 0xF8, 0x4D, 0x5B, 0xCF, 0x11, 0xA8, 0xFD, 0x00, 0x80, 0x5F, 0x5C, 0x44, 0x2B], {offset: offset + 24})) {\n\t\t\t\t\t// Found audio:\n\t\t\t\t\treturn {\n\t\t\t\t\t\text: 'wma',\n\t\t\t\t\t\tmime: 'audio/x-ms-wma'\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tif (check([0xC0, 0xEF, 0x19, 0xBC, 0x4D, 0x5B, 0xCF, 0x11, 0xA8, 0xFD, 0x00, 0x80, 0x5F, 0x5C, 0x44, 0x2B], {offset: offset + 24})) {\n\t\t\t\t\t// Found video:\n\t\t\t\t\treturn {\n\t\t\t\t\t\text: 'wmv',\n\t\t\t\t\t\tmime: 'video/x-ms-asf'\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\toffset += objectSize;\n\t\t} while (offset + 24 <= buf.length);\n\n\t\t// Default to ASF generic extension\n\t\treturn {\n\t\t\text: 'asf',\n\t\t\tmime: 'application/vnd.ms-asf'\n\t\t};\n\t}\n\n\tif (\n\t\tcheck([0x0, 0x0, 0x1, 0xBA]) ||\n\t\tcheck([0x0, 0x0, 0x1, 0xB3])\n\t) {\n\t\treturn {\n\t\t\text: 'mpg',\n\t\t\tmime: 'video/mpeg'\n\t\t};\n\t}\n\n\tif (check([0x66, 0x74, 0x79, 0x70, 0x33, 0x67], {offset: 4})) {\n\t\treturn {\n\t\t\text: '3gp',\n\t\t\tmime: 'video/3gpp'\n\t\t};\n\t}\n\n\t// Check for MPEG header at different starting offsets\n\tfor (let start = 0; start < 2 && start < (buf.length - 16); start++) {\n\t\tif (\n\t\t\tcheck([0x49, 0x44, 0x33], {offset: start}) || // ID3 header\n\t\t\tcheck([0xFF, 0xE2], {offset: start, mask: [0xFF, 0xE2]}) // MPEG 1 or 2 Layer 3 header\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'mp3',\n\t\t\t\tmime: 'audio/mpeg'\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tcheck([0xFF, 0xE4], {offset: start, mask: [0xFF, 0xE4]}) // MPEG 1 or 2 Layer 2 header\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'mp2',\n\t\t\t\tmime: 'audio/mpeg'\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tcheck([0xFF, 0xF8], {offset: start, mask: [0xFF, 0xFC]}) // MPEG 2 layer 0 using ADTS\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'mp2',\n\t\t\t\tmime: 'audio/mpeg'\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tcheck([0xFF, 0xF0], {offset: start, mask: [0xFF, 0xFC]}) // MPEG 4 layer 0 using ADTS\n\t\t) {\n\t\t\treturn {\n\t\t\t\text: 'mp4',\n\t\t\t\tmime: 'audio/mpeg'\n\t\t\t};\n\t\t}\n\t}\n\n\tif (\n\t\tcheck([0x66, 0x74, 0x79, 0x70, 0x4D, 0x34, 0x41], {offset: 4})\n\t) {\n\t\treturn { // MPEG-4 layer 3 (audio)\n\t\t\text: 'm4a',\n\t\t\tmime: 'audio/mp4' // RFC 4337\n\t\t};\n\t}\n\n\t// Needs to be before `ogg` check\n\tif (check([0x4F, 0x70, 0x75, 0x73, 0x48, 0x65, 0x61, 0x64], {offset: 28})) {\n\t\treturn {\n\t\t\text: 'opus',\n\t\t\tmime: 'audio/opus'\n\t\t};\n\t}\n\n\t// If 'OggS' in first  bytes, then OGG container\n\tif (check([0x4F, 0x67, 0x67, 0x53])) {\n\t\t// This is a OGG container\n\n\t\t// If ' theora' in header.\n\t\tif (check([0x80, 0x74, 0x68, 0x65, 0x6F, 0x72, 0x61], {offset: 28})) {\n\t\t\treturn {\n\t\t\t\text: 'ogv',\n\t\t\t\tmime: 'video/ogg'\n\t\t\t};\n\t\t}\n\n\t\t// If '\\x01video' in header.\n\t\tif (check([0x01, 0x76, 0x69, 0x64, 0x65, 0x6F, 0x00], {offset: 28})) {\n\t\t\treturn {\n\t\t\t\text: 'ogm',\n\t\t\t\tmime: 'video/ogg'\n\t\t\t};\n\t\t}\n\n\t\t// If ' FLAC' in header  https://xiph.org/flac/faq.html\n\t\tif (check([0x7F, 0x46, 0x4C, 0x41, 0x43], {offset: 28})) {\n\t\t\treturn {\n\t\t\t\text: 'oga',\n\t\t\t\tmime: 'audio/ogg'\n\t\t\t};\n\t\t}\n\n\t\t// 'Speex  ' in header https://en.wikipedia.org/wiki/Speex\n\t\tif (check([0x53, 0x70, 0x65, 0x65, 0x78, 0x20, 0x20], {offset: 28})) {\n\t\t\treturn {\n\t\t\t\text: 'spx',\n\t\t\t\tmime: 'audio/ogg'\n\t\t\t};\n\t\t}\n\n\t\t// If '\\x01vorbis' in header\n\t\tif (check([0x01, 0x76, 0x6F, 0x72, 0x62, 0x69, 0x73], {offset: 28})) {\n\t\t\treturn {\n\t\t\t\text: 'ogg',\n\t\t\t\tmime: 'audio/ogg'\n\t\t\t};\n\t\t}\n\n\t\t// Default OGG container https://www.iana.org/assignments/media-types/application/ogg\n\t\treturn {\n\t\t\text: 'ogx',\n\t\t\tmime: 'application/ogg'\n\t\t};\n\t}\n\n\tif (check([0x66, 0x4C, 0x61, 0x43])) {\n\t\treturn {\n\t\t\text: 'flac',\n\t\t\tmime: 'audio/x-flac'\n\t\t};\n\t}\n\n\tif (check([0x4D, 0x41, 0x43, 0x20])) { // 'MAC '\n\t\treturn {\n\t\t\text: 'ape',\n\t\t\tmime: 'audio/ape'\n\t\t};\n\t}\n\n\tif (check([0x77, 0x76, 0x70, 0x6B])) { // 'wvpk'\n\t\treturn {\n\t\t\text: 'wv',\n\t\t\tmime: 'audio/wavpack'\n\t\t};\n\t}\n\n\tif (check([0x23, 0x21, 0x41, 0x4D, 0x52, 0x0A])) {\n\t\treturn {\n\t\t\text: 'amr',\n\t\t\tmime: 'audio/amr'\n\t\t};\n\t}\n\n\tif (check([0x25, 0x50, 0x44, 0x46])) {\n\t\treturn {\n\t\t\text: 'pdf',\n\t\t\tmime: 'application/pdf'\n\t\t};\n\t}\n\n\tif (check([0x4D, 0x5A])) {\n\t\treturn {\n\t\t\text: 'exe',\n\t\t\tmime: 'application/x-msdownload'\n\t\t};\n\t}\n\n\tif (\n\t\t(buf[0] === 0x43 || buf[0] === 0x46) &&\n\t\tcheck([0x57, 0x53], {offset: 1})\n\t) {\n\t\treturn {\n\t\t\text: 'swf',\n\t\t\tmime: 'application/x-shockwave-flash'\n\t\t};\n\t}\n\n\tif (check([0x7B, 0x5C, 0x72, 0x74, 0x66])) {\n\t\treturn {\n\t\t\text: 'rtf',\n\t\t\tmime: 'application/rtf'\n\t\t};\n\t}\n\n\tif (check([0x00, 0x61, 0x73, 0x6D])) {\n\t\treturn {\n\t\t\text: 'wasm',\n\t\t\tmime: 'application/wasm'\n\t\t};\n\t}\n\n\tif (\n\t\tcheck([0x77, 0x4F, 0x46, 0x46]) &&\n\t\t(\n\t\t\tcheck([0x00, 0x01, 0x00, 0x00], {offset: 4}) ||\n\t\t\tcheck([0x4F, 0x54, 0x54, 0x4F], {offset: 4})\n\t\t)\n\t) {\n\t\treturn {\n\t\t\text: 'woff',\n\t\t\tmime: 'font/woff'\n\t\t};\n\t}\n\n\tif (\n\t\tcheck([0x77, 0x4F, 0x46, 0x32]) &&\n\t\t(\n\t\t\tcheck([0x00, 0x01, 0x00, 0x00], {offset: 4}) ||\n\t\t\tcheck([0x4F, 0x54, 0x54, 0x4F], {offset: 4})\n\t\t)\n\t) {\n\t\treturn {\n\t\t\text: 'woff2',\n\t\t\tmime: 'font/woff2'\n\t\t};\n\t}\n\n\tif (\n\t\tcheck([0x4C, 0x50], {offset: 34}) &&\n\t\t(\n\t\t\tcheck([0x00, 0x00, 0x01], {offset: 8}) ||\n\t\t\tcheck([0x01, 0x00, 0x02], {offset: 8}) ||\n\t\t\tcheck([0x02, 0x00, 0x02], {offset: 8})\n\t\t)\n\t) {\n\t\treturn {\n\t\t\text: 'eot',\n\t\t\tmime: 'application/vnd.ms-fontobject'\n\t\t};\n\t}\n\n\tif (check([0x00, 0x01, 0x00, 0x00, 0x00])) {\n\t\treturn {\n\t\t\text: 'ttf',\n\t\t\tmime: 'font/ttf'\n\t\t};\n\t}\n\n\tif (check([0x4F, 0x54, 0x54, 0x4F, 0x00])) {\n\t\treturn {\n\t\t\text: 'otf',\n\t\t\tmime: 'font/otf'\n\t\t};\n\t}\n\n\tif (check([0x00, 0x00, 0x01, 0x00])) {\n\t\treturn {\n\t\t\text: 'ico',\n\t\t\tmime: 'image/x-icon'\n\t\t};\n\t}\n\n\tif (check([0x00, 0x00, 0x02, 0x00])) {\n\t\treturn {\n\t\t\text: 'cur',\n\t\t\tmime: 'image/x-icon'\n\t\t};\n\t}\n\n\tif (check([0x46, 0x4C, 0x56, 0x01])) {\n\t\treturn {\n\t\t\text: 'flv',\n\t\t\tmime: 'video/x-flv'\n\t\t};\n\t}\n\n\tif (check([0x25, 0x21])) {\n\t\treturn {\n\t\t\text: 'ps',\n\t\t\tmime: 'application/postscript'\n\t\t};\n\t}\n\n\tif (check([0xFD, 0x37, 0x7A, 0x58, 0x5A, 0x00])) {\n\t\treturn {\n\t\t\text: 'xz',\n\t\t\tmime: 'application/x-xz'\n\t\t};\n\t}\n\n\tif (check([0x53, 0x51, 0x4C, 0x69])) {\n\t\treturn {\n\t\t\text: 'sqlite',\n\t\t\tmime: 'application/x-sqlite3'\n\t\t};\n\t}\n\n\tif (check([0x4E, 0x45, 0x53, 0x1A])) {\n\t\treturn {\n\t\t\text: 'nes',\n\t\t\tmime: 'application/x-nintendo-nes-rom'\n\t\t};\n\t}\n\n\tif (check([0x43, 0x72, 0x32, 0x34])) {\n\t\treturn {\n\t\t\text: 'crx',\n\t\t\tmime: 'application/x-google-chrome-extension'\n\t\t};\n\t}\n\n\tif (\n\t\tcheck([0x4D, 0x53, 0x43, 0x46]) ||\n\t\tcheck([0x49, 0x53, 0x63, 0x28])\n\t) {\n\t\treturn {\n\t\t\text: 'cab',\n\t\t\tmime: 'application/vnd.ms-cab-compressed'\n\t\t};\n\t}\n\n\t// Needs to be before `ar` check\n\tif (check([0x21, 0x3C, 0x61, 0x72, 0x63, 0x68, 0x3E, 0x0A, 0x64, 0x65, 0x62, 0x69, 0x61, 0x6E, 0x2D, 0x62, 0x69, 0x6E, 0x61, 0x72, 0x79])) {\n\t\treturn {\n\t\t\text: 'deb',\n\t\t\tmime: 'application/x-deb'\n\t\t};\n\t}\n\n\tif (check([0x21, 0x3C, 0x61, 0x72, 0x63, 0x68, 0x3E])) {\n\t\treturn {\n\t\t\text: 'ar',\n\t\t\tmime: 'application/x-unix-archive'\n\t\t};\n\t}\n\n\tif (check([0xED, 0xAB, 0xEE, 0xDB])) {\n\t\treturn {\n\t\t\text: 'rpm',\n\t\t\tmime: 'application/x-rpm'\n\t\t};\n\t}\n\n\tif (\n\t\tcheck([0x1F, 0xA0]) ||\n\t\tcheck([0x1F, 0x9D])\n\t) {\n\t\treturn {\n\t\t\text: 'Z',\n\t\t\tmime: 'application/x-compress'\n\t\t};\n\t}\n\n\tif (check([0x4C, 0x5A, 0x49, 0x50])) {\n\t\treturn {\n\t\t\text: 'lz',\n\t\t\tmime: 'application/x-lzip'\n\t\t};\n\t}\n\n\tif (check([0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1])) {\n\t\treturn {\n\t\t\text: 'msi',\n\t\t\tmime: 'application/x-msi'\n\t\t};\n\t}\n\n\tif (check([0x06, 0x0E, 0x2B, 0x34, 0x02, 0x05, 0x01, 0x01, 0x0D, 0x01, 0x02, 0x01, 0x01, 0x02])) {\n\t\treturn {\n\t\t\text: 'mxf',\n\t\t\tmime: 'application/mxf'\n\t\t};\n\t}\n\n\tif (check([0x47], {offset: 4}) && (check([0x47], {offset: 192}) || check([0x47], {offset: 196}))) {\n\t\treturn {\n\t\t\text: 'mts',\n\t\t\tmime: 'video/mp2t'\n\t\t};\n\t}\n\n\tif (check([0x42, 0x4C, 0x45, 0x4E, 0x44, 0x45, 0x52])) {\n\t\treturn {\n\t\t\text: 'blend',\n\t\t\tmime: 'application/x-blender'\n\t\t};\n\t}\n\n\tif (check([0x42, 0x50, 0x47, 0xFB])) {\n\t\treturn {\n\t\t\text: 'bpg',\n\t\t\tmime: 'image/bpg'\n\t\t};\n\t}\n\n\tif (check([0x00, 0x00, 0x00, 0x0C, 0x6A, 0x50, 0x20, 0x20, 0x0D, 0x0A, 0x87, 0x0A])) {\n\t\t// JPEG-2000 family\n\n\t\tif (check([0x6A, 0x70, 0x32, 0x20], {offset: 20})) {\n\t\t\treturn {\n\t\t\t\text: 'jp2',\n\t\t\t\tmime: 'image/jp2'\n\t\t\t};\n\t\t}\n\n\t\tif (check([0x6A, 0x70, 0x78, 0x20], {offset: 20})) {\n\t\t\treturn {\n\t\t\t\text: 'jpx',\n\t\t\t\tmime: 'image/jpx'\n\t\t\t};\n\t\t}\n\n\t\tif (check([0x6A, 0x70, 0x6D, 0x20], {offset: 20})) {\n\t\t\treturn {\n\t\t\t\text: 'jpm',\n\t\t\t\tmime: 'image/jpm'\n\t\t\t};\n\t\t}\n\n\t\tif (check([0x6D, 0x6A, 0x70, 0x32], {offset: 20})) {\n\t\t\treturn {\n\t\t\t\text: 'mj2',\n\t\t\t\tmime: 'image/mj2'\n\t\t\t};\n\t\t}\n\t}\n\n\tif (check([0x46, 0x4F, 0x52, 0x4D])) {\n\t\treturn {\n\t\t\text: 'aif',\n\t\t\tmime: 'audio/aiff'\n\t\t};\n\t}\n\n\tif (checkString('<?xml ')) {\n\t\treturn {\n\t\t\text: 'xml',\n\t\t\tmime: 'application/xml'\n\t\t};\n\t}\n\n\tif (check([0x42, 0x4F, 0x4F, 0x4B, 0x4D, 0x4F, 0x42, 0x49], {offset: 60})) {\n\t\treturn {\n\t\t\text: 'mobi',\n\t\t\tmime: 'application/x-mobipocket-ebook'\n\t\t};\n\t}\n\n\t// File Type Box (https://en.wikipedia.org/wiki/ISO_base_media_file_format)\n\tif (check([0x66, 0x74, 0x79, 0x70], {offset: 4})) {\n\t\tif (check([0x6D, 0x69, 0x66, 0x31], {offset: 8})) {\n\t\t\treturn {\n\t\t\t\text: 'heic',\n\t\t\t\tmime: 'image/heif'\n\t\t\t};\n\t\t}\n\n\t\tif (check([0x6D, 0x73, 0x66, 0x31], {offset: 8})) {\n\t\t\treturn {\n\t\t\t\text: 'heic',\n\t\t\t\tmime: 'image/heif-sequence'\n\t\t\t};\n\t\t}\n\n\t\tif (check([0x68, 0x65, 0x69, 0x63], {offset: 8}) || check([0x68, 0x65, 0x69, 0x78], {offset: 8})) {\n\t\t\treturn {\n\t\t\t\text: 'heic',\n\t\t\t\tmime: 'image/heic'\n\t\t\t};\n\t\t}\n\n\t\tif (check([0x68, 0x65, 0x76, 0x63], {offset: 8}) || check([0x68, 0x65, 0x76, 0x78], {offset: 8})) {\n\t\t\treturn {\n\t\t\t\text: 'heic',\n\t\t\t\tmime: 'image/heic-sequence'\n\t\t\t};\n\t\t}\n\t}\n\n\tif (check([0xAB, 0x4B, 0x54, 0x58, 0x20, 0x31, 0x31, 0xBB, 0x0D, 0x0A, 0x1A, 0x0A])) {\n\t\treturn {\n\t\t\text: 'ktx',\n\t\t\tmime: 'image/ktx'\n\t\t};\n\t}\n\n\tif (check([0x44, 0x49, 0x43, 0x4D], {offset: 128})) {\n\t\treturn {\n\t\t\text: 'dcm',\n\t\t\tmime: 'application/dicom'\n\t\t};\n\t}\n\n\t// Musepack, SV7\n\tif (check([0x4D, 0x50, 0x2B])) {\n\t\treturn {\n\t\t\text: 'mpc',\n\t\t\tmime: 'audio/x-musepack'\n\t\t};\n\t}\n\n\t// Musepack, SV8\n\tif (check([0x4D, 0x50, 0x43, 0x4B])) {\n\t\treturn {\n\t\t\text: 'mpc',\n\t\t\tmime: 'audio/x-musepack'\n\t\t};\n\t}\n\n\tif (check([0x42, 0x45, 0x47, 0x49, 0x4E, 0x3A])) {\n\t\treturn {\n\t\t\text: 'ics',\n\t\t\tmime: 'text/calendar'\n\t\t};\n\t}\n\n\tif (check([0x67, 0x6C, 0x54, 0x46, 0x02, 0x00, 0x00, 0x00])) {\n\t\treturn {\n\t\t\text: 'glb',\n\t\t\tmime: 'model/gltf-binary'\n\t\t};\n\t}\n\n\tif (check([0xD4, 0xC3, 0xB2, 0xA1]) || check([0xA1, 0xB2, 0xC3, 0xD4])) {\n\t\treturn {\n\t\t\text: 'pcap',\n\t\t\tmime: 'application/vnd.tcpdump.pcap'\n\t\t};\n\t}\n\n\treturn null;\n};\n\nmodule.exports = fileType;\n// TODO: Remove this for the next major release\nmodule.exports.default = fileType;\n\nObject.defineProperty(fileType, 'minimumBytes', {value: 4100});\n\nmodule.exports.stream = readableStream => new Promise((resolve, reject) => {\n\t// Using `eval` to work around issues when bundling with Webpack\n\tconst stream = eval('require')('stream'); // eslint-disable-line no-eval\n\n\treadableStream.once('readable', () => {\n\t\tconst pass = new stream.PassThrough();\n\t\tconst chunk = readableStream.read(module.exports.minimumBytes) || readableStream.read();\n\t\ttry {\n\t\t\tpass.fileType = fileType(chunk);\n\t\t} catch (error) {\n\t\t\treject(error);\n\t\t}\n\n\t\treadableStream.unshift(chunk);\n\n\t\tif (stream.pipeline) {\n\t\t\tresolve(stream.pipeline(readableStream, pass, () => {}));\n\t\t} else {\n\t\t\tresolve(readableStream.pipe(pass));\n\t\t}\n\t});\n});\n","'use strict';\n\nvar Validator = module.exports.Validator = require('./validator');\n\nmodule.exports.ValidatorResult = require('./helpers').ValidatorResult;\nmodule.exports.ValidationError = require('./helpers').ValidationError;\nmodule.exports.SchemaError = require('./helpers').SchemaError;\nmodule.exports.SchemaScanResult = require('./scan').SchemaScanResult;\nmodule.exports.scan = require('./scan').scan;\n\nmodule.exports.validate = function (instance, schema, options) {\n  var v = new Validator();\n  return v.validate(instance, schema, options);\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","\nvar urilib = require('url');\nvar helpers = require('./helpers');\n\nmodule.exports.SchemaScanResult = SchemaScanResult;\nfunction SchemaScanResult(found, ref){\n  this.id = found;\n  this.ref = ref;\n}\n\n/**\n * Adds a schema with a certain urn to the Validator instance.\n * @param string uri\n * @param object schema\n * @return {Object}\n */\nmodule.exports.scan = function scan(base, schema){\n  function scanSchema(baseuri, schema){\n    if(!schema || typeof schema!='object') return;\n    // Mark all referenced schemas so we can tell later which schemas are referred to, but never defined\n    if(schema.$ref){\n      var resolvedUri = urilib.resolve(baseuri, schema.$ref);\n      ref[resolvedUri] = ref[resolvedUri] ? ref[resolvedUri]+1 : 0;\n      return;\n    }\n    var ourBase = schema.id ? urilib.resolve(baseuri, schema.id) : baseuri;\n    if (ourBase) {\n      // If there's no fragment, append an empty one\n      if(ourBase.indexOf('#')<0) ourBase += '#';\n      if(found[ourBase]){\n        if(!helpers.deepCompareStrict(found[ourBase], schema)){\n          throw new Error('Schema <'+schema+'> already exists with different definition');\n        }\n        return found[ourBase];\n      }\n      found[ourBase] = schema;\n      // strip trailing fragment\n      if(ourBase[ourBase.length-1]=='#'){\n        found[ourBase.substring(0, ourBase.length-1)] = schema;\n      }\n    }\n    scanArray(ourBase+'/items', ((schema.items instanceof Array)?schema.items:[schema.items]));\n    scanArray(ourBase+'/extends', ((schema.extends instanceof Array)?schema.extends:[schema.extends]));\n    scanSchema(ourBase+'/additionalItems', schema.additionalItems);\n    scanObject(ourBase+'/properties', schema.properties);\n    scanSchema(ourBase+'/additionalProperties', schema.additionalProperties);\n    scanObject(ourBase+'/definitions', schema.definitions);\n    scanObject(ourBase+'/patternProperties', schema.patternProperties);\n    scanObject(ourBase+'/dependencies', schema.dependencies);\n    scanArray(ourBase+'/disallow', schema.disallow);\n    scanArray(ourBase+'/allOf', schema.allOf);\n    scanArray(ourBase+'/anyOf', schema.anyOf);\n    scanArray(ourBase+'/oneOf', schema.oneOf);\n    scanSchema(ourBase+'/not', schema.not);\n  }\n  function scanArray(baseuri, schemas){\n    if(!(schemas instanceof Array)) return;\n    for(var i=0; i<schemas.length; i++){\n      scanSchema(baseuri+'/'+i, schemas[i]);\n    }\n  }\n  function scanObject(baseuri, schemas){\n    if(!schemas || typeof schemas!='object') return;\n    for(var p in schemas){\n      scanSchema(baseuri+'/'+p, schemas[p]);\n    }\n  }\n\n  var found = {};\n  var ref = {};\n  var schemaUri = base;\n  scanSchema(base, schema);\n  return new SchemaScanResult(found, ref);\n}\n","'use strict';\n\nconst validator = require('./validator');\nconst XMLParser = require('./xmlparser/XMLParser');\nconst XMLBuilder = require('./xmlbuilder/json2xml');\n\nmodule.exports = {\n  XMLParser: XMLParser,\n  XMLValidator: validator,\n  XMLBuilder: XMLBuilder\n}","import { isString } from './is';\n\n/**\n * Given a child DOM element, returns a query-selector statement describing that\n * and its ancestors\n * e.g. [HTMLElement] => body > div > input#foo.btn[name=baz]\n * @returns generated DOM path\n */\nexport function htmlTreeAsString(elem: unknown): string {\n  type SimpleNode = {\n    parentNode: SimpleNode;\n  } | null;\n\n  // try/catch both:\n  // - accessing event.target (see getsentry/raven-js#838, #768)\n  // - `htmlTreeAsString` because it's complex, and just accessing the DOM incorrectly\n  // - can throw an exception in some circumstances.\n  try {\n    let currentElem = elem as SimpleNode;\n    const MAX_TRAVERSE_HEIGHT = 5;\n    const MAX_OUTPUT_LEN = 80;\n    const out = [];\n    let height = 0;\n    let len = 0;\n    const separator = ' > ';\n    const sepLength = separator.length;\n    let nextStr;\n\n    // eslint-disable-next-line no-plusplus\n    while (currentElem && height++ < MAX_TRAVERSE_HEIGHT) {\n      nextStr = _htmlElementAsString(currentElem);\n      // bail out if\n      // - nextStr is the 'html' element\n      // - the length of the string that would be created exceeds MAX_OUTPUT_LEN\n      //   (ignore this limit if we are on the first iteration)\n      if (nextStr === 'html' || (height > 1 && len + out.length * sepLength + nextStr.length >= MAX_OUTPUT_LEN)) {\n        break;\n      }\n\n      out.push(nextStr);\n\n      len += nextStr.length;\n      currentElem = currentElem.parentNode;\n    }\n\n    return out.reverse().join(separator);\n  } catch (_oO) {\n    return '<unknown>';\n  }\n}\n\n/**\n * Returns a simple, query-selector representation of a DOM element\n * e.g. [HTMLElement] => input#foo.btn[name=baz]\n * @returns generated DOM path\n */\nfunction _htmlElementAsString(el: unknown): string {\n  const elem = el as {\n    tagName?: string;\n    id?: string;\n    className?: string;\n    getAttribute(key: string): string;\n  };\n\n  const out = [];\n  let className;\n  let classes;\n  let key;\n  let attr;\n  let i;\n\n  if (!elem || !elem.tagName) {\n    return '';\n  }\n\n  out.push(elem.tagName.toLowerCase());\n  if (elem.id) {\n    out.push(`#${elem.id}`);\n  }\n\n  // eslint-disable-next-line prefer-const\n  className = elem.className;\n  if (className && isString(className)) {\n    classes = className.split(/\\s+/);\n    for (i = 0; i < classes.length; i++) {\n      out.push(`.${classes[i]}`);\n    }\n  }\n  const allowedAttrs = ['type', 'name', 'title', 'alt'];\n  for (i = 0; i < allowedAttrs.length; i++) {\n    key = allowedAttrs[i];\n    attr = elem.getAttribute(key);\n    if (attr) {\n      out.push(`[${key}=\"${attr}\"]`);\n    }\n  }\n  return out.join('');\n}\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","/* globals __webpack_amd_options__ */\nmodule.exports = __webpack_amd_options__;\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","'use strict';\n\nconst util = require('./util');\n\nconst defaultOptions = {\n  allowBooleanAttributes: false, //A tag can have attributes without any value\n  unpairedTags: []\n};\n\n//const tagsPattern = new RegExp(\"<\\\\/?([\\\\w:\\\\-_\\.]+)\\\\s*\\/?>\",\"g\");\nexports.validate = function (xmlData, options) {\n  options = Object.assign({}, defaultOptions, options);\n\n  //xmlData = xmlData.replace(/(\\r\\n|\\n|\\r)/gm,\"\");//make it single line\n  //xmlData = xmlData.replace(/(^\\s*<\\?xml.*?\\?>)/g,\"\");//Remove XML starting tag\n  //xmlData = xmlData.replace(/(<!DOCTYPE[\\s\\w\\\"\\.\\/\\-\\:]+(\\[.*\\])*\\s*>)/g,\"\");//Remove DOCTYPE\n  const tags = [];\n  let tagFound = false;\n\n  //indicates that the root tag has been closed (aka. depth 0 has been reached)\n  let reachedRoot = false;\n\n  if (xmlData[0] === '\\ufeff') {\n    // check for byte order mark (BOM)\n    xmlData = xmlData.substr(1);\n  }\n  \n  for (let i = 0; i < xmlData.length; i++) {\n\n    if (xmlData[i] === '<' && xmlData[i+1] === '?') {\n      i+=2;\n      i = readPI(xmlData,i);\n      if (i.err) return i;\n    }else if (xmlData[i] === '<') {\n      //starting of tag\n      //read until you reach to '>' avoiding any '>' in attribute value\n      let tagStartPos = i;\n      i++;\n      \n      if (xmlData[i] === '!') {\n        i = readCommentAndCDATA(xmlData, i);\n        continue;\n      } else {\n        let closingTag = false;\n        if (xmlData[i] === '/') {\n          //closing tag\n          closingTag = true;\n          i++;\n        }\n        //read tagname\n        let tagName = '';\n        for (; i < xmlData.length &&\n          xmlData[i] !== '>' &&\n          xmlData[i] !== ' ' &&\n          xmlData[i] !== '\\t' &&\n          xmlData[i] !== '\\n' &&\n          xmlData[i] !== '\\r'; i++\n        ) {\n          tagName += xmlData[i];\n        }\n        tagName = tagName.trim();\n        //console.log(tagName);\n\n        if (tagName[tagName.length - 1] === '/') {\n          //self closing tag without attributes\n          tagName = tagName.substring(0, tagName.length - 1);\n          //continue;\n          i--;\n        }\n        if (!validateTagName(tagName)) {\n          let msg;\n          if (tagName.trim().length === 0) {\n            msg = \"Invalid space after '<'.\";\n          } else {\n            msg = \"Tag '\"+tagName+\"' is an invalid name.\";\n          }\n          return getErrorObject('InvalidTag', msg, getLineNumberForPosition(xmlData, i));\n        }\n\n        const result = readAttributeStr(xmlData, i);\n        if (result === false) {\n          return getErrorObject('InvalidAttr', \"Attributes for '\"+tagName+\"' have open quote.\", getLineNumberForPosition(xmlData, i));\n        }\n        let attrStr = result.value;\n        i = result.index;\n\n        if (attrStr[attrStr.length - 1] === '/') {\n          //self closing tag\n          const attrStrStart = i - attrStr.length;\n          attrStr = attrStr.substring(0, attrStr.length - 1);\n          const isValid = validateAttributeString(attrStr, options);\n          if (isValid === true) {\n            tagFound = true;\n            //continue; //text may presents after self closing tag\n          } else {\n            //the result from the nested function returns the position of the error within the attribute\n            //in order to get the 'true' error line, we need to calculate the position where the attribute begins (i - attrStr.length) and then add the position within the attribute\n            //this gives us the absolute index in the entire xml, which we can use to find the line at last\n            return getErrorObject(isValid.err.code, isValid.err.msg, getLineNumberForPosition(xmlData, attrStrStart + isValid.err.line));\n          }\n        } else if (closingTag) {\n          if (!result.tagClosed) {\n            return getErrorObject('InvalidTag', \"Closing tag '\"+tagName+\"' doesn't have proper closing.\", getLineNumberForPosition(xmlData, i));\n          } else if (attrStr.trim().length > 0) {\n            return getErrorObject('InvalidTag', \"Closing tag '\"+tagName+\"' can't have attributes or invalid starting.\", getLineNumberForPosition(xmlData, tagStartPos));\n          } else {\n            const otg = tags.pop();\n            if (tagName !== otg.tagName) {\n              let openPos = getLineNumberForPosition(xmlData, otg.tagStartPos);\n              return getErrorObject('InvalidTag',\n                \"Expected closing tag '\"+otg.tagName+\"' (opened in line \"+openPos.line+\", col \"+openPos.col+\") instead of closing tag '\"+tagName+\"'.\",\n                getLineNumberForPosition(xmlData, tagStartPos));\n            }\n\n            //when there are no more tags, we reached the root level.\n            if (tags.length == 0) {\n              reachedRoot = true;\n            }\n          }\n        } else {\n          const isValid = validateAttributeString(attrStr, options);\n          if (isValid !== true) {\n            //the result from the nested function returns the position of the error within the attribute\n            //in order to get the 'true' error line, we need to calculate the position where the attribute begins (i - attrStr.length) and then add the position within the attribute\n            //this gives us the absolute index in the entire xml, which we can use to find the line at last\n            return getErrorObject(isValid.err.code, isValid.err.msg, getLineNumberForPosition(xmlData, i - attrStr.length + isValid.err.line));\n          }\n\n          //if the root level has been reached before ...\n          if (reachedRoot === true) {\n            return getErrorObject('InvalidXml', 'Multiple possible root nodes found.', getLineNumberForPosition(xmlData, i));\n          } else if(options.unpairedTags.indexOf(tagName) !== -1){\n            //don't push into stack\n          } else {\n            tags.push({tagName, tagStartPos});\n          }\n          tagFound = true;\n        }\n\n        //skip tag text value\n        //It may include comments and CDATA value\n        for (i++; i < xmlData.length; i++) {\n          if (xmlData[i] === '<') {\n            if (xmlData[i + 1] === '!') {\n              //comment or CADATA\n              i++;\n              i = readCommentAndCDATA(xmlData, i);\n              continue;\n            } else if (xmlData[i+1] === '?') {\n              i = readPI(xmlData, ++i);\n              if (i.err) return i;\n            } else{\n              break;\n            }\n          } else if (xmlData[i] === '&') {\n            const afterAmp = validateAmpersand(xmlData, i);\n            if (afterAmp == -1)\n              return getErrorObject('InvalidChar', \"char '&' is not expected.\", getLineNumberForPosition(xmlData, i));\n            i = afterAmp;\n          }else{\n            if (reachedRoot === true && !isWhiteSpace(xmlData[i])) {\n              return getErrorObject('InvalidXml', \"Extra text at the end\", getLineNumberForPosition(xmlData, i));\n            }\n          }\n        } //end of reading tag text value\n        if (xmlData[i] === '<') {\n          i--;\n        }\n      }\n    } else {\n      if ( isWhiteSpace(xmlData[i])) {\n        continue;\n      }\n      return getErrorObject('InvalidChar', \"char '\"+xmlData[i]+\"' is not expected.\", getLineNumberForPosition(xmlData, i));\n    }\n  }\n\n  if (!tagFound) {\n    return getErrorObject('InvalidXml', 'Start tag expected.', 1);\n  }else if (tags.length == 1) {\n      return getErrorObject('InvalidTag', \"Unclosed tag '\"+tags[0].tagName+\"'.\", getLineNumberForPosition(xmlData, tags[0].tagStartPos));\n  }else if (tags.length > 0) {\n      return getErrorObject('InvalidXml', \"Invalid '\"+\n          JSON.stringify(tags.map(t => t.tagName), null, 4).replace(/\\r?\\n/g, '')+\n          \"' found.\", {line: 1, col: 1});\n  }\n\n  return true;\n};\n\nfunction isWhiteSpace(char){\n  return char === ' ' || char === '\\t' || char === '\\n'  || char === '\\r';\n}\n/**\n * Read Processing insstructions and skip\n * @param {*} xmlData\n * @param {*} i\n */\nfunction readPI(xmlData, i) {\n  const start = i;\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] == '?' || xmlData[i] == ' ') {\n      //tagname\n      const tagname = xmlData.substr(start, i - start);\n      if (i > 5 && tagname === 'xml') {\n        return getErrorObject('InvalidXml', 'XML declaration allowed only at the start of the document.', getLineNumberForPosition(xmlData, i));\n      } else if (xmlData[i] == '?' && xmlData[i + 1] == '>') {\n        //check if valid attribut string\n        i++;\n        break;\n      } else {\n        continue;\n      }\n    }\n  }\n  return i;\n}\n\nfunction readCommentAndCDATA(xmlData, i) {\n  if (xmlData.length > i + 5 && xmlData[i + 1] === '-' && xmlData[i + 2] === '-') {\n    //comment\n    for (i += 3; i < xmlData.length; i++) {\n      if (xmlData[i] === '-' && xmlData[i + 1] === '-' && xmlData[i + 2] === '>') {\n        i += 2;\n        break;\n      }\n    }\n  } else if (\n    xmlData.length > i + 8 &&\n    xmlData[i + 1] === 'D' &&\n    xmlData[i + 2] === 'O' &&\n    xmlData[i + 3] === 'C' &&\n    xmlData[i + 4] === 'T' &&\n    xmlData[i + 5] === 'Y' &&\n    xmlData[i + 6] === 'P' &&\n    xmlData[i + 7] === 'E'\n  ) {\n    let angleBracketsCount = 1;\n    for (i += 8; i < xmlData.length; i++) {\n      if (xmlData[i] === '<') {\n        angleBracketsCount++;\n      } else if (xmlData[i] === '>') {\n        angleBracketsCount--;\n        if (angleBracketsCount === 0) {\n          break;\n        }\n      }\n    }\n  } else if (\n    xmlData.length > i + 9 &&\n    xmlData[i + 1] === '[' &&\n    xmlData[i + 2] === 'C' &&\n    xmlData[i + 3] === 'D' &&\n    xmlData[i + 4] === 'A' &&\n    xmlData[i + 5] === 'T' &&\n    xmlData[i + 6] === 'A' &&\n    xmlData[i + 7] === '['\n  ) {\n    for (i += 8; i < xmlData.length; i++) {\n      if (xmlData[i] === ']' && xmlData[i + 1] === ']' && xmlData[i + 2] === '>') {\n        i += 2;\n        break;\n      }\n    }\n  }\n\n  return i;\n}\n\nconst doubleQuote = '\"';\nconst singleQuote = \"'\";\n\n/**\n * Keep reading xmlData until '<' is found outside the attribute value.\n * @param {string} xmlData\n * @param {number} i\n */\nfunction readAttributeStr(xmlData, i) {\n  let attrStr = '';\n  let startChar = '';\n  let tagClosed = false;\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] === doubleQuote || xmlData[i] === singleQuote) {\n      if (startChar === '') {\n        startChar = xmlData[i];\n      } else if (startChar !== xmlData[i]) {\n        //if vaue is enclosed with double quote then single quotes are allowed inside the value and vice versa\n      } else {\n        startChar = '';\n      }\n    } else if (xmlData[i] === '>') {\n      if (startChar === '') {\n        tagClosed = true;\n        break;\n      }\n    }\n    attrStr += xmlData[i];\n  }\n  if (startChar !== '') {\n    return false;\n  }\n\n  return {\n    value: attrStr,\n    index: i,\n    tagClosed: tagClosed\n  };\n}\n\n/**\n * Select all the attributes whether valid or invalid.\n */\nconst validAttrStrRegxp = new RegExp('(\\\\s*)([^\\\\s=]+)(\\\\s*=)?(\\\\s*([\\'\"])(([\\\\s\\\\S])*?)\\\\5)?', 'g');\n\n//attr, =\"sd\", a=\"amit's\", a=\"sd\"b=\"saf\", ab  cd=\"\"\n\nfunction validateAttributeString(attrStr, options) {\n  //console.log(\"start:\"+attrStr+\":end\");\n\n  //if(attrStr.trim().length === 0) return true; //empty string\n\n  const matches = util.getAllMatches(attrStr, validAttrStrRegxp);\n  const attrNames = {};\n\n  for (let i = 0; i < matches.length; i++) {\n    if (matches[i][1].length === 0) {\n      //nospace before attribute name: a=\"sd\"b=\"saf\"\n      return getErrorObject('InvalidAttr', \"Attribute '\"+matches[i][2]+\"' has no space in starting.\", getPositionFromMatch(matches[i]))\n    } else if (matches[i][3] !== undefined && matches[i][4] === undefined) {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+matches[i][2]+\"' is without value.\", getPositionFromMatch(matches[i]));\n    } else if (matches[i][3] === undefined && !options.allowBooleanAttributes) {\n      //independent attribute: ab\n      return getErrorObject('InvalidAttr', \"boolean attribute '\"+matches[i][2]+\"' is not allowed.\", getPositionFromMatch(matches[i]));\n    }\n    /* else if(matches[i][6] === undefined){//attribute without value: ab=\n                    return { err: { code:\"InvalidAttr\",msg:\"attribute \" + matches[i][2] + \" has no value assigned.\"}};\n                } */\n    const attrName = matches[i][2];\n    if (!validateAttrName(attrName)) {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+attrName+\"' is an invalid name.\", getPositionFromMatch(matches[i]));\n    }\n    if (!attrNames.hasOwnProperty(attrName)) {\n      //check for duplicate attribute.\n      attrNames[attrName] = 1;\n    } else {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+attrName+\"' is repeated.\", getPositionFromMatch(matches[i]));\n    }\n  }\n\n  return true;\n}\n\nfunction validateNumberAmpersand(xmlData, i) {\n  let re = /\\d/;\n  if (xmlData[i] === 'x') {\n    i++;\n    re = /[\\da-fA-F]/;\n  }\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] === ';')\n      return i;\n    if (!xmlData[i].match(re))\n      break;\n  }\n  return -1;\n}\n\nfunction validateAmpersand(xmlData, i) {\n  // https://www.w3.org/TR/xml/#dt-charref\n  i++;\n  if (xmlData[i] === ';')\n    return -1;\n  if (xmlData[i] === '#') {\n    i++;\n    return validateNumberAmpersand(xmlData, i);\n  }\n  let count = 0;\n  for (; i < xmlData.length; i++, count++) {\n    if (xmlData[i].match(/\\w/) && count < 20)\n      continue;\n    if (xmlData[i] === ';')\n      break;\n    return -1;\n  }\n  return i;\n}\n\nfunction getErrorObject(code, message, lineNumber) {\n  return {\n    err: {\n      code: code,\n      msg: message,\n      line: lineNumber.line || lineNumber,\n      col: lineNumber.col,\n    },\n  };\n}\n\nfunction validateAttrName(attrName) {\n  return util.isName(attrName);\n}\n\n// const startsWithXML = /^xml/i;\n\nfunction validateTagName(tagname) {\n  return util.isName(tagname) /* && !tagname.match(startsWithXML) */;\n}\n\n//this function returns the line number for the character at the given index\nfunction getLineNumberForPosition(xmlData, index) {\n  const lines = xmlData.substring(0, index).split(/\\r?\\n/);\n  return {\n    line: lines.length,\n\n    // column number is last line's length + 1, because column numbering starts at 1:\n    col: lines[lines.length - 1].length + 1\n  };\n}\n\n//this function returns the position of the first character of match within attrStr\nfunction getPositionFromMatch(match) {\n  return match.startIndex + match[1].length;\n}\n","'use strict';\n\nconst nameStartChar = ':A-Za-z_\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD';\nconst nameChar = nameStartChar + '\\\\-.\\\\d\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040';\nconst nameRegexp = '[' + nameStartChar + '][' + nameChar + ']*'\nconst regexName = new RegExp('^' + nameRegexp + '$');\n\nconst getAllMatches = function(string, regex) {\n  const matches = [];\n  let match = regex.exec(string);\n  while (match) {\n    const allmatches = [];\n    allmatches.startIndex = regex.lastIndex - match[0].length;\n    const len = match.length;\n    for (let index = 0; index < len; index++) {\n      allmatches.push(match[index]);\n    }\n    matches.push(allmatches);\n    match = regex.exec(string);\n  }\n  return matches;\n};\n\nconst isName = function(string) {\n  const match = regexName.exec(string);\n  return !(match === null || typeof match === 'undefined');\n};\n\nexports.isExist = function(v) {\n  return typeof v !== 'undefined';\n};\n\nexports.isEmptyObject = function(obj) {\n  return Object.keys(obj).length === 0;\n};\n\n/**\n * Copy all the properties of a into b.\n * @param {*} target\n * @param {*} a\n */\nexports.merge = function(target, a, arrayMode) {\n  if (a) {\n    const keys = Object.keys(a); // will return an array of own properties\n    const len = keys.length; //don't make it inline\n    for (let i = 0; i < len; i++) {\n      if (arrayMode === 'strict') {\n        target[keys[i]] = [ a[keys[i]] ];\n      } else {\n        target[keys[i]] = a[keys[i]];\n      }\n    }\n  }\n};\n/* exports.merge =function (b,a){\n  return Object.assign(b,a);\n} */\n\nexports.getValue = function(v) {\n  if (exports.isExist(v)) {\n    return v;\n  } else {\n    return '';\n  }\n};\n\n// const fakeCall = function(a) {return a;};\n// const fakeCallNoReturn = function() {};\n\nexports.isName = isName;\nexports.getAllMatches = getAllMatches;\nexports.nameRegexp = nameRegexp;\n","'use strict';\n/*\n    https://tools.ietf.org/html/rfc3629\n\n    UTF8-char = UTF8-1 / UTF8-2 / UTF8-3 / UTF8-4\n\n    UTF8-1    = %x00-7F\n\n    UTF8-2    = %xC2-DF UTF8-tail\n\n    UTF8-3    = %xE0 %xA0-BF UTF8-tail\n                %xE1-EC 2( UTF8-tail )\n                %xED %x80-9F UTF8-tail\n                %xEE-EF 2( UTF8-tail )\n\n    UTF8-4    = %xF0 %x90-BF 2( UTF8-tail )\n                %xF1-F3 3( UTF8-tail )\n                %xF4 %x80-8F 2( UTF8-tail )\n\n    UTF8-tail = %x80-BF\n*/\n\n/**\n * Check if a Node.js Buffer or Uint8Array is utf-8\n *\n * @param {Buffer|Uint8Array} buf\n * @returns {boolean}\n */\nfunction isUtf8(buf) {\n    if (!buf) {\n        return false;\n    }\n\n    var i = 0, len = buf.length;\n\n    while(i < len) {\n        // UTF8-1 = %x00-7F\n        if (buf[i] <= 0x7F) {\n            i++;\n\n            continue;\n        }\n\n        // UTF8-2 = %xC2-DF UTF8-tail\n        if (buf[i] >= 0xC2 && buf[i] <= 0xDF) {\n            // if(buf[i + 1] >= 0x80 && buf[i + 1] <= 0xBF) {\n            if (buf[i + 1] >> 6 === 2) {\n                i += 2;\n\n                continue;\n            } else {\n                return false;\n            }\n        }\n\n        // UTF8-3 = %xE0 %xA0-BF UTF8-tail\n        // UTF8-3 = %xED %x80-9F UTF8-tail\n        if (\n                (\n                    (buf[i] === 0xE0 && buf[i + 1] >= 0xA0 && buf[i + 1] <= 0xBF) ||\n                    (buf[i] === 0xED && buf[i + 1] >= 0x80 && buf[i + 1] <= 0x9F)\n                ) && buf[i + 2] >> 6 === 2\n            ) {\n            i += 3;\n\n            continue;\n        }\n\n        // UTF8-3 = %xE1-EC 2( UTF8-tail )\n        // UTF8-3 = %xEE-EF 2( UTF8-tail )\n        if (\n                (\n                    (buf[i] >= 0xE1 && buf[i] <= 0xEC) ||\n                    (buf[i] >= 0xEE && buf[i] <= 0xEF)\n                ) &&\n                buf[i + 1] >> 6 === 2 &&\n                buf[i + 2] >> 6 === 2\n        ) {\n            i += 3;\n\n            continue;\n        }\n\n        // UTF8-4 = %xF0 %x90-BF 2( UTF8-tail )\n        //          %xF1-F3 3( UTF8-tail )\n        //          %xF4 %x80-8F 2( UTF8-tail )\n        if (\n                (\n                    (buf[i] === 0xF0 && buf[i + 1] >= 0x90 && buf[i + 1] <= 0xBF) ||\n                    (buf[i] >= 0xF1 && buf[i] <= 0xF3 && buf[i + 1] >> 6 === 2) ||\n                    (buf[i] === 0xF4  && buf[i + 1] >= 0x80 && buf[i + 1] <= 0x8F)\n                ) &&\n            buf[i + 2] >> 6 === 2 &&\n            buf[i + 3] >> 6 === 2\n        ) {\n            i += 4;\n\n            continue;\n        }\n\n        return false;\n    }\n\n    return true;\n}\n\nmodule.exports = isUtf8;\n","(function (factory) {\n    if (typeof exports === 'object') {\n        // Node/CommonJS\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(factory);\n    } else {\n        // Browser globals (with support for web workers)\n        var glob;\n\n        try {\n            glob = window;\n        } catch (e) {\n            glob = self;\n        }\n\n        glob.SparkMD5 = factory();\n    }\n}(function (undefined) {\n\n    'use strict';\n\n    /*\n     * Fastest md5 implementation around (JKM md5).\n     * Credits: Joseph Myers\n     *\n     * @see http://www.myersdaily.org/joseph/javascript/md5-text.html\n     * @see http://jsperf.com/md5-shootout/7\n     */\n\n    /* this function is much faster,\n      so if possible we use it. Some IEs\n      are the only ones I know of that\n      need the idiotic second function,\n      generated by an if clause.  */\n    var add32 = function (a, b) {\n        return (a + b) & 0xFFFFFFFF;\n    },\n        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n\n\n    function cmn(q, a, b, x, s, t) {\n        a = add32(add32(a, q), add32(x, t));\n        return add32((a << s) | (a >>> (32 - s)), b);\n    }\n\n    function md5cycle(x, k) {\n        var a = x[0],\n            b = x[1],\n            c = x[2],\n            d = x[3];\n\n        a += (b & c | ~b & d) + k[0] - 680876936 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[1] - 389564586 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[2] + 606105819 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[3] - 1044525330 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[4] - 176418897 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[5] + 1200080426 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[6] - 1473231341 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[7] - 45705983 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[8] + 1770035416 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[9] - 1958414417 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[10] - 42063 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[11] - 1990404162 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[12] + 1804603682 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[13] - 40341101 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[14] - 1502002290 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[15] + 1236535329 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n\n        a += (b & d | c & ~d) + k[1] - 165796510 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[6] - 1069501632 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[11] + 643717713 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[0] - 373897302 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[5] - 701558691 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[10] + 38016083 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[15] - 660478335 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[4] - 405537848 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[9] + 568446438 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[14] - 1019803690 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[3] - 187363961 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[8] + 1163531501 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[13] - 1444681467 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[2] - 51403784 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[7] + 1735328473 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[12] - 1926607734 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n\n        a += (b ^ c ^ d) + k[5] - 378558 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[8] - 2022574463 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[11] + 1839030562 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[14] - 35309556 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[1] - 1530992060 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[4] + 1272893353 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[7] - 155497632 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[10] - 1094730640 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[13] + 681279174 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[0] - 358537222 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[3] - 722521979 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[6] + 76029189 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[9] - 640364487 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[12] - 421815835 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[15] + 530742520 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[2] - 995338651 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n\n        a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;\n        b  = (b << 21 | b >>> 11) + c | 0;\n\n        x[0] = a + x[0] | 0;\n        x[1] = b + x[1] | 0;\n        x[2] = c + x[2] | 0;\n        x[3] = d + x[3] | 0;\n    }\n\n    function md5blk(s) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n        }\n        return md5blks;\n    }\n\n    function md5blk_array(a) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n        }\n        return md5blks;\n    }\n\n    function md51(s) {\n        var n = s.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk(s.substring(i - 64, i)));\n        }\n        s = s.substring(i - 64);\n        length = s.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\n        }\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n        return state;\n    }\n\n    function md51_array(a) {\n        var n = a.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n        }\n\n        // Not sure if it is a bug, however IE10 will always produce a sub array of length 1\n        // containing the last element of the parent array if the sub array specified starts\n        // beyond the length of the parent array - weird.\n        // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue\n        a = (i - 64) < n ? a.subarray(i - 64) : new Uint8Array(0);\n\n        length = a.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= a[i] << ((i % 4) << 3);\n        }\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n\n        return state;\n    }\n\n    function rhex(n) {\n        var s = '',\n            j;\n        for (j = 0; j < 4; j += 1) {\n            s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\n        }\n        return s;\n    }\n\n    function hex(x) {\n        var i;\n        for (i = 0; i < x.length; i += 1) {\n            x[i] = rhex(x[i]);\n        }\n        return x.join('');\n    }\n\n    // In some cases the fast add32 function cannot be used..\n    if (hex(md51('hello')) !== '5d41402abc4b2a76b9719d911017c592') {\n        add32 = function (x, y) {\n            var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n                msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n            return (msw << 16) | (lsw & 0xFFFF);\n        };\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * ArrayBuffer slice polyfill.\n     *\n     * @see https://github.com/ttaubert/node-arraybuffer-slice\n     */\n\n    if (typeof ArrayBuffer !== 'undefined' && !ArrayBuffer.prototype.slice) {\n        (function () {\n            function clamp(val, length) {\n                val = (val | 0) || 0;\n\n                if (val < 0) {\n                    return Math.max(val + length, 0);\n                }\n\n                return Math.min(val, length);\n            }\n\n            ArrayBuffer.prototype.slice = function (from, to) {\n                var length = this.byteLength,\n                    begin = clamp(from, length),\n                    end = length,\n                    num,\n                    target,\n                    targetArray,\n                    sourceArray;\n\n                if (to !== undefined) {\n                    end = clamp(to, length);\n                }\n\n                if (begin > end) {\n                    return new ArrayBuffer(0);\n                }\n\n                num = end - begin;\n                target = new ArrayBuffer(num);\n                targetArray = new Uint8Array(target);\n\n                sourceArray = new Uint8Array(this, begin, num);\n                targetArray.set(sourceArray);\n\n                return target;\n            };\n        })();\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * Helpers.\n     */\n\n    function toUtf8(str) {\n        if (/[\\u0080-\\uFFFF]/.test(str)) {\n            str = unescape(encodeURIComponent(str));\n        }\n\n        return str;\n    }\n\n    function utf8Str2ArrayBuffer(str, returnUInt8Array) {\n        var length = str.length,\n           buff = new ArrayBuffer(length),\n           arr = new Uint8Array(buff),\n           i;\n\n        for (i = 0; i < length; i += 1) {\n            arr[i] = str.charCodeAt(i);\n        }\n\n        return returnUInt8Array ? arr : buff;\n    }\n\n    function arrayBuffer2Utf8Str(buff) {\n        return String.fromCharCode.apply(null, new Uint8Array(buff));\n    }\n\n    function concatenateArrayBuffers(first, second, returnUInt8Array) {\n        var result = new Uint8Array(first.byteLength + second.byteLength);\n\n        result.set(new Uint8Array(first));\n        result.set(new Uint8Array(second), first.byteLength);\n\n        return returnUInt8Array ? result : result.buffer;\n    }\n\n    function hexToBinaryString(hex) {\n        var bytes = [],\n            length = hex.length,\n            x;\n\n        for (x = 0; x < length - 1; x += 2) {\n            bytes.push(parseInt(hex.substr(x, 2), 16));\n        }\n\n        return String.fromCharCode.apply(String, bytes);\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation.\n     *\n     * Use this class to perform an incremental md5, otherwise use the\n     * static methods instead.\n     */\n\n    function SparkMD5() {\n        // call reset to init the instance\n        this.reset();\n    }\n\n    /**\n     * Appends a string.\n     * A conversion will be applied if an utf8 string is detected.\n     *\n     * @param {String} str The string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.append = function (str) {\n        // Converts the string to utf8 bytes if necessary\n        // Then append as binary\n        this.appendBinary(toUtf8(str));\n\n        return this;\n    };\n\n    /**\n     * Appends a binary string.\n     *\n     * @param {String} contents The binary string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.appendBinary = function (contents) {\n        this._buff += contents;\n        this._length += contents.length;\n\n        var length = this._buff.length,\n            i;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));\n        }\n\n        this._buff = this._buff.substring(i - 64);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            i,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff.charCodeAt(i) << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.reset = function () {\n        this._buff = '';\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.prototype.getState = function () {\n        return {\n            buff: this._buff,\n            length: this._length,\n            hash: this._hash\n        };\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.setState = function (state) {\n        this._buff = state.buff;\n        this._length = state.length;\n        this._hash = state.hash;\n\n        return this;\n    };\n\n    /**\n     * Releases memory used by the incremental buffer and other additional\n     * resources. If you plan to use the instance again, use reset instead.\n     */\n    SparkMD5.prototype.destroy = function () {\n        delete this._hash;\n        delete this._buff;\n        delete this._length;\n    };\n\n    /**\n     * Finish the final calculation based on the tail.\n     *\n     * @param {Array}  tail   The tail (will be modified)\n     * @param {Number} length The length of the remaining buffer\n     */\n    SparkMD5.prototype._finish = function (tail, length) {\n        var i = length,\n            tmp,\n            lo,\n            hi;\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(this._hash, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Do the final computation based on the tail and length\n        // Beware that the final length may not fit in 32 bits so we take care of that\n        tmp = this._length * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(this._hash, tail);\n    };\n\n    /**\n     * Performs the md5 hash on a string.\n     * A conversion will be applied if utf8 string is detected.\n     *\n     * @param {String}  str The string\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hash = function (str, raw) {\n        // Converts the string to utf8 bytes if necessary\n        // Then compute it using the binary function\n        return SparkMD5.hashBinary(toUtf8(str), raw);\n    };\n\n    /**\n     * Performs the md5 hash on a binary string.\n     *\n     * @param {String}  content The binary string\n     * @param {Boolean} raw     True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hashBinary = function (content, raw) {\n        var hash = md51(content),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation for array buffers.\n     *\n     * Use this class to perform an incremental md5 ONLY for array buffers.\n     */\n    SparkMD5.ArrayBuffer = function () {\n        // call reset to init the instance\n        this.reset();\n    };\n\n    /**\n     * Appends an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array to be appended\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.append = function (arr) {\n        var buff = concatenateArrayBuffers(this._buff.buffer, arr, true),\n            length = buff.length,\n            i;\n\n        this._length += arr.byteLength;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));\n        }\n\n        this._buff = (i - 64) < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            i,\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff[i] << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.reset = function () {\n        this._buff = new Uint8Array(0);\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.ArrayBuffer.prototype.getState = function () {\n        var state = SparkMD5.prototype.getState.call(this);\n\n        // Convert buffer to a string\n        state.buff = arrayBuffer2Utf8Str(state.buff);\n\n        return state;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.setState = function (state) {\n        // Convert string to buffer\n        state.buff = utf8Str2ArrayBuffer(state.buff, true);\n\n        return SparkMD5.prototype.setState.call(this, state);\n    };\n\n    SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n\n    SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n\n    /**\n     * Performs the md5 hash on an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array buffer\n     * @param {Boolean}     raw True to get the raw string, false to get the hex one\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.hash = function (arr, raw) {\n        var hash = md51_array(new Uint8Array(arr)),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    return SparkMD5;\n}));\n","'use strict';\n\nconst EventEmitter = require('eventemitter3');\n\n// Port of lower_bound from http://en.cppreference.com/w/cpp/algorithm/lower_bound\n// Used to compute insertion index to keep queue sorted after insertion\nfunction lowerBound(array, value, comp) {\n\tlet first = 0;\n\tlet count = array.length;\n\n\twhile (count > 0) {\n\t\tconst step = (count / 2) | 0;\n\t\tlet it = first + step;\n\n\t\tif (comp(array[it], value) <= 0) {\n\t\t\tfirst = ++it;\n\t\t\tcount -= step + 1;\n\t\t} else {\n\t\t\tcount = step;\n\t\t}\n\t}\n\n\treturn first;\n}\n\nclass PriorityQueue {\n\tconstructor() {\n\t\tthis._queue = [];\n\t}\n\n\tenqueue(run, options) {\n\t\toptions = Object.assign({\n\t\t\tpriority: 0\n\t\t}, options);\n\n\t\tconst element = {priority: options.priority, run};\n\n\t\tif (this.size && this._queue[this.size - 1].priority >= options.priority) {\n\t\t\tthis._queue.push(element);\n\t\t\treturn;\n\t\t}\n\n\t\tconst index = lowerBound(this._queue, element, (a, b) => b.priority - a.priority);\n\t\tthis._queue.splice(index, 0, element);\n\t}\n\n\tdequeue() {\n\t\treturn this._queue.shift().run;\n\t}\n\n\tget size() {\n\t\treturn this._queue.length;\n\t}\n}\n\nclass PQueue extends EventEmitter {\n\tconstructor(options) {\n\t\tsuper();\n\n\t\toptions = Object.assign({\n\t\t\tcarryoverConcurrencyCount: false,\n\t\t\tintervalCap: Infinity,\n\t\t\tinterval: 0,\n\t\t\tconcurrency: Infinity,\n\t\t\tautoStart: true,\n\t\t\tqueueClass: PriorityQueue\n\t\t}, options);\n\n\t\tif (!(typeof options.concurrency === 'number' && options.concurrency >= 1)) {\n\t\t\tthrow new TypeError(`Expected \\`concurrency\\` to be a number from 1 and up, got \\`${options.concurrency}\\` (${typeof options.concurrency})`);\n\t\t}\n\n\t\tif (!(typeof options.intervalCap === 'number' && options.intervalCap >= 1)) {\n\t\t\tthrow new TypeError(`Expected \\`intervalCap\\` to be a number from 1 and up, got \\`${options.intervalCap}\\` (${typeof options.intervalCap})`);\n\t\t}\n\n\t\tif (!(Number.isFinite(options.interval) && options.interval >= 0)) {\n\t\t\tthrow new TypeError(`Expected \\`interval\\` to be a finite number >= 0, got \\`${options.interval}\\` (${typeof options.interval})`);\n\t\t}\n\n\t\tthis._carryoverConcurrencyCount = options.carryoverConcurrencyCount;\n\t\tthis._isIntervalIgnored = options.intervalCap === Infinity || options.interval === 0;\n\t\tthis._intervalCount = 0;\n\t\tthis._intervalCap = options.intervalCap;\n\t\tthis._interval = options.interval;\n\t\tthis._intervalId = null;\n\t\tthis._intervalEnd = 0;\n\t\tthis._timeoutId = null;\n\n\t\tthis.queue = new options.queueClass(); // eslint-disable-line new-cap\n\t\tthis._queueClass = options.queueClass;\n\t\tthis._pendingCount = 0;\n\t\tthis._concurrency = options.concurrency;\n\t\tthis._isPaused = options.autoStart === false;\n\t\tthis._resolveEmpty = () => {};\n\t\tthis._resolveIdle = () => {};\n\t}\n\n\tget _doesIntervalAllowAnother() {\n\t\treturn this._isIntervalIgnored || this._intervalCount < this._intervalCap;\n\t}\n\n\tget _doesConcurrentAllowAnother() {\n\t\treturn this._pendingCount < this._concurrency;\n\t}\n\n\t_next() {\n\t\tthis._pendingCount--;\n\t\tthis._tryToStartAnother();\n\t}\n\n\t_resolvePromises() {\n\t\tthis._resolveEmpty();\n\t\tthis._resolveEmpty = () => {};\n\n\t\tif (this._pendingCount === 0) {\n\t\t\tthis._resolveIdle();\n\t\t\tthis._resolveIdle = () => {};\n\t\t}\n\t}\n\n\t_onResumeInterval() {\n\t\tthis._onInterval();\n\t\tthis._initializeIntervalIfNeeded();\n\t\tthis._timeoutId = null;\n\t}\n\n\t_intervalPaused() {\n\t\tconst now = Date.now();\n\n\t\tif (this._intervalId === null) {\n\t\t\tconst delay = this._intervalEnd - now;\n\t\t\tif (delay < 0) {\n\t\t\t\t// Act as the interval was done\n\t\t\t\t// We don't need to resume it here,\n\t\t\t\t// because it'll be resumed on line 160\n\t\t\t\tthis._intervalCount = (this._carryoverConcurrencyCount) ? this._pendingCount : 0;\n\t\t\t} else {\n\t\t\t\t// Act as the interval is pending\n\t\t\t\tif (this._timeoutId === null) {\n\t\t\t\t\tthis._timeoutId = setTimeout(() => this._onResumeInterval(), delay);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t_tryToStartAnother() {\n\t\tif (this.queue.size === 0) {\n\t\t\t// We can clear the interval (\"pause\")\n\t\t\t// because we can redo it later (\"resume\")\n\t\t\tclearInterval(this._intervalId);\n\t\t\tthis._intervalId = null;\n\n\t\t\tthis._resolvePromises();\n\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this._isPaused) {\n\t\t\tconst canInitializeInterval = !this._intervalPaused();\n\t\t\tif (this._doesIntervalAllowAnother && this._doesConcurrentAllowAnother) {\n\t\t\t\tthis.emit('active');\n\t\t\t\tthis.queue.dequeue()();\n\t\t\t\tif (canInitializeInterval) {\n\t\t\t\t\tthis._initializeIntervalIfNeeded();\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t_initializeIntervalIfNeeded() {\n\t\tif (this._isIntervalIgnored || this._intervalId !== null) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._intervalId = setInterval(() => this._onInterval(), this._interval);\n\t\tthis._intervalEnd = Date.now() + this._interval;\n\t}\n\n\t_onInterval() {\n\t\tif (this._intervalCount === 0 && this._pendingCount === 0) {\n\t\t\tclearInterval(this._intervalId);\n\t\t\tthis._intervalId = null;\n\t\t}\n\n\t\tthis._intervalCount = (this._carryoverConcurrencyCount) ? this._pendingCount : 0;\n\t\twhile (this._tryToStartAnother()) {} // eslint-disable-line no-empty\n\t}\n\n\tadd(fn, options) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst run = () => {\n\t\t\t\tthis._pendingCount++;\n\t\t\t\tthis._intervalCount++;\n\n\t\t\t\ttry {\n\t\t\t\t\tPromise.resolve(fn()).then(\n\t\t\t\t\t\tval => {\n\t\t\t\t\t\t\tresolve(val);\n\t\t\t\t\t\t\tthis._next();\n\t\t\t\t\t\t},\n\t\t\t\t\t\terr => {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\tthis._next();\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} catch (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t\tthis._next();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.queue.enqueue(run, options);\n\t\t\tthis._tryToStartAnother();\n\t\t});\n\t}\n\n\taddAll(fns, options) {\n\t\treturn Promise.all(fns.map(fn => this.add(fn, options)));\n\t}\n\n\tstart() {\n\t\tif (!this._isPaused) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isPaused = false;\n\t\twhile (this._tryToStartAnother()) {} // eslint-disable-line no-empty\n\t}\n\n\tpause() {\n\t\tthis._isPaused = true;\n\t}\n\n\tclear() {\n\t\tthis.queue = new this._queueClass();\n\t}\n\n\tonEmpty() {\n\t\t// Instantly resolve if the queue is empty\n\t\tif (this.queue.size === 0) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise(resolve => {\n\t\t\tconst existingResolve = this._resolveEmpty;\n\t\t\tthis._resolveEmpty = () => {\n\t\t\t\texistingResolve();\n\t\t\t\tresolve();\n\t\t\t};\n\t\t});\n\t}\n\n\tonIdle() {\n\t\t// Instantly resolve if none pending and if nothing else is queued\n\t\tif (this._pendingCount === 0 && this.queue.size === 0) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise(resolve => {\n\t\t\tconst existingResolve = this._resolveIdle;\n\t\t\tthis._resolveIdle = () => {\n\t\t\t\texistingResolve();\n\t\t\t\tresolve();\n\t\t\t};\n\t\t});\n\t}\n\n\tget size() {\n\t\treturn this.queue.size;\n\t}\n\n\tget pending() {\n\t\treturn this._pendingCount;\n\t}\n\n\tget isPaused() {\n\t\treturn this._isPaused;\n\t}\n}\n\nmodule.exports = PQueue;\nmodule.exports.default = PQueue;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n","const defaultFunctionName = '<anonymous>';\n\n/**\n * Safely extract function name from itself\n */\nexport function getFunctionName(fn: unknown): string {\n  try {\n    if (!fn || typeof fn !== 'function') {\n      return defaultFunctionName;\n    }\n    return fn.name || defaultFunctionName;\n  } catch (e) {\n    // Just accessing custom props in some Selenium environments\n    // can cause a \"Permission denied\" exception (see raven-js#495).\n    return defaultFunctionName;\n  }\n}\n","/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n/**\n * Memo class used for decycle json objects. Uses WeakSet if available otherwise array.\n */\nexport class Memo {\n  /** Determines if WeakSet is available */\n  private readonly _hasWeakSet: boolean;\n  /** Either WeakSet or Array */\n  private readonly _inner: any;\n\n  public constructor() {\n    this._hasWeakSet = typeof WeakSet === 'function';\n    this._inner = this._hasWeakSet ? new WeakSet() : [];\n  }\n\n  /**\n   * Sets obj to remember.\n   * @param obj Object to remember\n   */\n  public memoize(obj: any): boolean {\n    if (this._hasWeakSet) {\n      if (this._inner.has(obj)) {\n        return true;\n      }\n      this._inner.add(obj);\n      return false;\n    }\n    // eslint-disable-next-line @typescript-eslint/prefer-for-of\n    for (let i = 0; i < this._inner.length; i++) {\n      const value = this._inner[i];\n      if (value === obj) {\n        return true;\n      }\n    }\n    this._inner.push(obj);\n    return false;\n  }\n\n  /**\n   * Removes object from internal storage.\n   * @param obj Object to forget\n   */\n  public unmemoize(obj: any): void {\n    if (this._hasWeakSet) {\n      this._inner.delete(obj);\n    } else {\n      for (let i = 0; i < this._inner.length; i++) {\n        if (this._inner[i] === obj) {\n          this._inner.splice(i, 1);\n          break;\n        }\n      }\n    }\n  }\n}\n","'use strict';\n\nvar urilib = require('url');\n\nvar attribute = require('./attribute');\nvar helpers = require('./helpers');\nvar scanSchema = require('./scan').scan;\nvar ValidatorResult = helpers.ValidatorResult;\nvar SchemaError = helpers.SchemaError;\nvar SchemaContext = helpers.SchemaContext;\n//var anonymousBase = 'vnd.jsonschema:///';\nvar anonymousBase = '/';\n\n/**\n * Creates a new Validator object\n * @name Validator\n * @constructor\n */\nvar Validator = function Validator () {\n  // Allow a validator instance to override global custom formats or to have their\n  // own custom formats.\n  this.customFormats = Object.create(Validator.prototype.customFormats);\n  this.schemas = {};\n  this.unresolvedRefs = [];\n\n  // Use Object.create to make this extensible without Validator instances stepping on each other's toes.\n  this.types = Object.create(types);\n  this.attributes = Object.create(attribute.validators);\n};\n\n// Allow formats to be registered globally.\nValidator.prototype.customFormats = {};\n\n// Hint at the presence of a property\nValidator.prototype.schemas = null;\nValidator.prototype.types = null;\nValidator.prototype.attributes = null;\nValidator.prototype.unresolvedRefs = null;\n\n/**\n * Adds a schema with a certain urn to the Validator instance.\n * @param schema\n * @param urn\n * @return {Object}\n */\nValidator.prototype.addSchema = function addSchema (schema, base) {\n  var self = this;\n  if (!schema) {\n    return null;\n  }\n  var scan = scanSchema(base||anonymousBase, schema);\n  var ourUri = base || schema.id;\n  for(var uri in scan.id){\n    this.schemas[uri] = scan.id[uri];\n  }\n  for(var uri in scan.ref){\n    this.unresolvedRefs.push(uri);\n  }\n  this.unresolvedRefs = this.unresolvedRefs.filter(function(uri){\n    return typeof self.schemas[uri]==='undefined';\n  });\n  return this.schemas[ourUri];\n};\n\nValidator.prototype.addSubSchemaArray = function addSubSchemaArray(baseuri, schemas) {\n  if(!(schemas instanceof Array)) return;\n  for(var i=0; i<schemas.length; i++){\n    this.addSubSchema(baseuri, schemas[i]);\n  }\n};\n\nValidator.prototype.addSubSchemaObject = function addSubSchemaArray(baseuri, schemas) {\n  if(!schemas || typeof schemas!='object') return;\n  for(var p in schemas){\n    this.addSubSchema(baseuri, schemas[p]);\n  }\n};\n\n\n\n/**\n * Sets all the schemas of the Validator instance.\n * @param schemas\n */\nValidator.prototype.setSchemas = function setSchemas (schemas) {\n  this.schemas = schemas;\n};\n\n/**\n * Returns the schema of a certain urn\n * @param urn\n */\nValidator.prototype.getSchema = function getSchema (urn) {\n  return this.schemas[urn];\n};\n\n/**\n * Validates instance against the provided schema\n * @param instance\n * @param schema\n * @param [options]\n * @param [ctx]\n * @return {Array}\n */\nValidator.prototype.validate = function validate (instance, schema, options, ctx) {\n  if (!options) {\n    options = {};\n  }\n  var propertyName = options.propertyName || 'instance';\n  // This will work so long as the function at uri.resolve() will resolve a relative URI to a relative URI\n  var base = urilib.resolve(options.base||anonymousBase, schema.id||'');\n  if(!ctx){\n    ctx = new SchemaContext(schema, options, propertyName, base, Object.create(this.schemas));\n    if (!ctx.schemas[base]) {\n      ctx.schemas[base] = schema;\n    }\n    var found = scanSchema(base, schema);\n    for(var n in found.id){\n      var sch = found.id[n];\n      ctx.schemas[n] = sch;\n    }\n  }\n  if (schema) {\n    var result = this.validateSchema(instance, schema, options, ctx);\n    if (!result) {\n      throw new Error('Result undefined');\n    }\n    return result;\n  }\n  throw new SchemaError('no schema specified', schema);\n};\n\n/**\n* @param Object schema\n* @return mixed schema uri or false\n*/\nfunction shouldResolve(schema) {\n  var ref = (typeof schema === 'string') ? schema : schema.$ref;\n  if (typeof ref=='string') return ref;\n  return false;\n}\n\n/**\n * Validates an instance against the schema (the actual work horse)\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @private\n * @return {ValidatorResult}\n */\nValidator.prototype.validateSchema = function validateSchema (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n\n    // Support for the true/false schemas\n  if(typeof schema==='boolean') {\n    if(schema===true){\n      // `true` is always valid\n      schema = {};\n    }else if(schema===false){\n      // `false` is always invalid\n      schema = {type: []};\n    }\n  }else if(!schema){\n    // This might be a string\n    throw new Error(\"schema is undefined\");\n  }\n\n  if (schema['extends']) {\n    if (schema['extends'] instanceof Array) {\n      var schemaobj = {schema: schema, ctx: ctx};\n      schema['extends'].forEach(this.schemaTraverser.bind(this, schemaobj));\n      schema = schemaobj.schema;\n      schemaobj.schema = null;\n      schemaobj.ctx = null;\n      schemaobj = null;\n    } else {\n      schema = helpers.deepMerge(schema, this.superResolve(schema['extends'], ctx));\n    }\n  }\n\n  // If passed a string argument, load that schema URI\n  var switchSchema;\n  if (switchSchema = shouldResolve(schema)) {\n    var resolved = this.resolve(schema, switchSchema, ctx);\n    var subctx = new SchemaContext(resolved.subschema, options, ctx.propertyPath, resolved.switchSchema, ctx.schemas);\n    return this.validateSchema(instance, resolved.subschema, options, subctx);\n  }\n\n  var skipAttributes = options && options.skipAttributes || [];\n  // Validate each schema attribute against the instance\n  for (var key in schema) {\n    if (!attribute.ignoreProperties[key] && skipAttributes.indexOf(key) < 0) {\n      var validatorErr = null;\n      var validator = this.attributes[key];\n      if (validator) {\n        validatorErr = validator.call(this, instance, schema, options, ctx);\n      } else if (options.allowUnknownAttributes === false) {\n        // This represents an error with the schema itself, not an invalid instance\n        throw new SchemaError(\"Unsupported attribute: \" + key, schema);\n      }\n      if (validatorErr) {\n        result.importErrors(validatorErr);\n      }\n    }\n  }\n\n  if (typeof options.rewrite == 'function') {\n    var value = options.rewrite.call(this, instance, schema, options, ctx);\n    result.instance = value;\n  }\n  return result;\n};\n\n/**\n* @private\n* @param Object schema\n* @param SchemaContext ctx\n* @returns Object schema or resolved schema\n*/\nValidator.prototype.schemaTraverser = function schemaTraverser (schemaobj, s) {\n  schemaobj.schema = helpers.deepMerge(schemaobj.schema, this.superResolve(s, schemaobj.ctx));\n}\n\n/**\n* @private\n* @param Object schema\n* @param SchemaContext ctx\n* @returns Object schema or resolved schema\n*/\nValidator.prototype.superResolve = function superResolve (schema, ctx) {\n  var ref;\n  if(ref = shouldResolve(schema)) {\n    return this.resolve(schema, ref, ctx).subschema;\n  }\n  return schema;\n}\n\n/**\n* @private\n* @param Object schema\n* @param Object switchSchema\n* @param SchemaContext ctx\n* @return Object resolved schemas {subschema:String, switchSchema: String}\n* @throws SchemaError\n*/\nValidator.prototype.resolve = function resolve (schema, switchSchema, ctx) {\n  switchSchema = ctx.resolve(switchSchema);\n  // First see if the schema exists under the provided URI\n  if (ctx.schemas[switchSchema]) {\n    return {subschema: ctx.schemas[switchSchema], switchSchema: switchSchema};\n  }\n  // Else try walking the property pointer\n  var parsed = urilib.parse(switchSchema);\n  var fragment = parsed && parsed.hash;\n  var document = fragment && fragment.length && switchSchema.substr(0, switchSchema.length - fragment.length);\n  if (!document || !ctx.schemas[document]) {\n    throw new SchemaError(\"no such schema <\" + switchSchema + \">\", schema);\n  }\n  var subschema = helpers.objectGetPath(ctx.schemas[document], fragment.substr(1));\n  if(subschema===undefined){\n    throw new SchemaError(\"no such schema \" + fragment + \" located in <\" + document + \">\", schema);\n  }\n  return {subschema: subschema, switchSchema: switchSchema};\n};\n\n/**\n * Tests whether the instance if of a certain type.\n * @private\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @param type\n * @return {boolean}\n */\nValidator.prototype.testType = function validateType (instance, schema, options, ctx, type) {\n  if (typeof this.types[type] == 'function') {\n    return this.types[type].call(this, instance);\n  }\n  if (type && typeof type == 'object') {\n    var res = this.validateSchema(instance, type, options, ctx);\n    return res === undefined || !(res && res.errors.length);\n  }\n  // Undefined or properties not on the list are acceptable, same as not being defined\n  return true;\n};\n\nvar types = Validator.prototype.types = {};\ntypes.string = function testString (instance) {\n  return typeof instance == 'string';\n};\ntypes.number = function testNumber (instance) {\n  // isFinite returns false for NaN, Infinity, and -Infinity\n  return typeof instance == 'number' && isFinite(instance);\n};\ntypes.integer = function testInteger (instance) {\n  return (typeof instance == 'number') && instance % 1 === 0;\n};\ntypes.boolean = function testBoolean (instance) {\n  return typeof instance == 'boolean';\n};\ntypes.array = function testArray (instance) {\n  return Array.isArray(instance);\n};\ntypes['null'] = function testNull (instance) {\n  return instance === null;\n};\ntypes.date = function testDate (instance) {\n  return instance instanceof Date;\n};\ntypes.any = function testAny (instance) {\n  return true;\n};\ntypes.object = function testObject (instance) {\n  // TODO: fix this - see #15\n  return instance && (typeof instance) === 'object' && !(instance instanceof Array) && !(instance instanceof Date);\n};\n\nmodule.exports = Validator;\n","/*! https://mths.be/punycode v1.3.2 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * http://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.3.2',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","'use strict';\n\nvar helpers = require('./helpers');\n\n/** @type ValidatorResult */\nvar ValidatorResult = helpers.ValidatorResult;\n/** @type SchemaError */\nvar SchemaError = helpers.SchemaError;\n\nvar attribute = {};\n\nattribute.ignoreProperties = {\n  // informative properties\n  'id': true,\n  'default': true,\n  'description': true,\n  'title': true,\n  // arguments to other properties\n  'exclusiveMinimum': true,\n  'exclusiveMaximum': true,\n  'additionalItems': true,\n  // special-handled properties\n  '$schema': true,\n  '$ref': true,\n  'extends': true\n};\n\n/**\n * @name validators\n */\nvar validators = attribute.validators = {};\n\n/**\n * Validates whether the instance if of a certain type\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {ValidatorResult|null}\n */\nvalidators.type = function validateType (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var types = Array.isArray(schema.type) ? schema.type : [schema.type];\n  if (!types.some(this.testType.bind(this, instance, schema, options, ctx))) {\n    var list = types.map(function (v) {\n      return v.id && ('<' + v.id + '>') || (v+'');\n    });\n    result.addError({\n      name: 'type',\n      argument: list,\n      message: \"is not of a type(s) \" + list,\n    });\n  }\n  return result;\n};\n\nfunction testSchemaNoThrow(instance, options, ctx, callback, schema){\n  var throwError = options.throwError;\n  options.throwError = false;\n  var res = this.validateSchema(instance, schema, options, ctx);\n  options.throwError = throwError;\n\n  if (! res.valid && callback instanceof Function) {\n    callback(res);\n  }\n  return res.valid;\n}\n\n/**\n * Validates whether the instance matches some of the given schemas\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {ValidatorResult|null}\n */\nvalidators.anyOf = function validateAnyOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var inner = new ValidatorResult(instance, schema, options, ctx);\n  if (!Array.isArray(schema.anyOf)){\n    throw new SchemaError(\"anyOf must be an array\");\n  }\n  if (!schema.anyOf.some(\n    testSchemaNoThrow.bind(\n      this, instance, options, ctx, function(res){inner.importErrors(res);}\n      ))) {\n    var list = schema.anyOf.map(function (v, i) {\n      return (v.id && ('<' + v.id + '>')) || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n    });\n    if (options.nestedErrors) {\n      result.importErrors(inner);\n    }\n    result.addError({\n      name: 'anyOf',\n      argument: list,\n      message: \"is not any of \" + list.join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance matches every given schema\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.allOf = function validateAllOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema.allOf)){\n    throw new SchemaError(\"allOf must be an array\");\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var self = this;\n  schema.allOf.forEach(function(v, i){\n    var valid = self.validateSchema(instance, v, options, ctx);\n    if(!valid.valid){\n      var msg = (v.id && ('<' + v.id + '>')) || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n      result.addError({\n        name: 'allOf',\n        argument: { id: msg, length: valid.errors.length, valid: valid },\n        message: 'does not match allOf schema ' + msg + ' with ' + valid.errors.length + ' error[s]:',\n      });\n      result.importErrors(valid);\n    }\n  });\n  return result;\n};\n\n/**\n * Validates whether the instance matches exactly one of the given schemas\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.oneOf = function validateOneOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema.oneOf)){\n    throw new SchemaError(\"oneOf must be an array\");\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var inner = new ValidatorResult(instance, schema, options, ctx);\n  var count = schema.oneOf.filter(\n    testSchemaNoThrow.bind(\n      this, instance, options, ctx, function(res) {inner.importErrors(res);}\n      ) ).length;\n  var list = schema.oneOf.map(function (v, i) {\n    return (v.id && ('<' + v.id + '>')) || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n  });\n  if (count!==1) {\n    if (options.nestedErrors) {\n      result.importErrors(inner);\n    }\n    result.addError({\n      name: 'oneOf',\n      argument: list,\n      message: \"is not exactly one from \" + list.join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates properties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.properties = function validateProperties (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var properties = schema.properties || {};\n  for (var property in properties) {\n    if (typeof options.preValidateProperty == 'function') {\n      options.preValidateProperty(instance, property, properties[property], options, ctx);\n    }\n\n    var prop = Object.hasOwnProperty.call(instance, property) ? instance[property] : undefined;\n    var res = this.validateSchema(prop, properties[property], options, ctx.makeChild(properties[property], property));\n    if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n    result.importErrors(res);\n  }\n  return result;\n};\n\n/**\n * Test a specific property within in instance against the additionalProperties schema attribute\n * This ignores properties with definitions in the properties schema attribute, but no other attributes.\n * If too many more types of property-existance tests pop up they may need their own class of tests (like `type` has)\n * @private\n * @return {boolean}\n */\nfunction testAdditionalProperty (instance, schema, options, ctx, property, result) {\n  if(!this.types.object(instance)) return;\n  if (schema.properties && schema.properties[property] !== undefined) {\n    return;\n  }\n  if (schema.additionalProperties === false) {\n    result.addError({\n      name: 'additionalProperties',\n      argument: property,\n      message: \"additionalProperty \" + JSON.stringify(property) + \" exists in instance when not allowed\",\n    });\n  } else {\n    var additionalProperties = schema.additionalProperties || {};\n\n    if (typeof options.preValidateProperty == 'function') {\n      options.preValidateProperty(instance, property, additionalProperties, options, ctx);\n    }\n\n    var res = this.validateSchema(instance[property], additionalProperties, options, ctx.makeChild(additionalProperties, property));\n    if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n    result.importErrors(res);\n  }\n}\n\n/**\n * Validates patternProperties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.patternProperties = function validatePatternProperties (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var patternProperties = schema.patternProperties || {};\n\n  for (var property in instance) {\n    var test = true;\n    for (var pattern in patternProperties) {\n      var expr = new RegExp(pattern);\n      if (!expr.test(property)) {\n        continue;\n      }\n      test = false;\n\n      if (typeof options.preValidateProperty == 'function') {\n        options.preValidateProperty(instance, property, patternProperties[pattern], options, ctx);\n      }\n\n      var res = this.validateSchema(instance[property], patternProperties[pattern], options, ctx.makeChild(patternProperties[pattern], property));\n      if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n      result.importErrors(res);\n    }\n    if (test) {\n      testAdditionalProperty.call(this, instance, schema, options, ctx, property, result);\n    }\n  }\n\n  return result;\n};\n\n/**\n * Validates additionalProperties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.additionalProperties = function validateAdditionalProperties (instance, schema, options, ctx) {\n  if(!this.types.object(instance)) return;\n  // if patternProperties is defined then we'll test when that one is called instead\n  if (schema.patternProperties) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  for (var property in instance) {\n    testAdditionalProperty.call(this, instance, schema, options, ctx, property, result);\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at least of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minProperties = function validateMinProperties (instance, schema, options, ctx) {\n  if (!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var keys = Object.keys(instance);\n  if (!(keys.length >= schema.minProperties)) {\n    result.addError({\n      name: 'minProperties',\n      argument: schema.minProperties,\n      message: \"does not meet minimum property length of \" + schema.minProperties,\n    })\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at most of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxProperties = function validateMaxProperties (instance, schema, options, ctx) {\n  if (!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var keys = Object.keys(instance);\n  if (!(keys.length <= schema.maxProperties)) {\n    result.addError({\n      name: 'maxProperties',\n      argument: schema.maxProperties,\n      message: \"does not meet maximum property length of \" + schema.maxProperties,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates items when instance is an array\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.items = function validateItems (instance, schema, options, ctx) {\n  var self = this;\n  if (!this.types.array(instance)) return;\n  if (!schema.items) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  instance.every(function (value, i) {\n    var items = Array.isArray(schema.items) ? (schema.items[i] || schema.additionalItems) : schema.items;\n    if (items === undefined) {\n      return true;\n    }\n    if (items === false) {\n      result.addError({\n        name: 'items',\n        message: \"additionalItems not permitted\",\n      });\n      return false;\n    }\n    var res = self.validateSchema(value, items, options, ctx.makeChild(items, i));\n    if(res.instance !== result.instance[i]) result.instance[i] = res.instance;\n    result.importErrors(res);\n    return true;\n  });\n  return result;\n};\n\n/**\n * Validates minimum and exclusiveMinimum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minimum = function validateMinimum (instance, schema, options, ctx) {\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var valid = true;\n  if (schema.exclusiveMinimum && schema.exclusiveMinimum === true) {\n    valid = instance > schema.minimum;\n  } else {\n    valid = instance >= schema.minimum;\n  }\n  if (!valid) {\n    result.addError({\n      name: 'minimum',\n      argument: schema.minimum,\n      message: \"must have a minimum value of \" + schema.minimum,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates maximum and exclusiveMaximum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maximum = function validateMaximum (instance, schema, options, ctx) {\n  if (!this.types.number(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var valid;\n  if (schema.exclusiveMaximum && schema.exclusiveMaximum === true) {\n    valid = instance < schema.maximum;\n  } else {\n    valid = instance <= schema.maximum;\n  }\n  if (!valid) {\n    result.addError({\n      name: 'maximum',\n      argument: schema.maximum,\n      message: \"must have a maximum value of \" + schema.maximum,\n    });\n  }\n  return result;\n};\n\n/**\n * Perform validation for multipleOf and divisibleBy, which are essentially the same.\n * @param instance\n * @param schema\n * @param validationType\n * @param errorMessage\n * @returns {String|null}\n */\nvar validateMultipleOfOrDivisbleBy = function validateMultipleOfOrDivisbleBy (instance, schema, options, ctx, validationType, errorMessage) {\n  if (!this.types.number(instance)) return;\n\n  var validationArgument = schema[validationType];\n  if (validationArgument == 0) {\n    throw new SchemaError(validationType + \" cannot be zero\");\n  }\n\n  var result = new ValidatorResult(instance, schema, options, ctx);\n\n  var instanceDecimals = helpers.getDecimalPlaces(instance);\n  var divisorDecimals = helpers.getDecimalPlaces(validationArgument);\n\n  var maxDecimals = Math.max(instanceDecimals , divisorDecimals);\n  var multiplier = Math.pow(10, maxDecimals);\n\n  if (Math.round(instance * multiplier) % Math.round(validationArgument * multiplier) !== 0) {\n    result.addError({\n      name: validationType,\n      argument:  validationArgument,\n      message: errorMessage + JSON.stringify(validationArgument)\n    });\n  }\n\n  return result;\n};\n\n/**\n * Validates divisibleBy when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.multipleOf = function validateMultipleOf (instance, schema, options, ctx) {\n return validateMultipleOfOrDivisbleBy.call(this, instance, schema, options, ctx, \"multipleOf\", \"is not a multiple of (divisible by) \");\n};\n\n/**\n * Validates multipleOf when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.divisibleBy = function validateDivisibleBy (instance, schema, options, ctx) {\n  return validateMultipleOfOrDivisbleBy.call(this, instance, schema, options, ctx, \"divisibleBy\", \"is not divisible by (multiple of) \");\n};\n\n/**\n * Validates whether the instance value is present.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.required = function validateRequired (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (instance === undefined && schema.required === true) {\n    // A boolean form is implemented for reverse-compatability with schemas written against older drafts\n    result.addError({\n      name: 'required',\n      message: \"is required\"\n    });\n  } else if (this.types.object(instance) && Array.isArray(schema.required)) {\n    schema.required.forEach(function(n){\n      if(instance[n]===undefined){\n        result.addError({\n          name: 'required',\n          argument: n,\n          message: \"requires property \" + JSON.stringify(n),\n        });\n      }\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value matches the regular expression, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.pattern = function validatePattern (instance, schema, options, ctx) {\n  if (!this.types.string(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!instance.match(schema.pattern)) {\n    result.addError({\n      name: 'pattern',\n      argument: schema.pattern,\n      message: \"does not match pattern \" + JSON.stringify(schema.pattern.toString()),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is of a certain defined format or a custom\n * format.\n * The following formats are supported for string types:\n *   - date-time\n *   - date\n *   - time\n *   - ip-address\n *   - ipv6\n *   - uri\n *   - color\n *   - host-name\n *   - alpha\n *   - alpha-numeric\n *   - utc-millisec\n * @param instance\n * @param schema\n * @param [options]\n * @param [ctx]\n * @return {String|null}\n */\nvalidators.format = function validateFormat (instance, schema, options, ctx) {\n  if (instance===undefined) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!result.disableFormat && !helpers.isFormat(instance, schema.format, this)) {\n    result.addError({\n      name: 'format',\n      argument: schema.format,\n      message: \"does not conform to the \" + JSON.stringify(schema.format) + \" format\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at least of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minLength = function validateMinLength (instance, schema, options, ctx) {\n  if (!this.types.string(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var hsp = instance.match(/[\\uDC00-\\uDFFF]/g);\n  var length = instance.length - (hsp ? hsp.length : 0);\n  if (!(length >= schema.minLength)) {\n    result.addError({\n      name: 'minLength',\n      argument: schema.minLength,\n      message: \"does not meet minimum length of \" + schema.minLength,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at most of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxLength = function validateMaxLength (instance, schema, options, ctx) {\n  if (!this.types.string(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  // TODO if this was already computed in \"minLength\", use that value instead of re-computing\n  var hsp = instance.match(/[\\uDC00-\\uDFFF]/g);\n  var length = instance.length - (hsp ? hsp.length : 0);\n  if (!(length <= schema.maxLength)) {\n    result.addError({\n      name: 'maxLength',\n      argument: schema.maxLength,\n      message: \"does not meet maximum length of \" + schema.maxLength,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether instance contains at least a minimum number of items, when the instance is an Array.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minItems = function validateMinItems (instance, schema, options, ctx) {\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length >= schema.minItems)) {\n    result.addError({\n      name: 'minItems',\n      argument: schema.minItems,\n      message: \"does not meet minimum length of \" + schema.minItems,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether instance contains no more than a maximum number of items, when the instance is an Array.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxItems = function validateMaxItems (instance, schema, options, ctx) {\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length <= schema.maxItems)) {\n    result.addError({\n      name: 'maxItems',\n      argument: schema.maxItems,\n      message: \"does not meet maximum length of \" + schema.maxItems,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates that every item in an instance array is unique, when instance is an array\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.uniqueItems = function validateUniqueItems (instance, schema, options, ctx) {\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  function testArrays (v, i, a) {\n    for (var j = i + 1; j < a.length; j++) if (helpers.deepCompareStrict(v, a[j])) {\n      return false;\n    }\n    return true;\n  }\n  if (!instance.every(testArrays)) {\n    result.addError({\n      name: 'uniqueItems',\n      message: \"contains duplicate item\",\n    });\n  }\n  return result;\n};\n\n/**\n * Deep compares arrays for duplicates\n * @param v\n * @param i\n * @param a\n * @private\n * @return {boolean}\n */\nfunction testArrays (v, i, a) {\n  var j, len = a.length;\n  for (j = i + 1, len; j < len; j++) {\n    if (helpers.deepCompareStrict(v, a[j])) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Validates whether there are no duplicates, when the instance is an Array.\n * @param instance\n * @return {String|null}\n */\nvalidators.uniqueItems = function validateUniqueItems (instance, schema, options, ctx) {\n  if (!this.types.array(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!instance.every(testArrays)) {\n    result.addError({\n      name: 'uniqueItems',\n      message: \"contains duplicate item\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validate for the presence of dependency properties, if the instance is an object.\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {null|ValidatorResult}\n */\nvalidators.dependencies = function validateDependencies (instance, schema, options, ctx) {\n  if (!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  for (var property in schema.dependencies) {\n    if (instance[property] === undefined) {\n      continue;\n    }\n    var dep = schema.dependencies[property];\n    var childContext = ctx.makeChild(dep, property);\n    if (typeof dep == 'string') {\n      dep = [dep];\n    }\n    if (Array.isArray(dep)) {\n      dep.forEach(function (prop) {\n        if (instance[prop] === undefined) {\n          result.addError({\n            // FIXME there's two different \"dependencies\" errors here with slightly different outputs\n            // Can we make these the same? Or should we create different error types?\n            name: 'dependencies',\n            argument: childContext.propertyPath,\n            message: \"property \" + prop + \" not found, required by \" + childContext.propertyPath,\n          });\n        }\n      });\n    } else {\n      var res = this.validateSchema(instance, dep, options, childContext);\n      if(result.instance !== res.instance) result.instance = res.instance;\n      if (res && res.errors.length) {\n        result.addError({\n          name: 'dependencies',\n          argument: childContext.propertyPath,\n          message: \"does not meet dependency required by \" + childContext.propertyPath,\n        });\n        result.importErrors(res);\n      }\n    }\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is one of the enumerated values.\n *\n * @param instance\n * @param schema\n * @return {ValidatorResult|null}\n */\nvalidators['enum'] = function validateEnum (instance, schema, options, ctx) {\n  if (instance === undefined) {\n    return null;\n  }\n  if (!Array.isArray(schema['enum'])) {\n    throw new SchemaError(\"enum expects an array\", schema);\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!schema['enum'].some(helpers.deepCompareStrict.bind(null, instance))) {\n    result.addError({\n      name: 'enum',\n      argument: schema['enum'],\n      message: \"is not one of enum values: \" + schema['enum'].map(String).join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance exactly matches a given value\n *\n * @param instance\n * @param schema\n * @return {ValidatorResult|null}\n */\nvalidators['const'] = function validateEnum (instance, schema, options, ctx) {\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!helpers.deepCompareStrict(schema['const'], instance)) {\n    result.addError({\n      name: 'const',\n      argument: schema['const'],\n      message: \"does not exactly match expected constant: \" + schema['const'],\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance if of a prohibited type.\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {null|ValidatorResult}\n */\nvalidators.not = validators.disallow = function validateNot (instance, schema, options, ctx) {\n  var self = this;\n  if(instance===undefined) return null;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var notTypes = schema.not || schema.disallow;\n  if(!notTypes) return null;\n  if(!Array.isArray(notTypes)) notTypes=[notTypes];\n  notTypes.forEach(function (type) {\n    if (self.testType(instance, schema, options, ctx, type)) {\n      var schemaId = type && type.id && ('<' + type.id + '>') || type;\n      result.addError({\n        name: 'not',\n        argument: schemaId,\n        message: \"is of prohibited type \" + schemaId,\n      });\n    }\n  });\n  return result;\n};\n\nmodule.exports = attribute;\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* Active `debug` instances.\n\t*/\n\tcreateDebug.instances = [];\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.enabled = createDebug.enabled(namespace);\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = selectColor(namespace);\n\t\tdebug.destroy = destroy;\n\t\tdebug.extend = extend;\n\t\t// Debug.formatArgs = formatArgs;\n\t\t// debug.rawLog = rawLog;\n\n\t\t// env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\tcreateDebug.instances.push(debug);\n\n\t\treturn debug;\n\t}\n\n\tfunction destroy() {\n\t\tconst index = createDebug.instances.indexOf(this);\n\t\tif (index !== -1) {\n\t\t\tcreateDebug.instances.splice(index, 1);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < createDebug.instances.length; i++) {\n\t\t\tconst instance = createDebug.instances[i];\n\t\t\tinstance.enabled = createDebug.enabled(instance.namespace);\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","/*\n * Copyright (c) 2018 by Filestack\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Debug from 'debug';\nimport * as utils from '../utils';\nimport { AdapterInterface } from './interface';\nimport { FsRequestOptions, FsResponse, FsHttpMethod } from '../types';\nimport { FsRequestError, FsRequestErrorCode } from '../error';\nimport { prepareData, parseResponse, parse as parseHeaders, combineURL } from './../helpers';\n\nconst debug = Debug('fs:request:xhr');\nconst CANCEL_CLEAR = `FsCleanMemory`;\n\nexport class XhrAdapter implements AdapterInterface {\n\n  request(config: FsRequestOptions) {\n    // if this option is unspecified set it by default\n    if (typeof config.filestackHeaders === 'undefined') {\n      config.filestackHeaders = true;\n    }\n\n    config = prepareData(config);\n    config.headers = config.headers || {};\n\n    let { data, headers } = config;\n\n    // if data is type of form let browser to set proper content type\n    if (utils.isFormData(data)) {\n      delete headers['Content-Type'];\n    }\n\n    let request = new XMLHttpRequest();\n\n    if (config.blobResponse) {\n      request.responseType = 'blob';\n    }\n\n    // HTTP basic authentication\n    if (config.auth) {\n      if (!config.auth.username || config.auth.username.length === 0 || !config.auth.password || config.auth.password.length === 0) {\n        return Promise.reject(new FsRequestError(`Basic auth: username and password are required ${config.auth}`, config));\n      }\n\n      headers.Authorization = 'Basic ' + btoa(unescape(encodeURIComponent(`${config.auth.username}:${config.auth.password}`)));\n      debug('Set request authorization to %s', config.auth.username + config.auth.password);\n    }\n\n    let url = config.url.trim();\n\n    if (!/^http(s)?:\\/\\//.test(url)) {\n      url = `https://${url}`;\n    }\n\n    url = combineURL(url, config.params);\n\n    debug('Starting request to %s with options %O', url, config);\n\n    request.open(config.method.toUpperCase(), url, true);\n\n    request.timeout = config.timeout;\n\n    return new Promise<FsResponse>((resolve, reject) => {\n      let cancelListener;\n\n      if (config.cancelToken) {\n        cancelListener = (reason) => {\n          /* istanbul ignore next: if request is done cancel token should not throw any error */\n          if (request) {\n            request.abort();\n            request = null;\n          }\n\n          debug('Request canceled by user %s, config: %O', reason, config);\n          return reject(new FsRequestError(`Request aborted. Reason: ${reason}`, config, null, FsRequestErrorCode.ABORTED));\n        };\n\n        config.cancelToken.once('cancel', cancelListener);\n      }\n\n      request.onreadystatechange = async () => {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        if (request.status === 0 && !request.responseURL) {\n          return;\n        }\n\n        // Prepare the response\n        const responseHeaders = parseHeaders(request.getAllResponseHeaders());\n        const responseData = request.response;\n\n        let response: FsResponse = {\n          data: responseData,\n          status: request.status,\n          statusText: request.statusText,\n          headers: responseHeaders,\n          config: config,\n        };\n\n        request = null;\n        response = await parseResponse(response);\n\n        if (500 <= response.status && response.status <= 599) {\n          // server error throw\n          debug('Server error(5xx) - %O', response);\n          return reject(new FsRequestError(`Server error ${url}`, config, response, FsRequestErrorCode.SERVER));\n        } else if (400 <= response.status && response.status <= 499) {\n          debug('Request error(4xx) - %O', response);\n          return reject(new FsRequestError(`Request error ${url}`, config, response, FsRequestErrorCode.REQUEST));\n        }\n\n        // clear cancel token to avoid memory leak\n        if (config.cancelToken) {\n          config.cancelToken.removeListener('cancel', cancelListener);\n          cancelListener = null;\n        }\n\n        return resolve(response);\n      };\n\n      // Handle browser request cancellation (as opposed to a manual cancellation)\n      request.onabort = function handleAbort() {\n        /* istanbul ignore next: just to be sure that abort was not called twice */\n        if (!request) {\n          return;\n        }\n\n        request = null;\n        reject(new FsRequestError('Request aborted', config, null, FsRequestErrorCode.ABORTED));\n      };\n\n      // Handle low level network errors\n      request.onerror = function handleError(err) {\n        request = null;\n        debug('Request error! %O', err);\n        reject(new FsRequestError('Network Error', config, null, FsRequestErrorCode.NETWORK));\n      };\n\n      // Handle timeout\n      request.ontimeout = function handleTimeout() {\n        request = null;\n        debug('Request timed out. %O', config);\n        reject(new FsRequestError('Request timeout', config, null, FsRequestErrorCode.TIMEOUT));\n      };\n\n      // Add headers to the request\n      if ('setRequestHeader' in request && headers && Object.keys(headers).length) {\n        for (let key in headers) {\n          if (headers[key] === undefined) {\n            continue;\n          }\n\n          debug('Set request header %s to %s', key, headers[key]);\n          request.setRequestHeader(key, headers[key]);\n        }\n      }\n\n      if (typeof config.onProgress === 'function' && [FsHttpMethod.POST, FsHttpMethod.PUT].indexOf(config.method) > -1) {\n        /* istanbul ignore else: else path is just fallback to normal progress event */\n        if (request.upload) {\n          debug('Bind to upload progress event');\n          request.upload.addEventListener('progress', config.onProgress);\n        } else {\n          debug('Bind to progress event');\n          request.addEventListener('progress', config.onProgress);\n        }\n      }\n\n      if (data === undefined) {\n        data = null;\n      }\n\n      request.send(data);\n    });\n  }\n}\n","const { buildOptions} = require(\"./OptionsBuilder\");\nconst OrderedObjParser = require(\"./OrderedObjParser\");\nconst { prettify} = require(\"./node2json\");\nconst validator = require('../validator');\n\nclass XMLParser{\n    \n    constructor(options){\n        this.externalEntities = {};\n        this.options = buildOptions(options);\n        \n    }\n    /**\n     * Parse XML dats to JS object \n     * @param {string|Buffer} xmlData \n     * @param {boolean|Object} validationOption \n     */\n    parse(xmlData,validationOption){\n        if(typeof xmlData === \"string\"){\n        }else if( xmlData.toString){\n            xmlData = xmlData.toString();\n        }else{\n            throw new Error(\"XML data is accepted in String or Bytes[] form.\")\n        }\n        if( validationOption){\n            if(validationOption === true) validationOption = {}; //validate with default options\n            \n            const result = validator.validate(xmlData, validationOption);\n            if (result !== true) {\n              throw Error( `${result.err.msg}:${result.err.line}:${result.err.col}` )\n            }\n          }\n        const orderedObjParser = new OrderedObjParser(this.options);\n        orderedObjParser.addExternalEntities(this.externalEntities);\n        const orderedResult = orderedObjParser.parseXml(xmlData);\n        if(this.options.preserveOrder || orderedResult === undefined) return orderedResult;\n        else return prettify(orderedResult, this.options);\n    }\n\n    /**\n     * Add Entity which is not by default supported by this library\n     * @param {string} key \n     * @param {string} value \n     */\n    addEntity(key, value){\n        if(value.indexOf(\"&\") !== -1){\n            throw new Error(\"Entity value can't have '&'\")\n        }else if(key.indexOf(\"&\") !== -1 || key.indexOf(\";\") !== -1){\n            throw new Error(\"An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'\")\n        }else if(value === \"&\"){\n            throw new Error(\"An entity with value '&' is not permitted\");\n        }else{\n            this.externalEntities[key] = value;\n        }\n    }\n}\n\nmodule.exports = XMLParser;","\nconst defaultOptions = {\n    preserveOrder: false,\n    attributeNamePrefix: '@_',\n    attributesGroupName: false,\n    textNodeName: '#text',\n    ignoreAttributes: true,\n    removeNSPrefix: false, // remove NS from tag name or attribute name if true\n    allowBooleanAttributes: false, //a tag can have attributes without any value\n    //ignoreRootElement : false,\n    parseTagValue: true,\n    parseAttributeValue: false,\n    trimValues: true, //Trim string values of tag and attributes\n    cdataPropName: false,\n    numberParseOptions: {\n      hex: true,\n      leadingZeros: true,\n      eNotation: true\n    },\n    tagValueProcessor: function(tagName, val) {\n      return val;\n    },\n    attributeValueProcessor: function(attrName, val) {\n      return val;\n    },\n    stopNodes: [], //nested tags will not be parsed even for errors\n    alwaysCreateTextNode: false,\n    isArray: () => false,\n    commentPropName: false,\n    unpairedTags: [],\n    processEntities: true,\n    htmlEntities: false,\n    ignoreDeclaration: false,\n    ignorePiTags: false,\n    transformTagName: false,\n    transformAttributeName: false,\n    updateTag: function(tagName, jPath, attrs){\n      return tagName\n    },\n    // skipEmptyListItem: false\n};\n   \nconst buildOptions = function(options) {\n    return Object.assign({}, defaultOptions, options);\n};\n\nexports.buildOptions = buildOptions;\nexports.defaultOptions = defaultOptions;","'use strict';\n///@ts-check\n\nconst util = require('../util');\nconst xmlNode = require('./xmlNode');\nconst readDocType = require(\"./DocTypeReader\");\nconst toNumber = require(\"strnum\");\n\nconst regx =\n  '<((!\\\\[CDATA\\\\[([\\\\s\\\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\\\/)(NAME)\\\\s*>))([^<]*)'\n  .replace(/NAME/g, util.nameRegexp);\n\n//const tagsRegx = new RegExp(\"<(\\\\/?[\\\\w:\\\\-\\._]+)([^>]*)>(\\\\s*\"+cdataRegx+\")*([^<]+)?\",\"g\");\n//const tagsRegx = new RegExp(\"<(\\\\/?)((\\\\w*:)?([\\\\w:\\\\-\\._]+))([^>]*)>([^<]*)(\"+cdataRegx+\"([^<]*))*([^<]+)?\",\"g\");\n\nclass OrderedObjParser{\n  constructor(options){\n    this.options = options;\n    this.currentNode = null;\n    this.tagsNodeStack = [];\n    this.docTypeEntities = {};\n    this.lastEntities = {\n      \"apos\" : { regex: /&(apos|#39|#x27);/g, val : \"'\"},\n      \"gt\" : { regex: /&(gt|#62|#x3E);/g, val : \">\"},\n      \"lt\" : { regex: /&(lt|#60|#x3C);/g, val : \"<\"},\n      \"quot\" : { regex: /&(quot|#34|#x22);/g, val : \"\\\"\"},\n    };\n    this.ampEntity = { regex: /&(amp|#38|#x26);/g, val : \"&\"};\n    this.htmlEntities = {\n      \"space\": { regex: /&(nbsp|#160);/g, val: \" \" },\n      // \"lt\" : { regex: /&(lt|#60);/g, val: \"<\" },\n      // \"gt\" : { regex: /&(gt|#62);/g, val: \">\" },\n      // \"amp\" : { regex: /&(amp|#38);/g, val: \"&\" },\n      // \"quot\" : { regex: /&(quot|#34);/g, val: \"\\\"\" },\n      // \"apos\" : { regex: /&(apos|#39);/g, val: \"'\" },\n      \"cent\" : { regex: /&(cent|#162);/g, val: \"¢\" },\n      \"pound\" : { regex: /&(pound|#163);/g, val: \"£\" },\n      \"yen\" : { regex: /&(yen|#165);/g, val: \"¥\" },\n      \"euro\" : { regex: /&(euro|#8364);/g, val: \"€\" },\n      \"copyright\" : { regex: /&(copy|#169);/g, val: \"©\" },\n      \"reg\" : { regex: /&(reg|#174);/g, val: \"®\" },\n      \"inr\" : { regex: /&(inr|#8377);/g, val: \"₹\" },\n    };\n    this.addExternalEntities = addExternalEntities;\n    this.parseXml = parseXml;\n    this.parseTextData = parseTextData;\n    this.resolveNameSpace = resolveNameSpace;\n    this.buildAttributesMap = buildAttributesMap;\n    this.isItStopNode = isItStopNode;\n    this.replaceEntitiesValue = replaceEntitiesValue;\n    this.readStopNodeData = readStopNodeData;\n    this.saveTextToParentTag = saveTextToParentTag;\n    this.addChild = addChild;\n  }\n\n}\n\nfunction addExternalEntities(externalEntities){\n  const entKeys = Object.keys(externalEntities);\n  for (let i = 0; i < entKeys.length; i++) {\n    const ent = entKeys[i];\n    this.lastEntities[ent] = {\n       regex: new RegExp(\"&\"+ent+\";\",\"g\"),\n       val : externalEntities[ent]\n    }\n  }\n}\n\n/**\n * @param {string} val\n * @param {string} tagName\n * @param {string} jPath\n * @param {boolean} dontTrim\n * @param {boolean} hasAttributes\n * @param {boolean} isLeafNode\n * @param {boolean} escapeEntities\n */\nfunction parseTextData(val, tagName, jPath, dontTrim, hasAttributes, isLeafNode, escapeEntities) {\n  if (val !== undefined) {\n    if (this.options.trimValues && !dontTrim) {\n      val = val.trim();\n    }\n    if(val.length > 0){\n      if(!escapeEntities) val = this.replaceEntitiesValue(val);\n      \n      const newval = this.options.tagValueProcessor(tagName, val, jPath, hasAttributes, isLeafNode);\n      if(newval === null || newval === undefined){\n        //don't parse\n        return val;\n      }else if(typeof newval !== typeof val || newval !== val){\n        //overwrite\n        return newval;\n      }else if(this.options.trimValues){\n        return parseValue(val, this.options.parseTagValue, this.options.numberParseOptions);\n      }else{\n        const trimmedVal = val.trim();\n        if(trimmedVal === val){\n          return parseValue(val, this.options.parseTagValue, this.options.numberParseOptions);\n        }else{\n          return val;\n        }\n      }\n    }\n  }\n}\n\nfunction resolveNameSpace(tagname) {\n  if (this.options.removeNSPrefix) {\n    const tags = tagname.split(':');\n    const prefix = tagname.charAt(0) === '/' ? '/' : '';\n    if (tags[0] === 'xmlns') {\n      return '';\n    }\n    if (tags.length === 2) {\n      tagname = prefix + tags[1];\n    }\n  }\n  return tagname;\n}\n\n//TODO: change regex to capture NS\n//const attrsRegx = new RegExp(\"([\\\\w\\\\-\\\\.\\\\:]+)\\\\s*=\\\\s*(['\\\"])((.|\\n)*?)\\\\2\",\"gm\");\nconst attrsRegx = new RegExp('([^\\\\s=]+)\\\\s*(=\\\\s*([\\'\"])([\\\\s\\\\S]*?)\\\\3)?', 'gm');\n\nfunction buildAttributesMap(attrStr, jPath, tagName) {\n  if (!this.options.ignoreAttributes && typeof attrStr === 'string') {\n    // attrStr = attrStr.replace(/\\r?\\n/g, ' ');\n    //attrStr = attrStr || attrStr.trim();\n\n    const matches = util.getAllMatches(attrStr, attrsRegx);\n    const len = matches.length; //don't make it inline\n    const attrs = {};\n    for (let i = 0; i < len; i++) {\n      const attrName = this.resolveNameSpace(matches[i][1]);\n      let oldVal = matches[i][4];\n      let aName = this.options.attributeNamePrefix + attrName;\n      if (attrName.length) {\n        if (this.options.transformAttributeName) {\n          aName = this.options.transformAttributeName(aName);\n        }\n        if(aName === \"__proto__\") aName  = \"#__proto__\";\n        if (oldVal !== undefined) {\n          if (this.options.trimValues) {\n            oldVal = oldVal.trim();\n          }\n          oldVal = this.replaceEntitiesValue(oldVal);\n          const newVal = this.options.attributeValueProcessor(attrName, oldVal, jPath);\n          if(newVal === null || newVal === undefined){\n            //don't parse\n            attrs[aName] = oldVal;\n          }else if(typeof newVal !== typeof oldVal || newVal !== oldVal){\n            //overwrite\n            attrs[aName] = newVal;\n          }else{\n            //parse\n            attrs[aName] = parseValue(\n              oldVal,\n              this.options.parseAttributeValue,\n              this.options.numberParseOptions\n            );\n          }\n        } else if (this.options.allowBooleanAttributes) {\n          attrs[aName] = true;\n        }\n      }\n    }\n    if (!Object.keys(attrs).length) {\n      return;\n    }\n    if (this.options.attributesGroupName) {\n      const attrCollection = {};\n      attrCollection[this.options.attributesGroupName] = attrs;\n      return attrCollection;\n    }\n    return attrs\n  }\n}\n\nconst parseXml = function(xmlData) {\n  xmlData = xmlData.replace(/\\r\\n?/g, \"\\n\"); //TODO: remove this line\n  const xmlObj = new xmlNode('!xml');\n  let currentNode = xmlObj;\n  let textData = \"\";\n  let jPath = \"\";\n  for(let i=0; i< xmlData.length; i++){//for each char in XML data\n    const ch = xmlData[i];\n    if(ch === '<'){\n      // const nextIndex = i+1;\n      // const _2ndChar = xmlData[nextIndex];\n      if( xmlData[i+1] === '/') {//Closing Tag\n        const closeIndex = findClosingIndex(xmlData, \">\", i, \"Closing Tag is not closed.\")\n        let tagName = xmlData.substring(i+2,closeIndex).trim();\n\n        if(this.options.removeNSPrefix){\n          const colonIndex = tagName.indexOf(\":\");\n          if(colonIndex !== -1){\n            tagName = tagName.substr(colonIndex+1);\n          }\n        }\n\n        if(this.options.transformTagName) {\n          tagName = this.options.transformTagName(tagName);\n        }\n\n        if(currentNode){\n          textData = this.saveTextToParentTag(textData, currentNode, jPath);\n        }\n\n        //check if last tag of nested tag was unpaired tag\n        const lastTagName = jPath.substring(jPath.lastIndexOf(\".\")+1);\n        if(tagName && this.options.unpairedTags.indexOf(tagName) !== -1 ){\n          throw new Error(`Unpaired tag can not be used as closing tag: </${tagName}>`);\n        }\n        let propIndex = 0\n        if(lastTagName && this.options.unpairedTags.indexOf(lastTagName) !== -1 ){\n          propIndex = jPath.lastIndexOf('.', jPath.lastIndexOf('.')-1)\n          this.tagsNodeStack.pop();\n        }else{\n          propIndex = jPath.lastIndexOf(\".\");\n        }\n        jPath = jPath.substring(0, propIndex);\n\n        currentNode = this.tagsNodeStack.pop();//avoid recursion, set the parent tag scope\n        textData = \"\";\n        i = closeIndex;\n      } else if( xmlData[i+1] === '?') {\n\n        let tagData = readTagExp(xmlData,i, false, \"?>\");\n        if(!tagData) throw new Error(\"Pi Tag is not closed.\");\n\n        textData = this.saveTextToParentTag(textData, currentNode, jPath);\n        if( (this.options.ignoreDeclaration && tagData.tagName === \"?xml\") || this.options.ignorePiTags){\n\n        }else{\n  \n          const childNode = new xmlNode(tagData.tagName);\n          childNode.add(this.options.textNodeName, \"\");\n          \n          if(tagData.tagName !== tagData.tagExp && tagData.attrExpPresent){\n            childNode[\":@\"] = this.buildAttributesMap(tagData.tagExp, jPath, tagData.tagName);\n          }\n          this.addChild(currentNode, childNode, jPath)\n\n        }\n\n\n        i = tagData.closeIndex + 1;\n      } else if(xmlData.substr(i + 1, 3) === '!--') {\n        const endIndex = findClosingIndex(xmlData, \"-->\", i+4, \"Comment is not closed.\")\n        if(this.options.commentPropName){\n          const comment = xmlData.substring(i + 4, endIndex - 2);\n\n          textData = this.saveTextToParentTag(textData, currentNode, jPath);\n\n          currentNode.add(this.options.commentPropName, [ { [this.options.textNodeName] : comment } ]);\n        }\n        i = endIndex;\n      } else if( xmlData.substr(i + 1, 2) === '!D') {\n        const result = readDocType(xmlData, i);\n        this.docTypeEntities = result.entities;\n        i = result.i;\n      }else if(xmlData.substr(i + 1, 2) === '![') {\n        const closeIndex = findClosingIndex(xmlData, \"]]>\", i, \"CDATA is not closed.\") - 2;\n        const tagExp = xmlData.substring(i + 9,closeIndex);\n\n        textData = this.saveTextToParentTag(textData, currentNode, jPath);\n\n        //cdata should be set even if it is 0 length string\n        if(this.options.cdataPropName){\n          // let val = this.parseTextData(tagExp, this.options.cdataPropName, jPath + \".\" + this.options.cdataPropName, true, false, true);\n          // if(!val) val = \"\";\n          currentNode.add(this.options.cdataPropName, [ { [this.options.textNodeName] : tagExp } ]);\n        }else{\n          let val = this.parseTextData(tagExp, currentNode.tagname, jPath, true, false, true);\n          if(val == undefined) val = \"\";\n          currentNode.add(this.options.textNodeName, val);\n        }\n        \n        i = closeIndex + 2;\n      }else {//Opening tag\n        let result = readTagExp(xmlData,i, this.options.removeNSPrefix);\n        let tagName= result.tagName;\n        let tagExp = result.tagExp;\n        let attrExpPresent = result.attrExpPresent;\n        let closeIndex = result.closeIndex;\n\n        if (this.options.transformTagName) {\n          tagName = this.options.transformTagName(tagName);\n        }\n        \n        //save text as child node\n        if (currentNode && textData) {\n          if(currentNode.tagname !== '!xml'){\n            //when nested tag is found\n            textData = this.saveTextToParentTag(textData, currentNode, jPath, false);\n          }\n        }\n\n        //check if last tag was unpaired tag\n        const lastTag = currentNode;\n        if(lastTag && this.options.unpairedTags.indexOf(lastTag.tagname) !== -1 ){\n          currentNode = this.tagsNodeStack.pop();\n          jPath = jPath.substring(0, jPath.lastIndexOf(\".\"));\n        }\n        if(tagName !== xmlObj.tagname){\n          jPath += jPath ? \".\" + tagName : tagName;\n        }\n        if (this.isItStopNode(this.options.stopNodes, jPath, tagName)) { //TODO: namespace\n          let tagContent = \"\";\n          //self-closing tag\n          if(tagExp.length > 0 && tagExp.lastIndexOf(\"/\") === tagExp.length - 1){\n            i = result.closeIndex;\n          }\n          //unpaired tag\n          else if(this.options.unpairedTags.indexOf(tagName) !== -1){\n            i = result.closeIndex;\n          }\n          //normal tag\n          else{\n            //read until closing tag is found\n            const result = this.readStopNodeData(xmlData, tagName, closeIndex + 1);\n            if(!result) throw new Error(`Unexpected end of ${tagName}`);\n            i = result.i;\n            tagContent = result.tagContent;\n          }\n\n          const childNode = new xmlNode(tagName);\n          if(tagName !== tagExp && attrExpPresent){\n            childNode[\":@\"] = this.buildAttributesMap(tagExp, jPath, tagName);\n          }\n          if(tagContent) {\n            tagContent = this.parseTextData(tagContent, tagName, jPath, true, attrExpPresent, true, true);\n          }\n          \n          jPath = jPath.substr(0, jPath.lastIndexOf(\".\"));\n          childNode.add(this.options.textNodeName, tagContent);\n          \n          this.addChild(currentNode, childNode, jPath)\n        }else{\n  //selfClosing tag\n          if(tagExp.length > 0 && tagExp.lastIndexOf(\"/\") === tagExp.length - 1){\n            if(tagName[tagName.length - 1] === \"/\"){ //remove trailing '/'\n              tagName = tagName.substr(0, tagName.length - 1);\n              tagExp = tagName;\n            }else{\n              tagExp = tagExp.substr(0, tagExp.length - 1);\n            }\n            \n            if(this.options.transformTagName) {\n              tagName = this.options.transformTagName(tagName);\n            }\n\n            const childNode = new xmlNode(tagName);\n            if(tagName !== tagExp && attrExpPresent){\n              childNode[\":@\"] = this.buildAttributesMap(tagExp, jPath, tagName);\n            }\n            this.addChild(currentNode, childNode, jPath)\n            jPath = jPath.substr(0, jPath.lastIndexOf(\".\"));\n          }\n    //opening tag\n          else{\n            const childNode = new xmlNode( tagName);\n            this.tagsNodeStack.push(currentNode);\n            \n            if(tagName !== tagExp && attrExpPresent){\n              childNode[\":@\"] = this.buildAttributesMap(tagExp, jPath, tagName);\n            }\n            this.addChild(currentNode, childNode, jPath)\n            currentNode = childNode;\n          }\n          textData = \"\";\n          i = closeIndex;\n        }\n      }\n    }else{\n      textData += xmlData[i];\n    }\n  }\n  return xmlObj.child;\n}\n\nfunction addChild(currentNode, childNode, jPath){\n  const result = this.options.updateTag(childNode.tagname, jPath, childNode[\":@\"])\n  if(result === false){\n  }else if(typeof result === \"string\"){\n    childNode.tagname = result\n    currentNode.addChild(childNode);\n  }else{\n    currentNode.addChild(childNode);\n  }\n}\n\nconst replaceEntitiesValue = function(val){\n\n  if(this.options.processEntities){\n    for(let entityName in this.docTypeEntities){\n      const entity = this.docTypeEntities[entityName];\n      val = val.replace( entity.regx, entity.val);\n    }\n    for(let entityName in this.lastEntities){\n      const entity = this.lastEntities[entityName];\n      val = val.replace( entity.regex, entity.val);\n    }\n    if(this.options.htmlEntities){\n      for(let entityName in this.htmlEntities){\n        const entity = this.htmlEntities[entityName];\n        val = val.replace( entity.regex, entity.val);\n      }\n    }\n    val = val.replace( this.ampEntity.regex, this.ampEntity.val);\n  }\n  return val;\n}\nfunction saveTextToParentTag(textData, currentNode, jPath, isLeafNode) {\n  if (textData) { //store previously collected data as textNode\n    if(isLeafNode === undefined) isLeafNode = Object.keys(currentNode.child).length === 0\n    \n    textData = this.parseTextData(textData,\n      currentNode.tagname,\n      jPath,\n      false,\n      currentNode[\":@\"] ? Object.keys(currentNode[\":@\"]).length !== 0 : false,\n      isLeafNode);\n\n    if (textData !== undefined && textData !== \"\")\n      currentNode.add(this.options.textNodeName, textData);\n    textData = \"\";\n  }\n  return textData;\n}\n\n//TODO: use jPath to simplify the logic\n/**\n * \n * @param {string[]} stopNodes \n * @param {string} jPath\n * @param {string} currentTagName \n */\nfunction isItStopNode(stopNodes, jPath, currentTagName){\n  const allNodesExp = \"*.\" + currentTagName;\n  for (const stopNodePath in stopNodes) {\n    const stopNodeExp = stopNodes[stopNodePath];\n    if( allNodesExp === stopNodeExp || jPath === stopNodeExp  ) return true;\n  }\n  return false;\n}\n\n/**\n * Returns the tag Expression and where it is ending handling single-double quotes situation\n * @param {string} xmlData \n * @param {number} i starting index\n * @returns \n */\nfunction tagExpWithClosingIndex(xmlData, i, closingChar = \">\"){\n  let attrBoundary;\n  let tagExp = \"\";\n  for (let index = i; index < xmlData.length; index++) {\n    let ch = xmlData[index];\n    if (attrBoundary) {\n        if (ch === attrBoundary) attrBoundary = \"\";//reset\n    } else if (ch === '\"' || ch === \"'\") {\n        attrBoundary = ch;\n    } else if (ch === closingChar[0]) {\n      if(closingChar[1]){\n        if(xmlData[index + 1] === closingChar[1]){\n          return {\n            data: tagExp,\n            index: index\n          }\n        }\n      }else{\n        return {\n          data: tagExp,\n          index: index\n        }\n      }\n    } else if (ch === '\\t') {\n      ch = \" \"\n    }\n    tagExp += ch;\n  }\n}\n\nfunction findClosingIndex(xmlData, str, i, errMsg){\n  const closingIndex = xmlData.indexOf(str, i);\n  if(closingIndex === -1){\n    throw new Error(errMsg)\n  }else{\n    return closingIndex + str.length - 1;\n  }\n}\n\nfunction readTagExp(xmlData,i, removeNSPrefix, closingChar = \">\"){\n  const result = tagExpWithClosingIndex(xmlData, i+1, closingChar);\n  if(!result) return;\n  let tagExp = result.data;\n  const closeIndex = result.index;\n  const separatorIndex = tagExp.search(/\\s/);\n  let tagName = tagExp;\n  let attrExpPresent = true;\n  if(separatorIndex !== -1){//separate tag name and attributes expression\n    tagName = tagExp.substr(0, separatorIndex).replace(/\\s\\s*$/, '');\n    tagExp = tagExp.substr(separatorIndex + 1);\n  }\n\n  if(removeNSPrefix){\n    const colonIndex = tagName.indexOf(\":\");\n    if(colonIndex !== -1){\n      tagName = tagName.substr(colonIndex+1);\n      attrExpPresent = tagName !== result.data.substr(colonIndex + 1);\n    }\n  }\n\n  return {\n    tagName: tagName,\n    tagExp: tagExp,\n    closeIndex: closeIndex,\n    attrExpPresent: attrExpPresent,\n  }\n}\n/**\n * find paired tag for a stop node\n * @param {string} xmlData \n * @param {string} tagName \n * @param {number} i \n */\nfunction readStopNodeData(xmlData, tagName, i){\n  const startIndex = i;\n  // Starting at 1 since we already have an open tag\n  let openTagCount = 1;\n\n  for (; i < xmlData.length; i++) {\n    if( xmlData[i] === \"<\"){ \n      if (xmlData[i+1] === \"/\") {//close tag\n          const closeIndex = findClosingIndex(xmlData, \">\", i, `${tagName} is not closed`);\n          let closeTagName = xmlData.substring(i+2,closeIndex).trim();\n          if(closeTagName === tagName){\n            openTagCount--;\n            if (openTagCount === 0) {\n              return {\n                tagContent: xmlData.substring(startIndex, i),\n                i : closeIndex\n              }\n            }\n          }\n          i=closeIndex;\n        } else if(xmlData[i+1] === '?') { \n          const closeIndex = findClosingIndex(xmlData, \"?>\", i+1, \"StopNode is not closed.\")\n          i=closeIndex;\n        } else if(xmlData.substr(i + 1, 3) === '!--') { \n          const closeIndex = findClosingIndex(xmlData, \"-->\", i+3, \"StopNode is not closed.\")\n          i=closeIndex;\n        } else if(xmlData.substr(i + 1, 2) === '![') { \n          const closeIndex = findClosingIndex(xmlData, \"]]>\", i, \"StopNode is not closed.\") - 2;\n          i=closeIndex;\n        } else {\n          const tagData = readTagExp(xmlData, i, '>')\n\n          if (tagData) {\n            const openTagName = tagData && tagData.tagName;\n            if (openTagName === tagName && tagData.tagExp[tagData.tagExp.length-1] !== \"/\") {\n              openTagCount++;\n            }\n            i=tagData.closeIndex;\n          }\n        }\n      }\n  }//end for loop\n}\n\nfunction parseValue(val, shouldParse, options) {\n  if (shouldParse && typeof val === 'string') {\n    //console.log(options)\n    const newval = val.trim();\n    if(newval === 'true' ) return true;\n    else if(newval === 'false' ) return false;\n    else return toNumber(val, options);\n  } else {\n    if (util.isExist(val)) {\n      return val;\n    } else {\n      return '';\n    }\n  }\n}\n\n\nmodule.exports = OrderedObjParser;\n","'use strict';\n\nclass XmlNode{\n  constructor(tagname) {\n    this.tagname = tagname;\n    this.child = []; //nested tags, text, cdata, comments in order\n    this[\":@\"] = {}; //attributes map\n  }\n  add(key,val){\n    // this.child.push( {name : key, val: val, isCdata: isCdata });\n    if(key === \"__proto__\") key = \"#__proto__\";\n    this.child.push( {[key]: val });\n  }\n  addChild(node) {\n    if(node.tagname === \"__proto__\") node.tagname = \"#__proto__\";\n    if(node[\":@\"] && Object.keys(node[\":@\"]).length > 0){\n      this.child.push( { [node.tagname]: node.child, [\":@\"]: node[\":@\"] });\n    }else{\n      this.child.push( { [node.tagname]: node.child });\n    }\n  };\n};\n\n\nmodule.exports = XmlNode;","//TODO: handle comments\nfunction readDocType(xmlData, i){\n    \n    const entities = {};\n    if( xmlData[i + 3] === 'O' &&\n         xmlData[i + 4] === 'C' &&\n         xmlData[i + 5] === 'T' &&\n         xmlData[i + 6] === 'Y' &&\n         xmlData[i + 7] === 'P' &&\n         xmlData[i + 8] === 'E')\n    {    \n        i = i+9;\n        let angleBracketsCount = 1;\n        let hasBody = false, comment = false;\n        let exp = \"\";\n        for(;i<xmlData.length;i++){\n            if (xmlData[i] === '<' && !comment) { //Determine the tag type\n                if( hasBody && isEntity(xmlData, i)){\n                    i += 7; \n                    [entityName, val,i] = readEntityExp(xmlData,i+1);\n                    if(val.indexOf(\"&\") === -1) //Parameter entities are not supported\n                        entities[ validateEntityName(entityName) ] = {\n                            regx : RegExp( `&${entityName};`,\"g\"),\n                            val: val\n                        };\n                }\n                else if( hasBody && isElement(xmlData, i))  i += 8;//Not supported\n                else if( hasBody && isAttlist(xmlData, i))  i += 8;//Not supported\n                else if( hasBody && isNotation(xmlData, i)) i += 9;//Not supported\n                else if( isComment)                         comment = true;\n                else                                        throw new Error(\"Invalid DOCTYPE\");\n\n                angleBracketsCount++;\n                exp = \"\";\n            } else if (xmlData[i] === '>') { //Read tag content\n                if(comment){\n                    if( xmlData[i - 1] === \"-\" && xmlData[i - 2] === \"-\"){\n                        comment = false;\n                        angleBracketsCount--;\n                    }\n                }else{\n                    angleBracketsCount--;\n                }\n                if (angleBracketsCount === 0) {\n                  break;\n                }\n            }else if( xmlData[i] === '['){\n                hasBody = true;\n            }else{\n                exp += xmlData[i];\n            }\n        }\n        if(angleBracketsCount !== 0){\n            throw new Error(`Unclosed DOCTYPE`);\n        }\n    }else{\n        throw new Error(`Invalid Tag instead of DOCTYPE`);\n    }\n    return {entities, i};\n}\n\nfunction readEntityExp(xmlData,i){\n    //External entities are not supported\n    //    <!ENTITY ext SYSTEM \"http://normal-website.com\" >\n\n    //Parameter entities are not supported\n    //    <!ENTITY entityname \"&anotherElement;\">\n\n    //Internal entities are supported\n    //    <!ENTITY entityname \"replacement text\">\n    \n    //read EntityName\n    let entityName = \"\";\n    for (; i < xmlData.length && (xmlData[i] !== \"'\" && xmlData[i] !== '\"' ); i++) {\n        // if(xmlData[i] === \" \") continue;\n        // else \n        entityName += xmlData[i];\n    }\n    entityName = entityName.trim();\n    if(entityName.indexOf(\" \") !== -1) throw new Error(\"External entites are not supported\");\n\n    //read Entity Value\n    const startChar = xmlData[i++];\n    let val = \"\"\n    for (; i < xmlData.length && xmlData[i] !== startChar ; i++) {\n        val += xmlData[i];\n    }\n    return [entityName, val, i];\n}\n\nfunction isComment(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === '-' &&\n    xmlData[i+3] === '-') return true\n    return false\n}\nfunction isEntity(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'E' &&\n    xmlData[i+3] === 'N' &&\n    xmlData[i+4] === 'T' &&\n    xmlData[i+5] === 'I' &&\n    xmlData[i+6] === 'T' &&\n    xmlData[i+7] === 'Y') return true\n    return false\n}\nfunction isElement(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'E' &&\n    xmlData[i+3] === 'L' &&\n    xmlData[i+4] === 'E' &&\n    xmlData[i+5] === 'M' &&\n    xmlData[i+6] === 'E' &&\n    xmlData[i+7] === 'N' &&\n    xmlData[i+8] === 'T') return true\n    return false\n}\n\nfunction isAttlist(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'A' &&\n    xmlData[i+3] === 'T' &&\n    xmlData[i+4] === 'T' &&\n    xmlData[i+5] === 'L' &&\n    xmlData[i+6] === 'I' &&\n    xmlData[i+7] === 'S' &&\n    xmlData[i+8] === 'T') return true\n    return false\n}\nfunction isNotation(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'N' &&\n    xmlData[i+3] === 'O' &&\n    xmlData[i+4] === 'T' &&\n    xmlData[i+5] === 'A' &&\n    xmlData[i+6] === 'T' &&\n    xmlData[i+7] === 'I' &&\n    xmlData[i+8] === 'O' &&\n    xmlData[i+9] === 'N') return true\n    return false\n}\n\n//an entity name should not contains special characters that may be used in regex\n//Eg !?\\\\\\/[]$%{}^&*()<>\nconst specialChar = \"!?\\\\\\/[]$%{}^&*()<>|+\";\n\nfunction validateEntityName(name){\n    for (let i = 0; i < specialChar.length; i++) {\n        const ch = specialChar[i];\n        if(name.indexOf(ch) !== -1) throw new Error(`Invalid character ${ch} in entity name`);\n    }\n    return name;\n}\n\nmodule.exports = readDocType;","const hexRegex = /^[-+]?0x[a-fA-F0-9]+$/;\nconst numRegex = /^([\\-\\+])?(0*)(\\.[0-9]+([eE]\\-?[0-9]+)?|[0-9]+(\\.[0-9]+([eE]\\-?[0-9]+)?)?)$/;\n// const octRegex = /0x[a-z0-9]+/;\n// const binRegex = /0x[a-z0-9]+/;\n\n\n//polyfill\nif (!Number.parseInt && window.parseInt) {\n    Number.parseInt = window.parseInt;\n}\nif (!Number.parseFloat && window.parseFloat) {\n    Number.parseFloat = window.parseFloat;\n}\n\n  \nconst consider = {\n    hex :  true,\n    leadingZeros: true,\n    decimalPoint: \"\\.\",\n    eNotation: true\n    //skipLike: /regex/\n};\n\nfunction toNumber(str, options = {}){\n    // const options = Object.assign({}, consider);\n    // if(opt.leadingZeros === false){\n    //     options.leadingZeros = false;\n    // }else if(opt.hex === false){\n    //     options.hex = false;\n    // }\n\n    options = Object.assign({}, consider, options );\n    if(!str || typeof str !== \"string\" ) return str;\n    \n    let trimmedStr  = str.trim();\n    // if(trimmedStr === \"0.0\") return 0;\n    // else if(trimmedStr === \"+0.0\") return 0;\n    // else if(trimmedStr === \"-0.0\") return -0;\n\n    if(options.skipLike !== undefined && options.skipLike.test(trimmedStr)) return str;\n    else if (options.hex && hexRegex.test(trimmedStr)) {\n        return Number.parseInt(trimmedStr, 16);\n    // } else if (options.parseOct && octRegex.test(str)) {\n    //     return Number.parseInt(val, 8);\n    // }else if (options.parseBin && binRegex.test(str)) {\n    //     return Number.parseInt(val, 2);\n    }else{\n        //separate negative sign, leading zeros, and rest number\n        const match = numRegex.exec(trimmedStr);\n        if(match){\n            const sign = match[1];\n            const leadingZeros = match[2];\n            let numTrimmedByZeros = trimZeros(match[3]); //complete num without leading zeros\n            //trim ending zeros for floating number\n            \n            const eNotation = match[4] || match[6];\n            if(!options.leadingZeros && leadingZeros.length > 0 && sign && trimmedStr[2] !== \".\") return str; //-0123\n            else if(!options.leadingZeros && leadingZeros.length > 0 && !sign && trimmedStr[1] !== \".\") return str; //0123\n            else{//no leading zeros or leading zeros are allowed\n                const num = Number(trimmedStr);\n                const numStr = \"\" + num;\n                if(numStr.search(/[eE]/) !== -1){ //given number is long and parsed to eNotation\n                    if(options.eNotation) return num;\n                    else return str;\n                }else if(eNotation){ //given number has enotation\n                    if(options.eNotation) return num;\n                    else return str;\n                }else if(trimmedStr.indexOf(\".\") !== -1){ //floating number\n                    // const decimalPart = match[5].substr(1);\n                    // const intPart = trimmedStr.substr(0,trimmedStr.indexOf(\".\"));\n\n                    \n                    // const p = numStr.indexOf(\".\");\n                    // const givenIntPart = numStr.substr(0,p);\n                    // const givenDecPart = numStr.substr(p+1);\n                    if(numStr === \"0\" && (numTrimmedByZeros === \"\") ) return num; //0.0\n                    else if(numStr === numTrimmedByZeros) return num; //0.456. 0.79000\n                    else if( sign && numStr === \"-\"+numTrimmedByZeros) return num;\n                    else return str;\n                }\n                \n                if(leadingZeros){\n                    // if(numTrimmedByZeros === numStr){\n                    //     if(options.leadingZeros) return num;\n                    //     else return str;\n                    // }else return str;\n                    if(numTrimmedByZeros === numStr) return num;\n                    else if(sign+numTrimmedByZeros === numStr) return num;\n                    else return str;\n                }\n\n                if(trimmedStr === numStr) return num;\n                else if(trimmedStr === sign+numStr) return num;\n                // else{\n                //     //number with +/- sign\n                //     trimmedStr.test(/[-+][0-9]);\n\n                // }\n                return str;\n            }\n            // else if(!eNotation && trimmedStr && trimmedStr !== Number(trimmedStr) ) return str;\n            \n        }else{ //non-numeric string\n            return str;\n        }\n    }\n}\n\n/**\n * \n * @param {string} numStr without leading zeros\n * @returns \n */\nfunction trimZeros(numStr){\n    if(numStr && numStr.indexOf(\".\") !== -1){//float\n        numStr = numStr.replace(/0+$/, \"\"); //remove ending zeros\n        if(numStr === \".\")  numStr = \"0\";\n        else if(numStr[0] === \".\")  numStr = \"0\"+numStr;\n        else if(numStr[numStr.length-1] === \".\")  numStr = numStr.substr(0,numStr.length-1);\n        return numStr;\n    }\n    return numStr;\n}\nmodule.exports = toNumber\n","'use strict';\n\n/**\n * \n * @param {array} node \n * @param {any} options \n * @returns \n */\nfunction prettify(node, options){\n  return compress( node, options);\n}\n\n/**\n * \n * @param {array} arr \n * @param {object} options \n * @param {string} jPath \n * @returns object\n */\nfunction compress(arr, options, jPath){\n  let text;\n  const compressedObj = {};\n  for (let i = 0; i < arr.length; i++) {\n    const tagObj = arr[i];\n    const property = propName(tagObj);\n    let newJpath = \"\";\n    if(jPath === undefined) newJpath = property;\n    else newJpath = jPath + \".\" + property;\n\n    if(property === options.textNodeName){\n      if(text === undefined) text = tagObj[property];\n      else text += \"\" + tagObj[property];\n    }else if(property === undefined){\n      continue;\n    }else if(tagObj[property]){\n      \n      let val = compress(tagObj[property], options, newJpath);\n      const isLeaf = isLeafTag(val, options);\n\n      if(tagObj[\":@\"]){\n        assignAttributes( val, tagObj[\":@\"], newJpath, options);\n      }else if(Object.keys(val).length === 1 && val[options.textNodeName] !== undefined && !options.alwaysCreateTextNode){\n        val = val[options.textNodeName];\n      }else if(Object.keys(val).length === 0){\n        if(options.alwaysCreateTextNode) val[options.textNodeName] = \"\";\n        else val = \"\";\n      }\n\n      if(compressedObj[property] !== undefined && compressedObj.hasOwnProperty(property)) {\n        if(!Array.isArray(compressedObj[property])) {\n            compressedObj[property] = [ compressedObj[property] ];\n        }\n        compressedObj[property].push(val);\n      }else{\n        //TODO: if a node is not an array, then check if it should be an array\n        //also determine if it is a leaf node\n        if (options.isArray(property, newJpath, isLeaf )) {\n          compressedObj[property] = [val];\n        }else{\n          compressedObj[property] = val;\n        }\n      }\n    }\n    \n  }\n  // if(text && text.length > 0) compressedObj[options.textNodeName] = text;\n  if(typeof text === \"string\"){\n    if(text.length > 0) compressedObj[options.textNodeName] = text;\n  }else if(text !== undefined) compressedObj[options.textNodeName] = text;\n  return compressedObj;\n}\n\nfunction propName(obj){\n  const keys = Object.keys(obj);\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    if(key !== \":@\") return key;\n  }\n}\n\nfunction assignAttributes(obj, attrMap, jpath, options){\n  if (attrMap) {\n    const keys = Object.keys(attrMap);\n    const len = keys.length; //don't make it inline\n    for (let i = 0; i < len; i++) {\n      const atrrName = keys[i];\n      if (options.isArray(atrrName, jpath + \".\" + atrrName, true, true)) {\n        obj[atrrName] = [ attrMap[atrrName] ];\n      } else {\n        obj[atrrName] = attrMap[atrrName];\n      }\n    }\n  }\n}\n\nfunction isLeafTag(obj, options){\n  const { textNodeName } = options;\n  const propCount = Object.keys(obj).length;\n  \n  if (propCount === 0) {\n    return true;\n  }\n\n  if (\n    propCount === 1 &&\n    (obj[textNodeName] || typeof obj[textNodeName] === \"boolean\" || obj[textNodeName] === 0)\n  ) {\n    return true;\n  }\n\n  return false;\n}\nexports.prettify = prettify;\n","'use strict';\n//parse Empty Node as self closing node\nconst buildFromOrderedJs = require('./orderedJs2Xml');\n\nconst defaultOptions = {\n  attributeNamePrefix: '@_',\n  attributesGroupName: false,\n  textNodeName: '#text',\n  ignoreAttributes: true,\n  cdataPropName: false,\n  format: false,\n  indentBy: '  ',\n  suppressEmptyNode: false,\n  suppressUnpairedNode: true,\n  suppressBooleanAttributes: true,\n  tagValueProcessor: function(key, a) {\n    return a;\n  },\n  attributeValueProcessor: function(attrName, a) {\n    return a;\n  },\n  preserveOrder: false,\n  commentPropName: false,\n  unpairedTags: [],\n  entities: [\n    { regex: new RegExp(\"&\", \"g\"), val: \"&amp;\" },//it must be on top\n    { regex: new RegExp(\">\", \"g\"), val: \"&gt;\" },\n    { regex: new RegExp(\"<\", \"g\"), val: \"&lt;\" },\n    { regex: new RegExp(\"\\'\", \"g\"), val: \"&apos;\" },\n    { regex: new RegExp(\"\\\"\", \"g\"), val: \"&quot;\" }\n  ],\n  processEntities: true,\n  stopNodes: [],\n  // transformTagName: false,\n  // transformAttributeName: false,\n  oneListGroup: false\n};\n\nfunction Builder(options) {\n  this.options = Object.assign({}, defaultOptions, options);\n  if (this.options.ignoreAttributes || this.options.attributesGroupName) {\n    this.isAttribute = function(/*a*/) {\n      return false;\n    };\n  } else {\n    this.attrPrefixLen = this.options.attributeNamePrefix.length;\n    this.isAttribute = isAttribute;\n  }\n\n  this.processTextOrObjNode = processTextOrObjNode\n\n  if (this.options.format) {\n    this.indentate = indentate;\n    this.tagEndChar = '>\\n';\n    this.newLine = '\\n';\n  } else {\n    this.indentate = function() {\n      return '';\n    };\n    this.tagEndChar = '>';\n    this.newLine = '';\n  }\n}\n\nBuilder.prototype.build = function(jObj) {\n  if(this.options.preserveOrder){\n    return buildFromOrderedJs(jObj, this.options);\n  }else {\n    if(Array.isArray(jObj) && this.options.arrayNodeName && this.options.arrayNodeName.length > 1){\n      jObj = {\n        [this.options.arrayNodeName] : jObj\n      }\n    }\n    return this.j2x(jObj, 0).val;\n  }\n};\n\nBuilder.prototype.j2x = function(jObj, level) {\n  let attrStr = '';\n  let val = '';\n  for (let key in jObj) {\n    if (typeof jObj[key] === 'undefined') {\n      // supress undefined node\n    } else if (jObj[key] === null) {\n      if(key[0] === \"?\") val += this.indentate(level) + '<' + key + '?' + this.tagEndChar;\n      else val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n      // val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n    } else if (jObj[key] instanceof Date) {\n      val += this.buildTextValNode(jObj[key], key, '', level);\n    } else if (typeof jObj[key] !== 'object') {\n      //premitive type\n      const attr = this.isAttribute(key);\n      if (attr) {\n        attrStr += this.buildAttrPairStr(attr, '' + jObj[key]);\n      }else {\n        //tag value\n        if (key === this.options.textNodeName) {\n          let newval = this.options.tagValueProcessor(key, '' + jObj[key]);\n          val += this.replaceEntitiesValue(newval);\n        } else {\n          val += this.buildTextValNode(jObj[key], key, '', level);\n        }\n      }\n    } else if (Array.isArray(jObj[key])) {\n      //repeated nodes\n      const arrLen = jObj[key].length;\n      let listTagVal = \"\";\n      for (let j = 0; j < arrLen; j++) {\n        const item = jObj[key][j];\n        if (typeof item === 'undefined') {\n          // supress undefined node\n        } else if (item === null) {\n          if(key[0] === \"?\") val += this.indentate(level) + '<' + key + '?' + this.tagEndChar;\n          else val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n          // val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n        } else if (typeof item === 'object') {\n          if(this.options.oneListGroup ){\n            listTagVal += this.j2x(item, level + 1).val;\n          }else{\n            listTagVal += this.processTextOrObjNode(item, key, level)\n          }\n        } else {\n          listTagVal += this.buildTextValNode(item, key, '', level);\n        }\n      }\n      if(this.options.oneListGroup){\n        listTagVal = this.buildObjectNode(listTagVal, key, '', level);\n      }\n      val += listTagVal;\n    } else {\n      //nested node\n      if (this.options.attributesGroupName && key === this.options.attributesGroupName) {\n        const Ks = Object.keys(jObj[key]);\n        const L = Ks.length;\n        for (let j = 0; j < L; j++) {\n          attrStr += this.buildAttrPairStr(Ks[j], '' + jObj[key][Ks[j]]);\n        }\n      } else {\n        val += this.processTextOrObjNode(jObj[key], key, level)\n      }\n    }\n  }\n  return {attrStr: attrStr, val: val};\n};\n\nBuilder.prototype.buildAttrPairStr = function(attrName, val){\n  val = this.options.attributeValueProcessor(attrName, '' + val);\n  val = this.replaceEntitiesValue(val);\n  if (this.options.suppressBooleanAttributes && val === \"true\") {\n    return ' ' + attrName;\n  } else return ' ' + attrName + '=\"' + val + '\"';\n}\n\nfunction processTextOrObjNode (object, key, level) {\n  const result = this.j2x(object, level + 1);\n  if (object[this.options.textNodeName] !== undefined && Object.keys(object).length === 1) {\n    return this.buildTextValNode(object[this.options.textNodeName], key, result.attrStr, level);\n  } else {\n    return this.buildObjectNode(result.val, key, result.attrStr, level);\n  }\n}\n\nBuilder.prototype.buildObjectNode = function(val, key, attrStr, level) {\n  if(val === \"\"){\n    if(key[0] === \"?\") return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar;\n    else {\n      return this.indentate(level) + '<' + key + attrStr + this.closeTag(key) + this.tagEndChar;\n    }\n  }else{\n\n    let tagEndExp = '</' + key + this.tagEndChar;\n    let piClosingChar = \"\";\n    \n    if(key[0] === \"?\") {\n      piClosingChar = \"?\";\n      tagEndExp = \"\";\n    }\n  \n    if (attrStr && val.indexOf('<') === -1) {\n      return ( this.indentate(level) + '<' +  key + attrStr + piClosingChar + '>' + val + tagEndExp );\n    } else if (this.options.commentPropName !== false && key === this.options.commentPropName && piClosingChar.length === 0) {\n      return this.indentate(level) + `<!--${val}-->` + this.newLine;\n    }else {\n      return (\n        this.indentate(level) + '<' + key + attrStr + piClosingChar + this.tagEndChar +\n        val +\n        this.indentate(level) + tagEndExp    );\n    }\n  }\n}\n\nBuilder.prototype.closeTag = function(key){\n  let closeTag = \"\";\n  if(this.options.unpairedTags.indexOf(key) !== -1){ //unpaired\n    if(!this.options.suppressUnpairedNode) closeTag = \"/\"\n  }else if(this.options.suppressEmptyNode){ //empty\n    closeTag = \"/\";\n  }else{\n    closeTag = `></${key}`\n  }\n  return closeTag;\n}\n\nfunction buildEmptyObjNode(val, key, attrStr, level) {\n  if (val !== '') {\n    return this.buildObjectNode(val, key, attrStr, level);\n  } else {\n    if(key[0] === \"?\") return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar;\n    else {\n      return  this.indentate(level) + '<' + key + attrStr + '/' + this.tagEndChar;\n      // return this.buildTagStr(level,key, attrStr);\n    }\n  }\n}\n\nBuilder.prototype.buildTextValNode = function(val, key, attrStr, level) {\n  if (this.options.cdataPropName !== false && key === this.options.cdataPropName) {\n    return this.indentate(level) + `<![CDATA[${val}]]>` +  this.newLine;\n  }else if (this.options.commentPropName !== false && key === this.options.commentPropName) {\n    return this.indentate(level) + `<!--${val}-->` +  this.newLine;\n  }else if(key[0] === \"?\") {//PI tag\n    return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar; \n  }else{\n    let textValue = this.options.tagValueProcessor(key, val);\n    textValue = this.replaceEntitiesValue(textValue);\n  \n    if( textValue === ''){\n      return this.indentate(level) + '<' + key + attrStr + this.closeTag(key) + this.tagEndChar;\n    }else{\n      return this.indentate(level) + '<' + key + attrStr + '>' +\n         textValue +\n        '</' + key + this.tagEndChar;\n    }\n  }\n}\n\nBuilder.prototype.replaceEntitiesValue = function(textValue){\n  if(textValue && textValue.length > 0 && this.options.processEntities){\n    for (let i=0; i<this.options.entities.length; i++) {\n      const entity = this.options.entities[i];\n      textValue = textValue.replace(entity.regex, entity.val);\n    }\n  }\n  return textValue;\n}\n\nfunction indentate(level) {\n  return this.options.indentBy.repeat(level);\n}\n\nfunction isAttribute(name /*, options*/) {\n  if (name.startsWith(this.options.attributeNamePrefix)) {\n    return name.substr(this.attrPrefixLen);\n  } else {\n    return false;\n  }\n}\n\nmodule.exports = Builder;\n","const EOL = \"\\n\";\n\n/**\n * \n * @param {array} jArray \n * @param {any} options \n * @returns \n */\nfunction toXml(jArray, options) {\n    let indentation = \"\";\n    if (options.format && options.indentBy.length > 0) {\n        indentation = EOL;\n    }\n    return arrToStr(jArray, options, \"\", indentation);\n}\n\nfunction arrToStr(arr, options, jPath, indentation) {\n    let xmlStr = \"\";\n    let isPreviousElementTag = false;\n\n    for (let i = 0; i < arr.length; i++) {\n        const tagObj = arr[i];\n        const tagName = propName(tagObj);\n        let newJPath = \"\";\n        if (jPath.length === 0) newJPath = tagName\n        else newJPath = `${jPath}.${tagName}`;\n\n        if (tagName === options.textNodeName) {\n            let tagText = tagObj[tagName];\n            if (!isStopNode(newJPath, options)) {\n                tagText = options.tagValueProcessor(tagName, tagText);\n                tagText = replaceEntitiesValue(tagText, options);\n            }\n            if (isPreviousElementTag) {\n                xmlStr += indentation;\n            }\n            xmlStr += tagText;\n            isPreviousElementTag = false;\n            continue;\n        } else if (tagName === options.cdataPropName) {\n            if (isPreviousElementTag) {\n                xmlStr += indentation;\n            }\n            xmlStr += `<![CDATA[${tagObj[tagName][0][options.textNodeName]}]]>`;\n            isPreviousElementTag = false;\n            continue;\n        } else if (tagName === options.commentPropName) {\n            xmlStr += indentation + `<!--${tagObj[tagName][0][options.textNodeName]}-->`;\n            isPreviousElementTag = true;\n            continue;\n        } else if (tagName[0] === \"?\") {\n            const attStr = attr_to_str(tagObj[\":@\"], options);\n            const tempInd = tagName === \"?xml\" ? \"\" : indentation;\n            let piTextNodeName = tagObj[tagName][0][options.textNodeName];\n            piTextNodeName = piTextNodeName.length !== 0 ? \" \" + piTextNodeName : \"\"; //remove extra spacing\n            xmlStr += tempInd + `<${tagName}${piTextNodeName}${attStr}?>`;\n            isPreviousElementTag = true;\n            continue;\n        }\n        let newIdentation = indentation;\n        if (newIdentation !== \"\") {\n            newIdentation += options.indentBy;\n        }\n        const attStr = attr_to_str(tagObj[\":@\"], options);\n        const tagStart = indentation + `<${tagName}${attStr}`;\n        const tagValue = arrToStr(tagObj[tagName], options, newJPath, newIdentation);\n        if (options.unpairedTags.indexOf(tagName) !== -1) {\n            if (options.suppressUnpairedNode) xmlStr += tagStart + \">\";\n            else xmlStr += tagStart + \"/>\";\n        } else if ((!tagValue || tagValue.length === 0) && options.suppressEmptyNode) {\n            xmlStr += tagStart + \"/>\";\n        } else if (tagValue && tagValue.endsWith(\">\")) {\n            xmlStr += tagStart + `>${tagValue}${indentation}</${tagName}>`;\n        } else {\n            xmlStr += tagStart + \">\";\n            if (tagValue && indentation !== \"\" && (tagValue.includes(\"/>\") || tagValue.includes(\"</\"))) {\n                xmlStr += indentation + options.indentBy + tagValue + indentation;\n            } else {\n                xmlStr += tagValue;\n            }\n            xmlStr += `</${tagName}>`;\n        }\n        isPreviousElementTag = true;\n    }\n\n    return xmlStr;\n}\n\nfunction propName(obj) {\n    const keys = Object.keys(obj);\n    for (let i = 0; i < keys.length; i++) {\n        const key = keys[i];\n        if (key !== \":@\") return key;\n    }\n}\n\nfunction attr_to_str(attrMap, options) {\n    let attrStr = \"\";\n    if (attrMap && !options.ignoreAttributes) {\n        for (let attr in attrMap) {\n            let attrVal = options.attributeValueProcessor(attr, attrMap[attr]);\n            attrVal = replaceEntitiesValue(attrVal, options);\n            if (attrVal === true && options.suppressBooleanAttributes) {\n                attrStr += ` ${attr.substr(options.attributeNamePrefix.length)}`;\n            } else {\n                attrStr += ` ${attr.substr(options.attributeNamePrefix.length)}=\"${attrVal}\"`;\n            }\n        }\n    }\n    return attrStr;\n}\n\nfunction isStopNode(jPath, options) {\n    jPath = jPath.substr(0, jPath.length - options.textNodeName.length - 1);\n    let tagName = jPath.substr(jPath.lastIndexOf(\".\") + 1);\n    for (let index in options.stopNodes) {\n        if (options.stopNodes[index] === jPath || options.stopNodes[index] === \"*.\" + tagName) return true;\n    }\n    return false;\n}\n\nfunction replaceEntitiesValue(textValue, options) {\n    if (textValue && textValue.length > 0 && options.processEntities) {\n        for (let i = 0; i < options.entities.length; i++) {\n            const entity = options.entities[i];\n            textValue = textValue.replace(entity.regex, entity.val);\n        }\n    }\n    return textValue;\n}\nmodule.exports = toXml;\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import { Session as SessionInterface, SessionContext, SessionStatus } from '@sentry/types';\nimport { dropUndefinedKeys, uuid4 } from '@sentry/utils';\n\n/**\n * @inheritdoc\n */\nexport class Session implements SessionInterface {\n  public userAgent?: string;\n  public errors: number = 0;\n  public release?: string;\n  public sid: string = uuid4();\n  public did?: string;\n  public timestamp: number = Date.now();\n  public started: number = Date.now();\n  public duration: number = 0;\n  public status: SessionStatus = SessionStatus.Ok;\n  public environment?: string;\n  public ipAddress?: string;\n  public init: boolean = true;\n\n  constructor(context?: Omit<SessionContext, 'started' | 'status'>) {\n    if (context) {\n      this.update(context);\n    }\n  }\n\n  /** JSDoc */\n  // eslint-disable-next-line complexity\n  update(context: SessionContext = {}): void {\n    if (context.user) {\n      if (context.user.ip_address) {\n        this.ipAddress = context.user.ip_address;\n      }\n\n      if (!context.did) {\n        this.did = context.user.id || context.user.email || context.user.username;\n      }\n    }\n\n    this.timestamp = context.timestamp || Date.now();\n\n    if (context.sid) {\n      // Good enough uuid validation. — Kamil\n      this.sid = context.sid.length === 32 ? context.sid : uuid4();\n    }\n    if (context.init !== undefined) {\n      this.init = context.init;\n    }\n    if (context.did) {\n      this.did = `${context.did}`;\n    }\n    if (typeof context.started === 'number') {\n      this.started = context.started;\n    }\n    if (typeof context.duration === 'number') {\n      this.duration = context.duration;\n    } else {\n      this.duration = this.timestamp - this.started;\n    }\n    if (context.release) {\n      this.release = context.release;\n    }\n    if (context.environment) {\n      this.environment = context.environment;\n    }\n    if (context.ipAddress) {\n      this.ipAddress = context.ipAddress;\n    }\n    if (context.userAgent) {\n      this.userAgent = context.userAgent;\n    }\n    if (typeof context.errors === 'number') {\n      this.errors = context.errors;\n    }\n    if (context.status) {\n      this.status = context.status;\n    }\n  }\n\n  /** JSDoc */\n  close(status?: Exclude<SessionStatus, SessionStatus.Ok>): void {\n    if (status) {\n      this.update({ status });\n    } else if (this.status === SessionStatus.Ok) {\n      this.update({ status: SessionStatus.Exited });\n    } else {\n      this.update();\n    }\n  }\n\n  /** JSDoc */\n  toJSON(): {\n    init: boolean;\n    sid: string;\n    did?: string;\n    timestamp: string;\n    started: string;\n    duration: number;\n    status: SessionStatus;\n    errors: number;\n    attrs?: {\n      release?: string;\n      environment?: string;\n      user_agent?: string;\n      ip_address?: string;\n    };\n  } {\n    return dropUndefinedKeys({\n      sid: `${this.sid}`,\n      init: this.init,\n      started: new Date(this.started).toISOString(),\n      timestamp: new Date(this.timestamp).toISOString(),\n      status: this.status,\n      errors: this.errors,\n      did: typeof this.did === 'number' || typeof this.did === 'string' ? `${this.did}` : undefined,\n      duration: this.duration,\n      attrs: dropUndefinedKeys({\n        release: this.release,\n        environment: this.environment,\n        ip_address: this.ipAddress,\n        user_agent: this.userAgent,\n      }),\n    });\n  }\n}\n"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const MODULE_PREFIX = 'fs-loader-';\nconst globalHolder = {};\nconst initializeGlobalNamespace = () => {\n    let holder;\n    // if there is no window obj use nodejs global lib variable\n    if (typeof window === 'undefined') {\n        holder = globalHolder;\n    }\n    else {\n        holder = window;\n    }\n    // @ts-ignore\n    let namespace = holder.filestackInternals;\n    if (!namespace) {\n        namespace = {\n            modules: {},\n        };\n        holder.filestackInternals = namespace;\n    }\n    if (!namespace.modules) {\n        namespace.modules = {};\n    }\n    return namespace;\n};\nconst filestackInternals = initializeGlobalNamespace();\nconst modules = filestackInternals && filestackInternals.modules;\n/**\n * Remove listeners (browser compatible)\n *\n * @param node\n * @param func\n * @param name\n */\nconst removeListener = (node, func, name) => {\n    if (node.detachEvent) {\n        node.detachEvent('onreadystatechange', func);\n    }\n    else {\n        node.removeEventListener(name, func, false);\n    }\n};\n/**\n * Load multiple modules\n *\n * @param {*} modules\n */\nexport const loadModules = (modulesList) => Promise.all(modulesList.map(({ id, url }) => loadModule(id, url))).then((res) => {\n    const toReturn = {};\n    res.forEach((mod, idx) => {\n        const el = modulesList[idx];\n        toReturn[el.id] = mod;\n    });\n    return toReturn;\n});\n/**\n * Load single module from url with given id\n *\n * @param {*} id - module id\n * @param {*} url\n */\nexport const loadModule = (id, url) => {\n    if (typeof window === 'undefined') {\n        return Promise.reject(new Error('Load module is working only on browser env'));\n    }\n    if (!id) {\n        throw new Error('Module id is required');\n    }\n    id = MODULE_PREFIX + id;\n    let moduleDefinition = modules[id];\n    if (!moduleDefinition) {\n        modules[id] = {};\n        moduleDefinition = modules[id];\n    }\n    if (moduleDefinition.instance) {\n        return Promise.resolve(moduleDefinition.instance);\n    }\n    if (moduleDefinition.promise) {\n        return moduleDefinition.promise;\n    }\n    return moduleDefinition.promise = new Promise((resolve, reject) => {\n        const readyStateChange = (evt) => {\n            if (evt.type === 'load' || (/^(complete|loaded)$/.test((evt.currentTarget || evt.srcElement).readyState))) {\n                const node = evt.currentTarget || evt.srcElement;\n                removeListener(node, readyStateChange, 'load');\n                removeListener(node, reject, 'error');\n                // slow dow checking if module is loaded to ensure that script that  register module is called\n                setTimeout(() => resolve(modules[id] ? modules[id].instance : undefined), 10);\n            }\n        };\n        const script = document.createElement('script');\n        script.id = id;\n        // @ts-ignore fix for IE\n        if (script.attachEvent && !(script.attachEvent.toString && script.attachEvent.toString().indexOf('[native code') < 0)) {\n            // @ts-ignore\n            script.attachEvent('onreadystatechange', readyStateChange);\n        }\n        else {\n            script.addEventListener('load', readyStateChange, false);\n            script.addEventListener('onerror', reject, false);\n        }\n        script.setAttribute('crossorigin', 'anonymous');\n        script.setAttribute('charset', 'utf-8');\n        script.setAttribute('async', 'true');\n        script.src = url;\n        document.body.appendChild(script);\n    });\n};\n/**\n * Register that module is ready\n *\n * @param {string} id\n * @param {any} instance\n * @param {any} metadata - additional module metadata like version\n */\nexport const registerModule = (id, instance, metadata) => {\n    // loader not working on nodejs envs\n    if (typeof window === 'undefined') {\n        return;\n    }\n    if (!id) {\n        throw new Error('Module id is required');\n    }\n    if (!modules) {\n        throw new Error('Loader is not initialized');\n    }\n    id = MODULE_PREFIX + id;\n    if (modules[id]) {\n        modules[id] = { instance, metadata };\n    }\n};\n/**\n * Load external css from given url\n *\n * @param {*} url\n */\nexport const loadCss = (url) => {\n    const alreadyAddedThisTag = document.querySelector(`link[href=\"${url}\"]`);\n    if (alreadyAddedThisTag !== null) {\n        return Promise.resolve();\n    }\n    return new Promise((resolve) => {\n        const head = document.getElementsByTagName('head')[0];\n        const link = document.createElement('link');\n        const loaded = () => {\n            resolve();\n            link.removeEventListener('load', loaded);\n        };\n        link.rel = 'stylesheet';\n        link.href = url;\n        link.addEventListener('load', loaded);\n        head.appendChild(link);\n    });\n};\n/**\n * Enum just for unify filestack module names\n */\nexport var FILESTACK_MODULES;\n(function (FILESTACK_MODULES) {\n    FILESTACK_MODULES[\"FILESTACK_SDK\"] = \"filestack-sdk\";\n    FILESTACK_MODULES[\"TRANSFORMS_UI\"] = \"transforms-ui\";\n    FILESTACK_MODULES[\"PICKER\"] = \"picker\";\n})(FILESTACK_MODULES || (FILESTACK_MODULES = {}));\n;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9saWIvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxhQUFhLEdBQUcsWUFBWSxDQUFDO0FBQ25DLE1BQU0sWUFBWSxHQUFRLEVBQUUsQ0FBQztBQWU3QixNQUFNLHlCQUF5QixHQUFHLEdBQUcsRUFBRTtJQUNyQyxJQUFJLE1BQVUsQ0FBQztJQUVmLDJEQUEyRDtJQUMzRCxJQUFJLE9BQU8sTUFBTSxLQUFLLFdBQVcsRUFBRTtRQUNqQyxNQUFNLEdBQUcsWUFBWSxDQUFDO0tBQ3ZCO1NBQU07UUFDTCxNQUFNLEdBQUcsTUFBTSxDQUFBO0tBQ2hCO0lBRUQsYUFBYTtJQUNiLElBQUksU0FBUyxHQUFjLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQztJQUVyRCxJQUFJLENBQUMsU0FBUyxFQUFFO1FBQ2QsU0FBUyxHQUFHO1lBQ1YsT0FBTyxFQUFFLEVBQUU7U0FDWixDQUFDO1FBRUYsTUFBTSxDQUFDLGtCQUFrQixHQUFHLFNBQVMsQ0FBQztLQUN2QztJQUVELElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFO1FBQ3RCLFNBQVMsQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDO0tBQ3hCO0lBRUQsT0FBTyxTQUFTLENBQUM7QUFDbkIsQ0FBQyxDQUFDO0FBRUYsTUFBTSxrQkFBa0IsR0FBRyx5QkFBeUIsRUFBRSxDQUFDO0FBQ3ZELE1BQU0sT0FBTyxHQUFHLGtCQUFrQixJQUFJLGtCQUFrQixDQUFDLE9BQU8sQ0FBQztBQUVqRTs7Ozs7O0dBTUc7QUFDSCxNQUFNLGNBQWMsR0FBRyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFJLEVBQUU7SUFDNUMsSUFBSSxJQUFJLENBQUMsV0FBVyxFQUFFO1FBQ3BCLElBQUksQ0FBQyxXQUFXLENBQUMsb0JBQW9CLEVBQUUsSUFBSSxDQUFDLENBQUM7S0FDOUM7U0FBTTtRQUNMLElBQUksQ0FBQyxtQkFBbUIs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QUFDLElBQUksQ0FBQyxDQUFDO0lBQ3pCLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDO0FBRUY7O0dBRUc7QUFDSCxNQUFNLENBQU4sSUFBWSxpQkFJWDtBQUpELFdBQVksaUJBQWlCO0lBQzNCLG9EQUErQixDQUFBO0lBQy9CLG9EQUErQixDQUFBO0lBQy9CLHNDQUFpQixDQUFBO0FBQ25CLENBQUMsRUFKVyxpQkFBaUIsS0FBakIsaUJBQWlCLFFBSTVCO0FBQUEsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IE1PRFVMRV9QUkVGSVggPSAnZnMtbG9hZGVyLSc7XG5jb25zdCBnbG9iYWxIb2xkZXI6IGFueSA9IHt9O1xuXG5leHBvcnQgdHlwZSBNb2R1bGVEZWYgPSB7XG4gIHByb21pc2U/OiBQcm9taXNlPGFueT5cbiAgcmVzb2x2ZVByb21pc2U/OiBhbnk7XG4gIGluc3RhbmNlPzogYW55O1xuICBtZXRhZGF0YT86IGFueTtcbn1cblxuZXhwb3J0IHR5cGUgTmFtZXNwYWNlID0ge1xuICAgIG1vZHVsZXM6IHtcbiAgICAgW2tleTogc3RyaW5nXTogTW9kdWxlRGVmXG4gICAgfVxufTtcblxuY29uc3QgaW5pdGlhbGl6ZUdsb2JhbE5hbWVzcGFjZSA9ICgpID0+IHtcbiAgbGV0IGhvbGRlcjphbnk7XG5cbiAgLy8gaWYgdGhlcmUgaXMgbm8gd2luZG93IG9iaiB1c2Ugbm9kZWpzIGdsb2JhbCBsaWIgdmFyaWFibGVcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgaG9sZGVyID0gZ2xvYmFsSG9sZGVyO1xuICB9IGVsc2Uge1xuICAgIGhvbGRlciA9IHdpbmRvd1xuICB9XG5cbiAgLy8gQHRzLWlnbm9yZVxuICBsZXQgbmFtZXNwYWNlOiBOYW1lc3BhY2UgPSBob2xkZXIuZmlsZXN0YWNrSW50ZXJuYWxzO1xuXG4gIGlmICghbmFtZXNwYWNlKSB7XG4gICAgbmFtZXNwYWNlID0ge1xuICAgICAgbW9kdWxlczoge30sXG4gICAgfTtcblxuICAgIGhvbGRlci5maWxlc3RhY2tJbnRlcm5hbHMgPSBuYW1lc3BhY2U7XG4gIH1cblxuICBpZiAoIW5hbWVzcGFjZS5tb2R1bGVzKSB7XG4gICAgbmFtZXNwYWNlLm1vZHVsZXMgPSB7fTtcbiAgfVxuICBcbiAgcmV0dXJuIG5hbWVzcGFjZTtcbn07XG5cbmNvbnN0IGZpbGVzdGFja0ludGVybmFscyA9IGluaXRpYWxpemVHbG9iYWxOYW1lc3BhY2UoKTtcbmNvbnN0IG1vZHVsZXMgPSBmaWxlc3RhY2tJbnRlcm5hbHMgJiYgZmlsZXN0YWNrSW50ZXJuYWxzLm1vZHVsZXM7XG5cbi8qKlxuICogUmVtb3ZlIGxpc3RlbmVycyAoYnJvd3NlciBjb21wYXRpYmxlKVxuICogXG4gKiBAcGFyYW0gbm9kZSBcbiAqIEBwYXJhbSBmdW5jIFxuICogQHBhcmFtIG5hbWUgXG4gKi9cbmNvbnN0IHJlbW92ZUxpc3RlbmVyID0gKG5vZGUsIGZ1bmMsIG5hbWUsICkgPT4ge1xuICBpZiAobm9kZS5kZXRhY2hFdmVudCkge1xuICAgIG5vZGUuZGV0YWNoRXZlbnQoJ29ucmVhZHlzdGF0ZWNoYW5nZScsIGZ1bmMpO1xuICB9IGVsc2Uge1xuICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihuYW1lLCBmdW5jLCBmYWxzZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBMb2FkIG11bHRpcGxlIG1vZHVsZXNcbiAqIFxuICogQHBhcmFtIHsqfSBtb2R1bGVzIFxuICovXG5leHBvcnQgY29uc3QgbG9hZE1vZHVsZXMgPSAobW9kdWxlc0xpc3QpID0+IFByb21pc2UuYWxsKG1vZHVsZXNMaXN0Lm1hcCgoeyBpZCwgdXJsIH0pID0+IGxvYWRNb2R1bGUoaWQsIHVybCkpKS50aGVuKChyZXMpID0+IHtcbiAgY29uc3QgdG9SZXR1cm4gPSB7fTtcblxuICByZXMuZm9yRWFjaCgobW9kLCBpZHgpID0+IHtcbiAgICBjb25zdCBlbCA9IG1vZHVsZXNMaXN0W2lkeF07XG4gICAgdG9SZXR1cm5bZWwuaWRdID0gbW9kO1xuICB9KTtcblxuICByZXR1cm4gdG9SZXR1cm47XG59KTtcblxuLyoqXG4gKiBMb2FkIHNpbmdsZSBtb2R1bGUgZnJvbSB1cmwgd2l0aCBnaXZlbiBpZFxuICpcbiAqIEBwYXJhbSB7Kn0gaWQgLSBtb2R1bGUgaWQgXG4gKiBAcGFyYW0geyp9IHVybFxuICovXG5leHBvcnQgY29uc3QgbG9hZE1vZHVsZSA9IChpZDogc3RyaW5nLCB1cmw6IHN0cmluZykgPT4ge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdMb2FkIG1vZHVsZSBpcyB3b3JraW5nIG9ubHkgb24gYnJvd3NlciBlbnYnKSk7XG4gIH1cblxuICBpZiAoIWlkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNb2R1bGUgaWQgaXMgcmVxdWlyZWQnKVxuICB9XG5cbiAgaWQgPSAgTU9EVUxFX1BSRUZJWCArIGlkO1xuICBsZXQgbW9kdWxlRGVmaW5pdGlvbiA9IG1vZHVsZXNbaWRdO1xuXG4gIGlmICghbW9kdWxlRGVmaW5pdGlvbikge1xuICAgIG1vZHVsZXNbaWRdID0ge307XG4gICAgbW9kdWxlRGVmaW5pdGlvbiA9IG1vZHVsZXNbaWRdO1xuICB9XG5cbiAgaWYgKG1vZHVsZURlZmluaXRpb24uaW5zdGFuY2UpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG1vZHVsZURlZmluaXRpb24uaW5zdGFuY2UpO1xuICB9XG5cbiAgaWYgKG1vZHVsZURlZmluaXRpb24ucHJvbWlzZSkge1xuICAgIHJldHVybiBtb2R1bGVEZWZpbml0aW9uLnByb21pc2U7XG4gIH1cblxuICByZXR1cm4gbW9kdWxlRGVmaW5pdGlvbi5wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IHJlYWR5U3RhdGVDaGFuZ2UgPSAoZXZ0OiBhbnkpID0+IHtcbiAgICAgIGlmIChldnQudHlwZSA9PT0gJ2xvYWQnIHx8ICgvXihjb21wbGV0ZXxsb2FkZWQpJC8udGVzdCgoZXZ0LmN1cnJlbnRUYXJnZXQgfHwgZXZ0LnNyY0VsZW1lbnQpLnJlYWR5U3RhdGUpKSkge1xuICAgICAgICBjb25zdCBub2RlID0gIGV2dC5jdXJyZW50VGFyZ2V0IHx8IGV2dC5zcmNFbGVtZW50O1xuXG4gICAgICAgIHJlbW92ZUxpc3RlbmVyKG5vZGUsIHJlYWR5U3RhdGVDaGFuZ2UsICdsb2FkJyk7XG4gICAgICAgIHJlbW92ZUxpc3RlbmVyKG5vZGUsIHJlamVjdCwgJ2Vycm9yJyk7XG5cbiAgICAgICAgLy8gc2xvdyBkb3cgY2hlY2tpbmcgaWYgbW9kdWxlIGlzIGxvYWRlZCB0byBlbnN1cmUgdGhhdCBzY3JpcHQgdGhhdCAgcmVnaXN0ZXIgbW9kdWxlIGlzIGNhbGxlZFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUobW9kdWxlc1tpZF0gPyBtb2R1bGVzW2lkXS5pbnN0YW5jZSA6IHVuZGVmaW5lZCksIDEwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICBcbiAgICBzY3JpcHQuaWQgPSBpZDtcblxuICAgIC8vIEB0cy1pZ25vcmUgZml4IGZvciBJRVxuICAgIGlmIChzY3JpcHQuYXR0YWNoRXZlbnQgJiYgIShzY3JpcHQuYXR0YWNoRXZlbnQudG9TdHJpbmcgJiYgc2NyaXB0LmF0dGFjaEV2ZW50LnRvU3RyaW5nKCkuaW5kZXhPZignW25hdGl2ZSBjb2RlJykgPCAwKSkge1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgc2NyaXB0LmF0dGFjaEV2ZW50KCdvbnJlYWR5c3RhdGVjaGFuZ2UnLCByZWFkeVN0YXRlQ2hhbmdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2NyaXB0LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCByZWFkeVN0YXRlQ2hhbmdlLCBmYWxzZSk7XG4gICAgICBzY3JpcHQuYWRkRXZlbnRMaXN0ZW5lcignb25lcnJvcicsIHJlamVjdCwgZmFsc2UpO1xuICAgIH1cblxuICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ2Nyb3Nzb3JpZ2luJywgJ2Fub255bW91cycpO1xuICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ2NoYXJzZXQnLCAndXRmLTgnKTtcbiAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCdhc3luYycsICd0cnVlJyk7XG5cbiAgICBzY3JpcHQuc3JjID0gdXJsO1xuXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICB9KTtcbn07XG5cbi8qKlxuICogUmVnaXN0ZXIgdGhhdCBtb2R1bGUgaXMgcmVhZHlcbiAqIFxuICogQHBhcmFtIHtzdHJpbmd9IGlkIFxuICogQHBhcmFtIHthbnl9IGluc3RhbmNlIFxuICogQHBhcmFtIHthbnl9IG1ldGFkYXRhIC0gYWRkaXRpb25hbCBtb2R1bGUgbWV0YWRhdGEgbGlrZSB2ZXJzaW9uXG4gKi9cbmV4cG9ydCBjb25zdCByZWdpc3Rlck1vZHVsZSA9IChpZDogc3RyaW5nLCBpbnN0YW5jZTogYW55LCBtZXRhZGF0YT86IGFueSkgPT4ge1xuICAvLyBsb2FkZXIgbm90IHdvcmtpbmcgb24gbm9kZWpzIGVudnNcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCFpZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTW9kdWxlIGlkIGlzIHJlcXVpcmVkJylcbiAgfVxuXG4gIGlmICghbW9kdWxlcykge1xuICAgIHRocm93IG5ldyBFcnJvcignTG9hZGVyIGlzIG5vdCBpbml0aWFsaXplZCcpXG4gIH1cblxuICBpZCA9IE1PRFVMRV9QUkVGSVggKyBpZDtcblxuICBpZiAobW9kdWxlc1tpZF0pIHtcbiAgICBtb2R1bGVzW2lkXSA9IHsgaW5zdGFuY2UsIG1ldGFkYXRhIH1cbiAgfVxufTtcblxuLyoqXG4gKiBMb2FkIGV4dGVybmFsIGNzcyBmcm9tIGdpdmVuIHVybFxuICogXG4gKiBAcGFyYW0geyp9IHVybCBcbiAqL1xuZXhwb3J0IGNvbnN0IGxvYWRDc3MgPSAodXJsKSA9PiB7XG4gIGNvbnN0IGFscmVhZHlBZGRlZFRoaXNUYWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBsaW5rW2hyZWY9XCIke3VybH1cIl1gKTtcbiAgaWYgKGFscmVhZHlBZGRlZFRoaXNUYWcgIT09IG51bGwpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cblxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBjb25zdCBoZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcbiAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuXG4gICAgY29uc3QgbG9hZGVkID0gKCkgPT4ge1xuICAgICAgcmVzb2x2ZSgpO1xuICAgICAgbGluay5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkJywgbG9hZGVkKTtcbiAgICB9O1xuXG4gICAgbGluay5yZWwgPSAnc3R5bGVzaGVldCc7XG4gICAgbGluay5ocmVmID0gdXJsO1xuICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGxvYWRlZCk7XG4gICAgaGVhZC5hcHBlbmRDaGlsZChsaW5rKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIEVudW0ganVzdCBmb3IgdW5pZnkgZmlsZXN0YWNrIG1vZHVsZSBuYW1lc1xuICovXG5leHBvcnQgZW51bSBGSUxFU1RBQ0tfTU9EVUxFUyB7XG4gIEZJTEVTVEFDS19TREsgPSAnZmlsZXN0YWNrLXNkaycsXG4gIFRSQU5TRk9STVNfVUkgPSAndHJhbnNmb3Jtcy11aScsXG4gIFBJQ0tFUiA9ICdwaWNrZXInLFxufTtcbiJdfQ==","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport var getSecurity = function (policyOptions, appSecret) {\n    throw new Error('getSecurity is only supported in nodejs');\n};\nexport var validateWebhookSignature = function (secret, rawBody, toCompare) {\n    throw new Error('validateWebhookSignature is only supported in nodejs');\n};\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvYXBpL3NlY3VyaXR5LmJyb3dzZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBS0gsTUFBTSxDQUFDLElBQU0sV0FBVyxHQUFHLFVBQUMsYUFBOEIsRUFBRSxTQUFpQjtJQUMzRSxNQUFNLElBQUksS0FBSyxDQUFDLHlDQUF5QyxDQUFDLENBQUM7QUFDN0QsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLElBQU0sd0JBQXdCLEdBQUcsVUFBQyxNQUFjLEVBQUUsT0FBZSxFQUFFLFNBQWlDO0lBQ3pHLE1BQU0sSUFBSSxLQUFLLENBQUMsc0RBQXNELENBQUMsQ0FBQztBQUMxRSxDQUFDLENBQUMiLCJmaWxlIjoibGliL2FwaS9zZWN1cml0eS5icm93c2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAoYykgMjAxOCBieSBGaWxlc3RhY2suXG4gKiBTb21lIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgU2VjdXJpdHkgfSBmcm9tICcuLy4uL2NsaWVudCc7XG5pbXBvcnQgeyBTZWN1cml0eU9wdGlvbnMsIFdlYmhvb2tWYWxpZGF0ZVBheWxvYWQgfSBmcm9tICcuL3NlY3VyaXR5JztcblxuZXhwb3J0IGNvbnN0IGdldFNlY3VyaXR5ID0gKHBvbGljeU9wdGlvbnM6IFNlY3VyaXR5T3B0aW9ucywgYXBwU2VjcmV0OiBzdHJpbmcpOiBTZWN1cml0eSA9PiB7XG4gIHRocm93IG5ldyBFcnJvcignZ2V0U2VjdXJpdHkgaXMgb25seSBzdXBwb3J0ZWQgaW4gbm9kZWpzJyk7XG59O1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGVXZWJob29rU2lnbmF0dXJlID0gKHNlY3JldDogc3RyaW5nLCByYXdCb2R5OiBzdHJpbmcsIHRvQ29tcGFyZTogV2ViaG9va1ZhbGlkYXRlUGF5bG9hZCkgPT4ge1xuICB0aHJvdyBuZXcgRXJyb3IoJ3ZhbGlkYXRlV2ViaG9va1NpZ25hdHVyZSBpcyBvbmx5IHN1cHBvcnRlZCBpbiBub2RlanMnKTtcbn07XG4iXX0=\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { consoleSandbox, getGlobalObject } from './misc';\n\n// TODO: Implement different loggers for different environments\nconst global = getGlobalObject<Window | NodeJS.Global>();\n\n/** Prefix for logging strings */\nconst PREFIX = 'Sentry Logger ';\n\n/** JSDoc */\nclass Logger {\n  /** JSDoc */\n  private _enabled: boolean;\n\n  /** JSDoc */\n  public constructor() {\n    this._enabled = false;\n  }\n\n  /** JSDoc */\n  public disable(): void {\n    this._enabled = false;\n  }\n\n  /** JSDoc */\n  public enable(): void {\n    this._enabled = true;\n  }\n\n  /** JSDoc */\n  public log(...args: any[]): void {\n    if (!this._enabled) {\n      return;\n    }\n    consoleSandbox(() => {\n      global.console.log(`${PREFIX}[Log]: ${args.join(' ')}`);\n    });\n  }\n\n  /** JSDoc */\n  public warn(...args: any[]): void {\n    if (!this._enabled) {\n      return;\n    }\n    consoleSandbox(() => {\n      global.console.warn(`${PREFIX}[Warn]: ${args.join(' ')}`);\n    });\n  }\n\n  /** JSDoc */\n  public error(...args: any[]): void {\n    if (!this._enabled) {\n      return;\n    }\n    consoleSandbox(() => {\n      global.console.error(`${PREFIX}[Error]: ${args.join(' ')}`);\n    });\n  }\n}\n\n// Ensure we only have a single logger instance, even if multiple versions of @sentry/utils are being used\nglobal.__SENTRY__ = global.__SENTRY__ || {};\nconst logger = (global.__SENTRY__.logger as Logger) || (global.__SENTRY__.logger = new Logger());\n\nexport { logger };\n","/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable @typescript-eslint/typedef */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isThenable } from './is';\n\n/** SyncPromise internal states */\nenum States {\n  /** Pending */\n  PENDING = 'PENDING',\n  /** Resolved / OK */\n  RESOLVED = 'RESOLVED',\n  /** Rejected / Error */\n  REJECTED = 'REJECTED',\n}\n\n/**\n * Thenable class that behaves like a Promise and follows it's interface\n * but is not async internally\n */\nclass SyncPromise<T> implements PromiseLike<T> {\n  private _state: States = States.PENDING;\n  private _handlers: Array<{\n    done: boolean;\n    onfulfilled?: ((value: T) => T | PromiseLike<T>) | null;\n    onrejected?: ((reason: any) => any) | null;\n  }> = [];\n  private _value: any;\n\n  public constructor(\n    executor: (resolve: (value?: T | PromiseLike<T> | null) => void, reject: (reason?: any) => void) => void,\n  ) {\n    try {\n      executor(this._resolve, this._reject);\n    } catch (e) {\n      this._reject(e);\n    }\n  }\n\n  /** JSDoc */\n  public static resolve<T>(value: T | PromiseLike<T>): PromiseLike<T> {\n    return new SyncPromise(resolve => {\n      resolve(value);\n    });\n  }\n\n  /** JSDoc */\n  public static reject<T = never>(reason?: any): PromiseLike<T> {\n    return new SyncPromise((_, reject) => {\n      reject(reason);\n    });\n  }\n\n  /** JSDoc */\n  public static all<U = any>(collection: Array<U | PromiseLike<U>>): PromiseLike<U[]> {\n    return new SyncPromise<U[]>((resolve, reject) => {\n      if (!Array.isArray(collection)) {\n        reject(new TypeError(`Promise.all requires an array as input.`));\n        return;\n      }\n\n      if (collection.length === 0) {\n        resolve([]);\n        return;\n      }\n\n      let counter = collection.length;\n      const resolvedCollection: U[] = [];\n\n      collection.forEach((item, index) => {\n        SyncPromise.resolve(item)\n          .then(value => {\n            resolvedCollection[index] = value;\n            counter -= 1;\n\n            if (counter !== 0) {\n              return;\n            }\n            resolve(resolvedCollection);\n          })\n          .then(null, reject);\n      });\n    });\n  }\n\n  /** JSDoc */\n  public then<TResult1 = T, TResult2 = never>(\n    onfulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | null,\n    onrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | null,\n  ): PromiseLike<TResult1 | TResult2> {\n    return new SyncPromise((resolve, reject) => {\n      this._attachHandler({\n        done: false,\n        onfulfilled: result => {\n          if (!onfulfilled) {\n            // TODO: ¯\\_(ツ)_/¯\n            // TODO: FIXME\n            resolve(result as any);\n            return;\n          }\n          try {\n            resolve(onfulfilled(result));\n            return;\n          } catch (e) {\n            reject(e);\n            return;\n          }\n        },\n        onrejected: reason => {\n          if (!onrejected) {\n            reject(reason);\n            return;\n          }\n          try {\n            resolve(onrejected(reason));\n            return;\n          } catch (e) {\n            reject(e);\n            return;\n          }\n        },\n      });\n    });\n  }\n\n  /** JSDoc */\n  public catch<TResult = never>(\n    onrejected?: ((reason: any) => TResult | PromiseLike<TResult>) | null,\n  ): PromiseLike<T | TResult> {\n    return this.then(val => val, onrejected);\n  }\n\n  /** JSDoc */\n  public finally<TResult>(onfinally?: (() => void) | null): PromiseLike<TResult> {\n    return new SyncPromise<TResult>((resolve, reject) => {\n      let val: TResult | any;\n      let isRejected: boolean;\n\n      return this.then(\n        value => {\n          isRejected = false;\n          val = value;\n          if (onfinally) {\n            onfinally();\n          }\n        },\n        reason => {\n          isRejected = true;\n          val = reason;\n          if (onfinally) {\n            onfinally();\n          }\n        },\n      ).then(() => {\n        if (isRejected) {\n          reject(val);\n          return;\n        }\n\n        resolve((val as unknown) as any);\n      });\n    });\n  }\n\n  /** JSDoc */\n  public toString(): string {\n    return '[object SyncPromise]';\n  }\n\n  /** JSDoc */\n  private readonly _resolve = (value?: T | PromiseLike<T> | null) => {\n    this._setResult(States.RESOLVED, value);\n  };\n\n  /** JSDoc */\n  private readonly _reject = (reason?: any) => {\n    this._setResult(States.REJECTED, reason);\n  };\n\n  /** JSDoc */\n  private readonly _setResult = (state: States, value?: T | PromiseLike<T> | any) => {\n    if (this._state !== States.PENDING) {\n      return;\n    }\n\n    if (isThenable(value)) {\n      (value as PromiseLike<T>).then(this._resolve, this._reject);\n      return;\n    }\n\n    this._state = state;\n    this._value = value;\n\n    this._executeHandlers();\n  };\n\n  // TODO: FIXME\n  /** JSDoc */\n  private readonly _attachHandler = (handler: {\n    /** JSDoc */\n    done: boolean;\n    /** JSDoc */\n    onfulfilled?(value: T): any;\n    /** JSDoc */\n    onrejected?(reason: any): any;\n  }) => {\n    this._handlers = this._handlers.concat(handler);\n    this._executeHandlers();\n  };\n\n  /** JSDoc */\n  private readonly _executeHandlers = () => {\n    if (this._state === States.PENDING) {\n      return;\n    }\n\n    const cachedHandlers = this._handlers.slice();\n    this._handlers = [];\n\n    cachedHandlers.forEach(handler => {\n      if (handler.done) {\n        return;\n      }\n\n      if (this._state === States.RESOLVED) {\n        if (handler.onfulfilled) {\n          // eslint-disable-next-line @typescript-eslint/no-floating-promises\n          handler.onfulfilled((this._value as unknown) as any);\n        }\n      }\n\n      if (this._state === States.REJECTED) {\n        if (handler.onrejected) {\n          handler.onrejected(this._value);\n        }\n      }\n\n      handler.done = true;\n    });\n  };\n}\n\nexport { SyncPromise };\n","/* eslint-disable max-lines */\nimport {\n  Breadcrumb,\n  CaptureContext,\n  Context,\n  Contexts,\n  Event,\n  EventHint,\n  EventProcessor,\n  Extra,\n  Extras,\n  Primitive,\n  Scope as ScopeInterface,\n  ScopeContext,\n  Severity,\n  Span,\n  Transaction,\n  User,\n} from '@sentry/types';\nimport { dateTimestampInSeconds, getGlobalObject, isPlainObject, isThenable, SyncPromise } from '@sentry/utils';\n\nimport { Session } from './session';\n\n/**\n * Holds additional event information. {@link Scope.applyToEvent} will be\n * called by the client before an event will be sent.\n */\nexport class Scope implements ScopeInterface {\n  /** Flag if notifiying is happening. */\n  protected _notifyingListeners: boolean = false;\n\n  /** Callback for client to receive scope changes. */\n  protected _scopeListeners: Array<(scope: Scope) => void> = [];\n\n  /** Callback list that will be called after {@link applyToEvent}. */\n  protected _eventProcessors: EventProcessor[] = [];\n\n  /** Array of breadcrumbs. */\n  protected _breadcrumbs: Breadcrumb[] = [];\n\n  /** User */\n  protected _user: User = {};\n\n  /** Tags */\n  protected _tags: { [key: string]: Primitive } = {};\n\n  /** Extra */\n  protected _extra: Extras = {};\n\n  /** Contexts */\n  protected _contexts: Contexts = {};\n\n  /** Fingerprint */\n  protected _fingerprint?: string[];\n\n  /** Severity */\n  protected _level?: Severity;\n\n  /** Transaction Name */\n  protected _transactionName?: string;\n\n  /** Span */\n  protected _span?: Span;\n\n  /** Session */\n  protected _session?: Session;\n\n  /**\n   * Inherit values from the parent scope.\n   * @param scope to clone.\n   */\n  public static clone(scope?: Scope): Scope {\n    const newScope = new Scope();\n    if (scope) {\n      newScope._breadcrumbs = [...scope._breadcrumbs];\n      newScope._tags = { ...scope._tags };\n      newScope._extra = { ...scope._extra };\n      newScope._contexts = { ...scope._contexts };\n      newScope._user = scope._user;\n      newScope._level = scope._level;\n      newScope._span = scope._span;\n      newScope._session = scope._session;\n      newScope._transactionName = scope._transactionName;\n      newScope._fingerprint = scope._fingerprint;\n      newScope._eventProcessors = [...scope._eventProcessors];\n    }\n    return newScope;\n  }\n\n  /**\n   * Add internal on change listener. Used for sub SDKs that need to store the scope.\n   * @hidden\n   */\n  public addScopeListener(callback: (scope: Scope) => void): void {\n    this._scopeListeners.push(callback);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public addEventProcessor(callback: EventProcessor): this {\n    this._eventProcessors.push(callback);\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public setUser(user: User | null): this {\n    this._user = user || {};\n    if (this._session) {\n      this._session.update({ user });\n    }\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public getUser(): User | undefined {\n    return this._user;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public setTags(tags: { [key: string]: Primitive }): this {\n    this._tags = {\n      ...this._tags,\n      ...tags,\n    };\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public setTag(key: string, value: Primitive): this {\n    this._tags = { ...this._tags, [key]: value };\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public setExtras(extras: Extras): this {\n    this._extra = {\n      ...this._extra,\n      ...extras,\n    };\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public setExtra(key: string, extra: Extra): this {\n    this._extra = { ...this._extra, [key]: extra };\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public setFingerprint(fingerprint: string[]): this {\n    this._fingerprint = fingerprint;\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public setLevel(level: Severity): this {\n    this._level = level;\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public setTransactionName(name?: string): this {\n    this._transactionName = name;\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * Can be removed in major version.\n   * @deprecated in favor of {@link this.setTransactionName}\n   */\n  public setTransaction(name?: string): this {\n    return this.setTransactionName(name);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public setContext(key: string, context: Context | null): this {\n    if (context === null) {\n      // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n      delete this._contexts[key];\n    } else {\n      this._contexts = { ...this._contexts, [key]: context };\n    }\n\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public setSpan(span?: Span): this {\n    this._span = span;\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public getSpan(): Span | undefined {\n    return this._span;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public getTransaction(): Transaction | undefined {\n    // often, this span will be a transaction, but it's not guaranteed to be\n    const span = this.getSpan() as undefined | (Span & { spanRecorder: { spans: Span[] } });\n\n    // try it the new way first\n    if (span?.transaction) {\n      return span?.transaction;\n    }\n\n    // fallback to the old way (known bug: this only finds transactions with sampled = true)\n    if (span?.spanRecorder?.spans[0]) {\n      return span.spanRecorder.spans[0] as Transaction;\n    }\n\n    // neither way found a transaction\n    return undefined;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public setSession(session?: Session): this {\n    if (!session) {\n      delete this._session;\n    } else {\n      this._session = session;\n    }\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public getSession(): Session | undefined {\n    return this._session;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public update(captureContext?: CaptureContext): this {\n    if (!captureContext) {\n      return this;\n    }\n\n    if (typeof captureContext === 'function') {\n      const updatedScope = (captureContext as <T>(scope: T) => T)(this);\n      return updatedScope instanceof Scope ? updatedScope : this;\n    }\n\n    if (captureContext instanceof Scope) {\n      this._tags = { ...this._tags, ...captureContext._tags };\n      this._extra = { ...this._extra, ...captureContext._extra };\n      this._contexts = { ...this._contexts, ...captureContext._contexts };\n      if (captureContext._user && Object.keys(captureContext._user).length) {\n        this._user = captureContext._user;\n      }\n      if (captureContext._level) {\n        this._level = captureContext._level;\n      }\n      if (captureContext._fingerprint) {\n        this._fingerprint = captureContext._fingerprint;\n      }\n    } else if (isPlainObject(captureContext)) {\n      // eslint-disable-next-line no-param-reassign\n      captureContext = captureContext as ScopeContext;\n      this._tags = { ...this._tags, ...captureContext.tags };\n      this._extra = { ...this._extra, ...captureContext.extra };\n      this._contexts = { ...this._contexts, ...captureContext.contexts };\n      if (captureContext.user) {\n        this._user = captureContext.user;\n      }\n      if (captureContext.level) {\n        this._level = captureContext.level;\n      }\n      if (captureContext.fingerprint) {\n        this._fingerprint = captureContext.fingerprint;\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public clear(): this {\n    this._breadcrumbs = [];\n    this._tags = {};\n    this._extra = {};\n    this._user = {};\n    this._contexts = {};\n    this._level = undefined;\n    this._transactionName = undefined;\n    this._fingerprint = undefined;\n    this._span = undefined;\n    this._session = undefined;\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public addBreadcrumb(breadcrumb: Breadcrumb, maxBreadcrumbs?: number): this {\n    const mergedBreadcrumb = {\n      timestamp: dateTimestampInSeconds(),\n      ...breadcrumb,\n    };\n\n    this._breadcrumbs =\n      maxBreadcrumbs !== undefined && maxBreadcrumbs >= 0\n        ? [...this._breadcrumbs, mergedBreadcrumb].slice(-maxBreadcrumbs)\n        : [...this._breadcrumbs, mergedBreadcrumb];\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public clearBreadcrumbs(): this {\n    this._breadcrumbs = [];\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * Applies the current context and fingerprint to the event.\n   * Note that breadcrumbs will be added by the client.\n   * Also if the event has already breadcrumbs on it, we do not merge them.\n   * @param event Event\n   * @param hint May contain additional informartion about the original exception.\n   * @hidden\n   */\n  public applyToEvent(event: Event, hint?: EventHint): PromiseLike<Event | null> {\n    if (this._extra && Object.keys(this._extra).length) {\n      event.extra = { ...this._extra, ...event.extra };\n    }\n    if (this._tags && Object.keys(this._tags).length) {\n      event.tags = { ...this._tags, ...event.tags };\n    }\n    if (this._user && Object.keys(this._user).length) {\n      event.user = { ...this._user, ...event.user };\n    }\n    if (this._contexts && Object.keys(this._contexts).length) {\n      event.contexts = { ...this._contexts, ...event.contexts };\n    }\n    if (this._level) {\n      event.level = this._level;\n    }\n    if (this._transactionName) {\n      event.transaction = this._transactionName;\n    }\n    // We want to set the trace context for normal events only if there isn't already\n    // a trace context on the event. There is a product feature in place where we link\n    // errors with transaction and it relys on that.\n    if (this._span) {\n      event.contexts = { trace: this._span.getTraceContext(), ...event.contexts };\n      const transactionName = this._span.transaction?.name;\n      if (transactionName) {\n        event.tags = { transaction: transactionName, ...event.tags };\n      }\n    }\n\n    this._applyFingerprint(event);\n\n    event.breadcrumbs = [...(event.breadcrumbs || []), ...this._breadcrumbs];\n    event.breadcrumbs = event.breadcrumbs.length > 0 ? event.breadcrumbs : undefined;\n\n    return this._notifyEventProcessors([...getGlobalEventProcessors(), ...this._eventProcessors], event, hint);\n  }\n\n  /**\n   * This will be called after {@link applyToEvent} is finished.\n   */\n  protected _notifyEventProcessors(\n    processors: EventProcessor[],\n    event: Event | null,\n    hint?: EventHint,\n    index: number = 0,\n  ): PromiseLike<Event | null> {\n    return new SyncPromise<Event | null>((resolve, reject) => {\n      const processor = processors[index];\n      if (event === null || typeof processor !== 'function') {\n        resolve(event);\n      } else {\n        const result = processor({ ...event }, hint) as Event | null;\n        if (isThenable(result)) {\n          (result as PromiseLike<Event | null>)\n            .then(final => this._notifyEventProcessors(processors, final, hint, index + 1).then(resolve))\n            .then(null, reject);\n        } else {\n          this._notifyEventProcessors(processors, result, hint, index + 1)\n            .then(resolve)\n            .then(null, reject);\n        }\n      }\n    });\n  }\n\n  /**\n   * This will be called on every set call.\n   */\n  protected _notifyScopeListeners(): void {\n    // We need this check for this._notifyingListeners to be able to work on scope during updates\n    // If this check is not here we'll produce endless recursion when something is done with the scope\n    // during the callback.\n    if (!this._notifyingListeners) {\n      this._notifyingListeners = true;\n      this._scopeListeners.forEach(callback => {\n        callback(this);\n      });\n      this._notifyingListeners = false;\n    }\n  }\n\n  /**\n   * Applies fingerprint from the scope to the event if there's one,\n   * uses message if there's one instead or get rid of empty fingerprint\n   */\n  private _applyFingerprint(event: Event): void {\n    // Make sure it's an array first and we actually have something in place\n    event.fingerprint = event.fingerprint\n      ? Array.isArray(event.fingerprint)\n        ? event.fingerprint\n        : [event.fingerprint]\n      : [];\n\n    // If we have something on the scope, then merge it with event\n    if (this._fingerprint) {\n      event.fingerprint = event.fingerprint.concat(this._fingerprint);\n    }\n\n    // If we have no data at all, remove empty array default\n    if (event.fingerprint && !event.fingerprint.length) {\n      delete event.fingerprint;\n    }\n  }\n}\n\n/**\n * Retruns the global event processors.\n */\nfunction getGlobalEventProcessors(): EventProcessor[] {\n  /* eslint-disable @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-member-access  */\n  const global = getGlobalObject<any>();\n  global.__SENTRY__ = global.__SENTRY__ || {};\n  global.__SENTRY__.globalEventProcessors = global.__SENTRY__.globalEventProcessors || [];\n  return global.__SENTRY__.globalEventProcessors;\n  /* eslint-enable @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-member-access */\n}\n\n/**\n * Add a EventProcessor to be kept globally.\n * @param callback EventProcessor to add\n */\nexport function addGlobalEventProcessor(callback: EventProcessor): void {\n  getGlobalEventProcessors().push(callback);\n}\n","/* eslint-disable max-lines */\nimport {\n  Breadcrumb,\n  BreadcrumbHint,\n  Client,\n  CustomSamplingContext,\n  Event,\n  EventHint,\n  Extra,\n  Extras,\n  Hub as HubInterface,\n  Integration,\n  IntegrationClass,\n  Primitive,\n  SessionContext,\n  SessionStatus,\n  Severity,\n  Span,\n  SpanContext,\n  Transaction,\n  TransactionContext,\n  User,\n} from '@sentry/types';\nimport { consoleSandbox, dateTimestampInSeconds, getGlobalObject, isNodeEnv, logger, uuid4 } from '@sentry/utils';\n\nimport { Carrier, DomainAsCarrier, Layer } from './interfaces';\nimport { Scope } from './scope';\nimport { Session } from './session';\n\n/**\n * API compatibility version of this hub.\n *\n * WARNING: This number should only be increased when the global interface\n * changes and new methods are introduced.\n *\n * @hidden\n */\nexport const API_VERSION = 3;\n\n/**\n * Default maximum number of breadcrumbs added to an event. Can be overwritten\n * with {@link Options.maxBreadcrumbs}.\n */\nconst DEFAULT_BREADCRUMBS = 100;\n\n/**\n * Absolute maximum number of breadcrumbs added to an event. The\n * `maxBreadcrumbs` option cannot be higher than this value.\n */\nconst MAX_BREADCRUMBS = 100;\n\n/**\n * @inheritDoc\n */\nexport class Hub implements HubInterface {\n  /** Is a {@link Layer}[] containing the client and scope */\n  private readonly _stack: Layer[] = [{}];\n\n  /** Contains the last event id of a captured event.  */\n  private _lastEventId?: string;\n\n  /**\n   * Creates a new instance of the hub, will push one {@link Layer} into the\n   * internal stack on creation.\n   *\n   * @param client bound to the hub.\n   * @param scope bound to the hub.\n   * @param version number, higher number means higher priority.\n   */\n  public constructor(client?: Client, scope: Scope = new Scope(), private readonly _version: number = API_VERSION) {\n    this.getStackTop().scope = scope;\n    this.bindClient(client);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public isOlderThan(version: number): boolean {\n    return this._version < version;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public bindClient(client?: Client): void {\n    const top = this.getStackTop();\n    top.client = client;\n    if (client && client.setupIntegrations) {\n      client.setupIntegrations();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public pushScope(): Scope {\n    // We want to clone the content of prev scope\n    const scope = Scope.clone(this.getScope());\n    this.getStack().push({\n      client: this.getClient(),\n      scope,\n    });\n    return scope;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public popScope(): boolean {\n    if (this.getStack().length <= 1) return false;\n    return !!this.getStack().pop();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public withScope(callback: (scope: Scope) => void): void {\n    const scope = this.pushScope();\n    try {\n      callback(scope);\n    } finally {\n      this.popScope();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public getClient<C extends Client>(): C | undefined {\n    return this.getStackTop().client as C;\n  }\n\n  /** Returns the scope of the top stack. */\n  public getScope(): Scope | undefined {\n    return this.getStackTop().scope;\n  }\n\n  /** Returns the scope stack for domains or the process. */\n  public getStack(): Layer[] {\n    return this._stack;\n  }\n\n  /** Returns the topmost scope layer in the order domain > local > process. */\n  public getStackTop(): Layer {\n    return this._stack[this._stack.length - 1];\n  }\n\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\n  public captureException(exception: any, hint?: EventHint): string {\n    const eventId = (this._lastEventId = uuid4());\n    let finalHint = hint;\n\n    // If there's no explicit hint provided, mimick the same thing that would happen\n    // in the minimal itself to create a consistent behavior.\n    // We don't do this in the client, as it's the lowest level API, and doing this,\n    // would prevent user from having full control over direct calls.\n    if (!hint) {\n      let syntheticException: Error;\n      try {\n        throw new Error('Sentry syntheticException');\n      } catch (exception) {\n        syntheticException = exception as Error;\n      }\n      finalHint = {\n        originalException: exception,\n        syntheticException,\n      };\n    }\n\n    this._invokeClient('captureException', exception, {\n      ...finalHint,\n      event_id: eventId,\n    });\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public captureMessage(message: string, level?: Severity, hint?: EventHint): string {\n    const eventId = (this._lastEventId = uuid4());\n    let finalHint = hint;\n\n    // If there's no explicit hint provided, mimick the same thing that would happen\n    // in the minimal itself to create a consistent behavior.\n    // We don't do this in the client, as it's the lowest level API, and doing this,\n    // would prevent user from having full control over direct calls.\n    if (!hint) {\n      let syntheticException: Error;\n      try {\n        throw new Error(message);\n      } catch (exception) {\n        syntheticException = exception as Error;\n      }\n      finalHint = {\n        originalException: message,\n        syntheticException,\n      };\n    }\n\n    this._invokeClient('captureMessage', message, level, {\n      ...finalHint,\n      event_id: eventId,\n    });\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public captureEvent(event: Event, hint?: EventHint): string {\n    const eventId = (this._lastEventId = uuid4());\n    this._invokeClient('captureEvent', event, {\n      ...hint,\n      event_id: eventId,\n    });\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public lastEventId(): string | undefined {\n    return this._lastEventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public addBreadcrumb(breadcrumb: Breadcrumb, hint?: BreadcrumbHint): void {\n    const { scope, client } = this.getStackTop();\n\n    if (!scope || !client) return;\n\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    const { beforeBreadcrumb = null, maxBreadcrumbs = DEFAULT_BREADCRUMBS } =\n      (client.getOptions && client.getOptions()) || {};\n\n    if (maxBreadcrumbs <= 0) return;\n\n    const timestamp = dateTimestampInSeconds();\n    const mergedBreadcrumb = { timestamp, ...breadcrumb };\n    const finalBreadcrumb = beforeBreadcrumb\n      ? (consoleSandbox(() => beforeBreadcrumb(mergedBreadcrumb, hint)) as Breadcrumb | null)\n      : mergedBreadcrumb;\n\n    if (finalBreadcrumb === null) return;\n\n    scope.addBreadcrumb(finalBreadcrumb, Math.min(maxBreadcrumbs, MAX_BREADCRUMBS));\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public setUser(user: User | null): void {\n    const scope = this.getScope();\n    if (scope) scope.setUser(user);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public setTags(tags: { [key: string]: Primitive }): void {\n    const scope = this.getScope();\n    if (scope) scope.setTags(tags);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public setExtras(extras: Extras): void {\n    const scope = this.getScope();\n    if (scope) scope.setExtras(extras);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public setTag(key: string, value: Primitive): void {\n    const scope = this.getScope();\n    if (scope) scope.setTag(key, value);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public setExtra(key: string, extra: Extra): void {\n    const scope = this.getScope();\n    if (scope) scope.setExtra(key, extra);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  public setContext(name: string, context: { [key: string]: any } | null): void {\n    const scope = this.getScope();\n    if (scope) scope.setContext(name, context);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public configureScope(callback: (scope: Scope) => void): void {\n    const { scope, client } = this.getStackTop();\n    if (scope && client) {\n      callback(scope);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public run(callback: (hub: Hub) => void): void {\n    const oldHub = makeMain(this);\n    try {\n      callback(this);\n    } finally {\n      makeMain(oldHub);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public getIntegration<T extends Integration>(integration: IntegrationClass<T>): T | null {\n    const client = this.getClient();\n    if (!client) return null;\n    try {\n      return client.getIntegration(integration);\n    } catch (_oO) {\n      logger.warn(`Cannot retrieve integration ${integration.id} from the current Hub`);\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public startSpan(context: SpanContext): Span {\n    return this._callExtensionMethod('startSpan', context);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public startTransaction(context: TransactionContext, customSamplingContext?: CustomSamplingContext): Transaction {\n    return this._callExtensionMethod('startTransaction', context, customSamplingContext);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public traceHeaders(): { [key: string]: string } {\n    return this._callExtensionMethod<{ [key: string]: string }>('traceHeaders');\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public captureSession(endSession: boolean = false): void {\n    // both send the update and pull the session from the scope\n    if (endSession) {\n      return this.endSession();\n    }\n\n    // only send the update\n    this._sendSessionUpdate();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public endSession(): void {\n    this.getStackTop()\n      ?.scope?.getSession()\n      ?.close();\n    this._sendSessionUpdate();\n\n    // the session is over; take it off of the scope\n    this.getStackTop()?.scope?.setSession();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public startSession(context?: SessionContext): Session {\n    const { scope, client } = this.getStackTop();\n    const { release, environment } = (client && client.getOptions()) || {};\n    const session = new Session({\n      release,\n      environment,\n      ...(scope && { user: scope.getUser() }),\n      ...context,\n    });\n\n    if (scope) {\n      // End existing session if there's one\n      const currentSession = scope.getSession && scope.getSession();\n      if (currentSession && currentSession.status === SessionStatus.Ok) {\n        currentSession.update({ status: SessionStatus.Exited });\n      }\n      this.endSession();\n\n      // Afterwards we set the new session on the scope\n      scope.setSession(session);\n    }\n\n    return session;\n  }\n\n  /**\n   * Sends the current Session on the scope\n   */\n  private _sendSessionUpdate(): void {\n    const { scope, client } = this.getStackTop();\n    if (!scope) return;\n\n    const session = scope.getSession && scope.getSession();\n    if (session) {\n      if (client && client.captureSession) {\n        client.captureSession(session);\n      }\n    }\n  }\n\n  /**\n   * Internal helper function to call a method on the top client if it exists.\n   *\n   * @param method The method to call on the client.\n   * @param args Arguments to pass to the client function.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private _invokeClient<M extends keyof Client>(method: M, ...args: any[]): void {\n    const { scope, client } = this.getStackTop();\n    if (client && client[method]) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-explicit-any\n      (client as any)[method](...args, scope);\n    }\n  }\n\n  /**\n   * Calls global extension method and binding current instance to the function call\n   */\n  // @ts-ignore Function lacks ending return statement and return type does not include 'undefined'. ts(2366)\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private _callExtensionMethod<T>(method: string, ...args: any[]): T {\n    const carrier = getMainCarrier();\n    const sentry = carrier.__SENTRY__;\n    if (sentry && sentry.extensions && typeof sentry.extensions[method] === 'function') {\n      return sentry.extensions[method].apply(this, args);\n    }\n    logger.warn(`Extension method ${method} couldn't be found, doing nothing.`);\n  }\n}\n\n/** Returns the global shim registry. */\nexport function getMainCarrier(): Carrier {\n  const carrier = getGlobalObject();\n  carrier.__SENTRY__ = carrier.__SENTRY__ || {\n    extensions: {},\n    hub: undefined,\n  };\n  return carrier;\n}\n\n/**\n * Replaces the current main hub with the passed one on the global object\n *\n * @returns The old replaced hub\n */\nexport function makeMain(hub: Hub): Hub {\n  const registry = getMainCarrier();\n  const oldHub = getHubFromCarrier(registry);\n  setHubOnCarrier(registry, hub);\n  return oldHub;\n}\n\n/**\n * Returns the default hub instance.\n *\n * If a hub is already registered in the global carrier but this module\n * contains a more recent version, it replaces the registered version.\n * Otherwise, the currently registered hub will be returned.\n */\nexport function getCurrentHub(): Hub {\n  // Get main carrier (global for every environment)\n  const registry = getMainCarrier();\n\n  // If there's no hub, or its an old API, assign a new one\n  if (!hasHubOnCarrier(registry) || getHubFromCarrier(registry).isOlderThan(API_VERSION)) {\n    setHubOnCarrier(registry, new Hub());\n  }\n\n  // Prefer domains over global if they are there (applicable only to Node environment)\n  if (isNodeEnv()) {\n    return getHubFromActiveDomain(registry);\n  }\n  // Return hub that lives on a global object\n  return getHubFromCarrier(registry);\n}\n\n/**\n * Returns the active domain, if one exists\n * @deprecated No longer used; remove in v7\n * @returns The domain, or undefined if there is no active domain\n */\n// eslint-disable-next-line deprecation/deprecation\nexport function getActiveDomain(): DomainAsCarrier | undefined {\n  logger.warn('Function `getActiveDomain` is deprecated and will be removed in a future version.');\n\n  const sentry = getMainCarrier().__SENTRY__;\n\n  return sentry && sentry.extensions && sentry.extensions.domain && sentry.extensions.domain.active;\n}\n\n/**\n * Try to read the hub from an active domain, and fallback to the registry if one doesn't exist\n * @returns discovered hub\n */\nfunction getHubFromActiveDomain(registry: Carrier): Hub {\n  try {\n    const activeDomain = getMainCarrier().__SENTRY__?.extensions?.domain?.active;\n\n    // If there's no active domain, just return global hub\n    if (!activeDomain) {\n      return getHubFromCarrier(registry);\n    }\n\n    // If there's no hub on current domain, or it's an old API, assign a new one\n    if (!hasHubOnCarrier(activeDomain) || getHubFromCarrier(activeDomain).isOlderThan(API_VERSION)) {\n      const registryHubTopStack = getHubFromCarrier(registry).getStackTop();\n      setHubOnCarrier(activeDomain, new Hub(registryHubTopStack.client, Scope.clone(registryHubTopStack.scope)));\n    }\n\n    // Return hub that lives on a domain\n    return getHubFromCarrier(activeDomain);\n  } catch (_Oo) {\n    // Return hub that lives on a global object\n    return getHubFromCarrier(registry);\n  }\n}\n\n/**\n * This will tell whether a carrier has a hub on it or not\n * @param carrier object\n */\nfunction hasHubOnCarrier(carrier: Carrier): boolean {\n  return !!(carrier && carrier.__SENTRY__ && carrier.__SENTRY__.hub);\n}\n\n/**\n * This will create a new {@link Hub} and add to the passed object on\n * __SENTRY__.hub.\n * @param carrier object\n * @hidden\n */\nexport function getHubFromCarrier(carrier: Carrier): Hub {\n  if (carrier && carrier.__SENTRY__ && carrier.__SENTRY__.hub) return carrier.__SENTRY__.hub;\n  carrier.__SENTRY__ = carrier.__SENTRY__ || {};\n  carrier.__SENTRY__.hub = new Hub();\n  return carrier.__SENTRY__.hub;\n}\n\n/**\n * This will set passed {@link Hub} on the passed object's __SENTRY__.hub attribute\n * @param carrier object\n * @param hub Hub\n * @returns A boolean indicating success or failure\n */\nexport function setHubOnCarrier(carrier: Carrier, hub: Hub): boolean {\n  if (!carrier) return false;\n  carrier.__SENTRY__ = carrier.__SENTRY__ || {};\n  carrier.__SENTRY__.hub = hub;\n  return true;\n}\n","import { getCurrentHub, Hub, Scope } from '@sentry/hub';\nimport {\n  Breadcrumb,\n  CaptureContext,\n  CustomSamplingContext,\n  Event,\n  Extra,\n  Extras,\n  Primitive,\n  Severity,\n  Transaction,\n  TransactionContext,\n  User,\n} from '@sentry/types';\n\n/**\n * This calls a function on the current hub.\n * @param method function to call on hub.\n * @param args to pass to function.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction callOnHub<T>(method: string, ...args: any[]): T {\n  const hub = getCurrentHub();\n  if (hub && hub[method as keyof Hub]) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return (hub[method as keyof Hub] as any)(...args);\n  }\n  throw new Error(`No hub defined or ${method} was not found on the hub, please open a bug report.`);\n}\n\n/**\n * Captures an exception event and sends it to Sentry.\n *\n * @param exception An exception-like object.\n * @returns The generated eventId.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\nexport function captureException(exception: any, captureContext?: CaptureContext): string {\n  let syntheticException: Error;\n  try {\n    throw new Error('Sentry syntheticException');\n  } catch (exception) {\n    syntheticException = exception as Error;\n  }\n  return callOnHub('captureException', exception, {\n    captureContext,\n    originalException: exception,\n    syntheticException,\n  });\n}\n\n/**\n * Captures a message event and sends it to Sentry.\n *\n * @param message The message to send to Sentry.\n * @param level Define the level of the message.\n * @returns The generated eventId.\n */\nexport function captureMessage(message: string, captureContext?: CaptureContext | Severity): string {\n  let syntheticException: Error;\n  try {\n    throw new Error(message);\n  } catch (exception) {\n    syntheticException = exception as Error;\n  }\n\n  // This is necessary to provide explicit scopes upgrade, without changing the original\n  // arity of the `captureMessage(message, level)` method.\n  const level = typeof captureContext === 'string' ? captureContext : undefined;\n  const context = typeof captureContext !== 'string' ? { captureContext } : undefined;\n\n  return callOnHub('captureMessage', message, level, {\n    originalException: message,\n    syntheticException,\n    ...context,\n  });\n}\n\n/**\n * Captures a manually created event and sends it to Sentry.\n *\n * @param event The event to send to Sentry.\n * @returns The generated eventId.\n */\nexport function captureEvent(event: Event): string {\n  return callOnHub('captureEvent', event);\n}\n\n/**\n * Callback to set context information onto the scope.\n * @param callback Callback function that receives Scope.\n */\nexport function configureScope(callback: (scope: Scope) => void): void {\n  callOnHub<void>('configureScope', callback);\n}\n\n/**\n * Records a new breadcrumb which will be attached to future events.\n *\n * Breadcrumbs will be added to subsequent events to provide more context on\n * user's actions prior to an error or crash.\n *\n * @param breadcrumb The breadcrumb to record.\n */\nexport function addBreadcrumb(breadcrumb: Breadcrumb): void {\n  callOnHub<void>('addBreadcrumb', breadcrumb);\n}\n\n/**\n * Sets context data with the given name.\n * @param name of the context\n * @param context Any kind of data. This data will be normalized.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function setContext(name: string, context: { [key: string]: any } | null): void {\n  callOnHub<void>('setContext', name, context);\n}\n\n/**\n * Set an object that will be merged sent as extra data with the event.\n * @param extras Extras object to merge into current context.\n */\nexport function setExtras(extras: Extras): void {\n  callOnHub<void>('setExtras', extras);\n}\n\n/**\n * Set an object that will be merged sent as tags data with the event.\n * @param tags Tags context object to merge into current context.\n */\nexport function setTags(tags: { [key: string]: Primitive }): void {\n  callOnHub<void>('setTags', tags);\n}\n\n/**\n * Set key:value that will be sent as extra data with the event.\n * @param key String of extra\n * @param extra Any kind of data. This data will be normalized.\n */\nexport function setExtra(key: string, extra: Extra): void {\n  callOnHub<void>('setExtra', key, extra);\n}\n\n/**\n * Set key:value that will be sent as tags data with the event.\n *\n * Can also be used to unset a tag, by passing `undefined`.\n *\n * @param key String key of tag\n * @param value Value of tag\n */\nexport function setTag(key: string, value: Primitive): void {\n  callOnHub<void>('setTag', key, value);\n}\n\n/**\n * Updates user context information for future events.\n *\n * @param user User context object to be set in the current context. Pass `null` to unset the user.\n */\nexport function setUser(user: User | null): void {\n  callOnHub<void>('setUser', user);\n}\n\n/**\n * Creates a new scope with and executes the given operation within.\n * The scope is automatically removed once the operation\n * finishes or throws.\n *\n * This is essentially a convenience function for:\n *\n *     pushScope();\n *     callback();\n *     popScope();\n *\n * @param callback that will be enclosed into push/popScope.\n */\nexport function withScope(callback: (scope: Scope) => void): void {\n  callOnHub<void>('withScope', callback);\n}\n\n/**\n * Calls a function on the latest client. Use this with caution, it's meant as\n * in \"internal\" helper so we don't need to expose every possible function in\n * the shim. It is not guaranteed that the client actually implements the\n * function.\n *\n * @param method The method to call on the client/client.\n * @param args Arguments to pass to the client/fontend.\n * @hidden\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function _callOnClient(method: string, ...args: any[]): void {\n  callOnHub<void>('_invokeClient', method, ...args);\n}\n\n/**\n * Starts a new `Transaction` and returns it. This is the entry point to manual tracing instrumentation.\n *\n * A tree structure can be built by adding child spans to the transaction, and child spans to other spans. To start a\n * new child span within the transaction or any span, call the respective `.startChild()` method.\n *\n * Every child span must be finished before the transaction is finished, otherwise the unfinished spans are discarded.\n *\n * The transaction must be finished with a call to its `.finish()` method, at which point the transaction with all its\n * finished child spans will be sent to Sentry.\n *\n * @param context Properties of the new `Transaction`.\n * @param customSamplingContext Information given to the transaction sampling function (along with context-dependent\n * default values). See {@link Options.tracesSampler}.\n *\n * @returns The transaction which was just started\n */\nexport function startTransaction(\n  context: TransactionContext,\n  customSamplingContext?: CustomSamplingContext,\n): Transaction {\n  return callOnHub('startTransaction', { ...context }, customSamplingContext);\n}\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @private\n */\nconst PICKER_VERSION = '1.24.1';\n\n/**\n * @private\n */\nexport interface Hosts {\n  [url: string]: string;\n  fileApiUrl: string;\n  uploadApiUrl: string;\n  cloudApiUrl: string;\n  cdnUrl: string;\n  pickerUrl: string;\n  processUrl: string;\n}\n\n/**\n * @private\n */\nexport interface Config {\n  urls: Hosts;\n}\n\nexport const config = {\n  urls: {\n    processUrl: 'https://process.filestackapi.com',\n    fileApiUrl: 'https://www.filestackapi.com/api/file',\n    uploadApiUrl: 'https://upload.filestackapi.com',\n    cloudApiUrl: 'https://cloud.filestackapi.com',\n    cdnUrl: 'https://cdn.filestackcontent.com',\n    pickerUrl: `https://static.filestackapi.com/picker/${PICKER_VERSION}/picker.js`,\n  },\n};\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum FilestackErrorType {\n  VALIDATION = 'validation',\n  REQUEST = 'request',\n  ABORTED = 'aborted',\n  OTHER = 'other',\n}\n\nexport class FilestackError extends Error {\n\n  /**\n   * Error details, ie validation errors\n   *\n   * @type {*}\n   * @memberof FilestackError\n   */\n  public readonly details: any;\n  public readonly type: string;\n\n  constructor(message?: string, details?: any, type?: FilestackErrorType) {\n\n    /* istanbul ignore next */\n    super(message);\n    Object.setPrototypeOf(this, FilestackError.prototype);\n    this.details = details;\n    this.type = type;\n  }\n\n}\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const TransformSchema = {\n  '$schema': 'http://json-schema.org/draft-07/schema#',\n  title: 'Filestack Transformations',\n  description: 'Filestack transformations parameters',\n  type: 'object',\n  additionalProperties: false,\n  properties: {\n    flip: {\n      type: 'boolean',\n      additionalProperties: false,\n    },\n    auto_image: {\n      type: 'boolean',\n      additionalProperties: false,\n    },\n    no_metadata: {\n      type: 'boolean',\n      additionalProperties: false,\n    },\n    compress: {\n      additionalProperties: false,\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          metadata: {\n            type: 'boolean',\n            default: false,\n          },\n        },\n      }],\n    },\n    flop: {\n      type: 'boolean',\n      additionalProperties: false,\n    },\n    enhance: {\n      default: true,\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        additionalProperties: false,\n        properties: {\n          preset: {\n            type: 'string',\n            enum: ['auto', 'vivid', 'beautify', 'beautify_plus', 'fix_dark', 'fix_noise', 'fix_tint', 'outdoor', 'fireworks'],\n          },\n        },\n      }],\n    },\n    redeye: {\n      type: 'boolean',\n      additionalProperties: false,\n    },\n    monochrome: {\n      type: 'boolean',\n      additionalProperties: false,\n    },\n    negative: {\n      type: 'boolean',\n      additionalProperties: false,\n    },\n    tags: {\n      type: 'boolean',\n      additionalProperties: false,\n    },\n    sfw: {\n      type: 'boolean',\n      additionalProperties: false,\n    },\n    imagesize: {\n      type: 'boolean',\n      additionalProperties: false,\n    },\n    smart_crop: {\n      width: {\n        type: 'integer',\n        minimum: 0,\n        maximum: 10000,\n      },\n      height: {\n        type: 'integer',\n        minimum: 0,\n        maximum: 10000,\n      },\n      mode: {\n        type: 'string',\n        default: 'auto',\n        enum: ['face', 'auto'],\n      },\n    },\n    animate: {\n      type: 'object',\n      properties: {\n        delay: {\n          type: 'integer',\n          minimum: 0,\n          maximum: 10000,\n          default: 1000,\n        },\n        loop: {\n          type: 'integer',\n          minimum: 0,\n          maximum: 1000,\n          default: 0,\n        },\n        width: {\n          type: 'integer',\n          minimum: 1,\n          maximum: 1800,\n        },\n        height: {\n          type: 'integer',\n          minimum: 1,\n          maximum: 1800,\n        },\n        fit: {\n          type: 'string',\n          default: 'clip',\n          enum: ['clip', 'scale', 'crop'],\n        },\n        background: {\n          '$ref': 'colorDef',\n          default: 'transparent',\n        },\n        align: {\n          '$ref': 'positionDef',\n          default: 'center',\n        },\n      },\n    },\n    metadata: {\n      type: 'object',\n      params: {\n        type: 'array',\n        items: {\n          type: 'string',\n          enum: [\n            'filename',\n            'mimetype',\n            'size',\n            'width',\n            'height',\n            'writeable',\n            'path',\n            'container',\n            'cloud',\n            'exif',\n            'source_url',\n            'md5',\n            'sha256',\n            'sha1',\n            'sha512',\n          ],\n        },\n        minItems: 0,\n        uniqueItems: true,\n        additionalItems: false,\n      },\n      additionalProperties: false,\n    },\n    resize: {\n      type: 'object',\n      properties: {\n        width: {\n          type: 'number',\n          minimum: 0,\n          maximum: 10000,\n        },\n        height: {\n          type: 'number',\n          minimum: 0,\n          maximum: 10000,\n        },\n        fit: {\n          type: 'string',\n          enum: ['clip', 'crop', 'scale' ,'max'],\n          default: 'clip',\n        },\n        align: {\n          '$ref': 'positionDef',\n          default: 'center',\n        },\n      },\n      // required: ['width', 'height'],\n      additionalProperties: false,\n      anyOf: [\n        { required: ['width'] },\n        { required: ['height'] },\n      ],\n    },\n    crop: {\n      type: 'object',\n      properties: {\n        dim: {\n          type: 'array',\n          additionalItems: false,\n          minItems: 4,\n          items: [{\n            type: 'integer',\n            minimum: 0,\n            maximum: 100000,\n          }, {\n            type: 'integer',\n            minimum: 0,\n            maximum: 100000,\n          }, {\n            type: 'integer',\n            minimum: 1,\n            maximum: 100000,\n          }, {\n            type: 'integer',\n            minimum: 1,\n            maximum: 100000,\n          }],\n        },\n      },\n      required: ['dim'],\n    },\n    rotate: {\n      type: 'object',\n      properties: {\n        deg: {\n          oneOf: [{\n            type: 'string',\n            enum: ['exif'],\n          }, {\n            type: 'number',\n            minimum: 0,\n            maximum: 359,\n          }],\n        },\n        exif: {\n          type: 'boolean',\n        },\n        background: {\n          '$ref': 'colorDef',\n          default: 'FFFFFFFF',\n        },\n      },\n      additionalProperties: false,\n    },\n    detect_faces: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          maxsize: {\n            type: 'number',\n            minimum: 0,\n            maximum: 10000,\n            default: 0.35,\n          },\n          minsize: {\n            type: 'number',\n            minimum: 0,\n            maximum: 10000,\n            default: 0.35,\n          },\n          export: {\n            type: 'boolean',\n          },\n          color: {\n            '$ref': 'colorDef',\n            default: '000000FF',\n          },\n        },\n        additionalProperties: false,\n      }],\n    },\n    crop_faces: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          faces: {\n            default: 1,\n            '$ref': 'facesDef',\n          },\n          width: {\n            type: 'number',\n            minimum: 1,\n            maximum: 10000,\n          },\n          height: {\n            type: 'number',\n            minimum: 1,\n            maximum: 10000,\n          },\n          maxsize: {\n            type: 'number',\n            minimum: 0,\n            maximum: 10000,\n            default: 0.35,\n          },\n          minsize: {\n            type: 'number',\n            minimum: 0,\n            maximum: 10000,\n            default: 0.35,\n          },\n          buffer: {\n            type: 'integer',\n            minimum: 0,\n            maximum: 10000,\n          },\n          mode: {\n            type: 'string',\n            enum: ['crop', 'thumb', 'fill'],\n            default: 'thumb',\n          },\n        },\n        additionalProperties: false,\n      }],\n    },\n    pixelate_faces: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          faces: {\n            '$ref': 'facesDef',\n            default: 'all',\n          },\n          maxsize: {\n            type: 'number',\n            minimum: 0,\n            maximum: 10000,\n            default: 0.35,\n          },\n          minsize: {\n            type: 'number',\n            minimum: 0,\n            maximum: 10000,\n            default: 0.35,\n          },\n          buffer: {\n            type: 'integer',\n            minimum: 0,\n            maximum: 10000,\n          },\n          amount: {\n            type: 'integer',\n            minimum: 2,\n            maximum: 100,\n            default: 10,\n          },\n          blur: {\n            type: 'number',\n            minimum: 0,\n            maximum: 20,\n            default: 4,\n          },\n          type: {\n            type: 'string',\n            enum: ['rect', 'oval'],\n            default: 'rect',\n          },\n        },\n        additionalProperties: false,\n      }],\n    },\n    blur_faces: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          faces: {\n            '$ref': 'facesDef',\n            default: 'all',\n          },\n          maxsize: {\n            type: 'number',\n            minimum: 0,\n            maximum: 10000,\n            default: 0.35,\n          },\n          minsize: {\n            type: 'number',\n            minimum: 0,\n            maximum: 10000,\n            default: 0.35,\n          },\n          buffer: {\n            type: 'integer',\n            minimum: 0,\n            maximum: 10000,\n          },\n          amount: {\n            type: 'number',\n            minimum: 0,\n            maximum: 10,\n            default: 10,\n          },\n          blur: {\n            type: 'number',\n            minimum: 0,\n            maximum: 20,\n            default: 4,\n          },\n          type: {\n            type: 'string',\n            enum: ['rect', 'oval'],\n            default: 'rect',\n          },\n        },\n        additionalProperties: false,\n      }],\n    },\n    rounded_corners: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          radius: {\n            oneOf: [{\n              type: 'integer',\n              minimum: 1,\n              maximum: 10000,\n            }, {\n              type: 'string',\n              enum: ['max'],\n            }],\n          },\n          blur: {\n            type: 'number',\n            minimum: 0,\n            maximum: 20,\n            default: 0.3,\n          },\n          background: {\n            '$ref': 'colorDef',\n          },\n        },\n        additionalProperties: false,\n      }],\n    },\n    vignette: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          amount: {\n            type: 'integer',\n            minimum: 0,\n            maximum: 100,\n            default: 20,\n          },\n          blurmode: {\n            type: 'string',\n            enum: ['gaussian', 'linear'],\n            default: 'gaussian',\n          },\n          background: {\n            '$ref': 'colorDef',\n          },\n        },\n        additionalProperties: false,\n      }],\n    },\n    polaroid: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          rotate: {\n            type: 'integer',\n            minimum: 0,\n            maximum: 359,\n          },\n          color: {\n            '$ref': 'colorDef',\n            default: 'snow',\n          },\n          background: {\n            '$ref': 'colorDef',\n          },\n        },\n        additionalProperties: false,\n      }],\n    },\n    torn_edges: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          spread: {\n            type: 'array',\n            additionalItems: false,\n            minItems: 2,\n            items: [{\n              type: 'integer',\n              minimum: 1,\n              maximum: 10000,\n              default: 1,\n            }, {\n              type: 'integer',\n              minimum: 1,\n              maximum: 10000,\n              default: 10,\n            }],\n          },\n          background: {\n            '$ref': 'colorDef',\n          },\n        },\n        additionalProperties: false,\n      }],\n    },\n    shadow: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          blur: {\n            type: 'number',\n            minimum: 0,\n            maximum: 20,\n            default: 100,\n          },\n          opacity: {\n            type: 'integer',\n            minimum: 0,\n            maximum: 100,\n            default: 60,\n          },\n          vector: {\n            type: 'array',\n            additionalItems: false,\n            minItems: 2,\n            items: [{\n              type: 'integer',\n              minimum: -1000,\n              maximum: 1000,\n              default: 4,\n            }, {\n              type: 'integer',\n              minimum: -1000,\n              maximum: 1000,\n              default: 4,\n            }],\n          },\n          color: {\n            '$ref': 'colorDef',\n          },\n          background: {\n            '$ref': 'colorDef',\n          },\n        },\n        additionalProperties: false,\n      }],\n    },\n    circle: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          background: {\n            '$ref': 'colorDef',\n          },\n        },\n        additionalProperties: false,\n      }],\n    },\n    border: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          color: {\n            '$ref': 'colorDef',\n          },\n          background: {\n            '$ref': 'colorDef',\n          },\n          width: {\n            type: 'integer',\n            minimum: 0,\n            maximum: 1000,\n          },\n        },\n        additionalProperties: false,\n      }],\n    },\n    sharpen: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          amount: {\n            type: 'integer',\n            minimum: 0,\n            maximum: 20,\n            default: 2,\n          },\n        },\n        additionalProperties: false,\n      }],\n    },\n    blur: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          amount: {\n            type: 'integer',\n            minimum: 0,\n            maximum: 20,\n            default: 2,\n          },\n        },\n        additionalProperties: false,\n      }],\n    },\n    blackwhite: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          threshold: {\n            type: 'integer',\n            minimum: 0,\n            maximum: 100,\n            default: 50,\n          },\n        },\n        additionalProperties: false,\n      }],\n    },\n    sepia: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          tone: {\n            type: 'integer',\n            minimum: 0,\n            maximum: 100,\n            default: 80,\n          },\n        },\n        additionalProperties: false,\n      }],\n    },\n    pixelate: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          amount: {\n            type: 'integer',\n            minimum: 2,\n            maximum: 100,\n            default: 2,\n          },\n        },\n        additionalProperties: false,\n      }],\n    },\n    oil_paint: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          amount: {\n            type: 'integer',\n            minimum: 2,\n            maximum: 100,\n            default: 2,\n          },\n        },\n        additionalProperties: false,\n      }],\n    },\n    modulate: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          brightness: {\n            type: 'integer',\n            minimum: 0,\n            maximum: 10000,\n            default: 100,\n          },\n          saturation: {\n            type: 'integer',\n            minimum: 0,\n            maximum: 10000,\n            default: 100,\n          },\n          hue: {\n            type: 'integer',\n            minimum: 0,\n            maximum: 359,\n            default: 0,\n          },\n        },\n        additionalProperties: false,\n      }],\n    },\n    ascii: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          foreground: {\n            '$ref': 'colorDef',\n            default: '000000FF',\n          },\n          background: {\n            '$ref': 'colorDef',\n            default: 'FFFFFFFF',\n          },\n          colored: {\n            type: 'boolean',\n            default: false,\n          },\n          size: {\n            type: 'integer',\n            minimum: 10,\n            maximum: 100,\n            default: 100,\n          },\n          reverse: {\n            type: 'boolean',\n            default: false,\n          },\n        },\n        additionalProperties: false,\n      }],\n    },\n    collage: {\n      type: 'object',\n      properties: {\n        files: {\n          type: 'array',\n          minItems: 1,\n          items: [{\n            type: 'string',\n          }],\n        },\n        margin: {\n          type: 'integer',\n          minimum: 1,\n          maximum: 100,\n          default: 10,\n        },\n        width: {\n          type: 'integer',\n          minimum: 0,\n          maximum: 10000,\n        },\n        height: {\n          type: 'integer',\n          minimum: 0,\n          maximum: 10000,\n        },\n        color: {\n          '$ref': 'colorDef',\n          default: 'FFFFFFFF',\n        },\n        fit: {\n          type: 'string',\n          enum: ['auto', 'crop'],\n        },\n        autorotate: {\n          type: 'boolean',\n          default: false,\n        },\n      },\n      required: ['width', 'height', 'files'],\n      additionalProperties: false,\n    },\n    urlscreenshot: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          agent: {\n            type : 'string',\n            enum: ['desktop', 'mobile'],\n            default: 'desktop',\n          },\n          width: {\n            type: 'integer',\n            minimum: 1,\n            maximum: 1920,\n            default: 1024,\n          },\n          height: {\n            type: 'integer',\n            minimum: 1,\n            maximum: 8000,\n            default: 768,\n          },\n          mode: {\n            type: 'string',\n            enum: ['all', 'window'],\n            default: 'all',\n          },\n          delay: {\n            type: 'integer',\n            minimum: 0,\n            maximum: 20000,\n            default: 1000,\n          },\n          orientation: {\n            type: 'string',\n            enum: ['portrait', 'landscape'],\n            default: 'portrait',\n          },\n          device: {\n            type: 'string',\n            default: '',\n          },\n        },\n        additionalProperties: false,\n      }],\n    },\n    upscale: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          noise: {\n            type: 'string',\n            enum: ['none', 'low', 'medium', 'high'],\n            default: 'none',\n          },\n          upscale: {\n            type: 'boolean',\n            default: true,\n          },\n          style: {\n            type: 'string',\n            enum: ['artwork', 'photo'],\n            default: 'photo',\n          },\n        },\n        additionalProperties: false,\n      }],\n    },\n    output: {\n      type: 'object',\n      additionalProperties: false,\n      properties: {\n        format: {\n          type: 'string',\n          enum: ['doc', 'docx', 'html', 'jpg', 'odp', 'ods', 'odt', 'pjpg', 'pdf', 'png', 'ppt', 'pptx', 'svg', 'txt', 'webp', 'xls', 'xlsx'],\n        },\n        page: {\n          type: 'integer',\n          minimum: 1,\n          maximum: 99999,\n        },\n        density: {\n          type: 'integer',\n          minimum: 1,\n          maximum: 500,\n        },\n        compress: {\n          type: 'boolean',\n        },\n        quality: {\n          oneOf: [{\n            type: 'string',\n            enum: ['input'],\n          }, {\n            type: 'integer',\n            minimum: 1,\n            maximum: 100,\n            default: 95,\n          }],\n        },\n        secure: {\n          type: 'boolean',\n          default: false,\n        },\n        docinfo: {\n          type: 'boolean',\n          default: false,\n        },\n        strip: {\n          type: 'boolean',\n          default: false,\n        },\n        colorspace: {\n          type: 'string',\n          enum: ['rgb', 'cmyk', 'input'],\n          default: 'rgb',\n        },\n        background: {\n          '$ref': 'colorDef',\n        },\n        pageformat: {\n          type: 'string',\n          enum: ['a2', 'a3', 'a4', 'a5', 'b4', 'b5', 'letter', 'legal', 'tabloid'],\n        },\n        pageorientation: {\n          type: 'string',\n          enum: ['landscape', 'portrait'],\n        },\n      },\n    },\n    pjpg: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        additionalProperties: false,\n        properties: {\n          quality: {\n            type: 'integer',\n            minimum: 0,\n            maximum: 100,\n          },\n          metadata: {\n            type: 'boolean',\n            default: false,\n          },\n        },\n      }],\n    },\n    quality: {\n      type: 'object',\n      additionalProperties: false,\n      properties: {\n        value: {\n          type: 'integer',\n          minimum: 1,\n          maximum: 100,\n        },\n      },\n    },\n    cache: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          expiry: {\n            type: 'integer',\n          },\n        },\n      }],\n    },\n    video_convert: {\n      type: 'object',\n      additionalProperties: false,\n      properties: {\n        width: {\n          type: 'integer',\n          minimum: 1,\n          maximum: 4096,\n        },\n        height: {\n          type: 'integer',\n          minimum: 1,\n          maximum: 4096,\n        },\n        preset: {\n          type: 'string',\n        },\n        force: {\n          type: 'boolean',\n        },\n        title: {\n          type: 'string',\n        },\n        extname: {\n          type: 'string',\n        },\n        upscale: {\n          type: 'boolean',\n        },\n        aspect_mode: {\n          type: 'string',\n          enum: ['letterbox', 'pad', 'crop', 'preserve', 'constrain'],\n          default: 'letterbox',\n        },\n        audio_sample_rate: {\n          type: 'integer',\n          minimum: 1,\n          maximum: 99999,\n        },\n        two_pass: {\n          type: 'boolean',\n        },\n        video_bitrate: {\n          type: 'integer',\n          minimum: 1,\n          maximum: 5000,\n        },\n        fps: {\n          type: 'integer',\n          minimum: 1,\n          maximum: 300,\n        },\n        keyframe_interval: {\n          type: 'integer',\n          minimum: 250,\n          maximum: 250,\n        },\n        audio_bitrate: {\n          type: 'integer',\n          minimum: 1,\n          maximum: 999,\n        },\n        audio_channels: {\n          type: 'integer',\n          minimum: 1,\n          maximum: 12,\n        },\n        clip_length: {\n          type: 'string',\n          pattern: `^([0-1]?\\\\d|2[0-3])(?::([0-5]?\\\\d))?(?::([0-5]?\\\\d))?$`,\n        },\n        clip_offset: {\n          type: 'string',\n          pattern: `^([0-1]?\\\\d|2[0-3])(?::([0-5]?\\\\d))?(?::([0-5]?\\\\d))?$`,\n        },\n        watermark_url: {\n          type: 'string',\n        },\n        watermark_top: {\n          type: 'integer',\n          minimum: 0,\n          maximum: 9999,\n        },\n        watermark_right: {\n          type: 'integer',\n          minimum: 0,\n          maximum: 9999,\n        },\n        watermark_bottom: {\n          type: 'integer',\n          minimum: 0,\n          maximum: 9999,\n        },\n        watermark_left: {\n          type: 'integer',\n          minimum: 0,\n          maximum: 9999,\n        },\n        frame_count: {\n          type: 'integer',\n          minimum: 1,\n          maximum: 1,\n          default: 1,\n        },\n        filename: {\n          type: 'string',\n        },\n        location: {\n          '$ref': 'locationsDef',\n        },\n        path: {\n          type: 'string',\n        },\n        container: {\n          type: 'string',\n        },\n        access: {\n          type: 'string',\n          enum: ['public', 'private'],\n          default: 'public',\n        },\n      },\n    },\n    store: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        additionalProperties: false,\n        properties: {\n          filename: {\n            type: 'string',\n          },\n          location: {\n            '$ref': 'locationsDef',\n          },\n          path: {\n            type: 'string',\n          },\n          container: {\n            type: 'string',\n          },\n          region: {\n            '$ref': 'regionsDef',\n          },\n          access: {\n            type: 'string',\n            enum: ['public', 'private'],\n            default: 'private',\n          },\n          base64decode: {\n            type: 'boolean',\n          },\n          workflows: {\n            '$ref': 'workflowsDef',\n          },\n        },\n      }],\n    },\n    watermark: {\n      type: 'object',\n      properties: {\n        file: {\n          type: 'string',\n        },\n        size: {\n          type: 'number',\n          minimum: 0,\n          maximum: 500,\n        },\n        position: {\n          '$ref': 'positionDef',\n        },\n      },\n      required: [\n        'file',\n      ],\n      additionalProperties: false,\n    },\n    partial_blur: {\n      type: 'object',\n      properties: {\n        objects: {\n          '$ref': 'objectsDef',\n        },\n        amount: {\n          type: 'number',\n          minimum: 0,\n          maximum: 20,\n        },\n        blur: {\n          type: 'number',\n          minimum: 0,\n          maximum: 20,\n        },\n        type: {\n          type: 'string',\n          enum: ['rect', 'oval'],\n        },\n      },\n      required: ['objects'],\n    },\n    partial_pixelate: {\n      type: 'object',\n      properties: {\n        objects: {\n          '$ref': 'objectsDef',\n        },\n        amount: {\n          type: 'number',\n          minimum: 2,\n          maximum: 100,\n        },\n        blur: {\n          type: 'number',\n          minimum: 0,\n          maximum: 20,\n        },\n        type: {\n          type: 'string',\n          enum: ['rect', 'oval'],\n        },\n      },\n      required: ['objects'],\n    },\n    security: {\n      type: 'object',\n      additionalProperties: false,\n      properties: {\n        policy: {\n          type: 'string',\n        },\n        signature: {\n          type: 'string',\n        },\n      },\n      required: ['policy', 'signature'],\n    },\n    pdfinfo: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        properties: {\n          colorinfo: {\n            type: 'boolean',\n          },\n        },\n      }],\n    },\n    pdfconvert: {\n      type: 'object',\n      additionalProperties: false,\n      properties: {\n        pageorientation: {\n          type: 'string',\n          enum: ['portrait', 'landscape'],\n        },\n        pageformat: {\n          '$ref': 'pageFormatDef',\n        },\n        pages: {\n          '$ref': 'pageRangeDef',\n        },\n      },\n      anyOf: [{\n        required: ['pageorientation'],\n      }, {\n        required: ['pageformat'],\n      }, {\n        required: ['pages'],\n      }],\n    },\n    fallback: {\n      type: 'object',\n      additionalProperties: false,\n      properties: {\n        handle: {\n          type: 'string',\n        },\n        cache: {\n          type: 'integer',\n          minimum: 1,\n          maximum: 31536000,\n        },\n      },\n      required: ['handle'],\n    },\n    zip: {\n      type: 'string',\n    },\n    minify_css: {\n      type: 'object',\n      additionalProperties: false,\n      properties: {\n        gzip: {\n          type: 'boolean',\n        },\n        level: {\n          type: 'number',\n          enum: [1, 2],\n        },\n      },\n    },\n    minify_js: {\n      type: 'object',\n      additionalProperties: false,\n      properties: {\n        gzip: {\n          type: 'boolean',\n        },\n        use_babel_polyfill: {\n          type: 'boolean',\n        },\n        keep_fn_name: {\n          type: 'boolean',\n        },\n        keep_class_name: {\n          type: 'boolean',\n        },\n        mangle: {\n          type: 'boolean',\n        },\n        merge_vars: {\n          type: 'boolean',\n        },\n        remove_console: {\n          type: 'boolean',\n        },\n        remove_undefined: {\n          type: 'boolean',\n        },\n        targets: {\n          type: 'string',\n        },\n      },\n    },\n  },\n};\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const DefinitionsSchema = {\n  '$schema': 'http://json-schema.org/draft-07/schema#',\n  title: 'Filestack',\n  description: 'Filestack common definitions',\n  type: 'object',\n  additionalProperties: false,\n  definitions: {\n    workflowsDef: {\n      id: '/workflowsDef',\n      type: 'array',\n      additionalItems: false,\n      minItems: 1,\n      maxItems: 20,\n      items: [{\n        oneOf: [{\n          type: 'string',\n        }, {\n          type: 'object',\n          additionalProperties: false,\n          properties: {\n            id: {\n              type: 'string',\n            },\n          },\n        }],\n      }],\n    },\n    securityCallDef: {\n      id: '/securityCallDef',\n      oneOf: [{\n        additionalProperties: false,\n        type: 'string',\n        enum: ['pick', 'read', 'stat', 'write', 'writeUrl', 'store', 'convert', 'remove', 'exif', 'runWorkflow'],\n      }, {\n        type: 'array',\n        additionalProperties: false,\n        items: [{\n          minItems: 1,\n          maxItems: 10,\n          type: 'string',\n          additionalProperties: false,\n          enum: ['pick', 'read', 'stat', 'write', 'writeUrl', 'store', 'convert', 'remove', 'exif', 'runWorkflow'],\n        }],\n      }],\n    },\n    regionsDef: {\n      id: '/regionsDef',\n      type: 'string',\n      // for now we decided to remove validation of regions (AWS + Rackspace)\n      // pattern: '^[a-zA-Z]{2}-[a-zA-z]{1,}-[1-9]$',\n      // errorMessage: 'AWS Region Param is in invalid format',\n    },\n    locationsDef: {\n      id: '/locationsDef',\n      type: 'string',\n      enum: ['s3', 'S3', 'rackspace', 'gcs', 'azure', 'dropbox'],\n    },\n    colorDef: {\n      id: 'colorDef',\n      oneOf: [{\n        type: 'string',\n        pattern: '^([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$', // without # at the begining\n      }, {\n        type: 'string',\n        enum: ['aliceblue', 'antiquewhite', 'aqua', 'aquamarine', 'azure', 'beige', 'bisque', 'black', 'blanchedalmond', 'blue', 'blueviolet', 'brown', 'burlywood', 'cadetblue', 'chartreuse', 'chocolate', 'coral', 'cornflowerblue', 'cornsilk', 'crimson', 'cyan', 'darkblue', 'darkcyan', 'darkgoldenrod', 'darkgray', 'darkgreen', 'darkgrey', 'darkkhaki', 'darkmagenta', 'darkolivegreen', 'darkorange', 'darkorchid', 'darkred', 'darksalmon', 'darkseagreen', 'darkslateblue', 'darkslategray', 'darkslategrey', 'darkturquoise', 'darkviolet', 'deeppink', 'deepskyblue', 'dimgray', 'dimgrey', 'dodgerblue', 'firebrick', 'floralwhite', 'forestgreen', 'fractal', 'fuchsia', 'gainsboro', 'ghostwhite', 'gold', 'goldenrod', 'gray0', 'gray1', 'gray2', 'gray3', 'gray4', 'gray5', 'gray6', 'gray7', 'gray8', 'gray9', 'gray10', 'gray11', 'gray12', 'gray13', 'gray14', 'gray15', 'gray16', 'gray17', 'gray18', 'gray19', 'gray20', 'gray21', 'gray22', 'gray23', 'gray24', 'gray25', 'gray26', 'gray27', 'gray28', 'gray29', 'gray30', 'gray31', 'gray32', 'gray33', 'gray34', 'gray35', 'gray36', 'gray37', 'gray38', 'gray39', 'gray40', 'gray41', 'gray42', 'gray43', 'gray44', 'gray45', 'gray46', 'gray47', 'gray48', 'gray49', 'gray50', 'gray51', 'gray52', 'gray53', 'gray54', 'gray55', 'gray56', 'gray57', 'gray58', 'gray59', 'gray60', 'gray61', 'gray62', 'gray63', 'gray64', 'gray65', 'gray66', 'gray67', 'gray68', 'gray69', 'gray70', 'gray71', 'gray72', 'gray73', 'gray74', 'gray75', 'gray76', 'gray77', 'gray78', 'gray79', 'gray80', 'gray81', 'gray82', 'gray83', 'gray84', 'gray85', 'gray86', 'gray87', 'gray88', 'gray89', 'gray90', 'gray91', 'gray92', 'gray93', 'gray94', 'gray95', 'gray96', 'gray97', 'gray98', 'gray99', 'gray100', 'gray', 'green', 'greenyellow', 'grey', 'honeydew', 'hotpink', 'indianred', 'indigo', 'ivory', 'khaki', 'lavender', 'lavenderblush', 'lawngreen', 'lemonchiffon', 'lightblue', 'lightcoral', 'lightcyan', 'lightgoldenrodyellow', 'lightgray', 'lightgreen', 'lightgrey', 'lightpink', 'lightsalmon', 'lightseagreen', 'lightskyblue', 'lightslategray', 'lightslategrey', 'lightsteelblue', 'lightyellow', 'lime', 'limegreen', 'linen', 'magenta', 'maroon', 'mediumaquamarine', 'mediumblue', 'mediumorchid', 'mediumpurple', 'mediumseagreen', 'mediumslateblue', 'mediumspringgreen', 'mediumturquoise', 'mediumvioletred', 'midnightblue', 'mintcream', 'mistyrose', 'moccasin', 'navajowhite', 'navy', 'none', 'oldlace', 'olive', 'olivedrab', 'orange', 'orangered', 'orchid', 'palegoldenrod', 'palegreen', 'paleturquoise', 'palevioletred', 'papayawhip', 'peachpuff', 'peru', 'pink', 'plum', 'powderblue', 'purple', 'red', 'rosybrown', 'royalblue', 'saddlebrown', 'salmon', 'sandybrown', 'seagreen', 'seashell', 'sienna', 'silver', 'skyblue', 'slateblue', 'slategray', 'slategrey', 'snow', 'springgreen', 'steelblue', 'tan', 'teal', 'thistle', 'tomato', 'turquoise', 'violet', 'wheat', 'white', 'whitesmoke', 'yellow', 'yellowgreen', 'transparent'],\n      }],\n    },\n    pageFormatDef: {\n      id: '/pageFormatDef',\n      type: 'string',\n      enum: ['a2', 'a3', 'a4', 'a5', 'b4', 'b5', 'letter', 'legal', 'tabloid'],\n    },\n    pageRangeDef: {\n      id: '/pageRangeDef',\n      type: 'array',\n      uniqueItems: true,\n      items: [{\n        oneOf: [{\n          type: 'integer',\n          minimum: 1,\n        }, {\n          type: 'string',\n          pattern: '^(\\\\d+(?:-\\\\d+)?)$|^(-\\\\d+)$|^(\\\\d+-)$',\n          errorMessage: 'Param should be provided in one of the following formats: \"1,2,3,5\", \"1-3\", \"1-\", \"-2\" ',\n        }],\n      }],\n    },\n    facesDef: {\n      id: '/facesDef',\n      oneOf: [{\n        type: 'string',\n        enum: ['all'],\n      }, {\n        type: 'integer',\n        minimum: 1,\n        maximum: 1000,\n      }, {\n        type: 'array',\n        uniqueItems: true,\n        items: [{\n          type: 'integer',\n          minimum: 1,\n          maximum: 1000,\n        }],\n      }],\n    },\n    objectsDef: {\n      id: '/objectsDef',\n      type: 'array',\n      minItems: 1,\n      maxItems: 50,\n      items: [{\n        type: 'array',\n        additionalItems: false,\n        minItems: 4,\n        items: [{\n          type: 'integer',\n          minimum: 0,\n          maximum: 10000,\n        }, {\n          type: 'integer',\n          minimum: 0,\n          maximum: 10000,\n        }, {\n          type: 'integer',\n          minimum: 1,\n          maximum: 10000,\n        }, {\n          type: 'integer',\n          minimum: 1,\n          maximum: 10000,\n        }],\n      }],\n    },\n    positionDef: {\n      id: '/positionDef',\n      default: ['middle', 'center'],\n      oneOf: [\n        {\n          type: 'string',\n          enum: [\n            'top',\n            'middle',\n            'bottom',\n            'left',\n            'center',\n            'right',\n            'faces',\n          ],\n        },\n        {\n          type: 'array',\n          uniqueItems: true,\n          additionalItems: false,\n          minItems: 2,\n          maxItems: 2,\n          default: ['middle', 'center'],\n          items: [\n            {\n              type: 'string',\n              enum: [\n                'top',\n                'middle',\n                'bottom',\n              ],\n            }, {\n              type: 'string',\n              enum: [\n                'left',\n                'center',\n                'right',\n              ],\n            },\n          ],\n        },\n      ],\n    },\n  },\n};\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Validator } from 'jsonschema';\nimport { DefinitionsSchema } from './definitions.schema';\n\nconst v = new Validator();\n\nValidator.prototype.customFormats.callback = (input) => typeof input === 'function';\n// check if element have HTML in to string method ie HTMLDivElement\nValidator.prototype.customFormats.HTMLContainer = (input) => typeof input === 'string' || (input.toString && input.toString().indexOf('HTML') > -1);\n\n/**\n * Returns validator instance\n */\nexport const getValidator = (schema) => {\n  return (params) => {\n    v.addSchema(DefinitionsSchema);\n    return v.validate(params, schema);\n  };\n};\n","/*\n * Copyright (c) 2018 by Filestack\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { config } from './../config';\nimport { TransformSchema } from './../schema/transforms.schema';\nimport { getValidator } from './../schema/validator';\nimport { resolveHost, b64 } from './utils';\nimport { FilestackError, FilestackErrorType } from './../filestack_error';\nimport Debug from 'debug';\n\nconst debug = Debug('fs:filelink');\n\nexport enum Align {\n  left = 'left',\n  right = 'right',\n  center = 'center',\n  bottom = 'bottom',\n  top = 'top',\n  faces = 'faces',\n  middle = 'middle',\n}\n\n/**\n * Align\n */\nexport type AlignOptions = Align | [Align.top | Align.middle | Align.bottom, Align.left | Align.center | Align.right];\n\n/**\n * Fit enum\n */\nexport enum FitOptions {\n  clip = 'clip',\n  crop = 'crop',\n  scale = 'scale',\n  max = 'max',\n}\n\n/**\n * Blur enum\n */\nexport enum BlurMode {\n  linear = 'linear',\n  gaussian = 'gaussian',\n}\n\n/**\n * Shapes enum\n */\nexport enum ShapeType {\n  oval = 'oval',\n  rect = 'rect',\n}\n\n/**\n * Noise type enum\n */\nexport enum NoiseType {\n  none = 'none',\n  low = 'low',\n  medium = 'medium',\n  high = 'high',\n}\n\n/**\n * Style type enum\n */\nexport enum StyleType {\n  artwork = 'artwork',\n  photo = 'photo',\n}\n\n/**\n * Color space enum\n */\nexport enum ColorspaceType {\n  RGB = 'RGB',\n  CMYK = 'CMYK',\n  Input = 'Input',\n}\n\n/**\n * Crop faces options enum\n */\nexport enum CropfacesType {\n  thumb = 'thumb',\n  crop = 'crop',\n  fill = 'fill',\n}\n\n/**\n * Watermark postion options enum\n */\nexport enum ImageWatermarkPosition {\n  top = 'top',\n  middle = 'middle',\n  bottom = 'bottom',\n  left = 'left',\n  center = 'center',\n  right = 'right',\n}\n\n/**\n * SmartCrop options enum\n */\nexport enum SmartCropMode {\n  face = 'face',\n  auto = 'auto',\n}\n\n/**\n * Convert to format\n */\nexport enum VideoTypes {\n  h264 = 'h264',\n  h264_hi = 'h264.hi',\n  webm = 'webm',\n  'webm-hi' = 'webm.hi',\n  ogg = 'ogg',\n  'ogg-hi' = 'ogg.hi',\n  'hls-variant' = 'hls.variant',\n  mp3 = 'mp3',\n  oga = 'oga',\n  m4a = 'm4a',\n  aac = 'aac',\n  hls = 'hls.variant.audio',\n}\n\nexport enum URLScreenshotAgent {\n  desktop = 'desktop',\n  mobile = 'mobile',\n}\n\nexport enum URLScreenshotMode {\n  all = 'all',\n  window = 'window',\n}\n\nexport enum URLScreenshotOrientation {\n  portrait = 'portrait',\n  landscape = 'landscape',\n}\n\n/**\n * Video storage location\n */\nexport enum Locations {\n  s3 = 's3',\n  azure = 'azure',\n  gcs = 'gcs',\n  rackspace = 'rackspace',\n  dropbox = 'dropbox',\n}\n\nexport enum VideoAccess {\n  private = 'private',\n  public = 'public',\n}\n\nexport enum VideoAccessMode {\n  preserve = 'preserve',\n  constrain = 'constrain',\n  letterbox = 'letterbox',\n  pad = 'pad',\n  crop = 'crop',\n}\n\nexport interface StoreBaseParams {\n  location?: string;\n  path?: string;\n  container?: string;\n  region?: string;\n  access?: string;\n  disableStorageKey?: boolean;\n}\n\n/**\n * Available options for store transformations\n *\n * @export\n * @interface StoreParams\n */\nexport type StoreParams = StoreBaseParams & {\n  filename?: string;\n  base64decode?: boolean;\n};\n\nexport interface AnimationParams {\n  delay?: number;\n  loop?: number;\n  width?: number;\n  height?: number;\n  fit?: FitOptions;\n  align?: AlignOptions;\n  background?: string;\n}\n\nexport interface ResizeParams {\n  width?: number;\n  height?: number;\n  fit?: FitOptions;\n  align?: AlignOptions;\n}\n\nexport interface CropParams {\n  dim: [number, number, number, number];\n}\n\nexport interface RotateParams {\n  deg: number | string;\n  color?: string;\n  background?: string;\n}\n\nexport interface DetectFacesParams {\n  minsize?: number;\n  maxsize?: number;\n  color?: string;\n  export?: boolean;\n}\n\nexport interface CropFacesParams {\n  mode?: CropfacesType;\n  width?: number;\n  height?: number;\n  faces?: number | string;\n  buffer?: number;\n}\n\nexport interface PixelateFacesParams {\n  faces?: number | string;\n  minsize?: number;\n  maxsize?: number;\n  buffer?: number;\n  amount?: number;\n  blur?: number;\n  type?: ShapeType;\n}\n\nexport interface BlurFacesParams {\n  faces?: number | string;\n  minsize?: number;\n  maxsize?: number;\n  buffer?: number;\n  amount?: number;\n  blur?: number;\n  type?: ShapeType;\n}\n\nexport interface RoundedCornersParams {\n  radius?: number;\n  blur?: number;\n  background?: string;\n}\n\nexport interface VignetteParams {\n  amount?: number;\n  blurmode?: BlurMode;\n  background?: string;\n}\n\nexport interface PolaroidParams {\n  color?: string;\n  rotate?: number;\n  background?: string;\n}\n\nexport interface TornEdgesParams {\n  spread?: [number, number];\n  background?: string;\n}\n\nexport interface ShadowParams {\n  blur?: number;\n  opacity?: number;\n  vector?: [number, number];\n  color?: string;\n  background?: string;\n}\n\nexport interface CircleParams {\n  background?: string;\n}\n\nexport interface BorderParams {\n  width?: number;\n  color?: string;\n  background?: string;\n}\n\nexport interface CompressParams {\n  metadata?: boolean;\n}\n\nexport interface WatermarkParams {\n  file: string;\n  size?: number;\n  position?: ImageWatermarkPosition | ImageWatermarkPosition[];\n}\n\nexport interface ProgressiveJpgParams {\n  quality: number;\n  metadata: boolean;\n}\n\nexport interface SmartCropParams {\n  mode: SmartCropMode;\n  width: number;\n  height: number;\n}\n\nexport interface SharpenParams {\n  amount: number;\n}\n\nexport interface BlurParams {\n  amount: number;\n}\n\nexport interface BlackwhiteParams {\n  threshold: number;\n}\n\nexport interface SepiaParams {\n  tone: number;\n}\n\nexport interface PixelateParams {\n  amount: number;\n}\n\nexport interface OilPaintParams {\n  amount: number;\n}\n\nexport interface ModulateParams {\n  brightness?: number;\n  hue?: number;\n  saturation?: number;\n}\n\nexport interface PartialPixelateParams {\n  amount?: number;\n  blur?: number;\n  type?: ShapeType;\n  objects?: [[number, number, number, number]];\n}\n\nexport interface PartialBlurParams {\n  amount: number;\n  blur?: number;\n  type?: ShapeType;\n  objects?: [[number, number, number, number]];\n}\n\nexport interface CollageParams {\n  margin?: number;\n  width?: number;\n  height?: number;\n  color?: string;\n  fit?: FitOptions;\n  files: [string];\n}\n\nexport interface UpscaleParams {\n  upscale?: boolean;\n  noise?: NoiseType;\n  style?: StyleType;\n}\n\nexport interface AsciiParams {\n  background?: string;\n  foreground?: string;\n  colored?: boolean;\n  size?: number;\n  reverse?: boolean;\n}\n\nexport interface QualityParams {\n  value: number;\n}\n\nexport interface SecurityParams {\n  policy: string;\n  signature?: string;\n}\n\nexport interface OutputParams {\n  format: string;\n  colorspace?: string;\n  strip?: boolean;\n  quality?: number;\n  page?: number;\n  compress?: boolean;\n  density?: number;\n  background?: string;\n  secure?: boolean;\n  docinfo?: boolean;\n  pageformat?: string;\n  pageorientation?: string;\n}\n\nexport interface CacheParams {\n  cache?: boolean;\n  expiry: number;\n}\n\nexport interface VideoConvertParams {\n  aspect_mode: VideoAccessMode;\n  preset?: VideoTypes;\n  force?: boolean;\n  title?: string;\n  extname?: string;\n  filename?: string;\n  location?: Locations;\n  path?: string;\n  access?: VideoAccess;\n  container?: string;\n  audio_bitrate?: number;\n  upscale: boolean;\n  video_bitrate?: number;\n  audio_sample_rate?: number;\n  audio_channels?: number;\n  clip_length?: string;\n  clip_offset?: string;\n  width?: number;\n  height?: number;\n  two_pass?: boolean;\n  fps?: number;\n  keyframe_interval?: number;\n  watermark_url?: string;\n  watermark_top?: number;\n  watermark_bottom?: number;\n  watermark_right?: number;\n  watermark_left?: number;\n  watermark_width?: number;\n  watermark_height?: number;\n}\n\nexport interface URLScreenshotParams {\n  agent?: URLScreenshotAgent;\n  width?: number;\n  height?: number;\n  mode?: URLScreenshotMode;\n  delay?: number;\n  orientation?: URLScreenshotOrientation;\n  device?: string;\n}\n\nexport enum EnhancePreset {\n  auto = 'auto',\n  vivid = 'vivid',\n  beautify = 'beautify',\n  beautifyPlus = 'beautify_plus',\n  fixDark = 'fix_dark',\n  fixNoise = 'fix_noise',\n  fixTint = 'fix_tint',\n  outdor = 'outdoor',\n  fireworks = 'fireworks',\n}\nexport interface EnhanceParams {\n  preset?: EnhancePreset;\n}\n\nexport interface PdfInfoParams {\n  colorinfo?: boolean;\n}\n\nexport interface PdfConvertParams {\n  pageorientation?: string;\n  pageformat?: string;\n  pages?: (string | number)[];\n}\n\nexport interface FallbackParams {\n  handle: string;\n  cache?: number;\n}\n\nexport interface MinifyCssParams {\n  gzip?: boolean;\n  level?: number;\n}\n\nexport interface MinifyJsParams {\n  gzip?: boolean;\n  use_babel_polyfill?: boolean;\n  keep_fn_name?: boolean;\n  keep_class_name?: boolean;\n  mangle?: boolean;\n  merge_vars?: boolean;\n  remove_console?: boolean;\n  remove_undefined?: boolean;\n  targets?: null | string;\n}\n\nconst handleRegexp = /^[\\w\\-]{20}|wf:\\/\\/[\\w\\-\\/]{106}$/;\n\n/**\n * Class for handling filelinks. For now its supports all filestack transforms.\n * It outputs transform url or array of transforms\n * @example\n * const link = new Filelink('handle or externalUrl', 'apikey');\n * link.flip().flop().store();\n *\n * console.log(link.toString());\n * // enable base64 support\n * link.setBase64(true)\n *\n * console.log(link.toString());\n *\n * @export\n * @class Filelink\n */\nexport class Filelink {\n  /**\n   * Validator instance\n   *\n   * @private\n   * @memberof Filelink\n   */\n  private static validator = getValidator(TransformSchema);\n\n  /**\n   * Applied transforms array\n   *\n   * @private\n   * @memberof Filelink\n   */\n  private transforms = [];\n\n  /**\n   * Handle or multiple handles in array\n   *\n   * @private\n   * @memberof Filelink\n   */\n  private source: string | string[];\n\n  /**\n   * Application key\n   *\n   * @private\n   * @type {string}\n   * @memberof Filelink\n   */\n  private apikey: string;\n\n  /**\n   * Is base64 support is enabled\n   *\n   * @private\n   * @type {boolean}\n   * @memberof Filelink\n   */\n  private b64: boolean = false;\n\n  /**\n   * should use a validator to check params of every task\n   * @private\n   * @type {boolean}\n   * @memberof Filelink\n   */\n  private useValidator: boolean = true;\n\n  /**\n   * Custom CNAME\n   *\n   * @private\n   * @type {string}\n   * @memberof Filelink\n   */\n  private cname: string;\n\n  /**\n   * Overwrite domain (test purposes)\n   *\n   * @private\n   * @type {string}\n   * @memberof Filelink\n   */\n  private customDomain: string;\n\n  /**\n   * Class for generating tranformation urls\n   * @param {(string | string[])} source - handle or multiple handles (i.e. for collage)\n   * @param {string} [apikey] - your apikey - required for all external sources\n   *\n   * @memberof Filelink\n   */\n  constructor(source: string | string[], apikey?: string) {\n    this.apikey = apikey;\n    this.setSource(source);\n  }\n\n  /**\n   * Enable new base64 link support to avoid problems with special chars in link\n   *\n   * @param {boolean} flag\n   * @returns\n   * @memberof Filelink\n   */\n  setBase64(flag: boolean) {\n    this.b64 = flag;\n    return this;\n  }\n\n  /**\n   * Switch the useValidator flag\n   *\n   * @param {boolean} flag\n   * @returns\n   * @memberof Filelink\n   */\n  setUseValidator(flag: boolean) {\n    this.useValidator = flag;\n    return this;\n  }\n\n  /**\n   * Set cname for transformation link\n   *\n   * @param {string} cname\n   * @returns\n   * @memberof Filelink\n   */\n  setCname(cname: string) {\n    this.cname = cname;\n    return this;\n  }\n\n  /**\n   * Set custom domain. Used for test purpose. It will be removed when after client.transform\n   *\n   * @param {string} domain\n   * @returns\n   * @memberof Filelink\n   */\n  setCustomDomain(domain: string) {\n    this.customDomain = domain;\n    return this;\n  }\n\n  setSource(source: string | string[]) {\n    this.source = source;\n\n    const isExternal = this.isSourceExternal();\n\n    debug(`Source ${source} - isExternal? ${isExternal}`);\n\n    if (isExternal && !this.apikey) {\n      throw new FilestackError('External sources requires apikey to handle transforms');\n    }\n\n    if (!isExternal && typeof this.source === 'string' && !handleRegexp.test(this.source) && this.source.indexOf('filestackcontent') === -1) {\n      throw new FilestackError('Invalid filestack source provided');\n    }\n  }\n\n  /**\n   * Returns JSONSchema form transformations params\n   *\n   * @returns\n   * @memberof Filelink\n   */\n  getValidationSchema() {\n    return TransformSchema;\n  }\n\n  /**\n   * Returns transformations in JSON format\n   *\n   * @returns\n   * @memberof Filelink\n   */\n  getTransformations() {\n    if (this.useValidator) {\n      this.validateTasks(this.transforms);\n    }\n    return this.transforms;\n  }\n\n  /**\n   * Returns transform url\n   *\n   * @returns\n   * @memberof Filelink\n   */\n  toString() {\n    const returnUrl = [];\n    returnUrl.push(this.getCdnHost());\n\n    if (this.useValidator) {\n      this.validateTasks(this.transforms);\n    }\n\n    if (this.apikey) {\n      returnUrl.push(this.apikey);\n    }\n\n    let transformsString = this.generateTransformString();\n\n    let source = this.source;\n\n    if (this.b64) {\n      if (this.transforms.length > 0) {\n        transformsString = `b64/${b64(JSON.stringify(this.transforms), true)}`;\n      }\n\n      if (Array.isArray(source)) {\n        source = this.arrayToString(source);\n      }\n\n      source = `b64://${b64(source, true)}`;\n    } else {\n      if (Array.isArray(source)) {\n        source = this.arrayToString(source);\n      } else {\n        source = this.escapeValue(source);\n      }\n    }\n\n    if (transformsString.length) {\n      returnUrl.push(transformsString);\n    }\n\n    returnUrl.push(source);\n    return returnUrl.join('/');\n  }\n\n  /**\n   * Add task and validate\n   *\n   * @param {string} name\n   * @param {*} [params]\n   * @returns\n   * @memberof Filelink\n   */\n  addTask(name: string, params?) {\n    Debug(`Add task  ${name} with params %O`, params);\n\n    if (name !== 'cache' && typeof params === 'boolean') {\n      if (!params) {\n        return this;\n      } else {\n        params = undefined;\n      }\n    } else if (typeof params === 'object' && !Object.keys(params).length) {\n      params = undefined;\n    }\n\n    this.transforms.push({ name, params });\n    return this;\n  }\n\n  /**\n   * Returns all tasks added for transformation\n   *\n   * @memberof Filelink\n   */\n  getTasks() {\n    return this.transforms;\n  }\n\n  /**\n   * Cleanup transformations on filelink\n   *\n   * @returns\n   * @memberof Filelink\n   */\n  reset() {\n    this.transforms = [];\n    return this;\n  }\n\n  /**\n   * Transformations part\n   */\n\n  /**\n   * Add autoimage transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#auto-image-conversion\n   * @returns this\n   * @memberof Filelink\n   */\n  autoImage() {\n    return this.addTask('auto_image', true);\n  }\n\n  /**\n   * Adds flip transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#flip\n   * @returns this\n   * @memberof Filelink\n   */\n  flip() {\n    return this.addTask('flip', true);\n  }\n\n  /**\n   * Adds flop transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#flop\n   * @returns this\n   * @memberof Filelink\n   */\n  flop() {\n    return this.addTask('flop', true);\n  }\n\n  /**\n   * Adds imagesize transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#image-size\n   * @returns this\n   * @memberof Filelink\n   */\n  imagesize() {\n    return this.addTask('imagesize', true);\n  }\n\n  /**\n   * Adds noMetadata transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#strip-metadata\n   * @returns this\n   * @memberof Filelink\n   */\n  noMetadata() {\n    return this.addTask('no_metadata', true);\n  }\n\n  /**\n   * Adds Progressive JPEG transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#progressive-jpeg\n   * @returns this\n   * @memberof Filelink\n   */\n  pjpg(params: ProgressiveJpgParams) {\n    return this.addTask('pjpg', params);\n  }\n\n  /**\n   * Adds imagesize transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#smart-crop\n   * @returns this\n   * @memberof Filelink\n   */\n  smartCrop(params: SmartCropParams) {\n    return this.addTask('smart_crop', params);\n  }\n\n  /**\n   * Adds watermart transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#watermark\n   * @returns this\n   * @memberof Filelink\n   */\n  watermark(params: WatermarkParams) {\n    return this.addTask('watermark', params);\n  }\n\n  /**\n   * Adds enhance transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#enhance\n   * @returns this\n   * @memberof Filelink\n   */\n  enhance(params?: EnhanceParams) {\n    return this.addTask('enhance', params || true);\n  }\n\n  /**\n   * Add security to link\n   *\n   * @see https://www.filestack.com/docs/api/processing/#redeye\n   * @returns\n   * @memberof Filelink\n   */\n  redeye() {\n    return this.addTask('redeye', true);\n  }\n\n  /**\n   * Add monochrome transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#monochrome\n   * @returns this\n   * @memberof Filelink\n   */\n  monochrome() {\n    return this.addTask('monochrome', true);\n  }\n\n  /**\n   * Add compress transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#compress\n   * @returns this\n   * @memberof Filelink\n   */\n  compress(params?: CompressParams) {\n    return this.addTask('compress', params || true);\n  }\n\n  /**\n   * Adds negative transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#negative\n   * @returns this\n   * @memberof Filelink\n   */\n  negative() {\n    return this.addTask('negative', true);\n  }\n\n  /**\n   * Adds tags transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#tags\n   * @returns this\n   * @memberof Filelink\n   */\n  tags() {\n    return this.addTask('tags', true);\n  }\n\n  /**\n   * Adds sfw transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#sfw\n   * @returns this\n   * @memberof Filelink\n   */\n  sfw() {\n    return this.addTask('sfw', true);\n  }\n\n  /**\n   * Add animate transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#animate-images-to-gif\n   * @param params\n   * @returns this\n   * @memberof Filelink\n   */\n  animate(params: AnimationParams) {\n    return this.addTask('animate', params);\n  }\n\n  /**\n   * Adds store transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#store\n   * @param {(StoreParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  store(params?: StoreParams | boolean) {\n    return this.addTask('store', params);\n  }\n\n  /**\n   * Adds cache transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#cache\n   * @param {(CacheParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  cache(params: CacheParams | boolean) {\n    return this.addTask('cache', params);\n  }\n\n  /**\n   * Adds resize transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#resize\n   * @param {ResizeParams} params\n   * @returns this\n   * @memberof Filelink\n   */\n  resize(params: ResizeParams) {\n    return this.addTask('resize', params);\n  }\n\n  /**\n   * Adds crop transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#crop\n   * @param {CropParams} params\n   * @returns this\n   * @memberof Filelink\n   */\n  crop(params: CropParams) {\n    return this.addTask('crop', params);\n  }\n\n  /**\n   * Adds rotate transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#rotate\n   * @param {RotateParams} params\n   * @returns this\n   * @memberof Filelink\n   */\n  rotate(params: RotateParams) {\n    return this.addTask('rotate', params);\n  }\n\n  /**\n   * Adds detect_faces transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#facial-detection\n   * @param {(DetectFacesParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  detectFaces(params?: DetectFacesParams | boolean) {\n    return this.addTask('detect_faces', params);\n  }\n\n  /**\n   * Adds crop faces transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#crop-faces\n   * @param {CropFacesParams} params\n   * @returns this\n   * @memberof Filelink\n   */\n  cropFaces(params: CropFacesParams) {\n    return this.addTask('crop_faces', params);\n  }\n\n  /**\n   * Adds pixelate faces transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#pixelate-faces\n   * @param {PixelateFacesParams} params\n   * @returns this\n   * @memberof Filelink\n   */\n  pixelateFaces(params: PixelateFacesParams) {\n    return this.addTask('pixelate_faces', params);\n  }\n\n  /**\n   * Adds blur faces transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#blur-faces\n   * @param {BlurFacesParams} params\n   * @returns this\n   * @memberof Filelink\n   */\n  blurFaces(params: BlurFacesParams) {\n    return this.addTask('blur_faces', params);\n  }\n\n  /**\n   * Adds rounded corners transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#rounded-corners\n   * @param {(RoundedCornersParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  roundedCorners(params?: RoundedCornersParams | boolean) {\n    return this.addTask('rounded_corners', params);\n  }\n\n  /**\n   * Adds polaroid transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#polaroid\n   * @param {(PolaroidParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  polaroid(params?: PolaroidParams | boolean) {\n    return this.addTask('polaroid', params);\n  }\n\n  /**\n   * Adds vignette transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#vignette\n   * @param {(VignetteParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  vignette(params?: VignetteParams | boolean) {\n    return this.addTask('vignette', params);\n  }\n\n  /**\n   * Adds torn edges transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#torn-edges\n   * @param {(TornEdgesParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  tornEdges(params?: TornEdgesParams | boolean) {\n    return this.addTask('torn_edges', params);\n  }\n\n  /**\n   * Adds shadow transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#shadow\n   * @param {(ShadowParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  shadow(params?: ShadowParams | boolean) {\n    return this.addTask('shadow', params);\n  }\n\n  /**\n   * Adds circle transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#circle\n   * @param {(CircleParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  circle(params?: CircleParams | boolean) {\n    return this.addTask('circle', params);\n  }\n\n  /**\n   * Adds border transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#border\n   * @param {(BorderParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  border(params?: BorderParams | boolean) {\n    return this.addTask('border', params);\n  }\n\n  /**\n   * Adds sharpen transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#sharpen\n   * @param {(SharpenParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  sharpen(params?: SharpenParams | boolean) {\n    return this.addTask('sharpen', params);\n  }\n\n  /**\n   * Adds blur transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#blur\n   * @param {(BlurParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  blur(params?: BlurParams | boolean) {\n    return this.addTask('blur', params);\n  }\n\n  /**\n   * Adds blackwhite transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#blackwhite\n   * @param {(BlackwhiteParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  blackwhite(params?: BlackwhiteParams | boolean) {\n    return this.addTask('blackwhite', params);\n  }\n\n  /**\n   * Adds sepia transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#sepia\n   * @param {(SepiaParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  sepia(params?: SepiaParams | boolean) {\n    return this.addTask('sepia', params);\n  }\n\n  /**\n   * Adds pixelate transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#pixelate\n   * @param {(PixelateParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  pixelate(params?: PixelateParams | boolean) {\n    return this.addTask('pixelate', params);\n  }\n\n  /**\n   * Adds oilpaint transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#oil-paint\n   * @param {(OilPaintParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  oilPaint(params?: OilPaintParams | boolean) {\n    return this.addTask('oil_paint', params);\n  }\n\n  /**\n   * Adds modulate transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#modulate\n   * @param {(ModulateParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  modulate(params?: ModulateParams | boolean) {\n    return this.addTask('modulate', params);\n  }\n\n  /**\n   * Adds partial pixelate transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#partial-pixelate\n   * @param {PartialPixelateParams} params\n   * @returns this\n   * @memberof Filelink\n   */\n  partialPixelate(params: PartialPixelateParams) {\n    return this.addTask('partial_pixelate', params);\n  }\n\n  /**\n   * Adds partial blur transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#partial-blur\n   * @param {PartialBlurParams} params\n   * @returns this\n   * @memberof Filelink\n   */\n  partialBlur(params: PartialBlurParams) {\n    return this.addTask('partial_blur', params);\n  }\n\n  /**\n   * Adds collage transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#collage\n   * @param {CollageParams} params\n   * @returns this\n   * @memberof Filelink\n   */\n  collage(params: CollageParams) {\n    return this.addTask('collage', params);\n  }\n\n  /**\n   * Adds upscale transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#upscale\n   * @param {(UpscaleParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  upscale(params?: UpscaleParams | boolean) {\n    return this.addTask('upscale', params);\n  }\n\n  /**\n   * Adds ascii transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#ascii\n   * @param {(AsciiParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  ascii(params?: AsciiParams | boolean) {\n    return this.addTask('ascii', params);\n  }\n\n  /**\n   * Adds quality transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#quality\n   * @param {QualityParams} params\n   * @returns this\n   * @memberof Filelink\n   */\n  quality(params: QualityParams) {\n    return this.addTask('quality', params);\n  }\n\n  /**\n   * Adds security transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#security\n   * @param {SecurityParams} params\n   * @returns this\n   * @memberof Filelink\n   */\n  security(params: SecurityParams) {\n    return this.addTask('security', params);\n  }\n\n  /**\n   * Adds output transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#output\n   * @param {OutputParams} params\n   * @returns this\n   * @memberof Filelink\n   */\n  output(params: OutputParams) {\n    return this.addTask('output', params);\n  }\n\n  /**\n   * Adds video convert transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#video-convert\n   * @param {VideoConvertParams} params\n   * @returns this\n   * @memberof Filelink\n   */\n  videoConvert(params: VideoConvertParams) {\n    return this.addTask('video_convert', params);\n  }\n\n  /**\n   * Adds URLScreenshot transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#urlscreenshot\n   * @param {(URLScreenshotParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  URLScreenshot(params?: URLScreenshotParams | boolean) {\n    return this.addTask('urlscreenshot', params);\n  }\n\n  /**\n   * Adds pdfinfo transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#pdfinfo\n   * @param {(PdfInfoParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  PDFInfo(params?: PdfInfoParams | boolean) {\n    return this.addTask('pdfinfo', params);\n  }\n\n  /**\n   * Adds pdfconvert transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#pdfconvert\n   * @param {(PdfConvertParams | boolean)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  PDFConvert(params?: PdfConvertParams | boolean) {\n    return this.addTask('pdfconvert', params);\n  }\n\n  /**\n   * Adds fallback transformation\n   *\n   * @see https://www.filestack.com/docs/api/processing/#fallback\n   * @param {(FallbackParams)} params\n   * @returns this\n   * @memberof Filelink\n   */\n  fallback(params: FallbackParams) {\n    return this.addTask('fallback', params);\n  }\n\n  /**\n   * Add zip transformation which create a zip package on files\n   * used on actual context\n   *\n   * @see https://www.filestack.com/docs/api/processing/#zip\n   * @returns this\n   * @memberof Filelink\n   */\n  zip() {\n    return this.addTask('zip', true);\n  }\n\n  /**\n   * Add task which minify a css file\n   *\n   * @returns this\n   * @memberof Filelink\n   */\n  minifyCss(params: MinifyCssParams) {\n    return this.addTask('minify_css', params);\n  }\n\n  /**\n   * Add task which minify a javascript file.\n   * For better handling of 'targets' param, use with b64 flag enabled.\n   *\n   * @returns this\n   * @memberof Filelink\n   */\n  minifyJs(params: MinifyJsParams) {\n    return this.addTask('minify_js', params);\n  }\n\n  /**\n   * Checks if source is external\n   *\n   * @private\n   * @returns {boolean}\n   * @memberof Filelink\n   */\n  private isSourceExternal(): boolean {\n    if (!this.source) {\n      throw new FilestackError('Source not Set');\n    }\n\n    let toTest = Array.isArray(this.source) ? this.source : [this.source];\n    for (let i in toTest) {\n      /* istanbul ignore next */\n      if (!toTest.hasOwnProperty(i)) {\n        continue;\n      }\n\n      if (toTest[i].indexOf('src:') === 0 || (toTest[i].indexOf('http') === 0 && toTest[i].indexOf('filestackcontent') === -1)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Validate every task against schema\n   *\n   * @private\n   * @param {object[]} transformations - object which contain all transformations\n   * @returns {void}\n   * @memberof Filelink\n   */\n  private validateTasks(transformations: object[]): void {\n    const res = Filelink.validator(this.arrayToObject(transformations, 'name', 'params'));\n    if (res.errors.length) {\n      throw new FilestackError(`Params validation error`, res.errors, FilestackErrorType.VALIDATION);\n    }\n\n    return;\n  }\n\n  /**\n   * Returns correct cdn url with cname support\n   *\n   * @private\n   * @returns {string}\n   * @memberof Filelink\n   */\n  private getCdnHost(): string {\n    let urls = Object.assign({}, config.urls);\n\n    if (this.customDomain) {\n      urls.cdnUrl = this.customDomain;\n    }\n\n    urls = resolveHost(urls, this.cname);\n\n    return urls.cdnUrl;\n  }\n\n  /**\n   * Returns applied transformations as string\n   *\n   * @private\n   * @returns {string}\n   * @memberof Filelink\n   */\n  private generateTransformString(): string {\n    let transforms = [];\n\n    this.transforms.forEach(el => {\n      transforms.push(this.optionToString(el.name, el.params));\n    });\n\n    return transforms.join('/');\n  }\n\n  /**\n   * Flatten transformation option to string\n   *\n   * @private\n   * @example {resize:{width: 100,height: 200}} => resize=width:100,height:200\n   * @param key - option key\n   * @param values - option params\n   */\n  private optionToString(key: string, values: any): string {\n    let optionsString: string[] = [];\n    if (typeof values === 'undefined') {\n      return key;\n    }\n\n    // if we just want to enable feature\n    if (typeof values === 'boolean') {\n      if (!values && key === 'cache') {\n        return 'cache=false';\n      }\n\n      return key;\n    }\n\n    Object.keys(values).forEach(i => {\n      if (Array.isArray(values[i])) {\n        optionsString.push(`${i}:${this.arrayToString(values[i])}`);\n        return;\n      }\n\n      optionsString.push(`${i}:${this.escapeValue(values[i])}`);\n    });\n\n    return `${key}=${optionsString.join(',')}`;\n  }\n\n  /**\n   * Escape params values\n   *\n   * @private\n   * @param {string} value\n   * @returns {string}\n   * @memberof Filelink\n   */\n  private escapeValue(value: string): string {\n    if (typeof value !== 'string') {\n      return value;\n    }\n\n    if (value.indexOf('/') > -1 || value.indexOf(',') > -1) {\n      return `\"${value}\"`;\n    }\n\n    return value;\n  }\n\n  /**\n   * Converts nested arrays to string\n   *\n   * @private\n   * @example [1,2, [2,3]] => \"[1,2, [2,3]]\"\n   * @param arr - any array\n   */\n  private arrayToString(arr: any[]): string {\n    const toReturn = arr.map(el => {\n      if (Array.isArray(el)) {\n        return this.arrayToString(el);\n      }\n\n      return this.escapeValue(el);\n    });\n\n    return `[${toReturn}]`;\n  }\n\n  /**\n   * Converts array of objects to object\n   *\n   * @private\n   * @example [{name: 'resize', params: {height: 125}}] => {resize: {height: 125}}\n   * @param arr - any array\n   */\n  private arrayToObject = (array: object[] = [], nameKey: string, dataKey: string) => {\n    return array.reduce((obj, item) => {\n      obj[item[nameKey]] = item[dataKey];\n      return obj;\n    }, {});\n  }\n}\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const StoreParamsSchema = {\n  '$schema': 'http://json-schema.org/draft-07/schema#',\n  title: 'Filestack Store',\n  description: 'Filestack Store Options',\n  type: 'object',\n  additionalProperties: false,\n  properties: {\n    filename: {\n      oneOf: [{\n        type: 'string',\n      }, {\n        format: 'callback',\n      }],\n    },\n    location: {\n      '$ref': 'locationsDef',\n    },\n    path: {\n      type: 'string',\n    },\n    container: {\n      type: 'string',\n    },\n    region: {\n      '$ref': 'regionsDef',\n    },\n    access: {\n      type: 'string',\n      enum: ['public', 'private'],\n      default: 'private',\n    },\n    base64decode: {\n      type: 'boolean',\n    },\n    workflows: {\n      '$ref': 'workflowsDef',\n    },\n    disableStorageKey: {\n      type: 'boolean',\n    },\n    tags: {\n      type: 'object',\n      additionalProperties: {\n        type: 'string',\n      },\n    },\n    sanitizer: {\n      oneOf: [{\n        type: 'boolean',\n      }, {\n        type: 'object',\n        additionalProperties: false,\n        properties: {\n          exclude: {\n            type: 'array',\n            items: [{\n              type: 'string',\n            }],\n          },\n          replacement: {\n            type: 'string',\n          },\n        },\n      }],\n    },\n  },\n};\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const PreviewParamsSchema = {\n  '$schema': 'http://json-schema.org/draft-07/schema#',\n  title: 'Filestack Preview',\n  description: 'Filestack Preview Options',\n  type: 'object',\n  additionalProperties: false,\n  properties: {\n    id: {\n      type: 'string',\n    },\n    css: {\n      type: 'string',\n    },\n  },\n};\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const UploadParamsSchema = {\n  $schema: 'http://json-schema.org/draft-07/schema#',\n  title: 'Filestack Upload',\n  description: 'Filestack Upload Options',\n  type: 'object',\n  additionalProperties: false,\n  properties: {\n    partSize: {\n      type: 'integer',\n      minimum: 5 * 1024 * 1024,\n    },\n    concurrency: {\n      type: 'integer',\n      minimum: 1,\n      maximum: 20,\n    },\n    progressInterval: {\n      type: 'integer',\n      minimum: 1,\n    },\n    retry: {\n      type: 'integer',\n      minimum: 0,\n      maximum: 20,\n    },\n    retryFactor: {\n      type: 'integer',\n    },\n    retryMaxTime: {\n      type: 'integer',\n    },\n    timeout: {\n      type: 'integer',\n      minimum: 1,\n      maximum: 60 * 60 * 1000,\n    },\n    intelligent: {\n      oneOf: [\n        {\n          type: 'boolean',\n        },\n        {\n          type: 'string',\n          enum: ['fallback'],\n        },\n      ],\n    },\n    intelligentChunkSize: {\n      type: 'integer',\n    },\n    onProgress: {\n      format: 'callback',\n    },\n    onRetry: {\n      format: 'callback',\n    },\n    disableIntegrityCheck: {\n      type: 'boolean',\n    },\n    tags: {\n      type: 'object',\n      maxItems: 10,\n      additionalProperties: {\n        type: 'string',\n        maxlength: 256,\n      },\n    },\n  },\n};\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { UploadParamsSchema } from './upload.schema';\n\nexport const PickerParamsSchema = {\n  $schema: 'http://json-schema.org/draft-07/schema#',\n  title: 'Filestack Picker',\n  description: 'Filestack Picker Options',\n  type: 'object',\n  additionalProperties: false,\n  // required: ['container'],\n  properties: {\n    allowManualRetry: {\n      type: 'boolean',\n    },\n    accept: {\n      additionalProperties: false,\n      oneOf: [\n        {\n          type: 'string',\n        },\n        {\n          type: 'array',\n          minItems: 1,\n          items: [\n            {\n              type: 'string',\n            },\n          ],\n        },\n      ],\n    },\n    acceptFn: {\n      format: 'callback',\n    },\n    fromSources: {\n      type: 'array',\n      items: [\n        {\n          type: ['string', 'object'],\n          additionalProperties: false,\n          enum: [\n            'local_file_system',\n            'url',\n            'imagesearch',\n            'facebook',\n            'instagram',\n            'googledrive',\n            'unsplash',\n            'dropbox',\n            'webcam',\n            'video',\n            'audio',\n            'box',\n            'github',\n            'gmail',\n            'googlephotos',\n            'onedrive',\n            'onedriveforbusiness',\n            'clouddrive',\n            'googlephotos',\n            'customsource',\n            'tint',\n          ],\n        },\n      ],\n    },\n    container: {\n      format: 'HTMLContainer',\n    },\n    cleanupImageExif: {\n      oneOf: [\n        {\n          type: 'boolean',\n        },\n        {\n          type: 'object',\n          additionalProperties: false,\n          properties: {\n            keepOrientation: {\n              type: 'boolean',\n            },\n            keepICCandAPP: {\n              type: 'boolean',\n            },\n          },\n        },\n      ],\n    },\n    displayMode: {\n      type: 'string',\n      enum: ['inline', 'overlay', 'dropPane'],\n    },\n    concurrency: {\n      type: 'integer',\n      minimum: 1,\n      maximum: 20,\n    },\n    supportEmail: {\n      type: 'string',\n    },\n    customSourceContainer: {\n      type: 'string',\n    },\n    customSourcePath: {\n      type: 'string',\n    },\n    customSourceName: {\n      type: 'string',\n    },\n    disableStorageKey: {\n      type: 'boolean',\n    },\n    disableTransformer: {\n      type: 'boolean',\n    },\n    disableThumbnails: {\n      type: 'boolean',\n    },\n    exposeOriginalFile: {\n      type: 'boolean',\n    },\n    globalDropZone: {\n      type: 'boolean',\n    },\n    hideModalWhenUploading: {\n      type: 'boolean',\n    },\n    imageDim: {\n      type: 'array',\n      minItems: 2,\n      maxItems: 2,\n      items: [\n        {\n          type: 'integer',\n          minimum: 1,\n        },\n      ],\n    },\n    imageMax: {\n      type: 'array',\n      minItems: 2,\n      maxItems: 2,\n      items: [\n        {\n          type: 'integer',\n          minimum: 1,\n        },\n      ],\n    },\n    imageMin: {\n      type: 'array',\n      minItems: 2,\n      maxItems: 2,\n      items: [\n        {\n          type: 'integer',\n          minimum: 1,\n        },\n      ],\n    },\n    imageMinMaxBlock: {\n      type: 'boolean',\n      default: false,\n    },\n    lang: {\n      type: 'string',\n      enum: ['ca', 'da', 'de', 'en', 'es', 'fr', 'he', 'it', 'ja', 'ko', 'nl', 'no', 'pl', 'pt', 'sv', 'ru', 'vi', 'zh', 'tr', 'ar'],\n    },\n    minFiles: {\n      type: 'integer',\n      minimum: 1,\n      maximum: 1000000,\n    },\n    maxFiles: {\n      type: 'integer',\n      minimum: 1,\n      maximum: 1000000,\n    },\n    maxSize: {\n      type: 'integer',\n      minimum: 1,\n    },\n    modalSize: {\n      type: 'array',\n      minItems: 2,\n      maxItems: 2,\n      items: [\n        {\n          type: 'integer',\n          minimum: 1,\n          maximum: 1000000,\n        },\n      ],\n    },\n    rootId: {\n      type: 'string',\n    },\n    startUploadingWhenMaxFilesReached: {\n      type: 'boolean',\n    },\n    uploadInBackground: {\n      type: 'boolean',\n    },\n    videoResolution: {\n      type: 'string',\n    },\n    onCancel: {\n      format: 'callback',\n    },\n    onClose: {\n      format: 'callback',\n    },\n    onOpen: {\n      format: 'callback',\n    },\n    onFileSelected: {\n      format: 'callback',\n    },\n    onFileUploadCancel: {\n      format: 'callback',\n    },\n    onFileUploadStarted: {\n      format: 'callback',\n    },\n    onFileUploadFinished: {\n      format: 'callback',\n    },\n    onFileUploadFailed: {\n      format: 'callback',\n    },\n    onFileUploadProgress: {\n      format: 'callback',\n    },\n    onUploadStarted: {\n      format: 'callback',\n    },\n    onUploadDone: {\n      format: 'callback',\n    },\n    onFileCropped: {\n      format: 'callback',\n    },\n    storeTo: {\n      additionalProperties: false,\n      type: 'object',\n      properties: {\n        filename: {\n          type: 'string',\n        },\n        location: {\n          $ref: 'locationsDef',\n        },\n        container: {\n          type: 'string',\n        },\n        path: {\n          type: 'string',\n        },\n        region: {\n          type: 'string',\n        },\n        access: {\n          type: 'string',\n          enum: ['public', 'private'],\n        },\n        workflows: {\n          $ref: 'workflowsDef',\n        },\n      },\n    },\n    viewType: {\n      type: 'string',\n      enum: ['grid', 'list'],\n    },\n    transformations: {\n      type: 'object',\n      additionalProperties: false,\n      properties: {\n        circle: {\n          type: 'boolean',\n        },\n        rotate: {\n          type: 'boolean',\n        },\n        force: {\n          type: 'boolean',\n        },\n        crop: {\n          oneOf: [\n            {\n              type: 'boolean',\n            },\n            {\n              type: 'object',\n              additionalProperties: false,\n              properties: {\n                force: {\n                  type: 'boolean',\n                },\n                aspectRatio: {\n                  type: 'number',\n                },\n              },\n            },\n          ],\n        },\n      },\n    },\n    customText: {\n      type: 'object',\n      patternProperties: {\n        '.*': { type: 'string' },\n      },\n    },\n    cropFiles: {\n      type: 'array',\n      minItems: 1,\n    },\n    loadCss: {\n      type: 'string',\n    },\n    failOverMaxFiles: {\n      type: 'boolean',\n    },\n    dropPane: {\n      type: 'object',\n      properties: {\n        cropFiles: {\n          type: 'array',\n          minItems: 1,\n        },\n        customText: {\n          type: 'string',\n        },\n        disableClick: {\n          type: 'boolean',\n        },\n        overlay: {\n          type: 'boolean',\n        },\n        showIcon: {\n          type: 'boolean',\n        },\n        showProgress: {\n          type: 'boolean',\n        },\n        onDragEnter: {\n          format: 'callback',\n        },\n        onProgress: {\n          format: 'callback',\n        },\n        onDragLeave: {\n          format: 'callback',\n        },\n        onDragOver: {\n          format: 'callback',\n        },\n        onDrop: {\n          format: 'callback',\n        },\n        onSuccess: {\n          format: 'callback',\n        },\n        onError: {\n          format: 'callback',\n        },\n        onClick: {\n          format: 'callback',\n        },\n      },\n    },\n    errorsTimeout: {\n      type: 'number',\n      minimum: 0,\n    },\n    customAuthText: {\n      type: 'object',\n      patternProperties: {\n        '.*': {\n          additionalProperties: false,\n          type: 'object',\n          required: ['top', 'bottom'],\n          properties: {\n            top: {\n              type: 'string',\n            },\n            bottom: {\n              type: 'string',\n            },\n          },\n        },\n      },\n    },\n    uploadConfig: {\n      type: 'object',\n      additionalProperties: false,\n      properties: {\n        // manual import upload definitions\n        ...UploadParamsSchema.properties,\n        tags: {\n          type: 'object',\n          additionalProperties: {\n            anyOf: [\n              {\n                type: 'string',\n              },\n              {\n                format: 'callback',\n              },\n            ],\n          },\n        },\n      },\n    },\n    useSentryBreadcrumbs: {\n      type: 'boolean',\n    },\n    pasteMode: {\n      type: 'object',\n      additionalProperties: false,\n      properties: {\n        pasteToFirstInViewPort: {\n          type: 'boolean',\n        },\n        pasteToFirstInstance: {\n          type: 'boolean',\n        },\n      },\n    },\n  },\n};\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const MetadataParamsSchema = {\n  '$schema': 'http://json-schema.org/draft-07/schema#',\n  title: 'Filestack Metadata',\n  description: 'Filestack Metadata Options',\n  type: 'object',\n  additionalProperties: false,\n  properties: {\n    size: {\n      type: 'boolean',\n    },\n    mimetype: {\n      type: 'boolean',\n    },\n    filename: {\n      type: 'boolean',\n    },\n    width: {\n      type: 'boolean',\n    },\n    metadata: {\n      type: 'boolean',\n    },\n    height: {\n      type: 'boolean',\n    },\n    uploaded: {\n      type: 'boolean',\n    },\n    writeable: {\n      type: 'boolean',\n    },\n    cloud: {\n      type: 'boolean',\n    },\n    sourceUrl: {\n      type: 'boolean',\n    },\n    md5: {\n      type: 'boolean',\n    },\n    sha1: {\n      type: 'boolean',\n    },\n    sha224: {\n      type: 'boolean',\n    },\n    sha256: {\n      type: 'boolean',\n    },\n    sha384: {\n      type: 'boolean',\n    },\n    sha512: {\n      type: 'boolean',\n    },\n    location: {\n      type: 'boolean',\n    },\n    path: {\n      type: 'boolean',\n    },\n    container: {\n      type: 'boolean',\n    },\n    exif: {\n      type: 'boolean',\n    },\n  },\n};\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const RetrieveParamsSchema = {\n  '$schema': 'http://json-schema.org/draft-07/schema#',\n  title: 'Filestack Retrieve',\n  description: 'Filestack Retrieve Options',\n  type: 'object',\n  additionalProperties: false,\n  properties: {\n    metadata: {\n      type: 'boolean',\n    },\n    head: {\n      type: 'boolean',\n    },\n    dl: {\n      type: 'boolean',\n    },\n    cache: {\n      type: 'boolean',\n    },\n    extension: {\n      type: 'string',\n    },\n  },\n};\n","/*\n * Copyright (c) 2018 by Filestack\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { FsRequestOptions, FsResponse } from './types';\nimport { AdapterInterface } from './adapters/interface';\nimport { FsRequestError } from './error';\nimport { shouldRetry } from './helpers/shouldRetry';\nimport Debug from 'debug';\n\nconst debug = Debug('fs:request:dispatch');\n\n/**\n * Request dispatcher\n *\n * @export\n * @class Dispatch\n */\nexport class Dispatch {\n  adapter: AdapterInterface;\n\n  /**\n   * Creates an instance of Dispatch.\n   *\n   * @param {AdapterInterface} adapter http | XHR adapater\n   * @memberof Dispatch\n   */\n  constructor(adapter: AdapterInterface) {\n    this.adapter = adapter;\n  }\n\n  /**\n   * Dispatch request adding retry policy\n   * @todo add data preprocesor\n   *\n   * @param {FsRequestOptions} config\n   * @returns {Promise<FsResponse>}\n   * @memberof Dispatch\n   */\n  public request(config: FsRequestOptions): Promise<FsResponse> {\n    config.headers = config.headers || {};\n    debug('Dispatching request %O', config);\n    return this.adapter.request(config).catch((reason: FsRequestError) => {\n      debug('Request error \"%s\": %O', reason, reason.response);\n      return this.retry(reason);\n    });\n  }\n\n  /**\n   * Request retrier\n   *\n   * @private\n   * @param {FsRequestError} err\n   * @returns\n   * @memberof Dispatch\n   */\n  private retry(err: FsRequestError) {\n    const config = err.config;\n\n    if (!shouldRetry(err)) {\n      debug('[Retry] Request error is not retriable. Exiting');\n      return Promise.reject(err);\n    }\n\n    if (!config.retry) {\n      debug('[Retry] Retry config not found. Exiting');\n      return Promise.reject(err);\n    }\n\n    const retryConfig = config.retry;\n    let attempts = config.runtime && config.runtime.retryCount ? config.runtime.retryCount : 0;\n\n    if (retryConfig.retry && retryConfig.retry <= attempts) {\n      debug('[Retry] Retry attempts reached %d. Exiting', attempts);\n      return Promise.reject(err);\n    }\n\n    const retryDelay = Math.max(Math.min(retryConfig.retryMaxTime, retryConfig.retryFactor ** attempts * 1000), 1);\n\n    config.runtime = {\n      ...config.runtime,\n      retryCount: attempts + 1,\n    };\n\n    debug(`[Retry] Retrying request to ${config.url}, count ${attempts} of ${retryConfig.retry} - Delay: ${retryDelay}`);\n\n    return new Promise<FsResponse>(resolve => {\n      setTimeout(() => resolve(this.request(config)), retryDelay);\n    });\n  }\n}\n","/*\n * Copyright (c) 2018 by Filestack\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport var RequestAdapter = require('./adapters/xhr').XhrAdapter;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvcmVxdWVzdC9yZXF1ZXN0X2FkYXB0ZXIuYnJvd3Nlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFDSCxNQUFNLENBQUMsSUFBTSxjQUFjLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUMsVUFBVSxDQUFDIiwiZmlsZSI6ImxpYi9yZXF1ZXN0L3JlcXVlc3RfYWRhcHRlci5icm93c2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAoYykgMjAxOCBieSBGaWxlc3RhY2tcbiAqIFNvbWUgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZXhwb3J0IGNvbnN0IFJlcXVlc3RBZGFwdGVyID0gcmVxdWlyZSgnLi9hZGFwdGVycy94aHInKS5YaHJBZGFwdGVyO1xuIl19\n","/*\n * Copyright (c) 2018 by Filestack\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { FsRequestOptions, FsHttpMethod, FsResponse } from './types';\nimport { Dispatch } from './dispatch';\nimport { RequestAdapter } from './request_adapter.node';\n\n/**\n * Main isomorphic Filestack request library\n *\n * @export\n * @class FsRequest\n */\nexport class FsRequest {\n  /**\n   * Request static instance\n   *\n   * @private\n   * @static\n   * @type {FsRequest}\n   * @memberof FsRequest\n   */\n  private static instance: FsRequest;\n\n  /**\n   * Default request options\n   *\n   * @private\n   * @type {RequestOptions}\n   * @memberof FsRequest\n   */\n  private defaults: FsRequestOptions;\n\n  /**\n   * Request Dispatcher\n   *\n   * @private\n   * @type {Dispatch}\n   * @memberof FsRequest\n   */\n  private dispatcher: Dispatch;\n\n  /**\n   * Creates an instance of Request.\n   *\n   * @param {RequestOptions} [config]\n   * @memberof FsRequest\n   */\n  constructor(config?: FsRequestOptions) {\n\n    this.defaults = config;\n    this.dispatcher = new Dispatch(new RequestAdapter());\n  }\n\n  /**\n   * Returns static FsRequest instance\n   *\n   * @private\n   * @static\n   * @returns\n   * @memberof FsRequest\n   */\n  private static getInstance() {\n    if (!FsRequest.instance) {\n      FsRequest.instance = new FsRequest();\n    }\n\n    return FsRequest.instance;\n  }\n\n  /**\n   * Run request with given adapter\n   *\n   * @param {RequestOptions} config\n   * @returns\n   * @memberof Request\n   */\n\n  public dispatch(config: FsRequestOptions) {\n    if (!config.method) {\n      config.method = FsHttpMethod.GET;\n    }\n\n    return this.dispatcher.request(Object.assign({}, this.defaults, config));\n  }\n\n  /**\n   * Dispatch request\n   *\n   * @static\n   * @param {string} url\n   * @param {FsRequestOptions} config\n   * @returns {Promise<FsResponse>}\n   * @memberof FsRequest\n   */\n  public static dispatch(url: string, config: FsRequestOptions): Promise<FsResponse> {\n    return FsRequest.getInstance().dispatch(Object.assign({}, config || {}, { url }));\n  }\n\n  /**\n   * Dispatch GET request\n   *\n   * @static\n   * @param {string} url\n   * @param {FsRequestOptions} config\n   * @returns {Promise<FsResponse>}\n   * @memberof FsRequest\n   */\n  public static get(url: string, config?: FsRequestOptions): Promise<FsResponse> {\n    return FsRequest.getInstance().dispatch(Object.assign({}, config || {}, { method: FsHttpMethod.GET, url }));\n  }\n\n  /**\n   * Dispatch HEAD request\n   *\n   * @static\n   * @param {string} url\n   * @param {FsRequestOptions} config\n   * @returns {Promise<FsResponse>}\n   * @memberof FsRequest\n   */\n  public static head(url: string, config?: FsRequestOptions): Promise<FsResponse> {\n    return FsRequest.getInstance().dispatch(Object.assign({}, config || {}, { method: FsHttpMethod.HEAD, url }));\n  }\n\n  /**\n   * Dispatch OPTIONS request\n   *\n   * @static\n   * @param {string} url\n   * @param {FsRequestOptions} config\n   * @returns {Promise<FsResponse>}\n   * @memberof FsRequest\n   */\n  public static options(url: string, config?: FsRequestOptions): Promise<FsResponse> {\n    return FsRequest.getInstance().dispatch(Object.assign({}, config || {}, { method: FsHttpMethod.OPTIONS, url }));\n  }\n\n  /**\n   * Dispatch PURGE request\n   *\n   * @static\n   * @param {string} url\n   * @param {FsRequestOptions} config\n   * @returns {Promise<FsResponse>}\n   * @memberof FsRequest\n   */\n  public static purge(url: string, config?: FsRequestOptions): Promise<FsResponse> {\n    return FsRequest.getInstance().dispatch(Object.assign({}, config || {}, { method: FsHttpMethod.PURGE, url }));\n  }\n\n  /**\n   * Dispatch DELETE request\n   *\n   * @static\n   * @param {string} url\n   * @param {FsRequestOptions} config\n   * @returns {Promise<FsResponse>}\n   * @memberof FsRequest\n   */\n  public static delete(url: string, config?: FsRequestOptions): Promise<FsResponse> {\n    return FsRequest.getInstance().dispatch(Object.assign({}, config || {}, { method: FsHttpMethod.DELETE, url }));\n  }\n\n  /**\n   * Dispatch POST request\n   *\n   * @static\n   * @param {string} url\n   * @param {*} [data]\n   * @param {FsRequestOptions} [config]\n   * @returns {Promise<FsResponse>}\n   * @memberof FsRequest\n   */\n  public static post(url: string, data?: any, config?: FsRequestOptions): Promise<FsResponse> {\n    return FsRequest.getInstance().dispatch(Object.assign({}, config || {}, { method: FsHttpMethod.POST, url, data }));\n  }\n\n  /**\n   * Dispatch PUT request\n   *\n   * @static\n   * @param {string} url\n   * @param {*} [data]\n   * @param {FsRequestOptions} [config]\n   * @returns {Promise<FsResponse>}\n   * @memberof FsRequest\n   */\n  public static put(url: string, data?: any, config?: FsRequestOptions): Promise<FsResponse> {\n    return FsRequest.getInstance().dispatch(Object.assign({}, config || {}, { method: FsHttpMethod.PUT, url, data }));\n  }\n\n  /**\n   * Dispatch PATCH request\n   *\n   * @static\n   * @param {string} url\n   * @param {*} [data]\n   * @param {FsRequestOptions} [config]\n   * @returns {Promise<FsResponse>}\n   * @memberof FsRequest\n   */\n  public static path(url: string, data?: any, config?: FsRequestOptions): Promise<FsResponse> {\n    return FsRequest.getInstance().dispatch(Object.assign({}, config || {}, { method: FsHttpMethod.PATH, url, data }));\n  }\n}\n\nexport default FsRequest;\n","/*\n * Copyright (c) 2018 by Filestack\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { EventEmitter } from 'eventemitter3';\n\n/**\n * Filestack token that allow pause, resume or cancel given upload\n *\n * @export\n * @class FsToken\n * @extends {EventEmitter}\n */\nexport class FsCancelToken extends EventEmitter {\n\n  /**\n   * Cancel request action\n   *\n   * @param {(string | Error)} [reason]\n   * @memberof Token\n   */\n  public cancel(reason?: string | Error) {\n    this.emit('cancel', reason);\n\n    this.removeAllListeners();\n  }\n\n}\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Security, Session } from '../client';\nimport { Filelink } from './../filelink';\nimport { removeEmpty } from '../utils';\nimport { FsResponse } from './../request/types';\nimport { FilestackError } from './../../filestack_error';\nimport { getValidator, MetadataParamsSchema, RetrieveParamsSchema } from './../../schema';\nimport { FsRequest, FsHttpMethod } from '../request';\n\n/**\n * Remove given file\n *\n * @private\n * @param session\n * @param handle\n * @param security\n */\nexport const remove = (session: Session, handle?: string, skipStorage?: boolean, security?: Security): Promise<any> => {\n  if (!handle || typeof handle !== 'string') {\n    throw new FilestackError('A valid Filestack handle is required for remove');\n  }\n\n  if (!(session.policy && session.signature) && (!security || !(security.policy && security.signature))) {\n    throw new FilestackError('Security policy and signature are required for remove');\n  }\n\n  const fileApiUrl = session.urls.fileApiUrl;\n  const baseURL = `${fileApiUrl}/${handle}`;\n  const options: any = {\n    key: session.apikey,\n    policy: (security && security.policy) || session.policy,\n    signature: (security && security.signature) || session.signature,\n  };\n\n  if (skipStorage) {\n    options.skip_storage = true;\n  }\n\n  return FsRequest.delete(baseURL, {\n    filestackHeaders: false,\n    params: removeEmpty(options),\n  });\n};\n\nexport interface MetadataOptions {\n  size?: boolean;\n  mimetype?: boolean;\n  filename?: boolean;\n  width?: boolean;\n  height?: boolean;\n  uploaded?: boolean;\n  writeable?: boolean;\n  cloud?: boolean;\n  sourceUrl?: boolean;\n  md5?: boolean;\n  sha1?: boolean;\n  sha224?: boolean;\n  sha256?: boolean;\n  sha384?: boolean;\n  sha512?: boolean;\n  location?: boolean;\n  path?: boolean;\n  container?: boolean;\n  exif?: boolean;\n}\n\n/**\n * Returns file metadata\n *\n * @private\n * @param session\n * @param handle\n * @param opts\n * @param security\n */\nexport const metadata = (session: Session, handle?: string, opts?: MetadataOptions, security?: Security): Promise<any> => {\n  if (!handle || typeof handle !== 'string') {\n    throw new FilestackError('A valid Filestack handle is required for metadata');\n  }\n\n  const validateRes = getValidator(MetadataParamsSchema)(opts);\n\n  if (validateRes.errors.length) {\n    throw new FilestackError(`Invalid metadata params`, validateRes.errors);\n  }\n\n  const options: any = { ...opts };\n  options.source_url = options.sourceUrl; // source_url is snake_case\n  options.policy = (security && security.policy) || session.policy;\n  options.signature = (security && security.signature) || session.signature;\n\n  const baseURL = `${session.urls.fileApiUrl}/${handle}/metadata`;\n  return new Promise((resolve, reject) => {\n    FsRequest.get(baseURL, { params: removeEmpty(options), filestackHeaders: false })\n      .then(res => resolve({ ...res.data, handle }))\n      .catch(reject);\n  });\n};\n\n/**\n * Download file to blob or buffer format\n *\n * @param session\n * @param handle\n */\nexport const download = (session: Session, handle: string,  security?: Security): Promise<FsResponse> => {\n  const fl = new Filelink(handle, session.apikey);\n\n  const policy = (security && security.policy) || session.policy;\n  const signature = (security && security.signature) || session.signature;\n\n  if (policy && signature) {\n    fl.security({ signature, policy });\n  }\n\n  return FsRequest.dispatch(fl.toString(), { method: FsHttpMethod.GET, blobResponse: true });\n};\n\nexport interface RetrieveOptions {\n  metadata?: boolean;\n  head?: boolean;\n  dl?: boolean;\n  extension?: string;\n  cache?: boolean;\n}\n\n/**\n * Returns file information\n *\n * @private\n * @deprecated\n * @param session\n * @param handle\n * @param options\n * @param security\n */\nexport const retrieve = (session: Session, handle: string, options: RetrieveOptions = {}, security?: Security): Promise<Object | Blob> => {\n  if (!handle || handle.length === 0 || typeof handle !== 'string') {\n    throw new FilestackError('File handle is required');\n  }\n\n  console.info('Retrieve method is deprecated and it will be removed. Please use metadata or download');\n\n  const validateRes = getValidator(RetrieveParamsSchema)(options);\n\n  if (validateRes.errors.length) {\n    throw new FilestackError(`Invalid retrieve params`, validateRes.errors);\n  }\n\n  const requestOptions: any = { ...options };\n  requestOptions.key = session.apikey;\n  requestOptions.policy = (security && security.policy) || session.policy;\n  requestOptions.signature = (security && security.signature) || session.signature;\n\n  let method: FsHttpMethod = FsHttpMethod.GET;\n\n  if (requestOptions.head) {\n    method = FsHttpMethod.HEAD;\n    delete requestOptions.head;\n  }\n\n  let extension;\n\n  if (requestOptions.extension && requestOptions.extension.length) {\n    extension = requestOptions.extension;\n    delete requestOptions.extension;\n  }\n\n  let metadata;\n  if (requestOptions.metadata) {\n    if (method === FsHttpMethod.HEAD) {\n      throw new FilestackError('Head and metadata options cannot be used together');\n    }\n\n    metadata = requestOptions.metadata;\n    delete requestOptions.metadata;\n  }\n\n  const baseURL = `${session.urls.fileApiUrl}/${handle}` + (extension ? `+${extension}` : '') + (metadata ? '/metadata' : '');\n\n  return new Promise((resolve, reject) => {\n    FsRequest.dispatch(baseURL, {\n      method,\n      filestackHeaders: false,\n      params: removeEmpty(requestOptions),\n    })\n      .then(res => resolve(method === FsHttpMethod.HEAD ? res.headers : res.data))\n      .catch(reject);\n  });\n};\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Session } from '../client';\nimport { Filelink } from './../filelink';\n\n/**\n * @private\n */\nconst toSnakeCase = (original: { [index: string]: any }): { [index: string]: any } => {\n  let snakeCased: { [index: string]: any } = {};\n\n  const keys = Object.keys(original);\n\n  for (let i = 0; i < keys.length; i++) {\n    let newKey = keys[i].split(/(?=[A-Z])/).join('_').toLowerCase();\n\n    if (typeof original[keys[i]] === 'object' && !Array.isArray(original[keys[i]])) {\n      snakeCased[newKey] = toSnakeCase(original[keys[i]]);\n    } else {\n      snakeCased[newKey] = original[keys[i]];\n    }\n  }\n\n  return snakeCased;\n};\n\n/**\n * Align enum\n */\nexport enum EAlignOptions {\n  left = 'left',\n  right = 'right',\n  center = 'center',\n  bottom = 'bottom',\n  top = 'top',\n}\n\n/**\n * Align enum with faces option\n */\nexport enum EAlignFacesOptions {\n  left = 'left',\n  right = 'right',\n  center = 'center',\n  bottom = 'bottom',\n  top = 'top',\n  faces = 'faces',\n}\n\n/**\n * Fit enum\n */\nexport enum EFitOptions {\n  clip = 'clip',\n  crop = 'crop',\n  scale = 'scale',\n  max = 'max',\n}\n\n/**\n * Blur enum\n */\nexport enum EBlurMode {\n  linear = 'linear',\n  gaussian = 'gaussian',\n}\n\n/**\n * Shapes enum\n */\nexport enum EShapeType {\n  oval = 'oval',\n  rect = 'rect',\n}\n\n/**\n * Noise type enum\n */\nexport enum ENoiseType {\n  none = 'none',\n  low = 'low',\n  medium = 'medium',\n  high = 'high',\n}\n\n/**\n * Style type enum\n */\nexport enum EStyleType {\n  artwork = 'artwork',\n  photo = 'photo',\n}\n\n/**\n * Color space enum\n */\nexport enum EColorspaceType {\n  RGB = 'RGB',\n  CMYK = 'CMYK',\n  Input = 'Input',\n}\n\n/**\n * Crop faces options enum\n */\nexport enum ECropfacesType {\n  thumb = 'thumb',\n  crop = 'crop',\n  fill = 'fill',\n}\n\n/**\n * SmartCrop mode options enum\n */\nexport enum ESmartCropMode {\n  fit = 'fit',\n  auto = 'auto',\n}\n\nexport enum EImageWatermarkPosition {\n  top = 'top',\n  middle = 'middle',\n  bottom = 'bottom',\n  left = 'left',\n  center = 'center',\n  right = 'right',\n}\n\n/**\n * Convert to format\n */\nexport enum EVideoTypes {\n    h264 = 'h264',\n    h264_hi = 'h264.hi',\n    webm = 'webm',\n    'webm-hi' = 'webm.hi',\n    ogg = 'ogg',\n    'ogg-hi' = 'ogg.hi',\n    'hls-variant' = 'hls.variant',\n    mp3 = 'mp3',\n    oga = 'oga',\n    m4a = 'm4a',\n    aac = 'aac',\n    hls = 'hls.variant.audio',\n}\n\nexport enum EUrlscreenshotAgent {\n  desktop = 'desktop',\n  mobile = 'mobile',\n}\n\nexport enum EUrlscreenshotMode {\n  all = 'all',\n  window = 'window',\n}\n\nexport enum EUrlscreenshotOrientation {\n  portrait = 'portrait',\n  landscape = 'landscape',\n}\n\n/**\n * Video storage location\n */\nexport enum EVideoLocations {\n  s3 = 's3',\n  azure = 'azure',\n  gcs = 'gcs',\n  rackspace = 'rackspace',\n  dropbox = 'dropbox',\n}\n\nexport enum EVideoAccess {\n  private = 'private',\n  public = 'public',\n}\n\nexport enum EVideoAccessMode {\n  preserve = 'preserve',\n  constrain = 'constrain',\n  letterbox = 'letterbox',\n  pad = 'pad',\n  crop = 'crop',\n}\n\n/**\n * @see https://www.filestack.com/docs/image-transformations\n */\nexport interface TransformOptions {\n  flip?: boolean;\n  compress?: boolean;\n  flop?: boolean;\n  no_metadata?: boolean;\n  pjpg?: {\n    quality: number;\n    metadata: boolean;\n  };\n  smart_crop?: {\n    mode?: ESmartCropMode\n    width: number;\n    height: number;\n  };\n  watermark?: {\n    files: string;\n    size?: number;\n    position?: EImageWatermarkPosition | EImageWatermarkPosition[];\n  };\n  imagesize?: boolean;\n  enchance?: boolean;\n  redeye?: boolean;\n  monochrome?: boolean;\n  negative?: boolean;\n  tags?: boolean;\n  sfw?: boolean;\n  store?: {\n    filename?: string,\n    location?: string,\n    path?: string,\n    container?: string,\n    region?: string;\n    access?: string;\n    base64decode?: boolean;\n  };\n  resize?: {\n    width?: number;\n    height?: number;\n    fit?: EFitOptions;\n    align?: EAlignFacesOptions;\n  };\n  crop?: {\n    dim: [number, number, number, number]\n  };\n  rotate?: {\n    deg: number | string;\n    color?: string;\n    background?: string;\n  };\n  detect_faces?: {\n    minsize?: number;\n    maxsize?: number;\n    color?: string;\n    export?: boolean;\n  } | true;\n  crop_faces?: {\n    mode?: ECropfacesType;\n    width?: number;\n    height?: number;\n    faces?: number | string;\n    buffer?: number;\n  };\n  pixelate_faces?: {\n    faces?: number | string;\n    minsize?: number;\n    maxsize?: number;\n    buffer?: number;\n    amount?: number;\n    blur?: number;\n    type?: EShapeType;\n  };\n  blur_faces?: {\n    faces?: number | string;\n    minsize?: number;\n    maxsize?: number;\n    buffer?: number;\n    amount?: number;\n    blur?: number;\n    type?: EShapeType;\n  };\n  rounded_corners?: {\n    radius?: number;\n    blur?: number;\n    background?: string;\n  } | true;\n  vignette?: {\n    amount?: number;\n    blurmode?: EBlurMode;\n    background?: string;\n  };\n  polaroid?: {\n    color?: string;\n    rotate?: number;\n    background?: string;\n  } | true;\n  torn_edges?: {\n    spread?: [number, number];\n    background?: string;\n  } | true;\n  shadow?: {\n    blur?: number;\n    opacity?: number;\n    vector?: [number, number];\n    color?: string;\n    background?: string;\n  } | true;\n  circle?: {\n    background?: string;\n  } | true;\n  border?: {\n    width?: number;\n    color?: string;\n    background?: string;\n  } | true;\n  sharpen?: {\n    amount: number;\n  } | true;\n  blur?: {\n    amount: number;\n  } | true;\n  blackwhite?: {\n    threshold: number;\n  } | true;\n  sepia?: {\n    tone: number;\n  } | true;\n  pixelate?: {\n    amount: number;\n  } | true;\n  oil_paint?: {\n    amount: number;\n  } | true;\n  modulate?: {\n    brightness?: number;\n    hue?: number;\n    saturation?: number;\n  } | true;\n  partial_pixelate?: {\n    amount?: number;\n    blur?: number;\n    type?: EShapeType;\n    objects?: [[number, number, number, number]];\n  };\n  partial_blur?: {\n    amount: number;\n    blur?: number;\n    type?: EShapeType;\n    objects?: [[number, number, number, number]];\n  };\n  collage?: {\n    margin?: number;\n    width?: number;\n    height?: number;\n    color?: string;\n    fit?: EFitOptions,\n    files: [string];\n  };\n  upscale?: {\n    upscale?: boolean;\n    noise?: ENoiseType;\n    style?: EStyleType;\n  } | true;\n  ascii?: {\n    background?: string;\n    foreground?: string;\n    colored?: boolean;\n    size?: number;\n    reverse?: boolean;\n  } | true;\n  quality?: {\n    value: number;\n  };\n  security?: {\n    policy: string;\n    signature?: string;\n  };\n  output?: {\n    format: string;\n    colorspace?: string;\n    strip?: boolean;\n    quality?: number;\n    page?: number;\n    compress?: boolean;\n    density?: number;\n    background?: string;\n    secure?: boolean;\n    docinfo?: boolean;\n    pageformat?: string;\n    pageorientation?: string;\n  };\n  cache?: {\n    cache?: boolean;\n    expiry: number;\n  };\n  // audio/video\n  video_convert?: {\n    aspect_mode: EVideoAccessMode;\n    preset?: EVideoTypes;\n    force?: boolean;\n    title?: string;\n    extname?: string;\n    filename?: string;\n    location?: EVideoLocations;\n    path?: string;\n    access?: EVideoAccess;\n    container?: string;\n    audio_bitrate?: number;\n    upscale: boolean;\n    video_bitrate?: number;\n    audio_sample_rate?: number;\n    audio_channels?: number;\n    clip_length?: string;\n    clip_offset?: string;\n    width?: number;\n    height?: number;\n    two_pass?: boolean;\n    fps?: number;\n    keyframe_interval?: number;\n    watermark_url?: string;\n    watermark_top?: number;\n    watermark_bottom?: number;\n    watermark_right?: number;\n    watermark_left?: number;\n    watermark_width?: number;\n    watermark_height?: number;\n  };\n  urlscreenshot?: {\n    agent?: EUrlscreenshotAgent;\n    width?: number;\n    height?: number;\n    mode?: EUrlscreenshotMode;\n    delay?: number;\n    orientation?: EUrlscreenshotOrientation;\n    device?: string;\n  } | true;\n  pdfinfo?: {\n    colorinfo?: boolean\n  } | true;\n  pdfconvert?: {\n    pageorientation?: string\n    pageformat?: string\n    pages?: (string | number)[]\n  };\n}\n\n/**\n * Creates filestack transform url.\n * Transform params can be provided in camelCase or snakeCase style\n *\n * @example\n * ```js\n * // camelCase\n * console.log(transform(session, {\n *    partialPixelate: {\n *      objects: [[10, 20, 200, 250], [275, 91, 500, 557]],\n *    },\n *  }, 'testfile'));\n * ```\n * result => https://cdn.filestackcontent.com/partial_pixelate=objects:[[10,20,200,250],[275,91,500,557]]/testfile\n *\n * ```js\n * // snake_case\n * console.log(transform(session, {\n *    partial_pixelate: {\n *      objects: [[10, 20, 200, 250], [275, 91, 500, 557]],\n *    },\n *  }, 'testfile'));\n * ```\n * result => https://cdn.filestackcontent.com/partial_pixelate=objects:[[10,20,200,250],[275,91,500,557]]/testfile\n *\n * Client.transform is deprecated. Use Filelink class instead\n *\n * @private\n * @throws Error\n * @param options Transformation options\n * @param url url, handle or array of elements\n */\nexport const transform = (session: Session, url: string | string[], options: TransformOptions = {}, b64: boolean = false): string => {\n  options = toSnakeCase(options);\n\n  if (session.policy && session.signature) {\n    options.security = {\n      policy: session.policy,\n      signature: session.signature,\n    };\n  }\n\n  const filelink = new Filelink(url, session.apikey);\n  filelink.setCname(session.cname);\n  filelink.setBase64(b64);\n\n  Object.keys(options).forEach((key: keyof TransformOptions) => {\n    if (typeof options[key] === 'boolean' && !options[key] && key !== 'cache') {\n      return;\n    }\n\n    filelink.addTask(key, options[key]);\n  });\n\n  return filelink.toString();\n};\n","/*\n * Copyright (c) 2019 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { md5, sanitizeName, SanitizeOptions } from './../../utils';\n\nexport interface UploadTags {\n  [key: string]: string;\n}\n\nexport interface FileInstance {\n  name: string;\n  type: string;\n  size: number;\n  slice: (start: number, end: number) => Promise<ArrayBuffer>;\n  release?: () => void;\n}\n\nexport const enum FileState {\n  INIT = 'Initialized',\n  PROGRESS = 'Progress',\n  STORED = 'Stored',\n  INTRANSIT = 'InTransit',\n  FAILED = 'Failed',\n}\n\nexport interface FilePartMetadata {\n  startByte: number;\n  endByte: number;\n  partNumber: number;\n  size: number;\n}\n\nexport interface FilePart extends FilePartMetadata {\n  buffer: Buffer | ArrayBuffer;\n  md5?: string;\n}\n\nexport interface FileChunk extends FilePart {\n  offset: number; // offset for chunk - from part start\n}\n\n/**\n * File representation to unify file object in nodejs and browser\n *\n * @export\n * @class File\n */\nexport class File {\n\n  public status: FileState;\n\n  public handle: string;\n\n  public url: string;\n\n  public container: string;\n\n  public key: string;\n\n  public workflows: any[];\n\n  public uploadTags: UploadTags;\n\n  constructor(private readonly _file: FileInstance, private readonly _sanitizeOptions?: SanitizeOptions) {\n    this._file.name = sanitizeName(this._file.name, this._sanitizeOptions);\n  }\n\n  /**\n   * Returns file name\n   *\n   * @returns {string}\n   * @memberof File\n   */\n  public get name(): string {\n    return this._file.name;\n  }\n\n  /**\n   * Alias for name getter\n   *\n   * @readonly\n   * @type {string}\n   * @memberof File\n   */\n  public get filename(): string {\n    return this.name;\n  }\n\n  /**\n   * Sets new file name  and cleanup extra chars\n   *\n   * @memberof File\n   */\n  public set name(val: string) {\n    this._file.name = sanitizeName(val, this._sanitizeOptions);\n  }\n\n  /**\n   * Sets custom name using string or function\n   * Name will be sanitized\n   *\n   * @memberof File\n   */\n  public set customName(val: ((file: this) => string) | string) {\n    switch (typeof val) {\n      case 'string':\n        this.name = val;\n        break;\n      case 'function':\n        const newName = val(this);\n        if (typeof newName !== 'string') {\n          throw new Error(`Name function must return a string. Current return type is ${typeof val}`);\n        }\n\n        this.name = val(this);\n        break;\n    }\n  }\n\n  /**\n   * Returns file type\n   *\n   * @default 'application/octet-stream'\n   * @returns {string}\n   * @memberof File\n   */\n  public get type(): string {\n    /* istanbul ignore next */\n    return this._file.type || 'application/octet-stream';\n  }\n\n  /**\n   * Alias for file type\n   *\n   * @readonly\n   * @type {string}\n   * @memberof File\n   */\n  public get mimetype(): string {\n    return this.type;\n  }\n\n  /**\n   * Returns file size\n   *\n   * @returns {number}\n   * @memberof File\n   */\n  public get size(): number {\n    return this._file.size;\n  }\n\n  /**\n   * Returns number of parts according to part size\n   *\n   * @param {number} size - part size in bytes\n   * @returns {number}\n   * @memberof File\n   */\n  public getPartsCount (size: number): number {\n    return Math.ceil(this._file.size / size);\n  }\n\n  /**\n   * Returns part metadata\n   *\n   * @param {number} [partNum=0]\n   * @param {*} size\n   * @returns {FilePartMetadata}\n   * @memberof File\n   */\n  public getPartMetadata (partNum: number, size: number): FilePartMetadata {\n    const startByte = size * partNum;\n\n    if (startByte > this._file.size) {\n      throw new Error(`Start byte of the part is higher than buffer size`);\n    }\n\n    const endByte = Math.min(startByte + size, this._file.size);\n\n    return {\n      partNumber: partNum,\n      startByte,\n      endByte,\n      size: endByte - startByte,\n    };\n  }\n\n  /**\n   * Returns part metadata + buffer\n   *\n   * @param {FilePartMetadata} meta\n   * @returns {FilePart}\n   * @memberof File\n   */\n  public async getPartByMetadata(meta: FilePartMetadata, md5Enabled: boolean = true): Promise<FilePart> {\n    let slice = await this._file.slice(meta.startByte, meta.endByte);\n\n    return Promise.resolve({\n      ...meta,\n      buffer: slice,\n      md5: md5Enabled ? md5(slice) : undefined,\n    });\n  }\n\n  /**\n   * Returns part chunk\n   *\n   * @param {FilePartMetadata} meta\n   * @param {number} offset\n   * @param {number} chunkSize\n   * @returns {FilePart}\n   * @memberof File\n   */\n  public async getChunkByMetadata(meta: FilePartMetadata, offset: number, chunkSize: number, md5Enabled: boolean = true): Promise<FileChunk> {\n    const startByte = meta.startByte + offset;\n    const endByte = Math.min(startByte + chunkSize, meta.endByte);\n\n    let slice = await this._file.slice(startByte, endByte);\n\n    return Promise.resolve({\n      ...meta,\n      buffer: slice,\n      md5: md5Enabled ? md5(slice) : undefined,\n      size: slice.byteLength,\n      startByte,\n      endByte,\n      offset,\n    });\n  }\n  /**\n   * Cleanup file buffer to release memory\n   *\n   * @memberof File\n   */\n  public release() {\n    if (this._file.release) {\n      this._file.release();\n    }\n  }\n\n  public toJSON() {\n    return {\n      name: this.name,\n      status: this.status,\n      type: this.type,\n      size: this.size,\n      url: this.url,\n      handle: this.handle,\n      uploadTags: this.uploadTags,\n    };\n  }\n}\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport * from './store.node';\n\nexport enum STORE_TYPE {\n  SESSION = 'sessionStorage',\n  LOCAL = 'localStorage',\n}\n","import { __awaiter, __generator } from \"tslib\";\n/*\n * Copyright (c) 2019 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { File as FsFile } from './file';\nimport { getMimetype } from './../../utils';\nimport { FilestackError } from './../../../filestack_error';\nimport fileType from 'file-type';\nvar base64Regexp = /data:([a-zA-Z]*\\/[a-zA-Z]*);base64,([^\\\"]*)/i;\n/**\n * Check if file is blob\n * @param input\n */\nvar isFileBlob = function (input) { return input.toString() === '[object Blob]'; };\n/**\n * Check if input is instance of browser file\n *\n * @browser\n * @param input\n */\nvar isFileBrowser = function (input) { return input instanceof File; };\n/**\n * Check if file is base64 string\n *\n * @param input\n */\nvar isFileBase = function (input) {\n    if (typeof input !== 'string') {\n        return false;\n    }\n    if (input.indexOf('base64') > -1) {\n        input = input.match(base64Regexp).pop();\n    }\n    try {\n        return btoa(atob(input)) === input;\n    }\n    catch (err) {\n        /* istanbul ignore next */\n        return false;\n    }\n};\n/**\n * Check if file is instance of named interface\n *\n * @param input\n */\nvar isFileNamed = function (input) { return input && input['file'] && input['name']; };\n/**\n * Convert encoded base64 string or dataURI to blob\n *\n * @browser\n * @param b64data     String to decode\n * @param sliceSize   Byte quantity to split data into\n * @private\n * @returns {Blob}\n */\nvar b64toBlob = function (b64Data, sliceSize) {\n    if (sliceSize === void 0) { sliceSize = 512; }\n    var contentType = '';\n    if (b64Data.indexOf('base64') > -1) {\n        var matches = b64Data.match(base64Regexp);\n        b64Data = matches.pop();\n        contentType = matches[1];\n    }\n    var byteCharacters = atob(b64Data);\n    var byteArrays = [];\n    for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n        var slice = byteCharacters.slice(offset, offset + sliceSize);\n        var byteNumbers = new Array(slice.length);\n        for (var i = 0; i < slice.length; i += 1) {\n            byteNumbers[i] = slice.charCodeAt(i);\n        }\n        byteArrays.push(new Uint8Array(byteNumbers));\n    }\n    return new Blob(byteArrays, { type: contentType });\n};\n/**\n * Read file as array buffer\n *\n * @browser\n * @private\n * @param blob\n * @returns {Boolean}\n */\nvar readFile = function (file) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        /* istanbul ignore next */\n        if (!File || !FileReader || !Blob) {\n            return [2 /*return*/, Promise.reject(new FilestackError('The File APIs are not fully supported by your browser'))];\n        }\n        return [2 /*return*/, Promise.resolve({\n                slice: function (start, end) {\n                    return readPart(start, end, file);\n                },\n                release: function () {\n                    file = null;\n                },\n            })];\n    });\n}); };\n/**\n * Read file par instead of whole file to avoid browser crashing\n *\n * @param start - star byte\n * @param end  - end byte\n * @param file - file to slice\n */\nvar readPart = function (start, end, file) {\n    return new Promise(function (resolve, reject) {\n        var r = new FileReader();\n        var blob = file.slice(start, end);\n        r.onload = function () { return resolve(r.result); };\n        r.onerror = reject;\n        r.readAsArrayBuffer(blob);\n    });\n};\n/**\n * Accepts b64string or blob file\n *\n * @browser\n * @param {*} fileOrString\n * @returns {Promise<File>}\n */\nexport var getFile = function (input, sanitizeOptions) {\n    var filename;\n    var file;\n    if (isFileNamed(input)) {\n        filename = input.name;\n        input = input.file;\n    }\n    if (isFileBrowser(input)) {\n        file = input;\n        filename = input.name;\n    }\n    else if (isFileBase(input)) {\n        file = b64toBlob(input);\n    }\n    else if (isFileBlob(input)) {\n        file = input;\n    }\n    else {\n        return Promise.reject(new FilestackError('Unsupported input file type'));\n    }\n    return readFile(file).then(function (res) { return __awaiter(void 0, void 0, void 0, function () {\n        var mime, _a;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    mime = file.type;\n                    if (!(!file.type || file.type.length === 0 || file.type === 'text/plain')) return [3 /*break*/, 2];\n                    _a = getMimetype;\n                    return [4 /*yield*/, res.slice(0, fileType.minimumBytes)];\n                case 1:\n                    mime = _a.apply(void 0, [_b.sent(), filename]);\n                    _b.label = 2;\n                case 2: return [2 /*return*/, new FsFile({\n                        name: filename,\n                        size: file.size,\n                        type: mime,\n                        slice: res.slice,\n                        release: res.release,\n                    }, sanitizeOptions)];\n            }\n        });\n    }); });\n};\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvYXBpL3VwbG9hZC9maWxlX3Rvb2xzLmJyb3dzZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUNILE9BQU8sRUFBRSxJQUFJLElBQUksTUFBTSxFQUFFLE1BQU0sUUFBUSxDQUFDO0FBQ3hDLE9BQU8sRUFBbUIsV0FBVyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzdELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUM1RCxPQUFPLFFBQVEsTUFBTSxXQUFXLENBQUM7QUFVakMsSUFBTSxZQUFZLEdBQUcsOENBQThDLENBQUM7QUFFcEU7OztHQUdHO0FBQ0gsSUFBTSxVQUFVLEdBQUcsVUFBQyxLQUFnQixJQUFvQixPQUFBLEtBQUssQ0FBQyxRQUFRLEVBQUUsS0FBSyxlQUFlLEVBQXBDLENBQW9DLENBQUM7QUFFN0Y7Ozs7O0dBS0c7QUFDSCxJQUFNLGFBQWEsR0FBRyxVQUFDLEtBQWdCLElBQW9CLE9BQUEsS0FBSyxZQUFZLElBQUksRUFBckIsQ0FBcUIsQ0FBQztBQUVqRjs7OztHQUlHO0FBQ0gsSUFBTSxVQUFVLEdBQUcsVUFBQyxLQUFnQjtJQUNsQyxJQUFJLE9BQU8sS0FBSyxLQUFLLFFBQVEsRUFBRTtRQUM3QixPQUFPLEtBQUssQ0FBQztLQUNkO0lBRUQsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO1FBQ2hDLEtBQUssR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0tBQ3pDO0lBRUQsSUFBSTtRQUNGLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLEtBQUssQ0FBQztLQUNwQztJQUFDLE9BQU8sR0FBRyxFQUFFO1FBQ1osMEJBQTBCO1FBQzFCLE9BQU8sS0FBSyxDQUFDO0tBQ2Q7QUFDSCxDQUFDLENBQUM7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QUUsUUFBUSxDQUFDLFlBQVksQ0FBQyxFQUFBOztvQkFBNUQsSUFBSSxHQUFHLGtCQUFZLFNBQXlDLEVBQUUsUUFBUSxFQUFDLENBQUM7O3dCQUcxRSxzQkFBTyxJQUFJLE1BQU0sQ0FDZjt3QkFDRSxJQUFJLEVBQUUsUUFBUTt3QkFDZCxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUk7d0JBQ2YsSUFBSSxFQUFFLElBQUk7d0JBQ1YsS0FBSyxFQUFFLEdBQUcsQ0FBQyxLQUFLO3dCQUNoQixPQUFPLEVBQUUsR0FBRyxDQUFDLE9BQU87cUJBQ3JCLEVBQ0QsZUFBZSxDQUNoQixFQUFDOzs7U0FDSCxDQUNGLENBQUM7QUFDSixDQUFDLENBQUMiLCJmaWxlIjoibGliL2FwaS91cGxvYWQvZmlsZV90b29scy5icm93c2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAoYykgMjAxOSBieSBGaWxlc3RhY2suXG4gKiBTb21lIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IEZpbGUgYXMgRnNGaWxlIH0gZnJvbSAnLi9maWxlJztcbmltcG9ydCB7IFNhbml0aXplT3B0aW9ucywgZ2V0TWltZXR5cGUgfSBmcm9tICcuLy4uLy4uL3V0aWxzJztcbmltcG9ydCB7IEZpbGVzdGFja0Vycm9yIH0gZnJvbSAnLi8uLi8uLi8uLi9maWxlc3RhY2tfZXJyb3InO1xuaW1wb3J0IGZpbGVUeXBlIGZyb20gJ2ZpbGUtdHlwZSc7XG5cbmV4cG9ydCB0eXBlIFJhd0ZpbGUgPSBCbG9iIHwgQnVmZmVyIHwgRmlsZSB8IHN0cmluZztcbmV4cG9ydCB0eXBlIE5hbWVkSW5wdXRGaWxlID0ge1xuICBuYW1lPzogc3RyaW5nO1xuICBmaWxlOiBSYXdGaWxlO1xufTtcblxudHlwZSBJbnB1dEZpbGUgPSBSYXdGaWxlIHwgTmFtZWRJbnB1dEZpbGU7XG5cbmNvbnN0IGJhc2U2NFJlZ2V4cCA9IC9kYXRhOihbYS16QS1aXSpcXC9bYS16QS1aXSopO2Jhc2U2NCwoW15cXFwiXSopL2k7XG5cbi8qKlxuICogQ2hlY2sgaWYgZmlsZSBpcyBibG9iXG4gKiBAcGFyYW0gaW5wdXRcbiAqL1xuY29uc3QgaXNGaWxlQmxvYiA9IChpbnB1dDogSW5wdXRGaWxlKTogaW5wdXQgaXMgQmxvYiA9PiBpbnB1dC50b1N0cmluZygpID09PSAnW29iamVjdCBCbG9iXSc7XG5cbi8qKlxuICogQ2hlY2sgaWYgaW5wdXQgaXMgaW5zdGFuY2Ugb2YgYnJvd3NlciBmaWxlXG4gKlxuICogQGJyb3dzZXJcbiAqIEBwYXJhbSBpbnB1dFxuICovXG5jb25zdCBpc0ZpbGVCcm93c2VyID0gKGlucHV0OiBJbnB1dEZpbGUpOiBpbnB1dCBpcyBGaWxlID0+IGlucHV0IGluc3RhbmNlb2YgRmlsZTtcblxuLyoqXG4gKiBDaGVjayBpZiBmaWxlIGlzIGJhc2U2NCBzdHJpbmdcbiAqXG4gKiBAcGFyYW0gaW5wdXRcbiAqL1xuY29uc3QgaXNGaWxlQmFzZSA9IChpbnB1dDogSW5wdXRGaWxlKTogaW5wdXQgaXMgc3RyaW5nID0+IHtcbiAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoaW5wdXQuaW5kZXhPZignYmFzZTY0JykgPiAtMSkge1xuICAgIGlucHV0ID0gaW5wdXQubWF0Y2goYmFzZTY0UmVnZXhwKS5wb3AoKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgcmV0dXJuIGJ0b2EoYXRvYihpbnB1dCkpID09PSBpbnB1dDtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgZmlsZSBpcyBpbnN0YW5jZSBvZiBuYW1lZCBpbnRlcmZhY2VcbiAqXG4gKiBAcGFyYW0gaW5wdXRcbiAqL1xuY29uc3QgaXNGaWxlTmFtZWQgPSAoaW5wdXQ6IElucHV0RmlsZSk6IGlucHV0IGlzIE5hbWVkSW5wdXRGaWxlID0+IGlucHV0ICYmIGlucHV0WydmaWxlJ10gJiYgaW5wdXRbJ25hbWUnXTtcblxuLyoqXG4gKiBDb252ZXJ0IGVuY29kZWQgYmFzZTY0IHN0cmluZyBvciBkYXRhVVJJIHRvIGJsb2JcbiAqXG4gKiBAYnJvd3NlclxuICogQHBhcmFtIGI2NGRhdGEgICAgIFN0cmluZyB0byBkZWNvZGVcbiAqIEBwYXJhbSBzbGljZVNpemUgICBCeXRlIHF1YW50aXR5IHRvIHNwbGl0IGRhdGEgaW50b1xuICogQHByaXZhdGVcbiAqIEByZXR1cm5zIHtCbG9ifVxuICovXG5jb25zdCBiNjR0b0Jsb2IgPSAoYjY0RGF0YTogc3RyaW5nLCBzbGljZVNpemUgPSA1MTIpOiBCbG9iID0+IHtcbiAgbGV0IGNvbnRlbnRUeXBlID0gJyc7XG5cbiAgaWYgKGI2NERhdGEuaW5kZXhPZignYmFzZTY0JykgPiAtMSkge1xuICAgIGNvbnN0IG1hdGNoZXMgPSBiNjREYXRhLm1hdGNoKGJhc2U2NFJlZ2V4cCk7XG4gICAgYjY0RGF0YSA9IG1hdGNoZXMucG9wKCk7XG4gICAgY29udGVudFR5cGUgPSBtYXRjaGVzWzFdO1xuICB9XG5cbiAgY29uc3QgYnl0ZUNoYXJhY3RlcnMgPSBhdG9iKGI2NERhdGEpO1xuICBjb25zdCBieXRlQXJyYXlzOiBhbnlbXSA9IFtdO1xuXG4gIGZvciAobGV0IG9mZnNldCA9IDA7IG9mZnNldCA8IGJ5dGVDaGFyYWN0ZXJzLmxlbmd0aDsgb2Zmc2V0ICs9IHNsaWNlU2l6ZSkge1xuICAgIGNvbnN0IHNsaWNlID0gYnl0ZUNoYXJhY3RlcnMuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBzbGljZVNpemUpO1xuICAgIGNvbnN0IGJ5dGVOdW1iZXJzID0gbmV3IEFycmF5KHNsaWNlLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGljZS5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgYnl0ZU51bWJlcnNbaV0gPSBzbGljZS5jaGFyQ29kZUF0KGkpO1xuICAgIH1cblxuICAgIGJ5dGVBcnJheXMucHVzaChuZXcgVWludDhBcnJheShieXRlTnVtYmVycykpO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBCbG9iKGJ5dGVBcnJheXMsIHsgdHlwZTogY29udGVudFR5cGUgfSk7XG59O1xuXG4vKipcbiAqIFJlYWQgZmlsZSBhcyBhcnJheSBidWZmZXJcbiAqXG4gKiBAYnJvd3NlclxuICogQHByaXZhdGVcbiAqIEBwYXJhbSBibG9iXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAqL1xuY29uc3QgcmVhZEZpbGUgPSBhc3luYyAoZmlsZSk6IFByb21pc2U8YW55PiA9PiB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGlmICghRmlsZSB8fCAhRmlsZVJlYWRlciB8fCAhQmxvYikge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRmlsZXN0YWNrRXJyb3IoJ1RoZSBGaWxlIEFQSXMgYXJlIG5vdCBmdWxseSBzdXBwb3J0ZWQgYnkgeW91ciBicm93c2VyJykpO1xuICB9XG5cbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgc2xpY2U6IGZ1bmN0aW9uKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKSB7XG4gICAgICByZXR1cm4gcmVhZFBhcnQoc3RhcnQsIGVuZCwgZmlsZSk7XG4gICAgfSxcbiAgICByZWxlYXNlOiAoKSA9PiB7XG4gICAgICBmaWxlID0gbnVsbDtcbiAgICB9LFxuICB9KTtcbn07XG5cbi8qKlxuICogUmVhZCBmaWxlIHBhciBpbnN0ZWFkIG9mIHdob2xlIGZpbGUgdG8gYXZvaWQgYnJvd3NlciBjcmFzaGluZ1xuICpcbiAqIEBwYXJhbSBzdGFydCAtIHN0YXIgYnl0ZVxuICogQHBhcmFtIGVuZCAgLSBlbmQgYnl0ZVxuICogQHBhcmFtIGZpbGUgLSBmaWxlIHRvIHNsaWNlXG4gKi9cbmNvbnN0IHJlYWRQYXJ0ID0gKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyLCBmaWxlKTogUHJvbWlzZTxhbnk+ID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCByID0gbmV3IEZpbGVSZWFkZXIoKTtcblxuICAgIGNvbnN0IGJsb2IgPSBmaWxlLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICAgIHIub25sb2FkID0gKCkgPT4gcmVzb2x2ZShyLnJlc3VsdCk7XG4gICAgci5vbmVycm9yID0gcmVqZWN0O1xuICAgIHIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYik7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBBY2NlcHRzIGI2NHN0cmluZyBvciBibG9iIGZpbGVcbiAqXG4gKiBAYnJvd3NlclxuICogQHBhcmFtIHsqfSBmaWxlT3JTdHJpbmdcbiAqIEByZXR1cm5zIHtQcm9taXNlPEZpbGU+fVxuICovXG5leHBvcnQgY29uc3QgZ2V0RmlsZSA9IChpbnB1dDogSW5wdXRGaWxlLCBzYW5pdGl6ZU9wdGlvbnM/OiBTYW5pdGl6ZU9wdGlvbnMpOiBQcm9taXNlPEZzRmlsZT4gPT4ge1xuICBsZXQgZmlsZW5hbWU7XG4gIGxldCBmaWxlOiBCbG9iO1xuXG4gIGlmIChpc0ZpbGVOYW1lZChpbnB1dCkpIHtcbiAgICBmaWxlbmFtZSA9IGlucHV0Lm5hbWU7XG4gICAgaW5wdXQgPSBpbnB1dC5maWxlO1xuICB9XG5cbiAgaWYgKGlzRmlsZUJyb3dzZXIoaW5wdXQpKSB7XG4gICAgZmlsZSA9IGlucHV0O1xuICAgIGZpbGVuYW1lID0gaW5wdXQubmFtZTtcbiAgfSBlbHNlIGlmIChpc0ZpbGVCYXNlKGlucHV0KSkge1xuICAgIGZpbGUgPSBiNjR0b0Jsb2IoaW5wdXQpO1xuICB9IGVsc2UgaWYgKGlzRmlsZUJsb2IoaW5wdXQpKSB7XG4gICAgZmlsZSA9IGlucHV0O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRmlsZXN0YWNrRXJyb3IoJ1Vuc3VwcG9ydGVkIGlucHV0IGZpbGUgdHlwZScpKTtcbiAgfVxuXG4gIHJldHVybiByZWFkRmlsZShmaWxlKS50aGVuKFxuICAgIGFzeW5jIHJlcyA9PiB7XG4gICAgICBsZXQgbWltZSA9IGZpbGUudHlwZTtcbiAgICAgIGlmICghZmlsZS50eXBlICB8fCBmaWxlLnR5cGUubGVuZ3RoID09PSAwIHx8IGZpbGUudHlwZSA9PT0gJ3RleHQvcGxhaW4nKSB7XG4gICAgICAgIG1pbWUgPSBnZXRNaW1ldHlwZShhd2FpdCByZXMuc2xpY2UoMCwgZmlsZVR5cGUubWluaW11bUJ5dGVzKSwgZmlsZW5hbWUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IEZzRmlsZShcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6IGZpbGVuYW1lLFxuICAgICAgICAgIHNpemU6IGZpbGUuc2l6ZSxcbiAgICAgICAgICB0eXBlOiBtaW1lLFxuICAgICAgICAgIHNsaWNlOiByZXMuc2xpY2UsXG4gICAgICAgICAgcmVsZWFzZTogcmVzLnJlbGVhc2UsXG4gICAgICAgIH0sXG4gICAgICAgIHNhbml0aXplT3B0aW9uc1xuICAgICAgKTtcbiAgICB9XG4gICk7XG59O1xuIl19\n","/*\n * Copyright (c) 2019 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Debug from 'debug';\nimport * as EventEmitter from 'eventemitter3';\n\nimport { File, UploadTags } from './../file';\nimport { StoreUploadOptions } from './../types';\nimport { Security } from './../../../client';\nimport { FsRetryConfig } from './../../../request';\nimport { isMobile } from './../../../utils';\nimport { FilestackError } from './../../../../filestack_error';\n\n// regular part size\nexport const DEFAULT_PART_SIZE = 6 * 1024 * 1024;\n\n// Minimum part size for upload by multipart\nexport const MIN_PART_SIZE = 5 * 1024 * 1024;\n\n// when mode is set to fallback or intelligent, this part size is required\nexport const INTELLIGENT_CHUNK_SIZE = 8 * 1024 * 1024;\n\n// Mobile Chunk size for ii\nexport const INTELLIGENT_MOBILE_CHUNK_SIZE = 1024 * 1024;\n\n// minimum intelligent chunk size\nexport const MIN_CHUNK_SIZE = 32 * 1024;\n\nexport const DEFAULT_STORE_LOCATION = 's3';\n\nconst debug = Debug('fs:upload:abstract');\n\nexport const enum UploadMode {\n  DEFAULT = 'default',\n  INTELLIGENT = 'intelligent',\n  FALLBACK = 'fallback',\n}\n\nexport abstract class UploaderAbstract extends EventEmitter {\n  // Parts size options\n  protected partSize: number = DEFAULT_PART_SIZE;\n\n  // chunk size for ii uploads\n  protected intelligentChunkSize: number = isMobile() ? INTELLIGENT_MOBILE_CHUNK_SIZE : INTELLIGENT_CHUNK_SIZE;\n\n  // upload options\n  protected url: string;\n  protected timeout: number = 30 * 1000;\n  protected uploadMode: UploadMode = UploadMode.DEFAULT;\n\n  // application settings\n  protected apikey: string;\n  protected security: Security;\n\n  protected isModeLocked: boolean = false; // if account does not support ii in fallback mode we should abort\n  protected retryConfig: FsRetryConfig;\n  protected integrityCheck: boolean = true;\n\n  protected uploadTags: UploadTags = null;\n\n  constructor(protected readonly storeOptions: StoreUploadOptions, protected readonly concurrency: number = 3) {\n    super();\n  }\n\n  public setSecurity(security: Security): void {\n    debug('Set security %O', security);\n    this.security = security;\n  }\n\n  public setApikey(apikey: string): void {\n    debug(`Set apikey to ${apikey}`);\n    this.apikey = apikey;\n  }\n\n  public setTimeout(timeout: number): void {\n    debug(`Set request timeout to ${timeout}`);\n    this.timeout = timeout;\n  }\n\n  public setRetryConfig(cfg: FsRetryConfig) {\n    debug(`Set retry config to ${cfg}`);\n    this.retryConfig = cfg;\n  }\n\n  public setUrl(url: string): void {\n    debug(`Set upload url to ${url}`);\n    this.url = url;\n  }\n\n  public setUploadTags(tags: UploadTags) {\n    debug(`Set tags to %O`, tags);\n    this.uploadTags = tags;\n  }\n\n  /**\n   * Set state of checking file integrity\n   * @param state\n   */\n  public setIntegrityCheck(state) {\n    this.integrityCheck = state;\n  }\n\n  /**\n   * Sets upload mode\n   *\n   * @param {UploadMode} mode\n   * @param {boolean} [lock=false]\n   * @returns\n   * @memberof MultipartUploader\n   */\n  public setUploadMode(mode: UploadMode, lock: boolean = false): void {\n    // this shouldnt happend but for safety reasons if will stay\n    /* istanbul ignore next */\n    if (this.isModeLocked === true) {\n      debug(`Cannot switch mode to ${mode}. Locked! Probably mode is not supported at this apikey`);\n      return;\n    }\n\n    this.isModeLocked = lock;\n\n    debug(`Set upload mode to ${mode}`);\n\n    this.uploadMode = mode;\n  }\n\n  /**\n   * Set upload part size\n   * if part size is smaller than minimum 5mb it will throw error\n   *\n   * @param {number} size\n   * @returns {void}\n   * @memberof S3Uploader\n   */\n  public setPartSize(size: number): void {\n    if (this.uploadMode !== UploadMode.DEFAULT) {\n      debug('Cannot set part size because upload mode is other than default. ');\n      return;\n    }\n\n    debug(`Set part size to ${size}`);\n\n    if (size < MIN_PART_SIZE) {\n      throw new FilestackError('Minimum part size is 5MB');\n    }\n\n    this.partSize = size;\n  }\n\n  /**\n   * Returns current part size\n   */\n  public getPartSize() {\n    return this.partSize;\n  }\n\n  /**\n   * Set start part size for ii\n   *\n   * @param {number} size\n   * @memberof S3Uploader\n   */\n  public setIntelligentChunkSize(size: number): void {\n    debug(`Set inteligent chunk size to ${size}`);\n    if (size < MIN_CHUNK_SIZE) {\n      throw new FilestackError(`Minimum intelligent chunk size is ${MIN_CHUNK_SIZE}`);\n    }\n    this.intelligentChunkSize = size;\n  }\n\n  /**\n   * Returns intelligent chunk size\n   */\n  public getIntelligentChunkSize(): number {\n    return this.intelligentChunkSize;\n  }\n\n  /**\n   * Returns filestack upload url\n   *\n   * @private\n   * @returns\n   * @memberof MultipartUploader\n   */\n  public getUrl(): string {\n    if (!this.url) {\n      throw new FilestackError('Upload url not set');\n    }\n\n    return this.url;\n  }\n\n  /**\n   * Pause upload queue\n   *\n   * @memberof MultipartUploader\n   */\n  public abstract pause(): void;\n  /**\n   * resume upload queue if its paused\n   *\n   * @memberof MultipartUploader\n   */\n  public abstract resume(): void;\n\n  /**\n   * Aborts queue (all pending requests with will be aborted)\n   *\n   * @memberof MultipartUploader\n   */\n  public abstract abort(msg?: string): void;\n\n  public abstract addFile(file: File): string;\n\n  public abstract async execute(): Promise<any>;\n}\n","/*\n * Copyright (c) 2019 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Debug from 'debug';\nimport PQueue from 'p-queue';\n\nimport { FilestackError, FilestackErrorType } from './../../../../filestack_error';\nimport { FsCancelToken, FsRequest, FsRequestError, FsRequestErrorCode, FsResponse } from './../../../request';\nimport { shouldRetry } from './../../../request/helpers';\nimport { filterObject, uniqueId, uniqueTime } from './../../../utils';\nimport { File, FilePart, FilePartMetadata, FileState } from './../file';\nimport { StoreUploadOptions } from './../types';\nimport { DEFAULT_STORE_LOCATION, INTELLIGENT_CHUNK_SIZE, MIN_CHUNK_SIZE, UploaderAbstract, UploadMode } from './abstract';\n\nconst debug = Debug('fs:upload:s3');\n\nconst COMPLETE_TIMEOUT = 1000 * 1;\n\nexport interface UploadPart extends FilePartMetadata {\n  etag?: string;\n  offset?: number;\n  progress?: number;\n}\n\nexport interface UploadPayload {\n  file: File;\n  parts: UploadPart[];\n  handle?: string;\n  uri?: string;\n  region?: string;\n  upload_id?: number;\n  location_url?: string;\n  location_region?: string;\n}\n\nexport class S3Uploader extends UploaderAbstract {\n  private partsQueue;\n  private cancelToken: FsCancelToken; // global cancel token for all requests\n\n  private payloads: { [key: string]: UploadPayload } = {};\n\n  constructor(storeOptions: StoreUploadOptions, concurrency?) {\n    super(storeOptions, concurrency);\n\n    this.partsQueue = new PQueue({\n      autoStart: false,\n      concurrency: this.concurrency,\n    });\n\n    this.cancelToken = new FsCancelToken();\n  }\n\n  /**\n   * Pause upload queue\n   *\n   * @memberof S3Uploader\n   */\n  public pause(): void {\n    this.partsQueue.pause();\n  }\n\n  /**\n   * resume upload queue if its paused\n   *\n   * @memberof S3Uploader\n   */\n  public resume(): void {\n    /* istanbul ignore next */\n    if (this.partsQueue.isPaused) {\n      this.partsQueue.start();\n    }\n  }\n\n  /**\n   * Aborts queue (all pending requests with will be aborted)\n   *\n   * @memberof S3Uploader\n   */\n  public abort(msg?: string): void {\n    this.partsQueue.pause();\n    this.partsQueue.clear();\n\n    this.cancelToken.cancel(msg || 'Aborted by user');\n  }\n\n  /**\n   * Execute all queued files\n   *\n   * @returns {Promise<any>}\n   * @memberof S3Uploader\n   */\n  public async execute(): Promise<any> {\n    const tasks = Object.keys(this.payloads).map(\n      id =>\n        new Promise(async resolve => {\n          try {\n            await this.startRequest(id);\n            await this.prepareParts(id);\n            await this.startPartsQueue(id);\n            await this.completeRequest(id);\n          } catch (e) {\n            /* istanbul ignore next */\n            this.emit('error', e);\n            debug(`[${id}] File upload failed. %O, \\nDetails: %O `, e.message, e.details);\n          }\n\n          const file = this.getPayloadById(id).file;\n\n          // release file buffer\n          file.release();\n\n          // cleanup payloads\n          delete this.payloads[id];\n\n          resolve(file);\n        })\n    );\n\n    return Promise.all(tasks);\n  }\n\n  /**\n   * Add file to upload queue\n   *\n   * @param {File} file\n   * @returns\n   * @memberof S3Uploader\n   */\n  public addFile(file: File): string {\n    debug('Add file to queue: \\n %o', file);\n\n    const id = `${uniqueId(15)}_${uniqueTime()}`;\n\n    file.status = FileState.INIT;\n\n    // split file into parts and set it as waiting\n    this.payloads[id] = {\n      file,\n      parts: [],\n    };\n\n    return id;\n  }\n\n  /**\n   * Returns host for upload (region based)\n   *\n   * @private\n   * @returns\n   * @memberof S3Uploader\n   */\n  private getUploadUrl(id: string): string {\n    const { location_url } = this.getDefaultFields(id, ['location_url']);\n    return location_url.indexOf('http') === 0 ? location_url : `https://${location_url}`;\n  }\n\n  /**\n   * Returns formatted store options\n   *\n   * @private\n   * @returns\n   * @memberof S3Uploader\n   */\n  private getStoreOptions(id: string): StoreUploadOptions {\n    let options = {\n      location: DEFAULT_STORE_LOCATION, // this parameter is required, if not set use default one\n      ...this.storeOptions,\n    };\n\n    if (this.storeOptions.disableStorageKey) {\n      const payload = this.getPayloadById(id);\n\n      if (options.path && options.path.substr(-1) !== '/') {\n        options.path = `${options.path}/`;\n      }\n\n      options.path = `${options.path ? options.path : '/'}${payload.file.name}`;\n\n      delete options.disableStorageKey;\n    }\n\n    return options;\n  }\n\n  /**\n   * Returns all default fields for filestack requests\n   *\n   * @private\n   * @returns\n   * @memberof S3Uploader\n   */\n  private getDefaultFields(id: string, requiredFields: string[], fiiFallback: boolean = false) {\n    const payload = this.getPayloadById(id);\n\n    let fields = {\n      ...this.security,\n      apikey: this.apikey,\n      uri: payload.uri,\n      location_url: payload.location_url,\n      upload_id: payload.upload_id,\n      region: payload.region,\n    };\n\n    if (this.uploadMode === UploadMode.INTELLIGENT || (this.uploadMode === UploadMode.FALLBACK && fiiFallback)) {\n      fields['fii'] = true;\n    }\n\n    return {\n      ...filterObject(fields, requiredFields),\n      store: this.getStoreOptions(id),\n    };\n  }\n\n  /**\n   * Returns default headers needed for filestack request\n   *\n   * @private\n   * @returns\n   * @memberof S3Uploader\n   */\n  private getDefaultHeaders(id: string) {\n    let headers = {};\n    const file = this.getPayloadById(id);\n\n    if (file.location_region) {\n      headers['Filestack-Upload-Region'] = file.location_region;\n    }\n\n    return headers;\n  }\n\n  private getPayloadById(id: string): UploadPayload {\n    return this.payloads[id];\n  }\n\n  /**\n   * Split file onto parts for uploading with multipart mechanism and setup start\n   *\n   * @private\n   * @memberof S3Uploader\n   */\n  private prepareParts(id: string): Promise<void> {\n    const file = this.getPayloadById(id).file;\n\n    // for intelligent or fallback mode we cant overwrite part size - requires 8MB\n    if ([UploadMode.INTELLIGENT, UploadMode.FALLBACK].indexOf(this.uploadMode) > -1) {\n      this.partSize = INTELLIGENT_CHUNK_SIZE;\n    }\n\n    const partsCount = file.getPartsCount(this.partSize);\n\n    const parts = [];\n\n    for (let i = 0; i < partsCount; i++) {\n      parts[i] = {\n        ...file.getPartMetadata(i, this.partSize),\n        offset: 0,\n      };\n    }\n\n    // split file into parts and set it as waiting\n    this.payloads[id].parts = parts;\n\n    return Promise.resolve();\n  }\n\n  /**\n   * Make start request for getting needed upload fields\n   *\n   * @private\n   * @returns {Promise<any>}\n   * @memberof S3Uploader\n   */\n  private startRequest(id: string): Promise<any> {\n    const payload = this.getPayloadById(id);\n\n    if (payload.file.size === 0) {\n      this.setPayloadStatus(id, FileState.FAILED);\n      return Promise.reject(new FilestackError(`Invalid file \"${payload.file.name}\" size - 0`, {}, FilestackErrorType.VALIDATION));\n    }\n\n    debug(`[${id}] Make start request`);\n    return FsRequest.post(\n      `${this.getUrl()}/multipart/start`,\n      {\n        filename: payload.file.name,\n        mimetype: payload.file.type,\n        size: payload.file.size,\n        ...this.getDefaultFields(id, ['apikey', 'policy', 'signature', 'fii'], true),\n      },\n      {\n        timeout: this.timeout,\n        cancelToken: this.cancelToken,\n        headers: this.getDefaultHeaders(id),\n        retry: this.retryConfig,\n      }\n    )\n      .then(({ data }) => {\n        if (!data || !data.location_url || !data.region || !data.upload_id || !data.uri) {\n          debug(`[${id}] Incorrect start response: \\n%O\\n`, data);\n          this.setPayloadStatus(id, FileState.FAILED);\n          return Promise.reject(new FilestackError('Incorrect start response', data, FilestackErrorType.REQUEST));\n        }\n\n        debug(`[${id}] Assign payload data: \\n%O\\n`, data);\n\n        this.updatePayload(id, data);\n\n        // ii is not enabled in backend switch back to default upload mode\n        if ([UploadMode.INTELLIGENT, UploadMode.FALLBACK].indexOf(this.uploadMode) > -1 && (!data.upload_type || data.upload_type !== 'intelligent_ingestion')) {\n          debug(`[${id}] Intelligent Ingestion is not enabled on account, switch back to regular upload and lock mode change`);\n          this.setUploadMode(UploadMode.DEFAULT, true);\n        }\n\n        return data;\n      })\n      .catch(err => {\n        debug(`[${id}] Start request error %O`, err);\n        this.setPayloadStatus(id, FileState.FAILED);\n\n        return this.rejectUpload('Cannot upload file. Start request failed', err);\n      });\n  }\n\n  /**\n   * Enqueue file parts to upload\n   *\n   * @private\n   * @returns\n   * @memberof S3Uploader\n   */\n  private async startPartsQueue(id: string): Promise<any> {\n    const payload = this.getPayloadById(id);\n    const parts = payload.parts;\n    const waitingLength = parts.length;\n\n    debug(`[${id}] Create uploading queue from file. parts count - %d`, waitingLength);\n\n    return new Promise(async (resolve, reject) => {\n      parts.forEach(part =>\n        this.partsQueue\n          .add(() => this.startPart(id, part.partNumber))\n          .catch(e => {\n            this.setPayloadStatus(id, FileState.FAILED);\n            debug(`[${id}] Failed to upload part %s`, e.message);\n\n            this.partsQueue.pause();\n            this.partsQueue.clear();\n            return reject(e);\n          })\n      );\n\n      debug(`[${id}] All tasks for %s enqueued. Start processing main upload queue`, id);\n      this.emit('start');\n      this.partsQueue.start();\n\n      resolve(await this.partsQueue.onIdle());\n    });\n  }\n\n  /**\n   * Decide if upload should be made using ii or regular upload\n   * It allows change upload mode during upload queue\n   *\n   * @private\n   * @param {number} partNumber\n   * @returns {Promise<any>}\n   * @memberof S3Uploader\n   */\n  private startPart(id: string, partNumber: number): Promise<any> {\n    debug(`[${id}] Start processing part ${partNumber} with mode ${this.uploadMode}`);\n\n    let payload = this.getPayloadById(id);\n\n    payload.file.status = FileState.PROGRESS;\n    return (this.uploadMode !== UploadMode.INTELLIGENT ? this.uploadRegular : this.uploadIntelligent).apply(this, [id, partNumber]);\n  }\n\n  /**\n   * Returns part data needed for upload\n   *\n   * @private\n   * @param {string} id - id of a currently uploading file\n   * @param {FilePart} part\n   * @returns\n   * @memberof S3Uploader\n   */\n  private getS3PartMetadata(id: string, part: FilePart, offset?: number): Promise<any> {\n    const url = this.getUploadUrl(id);\n\n    debug(`[${id}] Get data for part ${part.partNumber}, url ${url}, Md5: ${part.md5}, Size: ${part.size}`);\n\n    const data = {\n      ...this.getDefaultFields(id, ['apikey', 'uri', 'region', 'signature', 'policy', 'upload_id', 'fii']),\n      // method specific keys\n      part: part.partNumber + 1,\n      size: part.size,\n      offset,\n    };\n\n    if (this.integrityCheck && part.md5) {\n      data.md5 = part.md5;\n    }\n\n    return FsRequest.post(`${url}/multipart/upload`, data, {\n      headers: this.getDefaultHeaders(id),\n      cancelToken: this.cancelToken,\n      timeout: this.timeout,\n      retry: this.retryConfig,\n    }).catch(err => {\n      this.setPayloadStatus(id, FileState.FAILED);\n\n      return this.rejectUpload('Cannot get part metadata', err);\n    });\n  }\n\n  /**\n   * Regular multipart request to amazon\n   *\n   * @private\n   * @param {number} partNumber\n   * @returns {Promise<any>}\n   * @memberof S3Uploader\n   */\n  private async uploadRegular(id: string, partNumber: number): Promise<any> {\n    let payload = this.getPayloadById(id);\n    const partMetadata = payload.parts[partNumber];\n    let part = await payload.file.getPartByMetadata(partMetadata, this.integrityCheck);\n\n    const { data, headers } = await this.getS3PartMetadata(id, part);\n    debug(`[${id}] Received part ${partNumber} info body: \\n%O\\n headers: \\n%O\\n`, data, headers);\n    return FsRequest.put(data.url, part.buffer, {\n      cancelToken: this.cancelToken,\n      timeout: this.timeout,\n      headers: data.headers,\n      filestackHeaders: false,\n      // for now we cant test progress callback from upload\n      /* istanbul ignore next */\n      onProgress: (pr: ProgressEvent) => this.onProgressUpdate(id, partNumber, pr.loaded),\n      retry: this.retryConfig && this.uploadMode !== UploadMode.FALLBACK ? this.retryConfig : undefined,\n    })\n    .then(res => {\n      if (res.headers.etag) {\n        this.setPartETag(id, partNumber, res.headers.etag);\n      } else {\n        // release memory\n        part = null;\n        throw new FilestackError('Cannot upload file, check S3 bucket settings', 'Etag header is not exposed in CORS settings', FilestackErrorType.REQUEST);\n      }\n\n      debug(`[${id}] S3 Upload response headers for ${partNumber}: \\n%O\\n`, res.headers);\n\n      this.onProgressUpdate(id, partNumber, part.size);\n\n      // release memory\n      part = null;\n\n      return res;\n    })\n    .catch(err => {\n      const resp = err && err.response ? err.response : null;\n\n      /* istanbul ignore next */\n      if (resp && resp.status === 403) {\n        if (resp.data && resp.data.Error && resp.data.Error.code) {\n          let code = resp.data.Error.code;\n\n          if (Array.isArray(code)) {\n            code = code.pop();\n          }\n\n          switch (code) {\n            case 'RequestTimeTooSkewed':\n              return this.startPart(id, partNumber);\n            default:\n              return Promise.reject(new FilestackError('Cannot upload file', resp.data.Error, FilestackErrorType.REQUEST));\n          }\n        }\n      }\n\n      // release memory\n      part = null;\n\n      if (err instanceof FilestackError) {\n        return Promise.reject(err);\n      }\n      // reset upload progress on failed part\n      this.onProgressUpdate(id, partNumber, 0);\n\n      // if fallback, set upload mode to intelligent and restart current part\n      if ((this.uploadMode === UploadMode.FALLBACK && !this.isModeLocked) || this.uploadMode === UploadMode.INTELLIGENT) {\n        debug(`[${id}] Regular upload failed. Switching to intelligent ingestion mode`);\n        this.setUploadMode(UploadMode.INTELLIGENT);\n        // restart part\n        return this.startPart(id, partNumber);\n      }\n\n      return this.rejectUpload('Cannot upload file part', err);\n    });\n  }\n\n  /**\n   * Upload file using intelligent mechanism\n   *\n   * @private\n   * @param {string} id\n   * @param {number} partNumber\n   * @returns {Promise<any>}\n   * @memberof S3Uploader\n   */\n  private async uploadIntelligent(id: string, partNumber: number): Promise<any> {\n    return this.uploadNextChunk(id, partNumber).then(() => this.commitPart(id, partNumber));\n  }\n\n  /**\n   * Recursively upload file in chunk mode (intelligent ingession)\n   *\n   * @private\n   * @param {string} id\n   * @param {number} partNumber\n   * @param {number} chunkSize\n   * @returns\n   * @memberof S3Uploader\n   */\n  private async uploadNextChunk(id: string, partNumber: number, chunkSize: number = this.intelligentChunkSize) {\n    const payload = this.getPayloadById(id);\n    let part = payload.parts[partNumber];\n    chunkSize = Math.min(chunkSize, part.size - part.offset);\n\n    let chunk = await payload.file.getChunkByMetadata(part, part.offset, chunkSize, this.integrityCheck);\n\n    debug(\n      `[${id}] PartNum: ${partNumber}, PartSize: ${part.size}, StartByte: ${part.startByte}, Offset: ${part.offset}, ChunkSize: ${chunk.size},\n       Left: ${part.size - part.offset - chunk.size}`\n    );\n\n    // catch error for debug purposes\n    const { data } = await this.getS3PartMetadata(id, chunk, part.offset).catch(err => {\n      debug(`[${id}] Getting chunk data for ii failed %O, Chunk size: ${chunkSize}, offset ${part.offset}, part ${partNumber}`, err);\n      return Promise.reject(err);\n    });\n\n    return FsRequest.put(data.url, chunk.buffer, {\n      cancelToken: this.cancelToken,\n      timeout: this.timeout,\n      headers: data.headers,\n      filestackHeaders: false,\n      // for now we cant test progress callback from upload\n      /* istanbul ignore next */\n      onProgress: (pr: ProgressEvent) => part ? this.onProgressUpdate(id, partNumber, part.offset + pr.loaded) : null,\n    })\n      .then(res => {\n        this.onProgressUpdate(id, partNumber, part.offset + chunk.size);\n        const newOffset = Math.min(part.offset + chunkSize, part.size);\n        debug(`[${id}] S3 Chunk uploaded! offset: ${part.offset}, part ${partNumber}! response headers for ${partNumber}: \\n%O\\n`, res.headers);\n        this.setPartData(id, partNumber, 'offset', newOffset);\n\n        // if all chunks was uploaded then return resolve\n        if (newOffset === part.size) {\n          return Promise.resolve(res);\n        }\n\n        // release memory\n        part = null;\n        chunk = null;\n\n        return this.uploadNextChunk(id, partNumber, chunkSize);\n      })\n      .catch(err => {\n        const resp = err && err.response ? err.response : null;\n        /* istanbul ignore next */\n        if (resp && resp.status === 403) {\n          if (resp.data && resp.data.Error && resp.data.Error.code) {\n            let code = resp.data.Error.code;\n\n            if (Array.isArray(code)) {\n              code = code.pop();\n            }\n\n            switch (code) {\n              case 'RequestTimeTooSkewed':\n                return this.startPart(id, partNumber);\n              default:\n                return Promise.reject(new FilestackError('Cannot upload file', resp.data.Error, FilestackErrorType.REQUEST));\n            }\n          }\n        }\n\n        // reset progress on failed upload\n        this.onProgressUpdate(id, partNumber, part.offset);\n        const nextChunkSize = Math.ceil(chunkSize / 2);\n\n        if (nextChunkSize < MIN_CHUNK_SIZE) {\n          debug(`[${id}] Minimal chunk size limit. Upload file failed!`);\n          return Promise.reject(new FilestackError('Min chunk size reached', err.data, FilestackErrorType.REQUEST));\n        }\n\n        if (shouldRetry(err)) {\n          debug(`[${id}] Request network error. Retry with new chunk size: ${nextChunkSize}`);\n          return this.uploadNextChunk(id, partNumber, nextChunkSize);\n        }\n\n        // release memory\n        part = null;\n        chunk = null;\n\n        return this.rejectUpload('Cannot upload file part (FII)', err);\n      });\n  }\n\n  /**\n   * Commit after upload all chunks of the part in ii mode\n   *\n   * @private\n   * @param {string} id\n   * @param {FilePart} part\n   * @returns\n   * @memberof S3Uploader\n   */\n  private commitPart(id: string, partNumber: number) {\n    const payload = this.getPayloadById(id);\n    const part = payload.parts[partNumber];\n\n    return FsRequest.post(\n      `${this.getUploadUrl(id)}/multipart/commit`,\n      {\n        ...this.getDefaultFields(id, ['apikey', 'region', 'upload_id', 'policy', 'signature', 'uri']),\n        size: payload.file.size,\n        part: part.partNumber + 1,\n      },\n      {\n        cancelToken: this.cancelToken,\n        timeout: this.timeout,\n        headers: this.getDefaultHeaders(id),\n        retry: this.retryConfig,\n      }\n    )\n      .then((res: FsResponse) => {\n        debug(`[${id}] Commit Part number ${part.partNumber}. Response: %O`, res.data);\n\n        return res;\n      })\n      .catch(err => {\n        return this.rejectUpload('Cannot commit file part metadata', err);\n      });\n  }\n\n  /**\n   * Complete request to merge all parts and get file handle etc\n   *\n   * @private\n   * @returns\n   * @memberof S3Uploader\n   */\n  private completeRequest(id: string): Promise<any> {\n    const payload = this.getPayloadById(id);\n    let parts = [];\n\n    debug(`[${id}] Run complete request`);\n\n    const partsHandle = payload.parts;\n    const partLen = partsHandle.length;\n\n    for (let i = 0; i < partLen; i++) {\n      if (partsHandle[i].etag) {\n        parts.push({ part_number: i + 1, etag: partsHandle[i].etag });\n      }\n    }\n\n    debug(`[${id}] Etags %O`, parts);\n\n    return FsRequest.post(\n      `${this.getUploadUrl(id)}/multipart/complete`,\n      {\n        ...this.getDefaultFields(id, ['apikey', 'policy', 'signature', 'uri', 'region', 'upload_id', 'fii'], true),\n        // method specific keys\n        filename: payload.file.name,\n        mimetype: payload.file.type,\n        size: payload.file.size,\n        upload_tags: this.uploadTags && Object.keys(this.uploadTags).length ? this.uploadTags : undefined,\n        parts: parts.length ? parts : undefined,\n      },\n      {\n        timeout: this.timeout,\n        cancelToken: this.cancelToken,\n        headers: this.getDefaultHeaders(id),\n        retry: this.retryConfig,\n      }\n    )\n      .then(res => {\n        // if parts hasnt been merged, retry complete request again\n        if (res.status === 202) {\n          return new Promise((resolve, reject) => {\n            setTimeout(\n              () =>\n                this.completeRequest(id)\n                  .then(resolve)\n                  .catch(reject),\n              COMPLETE_TIMEOUT\n            );\n          });\n        }\n\n        // update file object\n        let file = this.getPayloadById(id).file;\n\n        file.handle = res.data.handle;\n        file.url = res.data.url;\n        file.container = res.data.container;\n        file.key = res.data.key;\n        file.uploadTags = res.data.upload_tags;\n        file.workflows = res.data.workflows;\n        file.status = res.data.status;\n\n        return file;\n      })\n      .catch(err => {\n        this.setPayloadStatus(id, FileState.FAILED);\n\n        return this.rejectUpload('Cannot complete file', err);\n      });\n  }\n\n  /**\n   * UUpgrade upload progress and run progress event\n   *\n   * @private\n   * @param {string} id\n   * @param {number} partNumber\n   * @param {number} loaded\n   * @memberof S3Uploader\n   */\n  private onProgressUpdate(id: string, partNumber: number, loaded: number) {\n    this.setPartData(id, partNumber, 'progress', loaded);\n    this.emitProgress();\n  }\n\n  /**\n   * Emits normalized progress event\n   *\n   * @private\n   * @memberof S3Uploader\n   */\n  private emitProgress() {\n    let totalSize = 0;\n    let totalBytes = 0;\n\n    let filesProgress = {};\n    for (let i in this.payloads) {\n      const payload = this.payloads[i];\n      // omit all failed files in progress event\n      // this shouldn't happend because of promises rejection in execute. Left to be sure\n      /* istanbul ignore next */\n      if (payload.file.status === FileState.FAILED) {\n        continue;\n      }\n\n      const totalParts = payload.parts.map(p => p.progress || 0).reduce((a, b) => a + b, 0);\n\n      totalBytes = totalBytes + totalParts;\n\n      filesProgress[i] = {\n        totalBytes: totalParts,\n        totalPercent: Math.round((totalParts * 100) / payload.file.size) || 0,\n      };\n\n      totalSize = totalSize + payload.file.size;\n    }\n\n    const res = {\n      totalBytes: totalBytes || 0,\n      totalPercent: Math.round((totalBytes * 100) / totalSize) || 0,\n      files: filesProgress,\n    };\n\n    debug(`Upload progress %O`, res);\n    this.emit('progress', res);\n  }\n\n  /**\n   * Apply provided data to given payload\n   *\n   * @private\n   * @param {string} id\n   * @param {*} data\n   * @memberof S3Uploader\n   */\n  private updatePayload(id: string, data: any) {\n    this.payloads[id] = {\n      ...this.payloads[id],\n      ...data,\n    };\n  }\n\n  /**\n   * Sets etag for part\n   *\n   * @private\n   * @param {number} partNumber\n   * @param {string} etag\n   * @memberof S3Uploader\n   */\n  private setPartETag(id: string, partNumber: number, etag: string) {\n    debug(`[${id}] Set ${etag} etag for part ${partNumber}`);\n    this.getPayloadById(id).parts[partNumber].etag = etag;\n  }\n\n  /**\n   * Sets part value for a key\n   *\n   * @private\n   * @param {number} partNumber\n   * @param {string} etag\n   * @memberof S3Uploader\n   */\n  private setPartData(id: string, partNumber: number, key: string, value: any) {\n    debug(`[${id}] Set ${key} = ${value} for part ${partNumber}`);\n\n    const payload = this.getPayloadById(id);\n\n    /* istanbul ignore next */\n    if (!payload) {\n      debug(`[${id}] Cannot set ${key} = ${value} for part ${partNumber}`);\n      return;\n    }\n\n    payload.parts[partNumber][key] = value;\n  }\n\n  /**\n   * Set payload file state\n   *\n   * @param id\n   * @param status\n   */\n  private setPayloadStatus(id: string, status: FileState) {\n    debug(`[${id}] Set payload status to ${status}`);\n    /* istanbul ignore next: additional check in case if file will be deleted before setting status */\n    if (!this.payloads[id]) {\n      return;\n    }\n\n    this.payloads[id].file.status = status;\n  }\n\n  /**\n   * Returns error details if response exists\n   *\n   * @param err\n   */\n  private parseError(err: FsRequestError) {\n    if (!err.response) {\n      return {};\n    }\n\n    return {\n      code: err.response.status,\n      data: err.response.data,\n      headers: err.response.headers,\n    };\n  }\n\n  private rejectUpload(message: string, err: FsRequestError) {\n    if (err instanceof FsRequestError && err.code === FsRequestErrorCode.ABORTED) {\n      return Promise.reject(new FilestackError(message, { reason: err.message }, FilestackErrorType.ABORTED));\n    }\n    return Promise.reject(new FilestackError(message, this.parseError(err), FilestackErrorType.REQUEST));\n  }\n}\n","/*\n * Copyright (c) 2019 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { EventEmitter } from 'eventemitter3';\nimport { Session, Security } from '../../client';\nimport { S3Uploader } from './uploaders/s3';\nimport { FilestackError, FilestackErrorType } from './../../../filestack_error';\nimport { SanitizeOptions } from './../../utils';\n\nimport { UploadOptions, StoreUploadOptions } from '../upload/types';\nimport { getFile, InputFile } from './file_tools';\nimport { FileState, UploadTags } from './file';\nimport { UploadMode } from './uploaders/abstract';\nimport { getValidator, UploadParamsSchema, StoreParamsSchema } from './../../../schema';\n\nexport interface ProgressEvent {\n  totalPercent: number;\n  totalBytes: number;\n  files?: { (key: string): ProgressEvent };\n}\n\nconst DEFAULT_PROGRESS_INTERVAL = 1000;\n\nconst normalizeProgress = (current, last) => {\n  current.totalBytes = Math.max(current.totalBytes, last.totalBytes);\n  current.totalPercent = Math.max(current.totalPercent, last.totalPercent);\n\n  return current;\n};\n\n/**\n * Uploader main class for now its supporting only s3 upload type\n *\n * @export\n * @class Upload\n */\nexport class Upload extends EventEmitter {\n\n  /**\n   * Uploader instance\n   *\n   * @private\n   * @type {S3Uploader}\n   * @memberof Upload\n   */\n  private uploader: S3Uploader;\n\n  /**\n   * Should we overwrite file name\n   *\n   * @private\n   * @memberof Upload\n   */\n  private overrideFileName;\n\n  private lastProgress: ProgressEvent = {\n    totalBytes: 0,\n    totalPercent: 0,\n  };\n\n  private progressIntervalHandler;\n  private sanitizerOptions: SanitizeOptions;\n\n  constructor(private readonly options: UploadOptions = {}, private storeOptions: StoreUploadOptions = {}) {\n    super();\n\n    // do not delete filename from original options reference - copy it first\n    this.storeOptions = Object.assign({}, storeOptions);\n\n    const validateRes = getValidator(UploadParamsSchema)(options);\n\n    if (validateRes.errors.length) {\n      throw new FilestackError(`Invalid upload params`, validateRes.errors, FilestackErrorType.VALIDATION);\n    }\n\n    const storeValidateRes = getValidator(StoreParamsSchema)(storeOptions);\n    if (storeValidateRes.errors.length) {\n      throw new FilestackError(`Invalid store upload params`, storeValidateRes.errors, FilestackErrorType.VALIDATION);\n    }\n\n    if (storeOptions.filename) {\n      this.overrideFileName = storeOptions.filename;\n      delete this.storeOptions.filename;\n    }\n\n    if (this.storeOptions.sanitizer) {\n      this.sanitizerOptions = this.storeOptions.sanitizer;\n      delete this.storeOptions.sanitizer;\n    }\n\n    this.uploader = new S3Uploader(this.storeOptions, options.concurrency);\n\n    this.uploader.setRetryConfig({\n      retry: options.retry || 10,\n      onRetry: options.onRetry, // @todo bind file to retry in s3 uploader\n      retryFactor: options.retryFactor || 2,\n      retryMaxTime: options.retryMaxTime || 15000,\n    });\n\n    this.uploader.setTimeout(options.timeout || 120000);\n\n    if (options.partSize) {\n      this.uploader.setPartSize(options.partSize);\n    }\n\n    if (options.intelligentChunkSize) {\n      this.uploader.setIntelligentChunkSize(options.intelligentChunkSize);\n    }\n\n    if (options.disableIntegrityCheck) {\n      this.uploader.setIntegrityCheck(false);\n    }\n\n    if (options.intelligent) {\n      this.uploader.setUploadMode(options.intelligent === 'fallback' ? UploadMode.FALLBACK : UploadMode.INTELLIGENT);\n    }\n\n    this.uploader.setUploadTags(options.tags);\n\n    this.uploader.on('start', () => this.emit('start'));\n    this.uploader.on('error', (e) => this.emit('error', e));\n    this.uploader.on('progress', this.handleProgress.bind(this));\n  }\n\n  /**\n   * Set session object to uploader\n   *\n   * @deprecated\n   * @param {Session} session\n   * @memberof Upload\n   */\n  setSession(session: Session) {\n    this.uploader.setApikey(session.apikey);\n\n    if (session.policy && session.signature) {\n      this.uploader.setSecurity({\n        policy: session.policy,\n        signature: session.signature,\n      });\n    }\n\n    this.uploader.setUrl(session.urls.uploadApiUrl);\n  }\n\n  /**\n   * Set cancel token to controll upload flow\n   *\n   * @param {*} token\n   * @returns\n   * @memberof Upload\n   */\n  public setToken(token: any) {\n    if (!token || token !== Object(token)) {\n      throw new Error('Incorrect upload token. Must be instance of object');\n    }\n\n    token.pause = () => this.uploader.pause();\n    token.resume = () => this.uploader.resume();\n    token.cancel = () => this.uploader.abort();\n\n    return token;\n  }\n\n  /**\n   * Sets security to uploader instance\n   *\n   * @param {Security} security\n   * @memberof Upload\n   */\n  public setSecurity(security: Security) {\n    this.uploader.setSecurity(security);\n  }\n\n  /**\n   * Set upload tags\n   *\n   * @param {Tags} tags\n   * @memberof Upload\n   */\n  public setUploadTags(tags: UploadTags) {\n    this.uploader.setUploadTags(tags);\n  }\n\n  /**\n   * Upload single file\n   *\n   * @param {(InputFile)} file\n   * @returns {Promise<any>}\n   * @memberof Upload\n   */\n  async upload(input: InputFile): Promise<any> {\n\n    const f = await getFile(input, this.sanitizerOptions);\n    f.customName = this.overrideFileName;\n    this.uploader.addFile(f);\n\n    this.startProgressInterval();\n    const res = (await this.uploader.execute()).shift();\n    this.stopProgressInterval();\n\n    this.uploader.removeAllListeners();\n\n    if (res.status === FileState.FAILED) {\n      return Promise.reject(res);\n    }\n\n    return Promise.resolve(res);\n  }\n\n  /**\n   * Upload multiple files at once\n   *\n   * @param {(InputFile[])} input\n   * @returns {Promise<any>}\n   * @memberof Upload\n   */\n  async multiupload(input: InputFile[]): Promise<any> {\n    for (let i in input) {\n      /* istanbul ignore next */\n      if (!input.hasOwnProperty(i)) {\n        continue;\n      }\n\n      const f = await getFile(input[i], this.sanitizerOptions);\n      f.customName = this.overrideFileName;\n      this.uploader.addFile(f);\n    }\n\n    this.startProgressInterval();\n    const res = await this.uploader.execute();\n    this.stopProgressInterval();\n\n    this.uploader.removeAllListeners();\n\n    return Promise.resolve(res);\n  }\n\n  /**\n   * RUn progress with userdefined interval\n   *\n   * @private\n   * @returns\n   * @memberof Upload\n   */\n  private startProgressInterval() {\n    if (typeof this.options.onProgress !== 'function') {\n      return;\n    }\n\n    this.progressIntervalHandler = setInterval(() => {\n      this.options.onProgress(this.lastProgress);\n    }, this.options.progressInterval || DEFAULT_PROGRESS_INTERVAL);\n\n    this.options.onProgress(this.lastProgress);\n  }\n\n  /**\n   * Stop progress interval after upload\n   *\n   * @private\n   * @memberof Upload\n   */\n  private stopProgressInterval() {\n    clearInterval(this.progressIntervalHandler);\n  }\n\n  /**\n   * Handle upload interval and normalize values\n   *\n   * @private\n   * @param {ProgressEvent} progress\n   * @memberof Upload\n   */\n  private handleProgress(progress: ProgressEvent) {\n    // get max progress data to avoid progress jumps on any part error\n    progress = normalizeProgress(progress, this.lastProgress);\n\n    if (this.lastProgress.files) {\n      for (let i in progress.files) {\n        if (this.lastProgress.files[i]) {\n          progress.files[i] = normalizeProgress(progress.files[i], this.lastProgress.files[i]);\n        }\n      }\n    }\n\n    this.lastProgress = progress;\n  }\n}\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Security, Session } from '../client';\nimport { removeEmpty } from '../utils';\nimport { getValidator, PreviewParamsSchema } from './../../schema';\nimport { FilestackError, FilestackErrorType } from './../../filestack_error';\n\nexport interface PreviewOptions {\n  /**\n   * Id for DOM element to embed preview into.\n   * Omit this to open the preview in a new tab\n   */\n  id: string;\n  /**\n   * URL to custom CSS\n   */\n  css?: string;\n}\n\n/**\n * Returns file preview url\n *\n * @private\n * @param session\n * @param handle\n * @param opts\n * @param security\n */\nexport const getUrl = (\n  session: Session,\n  handle: string,\n  opts?: any,\n  security?: Security\n) => {\n  const options = { ...opts };\n  const policy = security && security.policy || session.policy;\n  const signature = security && security.signature || session.signature;\n  const hasSecurity = signature && policy;\n  const baseUrl = [session.urls.cdnUrl];\n  const css = options.css && encodeURIComponent(`\"${options.css}\"`);\n  const previewTask = css ? `preview=css:${css}` : 'preview';\n\n  // @todo move to utils?\n  if (handle.indexOf('src:') !== -1) {\n    baseUrl.push(`${session.apikey}/${previewTask}`);\n  } else {\n    baseUrl.push(previewTask);\n  }\n  if (hasSecurity) {\n    baseUrl.push(`security=policy:${policy},signature:${signature}`);\n  }\n\n  baseUrl.push(handle);\n  return baseUrl.join('/');\n};\n\n/**\n * Appends image preview into page\n *\n * @private\n * @param session\n * @param handle\n * @param opts\n */\nexport const preview = (session: Session, handle?: string, opts?: PreviewOptions) => {\n  if (!handle || typeof handle !== 'string') {\n    throw new Error('A valid Filestack handle or storage alias is required for preview');\n  }\n\n  const validateRes = getValidator(PreviewParamsSchema)(opts);\n\n  if (validateRes.errors.length) {\n    throw new FilestackError(`Invalid preview params`, validateRes.errors, FilestackErrorType.VALIDATION);\n  }\n\n  const options = removeEmpty(opts || {});\n  const url = getUrl(session, handle, options);\n\n  if (options && options.id) {\n    const id = options.id;\n    const iframe = document.createElement('iframe');\n    const domElement = document.getElementById(id);\n\n    iframe.src = url;\n    iframe.width = '100%';\n    iframe.height = '100%';\n\n    if (!domElement) {\n      throw new Error(`DOM Element with id \"${id}\" not found.`);\n    }\n    return domElement.appendChild(iframe);\n  }\n  return window.open(url, handle);\n};\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Debug from 'debug';\nimport { STORE_TYPE } from './store';\nvar debug = Debug('fs:storage');\nvar Store = /** @class */ (function () {\n    function Store() {\n        this.availableTypes = [];\n        if (window.localStorage !== undefined) {\n            this.availableTypes.push(STORE_TYPE.LOCAL);\n            debug('Local storage exists');\n        }\n        if (window.sessionStorage !== undefined) {\n            this.availableTypes.push(STORE_TYPE.SESSION);\n            debug('Session storage exists');\n        }\n        debug('availableTypes - %O', this.availableTypes);\n    }\n    Store.prototype.hasAccess = function (prefType) {\n        debug('Checking access to storage for %s. Available types: %O', prefType, this.availableTypes);\n        if (prefType) {\n            return this.availableTypes.indexOf(prefType) > -1;\n        }\n        return !!this.availableTypes.length;\n    };\n    Store.prototype.getItem = function (key, prefType) {\n        var store = this.getStore(prefType);\n        debug('getItem %s from %O', key, store);\n        if (!store) {\n            return undefined;\n        }\n        return store.getItem(key);\n    };\n    Store.prototype.setItem = function (key, value, prefType) {\n        var store = this.getStore(prefType);\n        debug('setItem %s to %O', key, store);\n        if (!store) {\n            return undefined;\n        }\n        return store.setItem(key, value);\n    };\n    Store.prototype.removeItem = function (key, prefType) {\n        var store = this.getStore(prefType);\n        debug('removeItem %s from %O', key, store);\n        if (!store) {\n            return undefined;\n        }\n        return store.removeItem(key);\n    };\n    Store.prototype.getStore = function (prefType) {\n        debug('get store with pref type - %s', prefType);\n        if (!this.hasAccess(prefType)) {\n            debug('User dont have access to any storage');\n            return undefined;\n        }\n        switch (prefType) {\n            case STORE_TYPE.LOCAL:\n                return window.localStorage;\n            case STORE_TYPE.SESSION:\n                return window.sessionStorage;\n            default:\n                // @ts-ignore\n                return window[this.availableTypes[0]];\n        }\n    };\n    return Store;\n}());\nexport { Store };\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvdXRpbHMvc3RvcmUuYnJvd3Nlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFDSCxPQUFPLEtBQUssTUFBTSxPQUFPLENBQUM7QUFDMUIsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUVyQyxJQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUM7QUFFbEM7SUFJRTtRQUZRLG1CQUFjLEdBQUcsRUFBRSxDQUFDO1FBRzFCLElBQUksTUFBTSxDQUFDLFlBQVksS0FBSyxTQUFTLEVBQUU7WUFDckMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzNDLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1NBQy9CO1FBRUQsSUFBSSxNQUFNLENBQUMsY0FBYyxLQUFLLFNBQVMsRUFBRTtZQUN2QyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDN0MsS0FBSyxDQUFDLHdCQUF3QixDQUFDLENBQUM7U0FDakM7UUFFRCxLQUFLLENBQUMscUJBQXFCLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQ3BELENBQUM7SUFFTSx5QkFBUyxHQUFoQixVQUFpQixRQUFxQjtRQUNwQyxLQUFLLENBQUMsd0RBQXdELEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUUvRixJQUFJLFFBQVEsRUFBRTtZQUNaLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7U0FDbkQ7UUFFRCxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQztJQUN0QyxDQUFDO0lBRU0sdUJBQU8sR0FBZCxVQUFlLEdBQVcsRUFBRSxRQUFxQjtRQUMvQyxJQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3RDLEtBQUssQ0FBQyxvQkFBb0IsRUFBRSxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFFeEMsSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNWLE9BQU8sU0FBUyxDQUFDO1NBQ2xCO1FBRUQsT0FBTyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFFTSx1QkFBTyxHQUFkLFVBQWUsR0FBVyxFQUFFLEtBQWEsRUFBRSxRQUFxQjtRQUM5RCxJQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3RDLEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFFdEMsSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNWLE9BQU8sU0FBUyxDQUFDO1NBQ2xCO1FBRUQsT0FBTyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBRU0sMEJBQVUsR0FBakIsVUFBa0IsR0FBVyxFQUFFLFFBQXFCO1FBQ2xELElBQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDdEMsS0FBSyxDQUFDLHVCQUF1QixFQUFFLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUUzQyxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ1YsT0FBTyxTQUFTLENBQUM7U0FDbEI7UUFFRCxPQUFPLEtBQUssQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQUVPLHdCQUFRLEdBQWhCLFVBQWlCLFFBQXFCO1FBQ3BDLEtBQUssQ0FBQywrQkFBK0IsRUFBRSxRQUFRLENBQUMsQ0FBQztRQUVqRCxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUM3QixLQUFLLENBQUMsc0NBQXNDLENBQUMsQ0FBQztZQUM5QyxPQUFPLFNBQVMsQ0FBQztTQUNsQjtRQUVELFFBQVEsUUFBUSxFQUFFO1lBQ2hCLEtBQUssVUFBVSxDQUFDLEtBQUs7Z0JBQ25CLE9BQU8sTUFBTSxDQUFDLFlBQVksQ0FBQztZQUM3QixLQUFLLFVBQVUsQ0FBQyxPQUFPO2dCQUNyQixPQUFPLE1BQU0sQ0FBQyxjQUFjLENBQUM7WUFDL0I7Z0JBQ0UsYUFBYTtnQkFDYixPQUFPLE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFZLENBQUM7U0FDcEQ7SUFDSCxDQUFDO0lBQ0gsWUFBQztBQUFELENBL0VBLEFBK0VDLElBQUEiLCJmaWxlIjoibGliL3V0aWxzL3N0b3JlLmJyb3dzZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IGJ5IEZpbGVzdGFjay5cbiAqIFNvbWUgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IERlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCB7IFNUT1JFX1RZUEUgfSBmcm9tICcuL3N0b3JlJztcblxuY29uc3QgZGVidWcgPSBEZWJ1ZygnZnM6c3RvcmFnZScpO1xuXG5leHBvcnQgY2xhc3MgU3RvcmUge1xuXG4gIHByaXZhdGUgYXZhaWxhYmxlVHlwZXMgPSBbXTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmF2YWlsYWJsZVR5cGVzLnB1c2goU1RPUkVfVFlQRS5MT0NBTCk7XG4gICAgICBkZWJ1ZygnTG9jYWwgc3RvcmFnZSBleGlzdHMnKTtcbiAgICB9XG5cbiAgICBpZiAod2luZG93LnNlc3Npb25TdG9yYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuYXZhaWxhYmxlVHlwZXMucHVzaChTVE9SRV9UWVBFLlNFU1NJT04pO1xuICAgICAgZGVidWcoJ1Nlc3Npb24gc3RvcmFnZSBleGlzdHMnKTtcbiAgICB9XG5cbiAgICBkZWJ1ZygnYXZhaWxhYmxlVHlwZXMgLSAlTycsIHRoaXMuYXZhaWxhYmxlVHlwZXMpO1xuICB9XG5cbiAgcHVibGljIGhhc0FjY2VzcyhwcmVmVHlwZT86IFNUT1JFX1RZUEUpOiBib29sZWFuIHtcbiAgICBkZWJ1ZygnQ2hlY2tpbmcgYWNjZXNzIHRvIHN0b3JhZ2UgZm9yICVzLiBBdmFpbGFibGUgdHlwZXM6ICVPJywgcHJlZlR5cGUsIHRoaXMuYXZhaWxhYmxlVHlwZXMpO1xuXG4gICAgaWYgKHByZWZUeXBlKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdmFpbGFibGVUeXBlcy5pbmRleE9mKHByZWZUeXBlKSA+IC0xO1xuICAgIH1cblxuICAgIHJldHVybiAhIXRoaXMuYXZhaWxhYmxlVHlwZXMubGVuZ3RoO1xuICB9XG5cbiAgcHVibGljIGdldEl0ZW0oa2V5OiBzdHJpbmcsIHByZWZUeXBlPzogU1RPUkVfVFlQRSkge1xuICAgIGNvbnN0IHN0b3JlID0gdGhpcy5nZXRTdG9yZShwcmVmVHlwZSk7XG4gICAgZGVidWcoJ2dldEl0ZW0gJXMgZnJvbSAlTycsIGtleSwgc3RvcmUpO1xuXG4gICAgaWYgKCFzdG9yZSkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RvcmUuZ2V0SXRlbShrZXkpO1xuICB9XG5cbiAgcHVibGljIHNldEl0ZW0oa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIHByZWZUeXBlPzogU1RPUkVfVFlQRSkge1xuICAgIGNvbnN0IHN0b3JlID0gdGhpcy5nZXRTdG9yZShwcmVmVHlwZSk7XG4gICAgZGVidWcoJ3NldEl0ZW0gJXMgdG8gJU8nLCBrZXksIHN0b3JlKTtcblxuICAgIGlmICghc3RvcmUpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0b3JlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlSXRlbShrZXk6IHN0cmluZywgcHJlZlR5cGU/OiBTVE9SRV9UWVBFKSB7XG4gICAgY29uc3Qgc3RvcmUgPSB0aGlzLmdldFN0b3JlKHByZWZUeXBlKTtcbiAgICBkZWJ1ZygncmVtb3ZlSXRlbSAlcyBmcm9tICVPJywga2V5LCBzdG9yZSk7XG5cbiAgICBpZiAoIXN0b3JlKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHJldHVybiBzdG9yZS5yZW1vdmVJdGVtKGtleSk7XG4gIH1cblxuICBwcml2YXRlIGdldFN0b3JlKHByZWZUeXBlPzogU1RPUkVfVFlQRSk6IGZhbHNlIHwgU3RvcmFnZSB7XG4gICAgZGVidWcoJ2dldCBzdG9yZSB3aXRoIHByZWYgdHlwZSAtICVzJywgcHJlZlR5cGUpO1xuXG4gICAgaWYgKCF0aGlzLmhhc0FjY2VzcyhwcmVmVHlwZSkpIHtcbiAgICAgIGRlYnVnKCdVc2VyIGRvbnQgaGF2ZSBhY2Nlc3MgdG8gYW55IHN0b3JhZ2UnKTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgc3dpdGNoIChwcmVmVHlwZSkge1xuICAgICAgY2FzZSBTVE9SRV9UWVBFLkxPQ0FMOlxuICAgICAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZTtcbiAgICAgIGNhc2UgU1RPUkVfVFlQRS5TRVNTSU9OOlxuICAgICAgICByZXR1cm4gd2luZG93LnNlc3Npb25TdG9yYWdlO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICByZXR1cm4gd2luZG93W3RoaXMuYXZhaWxhYmxlVHlwZXNbMF1dIGFzIFN0b3JhZ2U7XG4gICAgfVxuICB9XG59XG4iXX0=\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { removeEmpty } from '../utils';\nimport { StoreParams } from '../filelink';\nimport { ClientOptions, Session } from '../client';\nimport { FilestackError } from './../../filestack_error';\nimport { UploadTags } from './upload/file';\nimport { FsRequest, FsCancelToken } from '../request';\nimport { Store, STORE_TYPE } from './../utils/store';\n\n/**\n * @private\n */\nexport const PICKER_KEY = '__fs_picker_token';\n\n/**\n * key for picker callback url (specifies which tab will be opened after opening picker)\n * @private\n */\nexport const CALLBACK_URL_KEY = 'fs-tab';\n\n/**\n * @private\n */\nexport class CloudClient {\n  session: Session;\n  cloudApiUrl: string;\n\n  /**\n   * Returns flag if token should be cached in local storage\n   *\n   * @private\n   * @type {boolean}\n   * @memberof CloudClient\n   */\n  private cache: boolean = false;\n\n  /**\n   * Token returned from api for accessing clouds\n   *\n   * @private\n   * @type {string}\n   * @memberof CloudClient\n   */\n  private _token: string;\n\n  /**\n   * Store adapter instance\n   *\n   * @private\n   * @type {Store}\n   * @memberof CloudClient\n   */\n  private storeAdapter: Store;\n\n  constructor(session: Session, options?: ClientOptions) {\n    this.session = session;\n    this.storeAdapter = new Store();\n\n    this.cloudApiUrl = session.urls.cloudApiUrl;\n\n    if (options && options.sessionCache) {\n      this.cache = options.sessionCache;\n    }\n  }\n\n  get token() {\n    if (this.cache) {\n      const token = this.storeAdapter.getItem(PICKER_KEY, STORE_TYPE.LOCAL);\n      if (token) return token;\n    }\n\n    if (this.isInAppBrowser) {\n      return this.storeAdapter.getItem(PICKER_KEY, STORE_TYPE.SESSION);\n    }\n\n    return this._token;\n  }\n\n  set token(key) {\n    if (this.cache) {\n      this.storeAdapter.setItem(PICKER_KEY, key, STORE_TYPE.LOCAL);\n    }\n\n    if (this.isInAppBrowser) {\n      this.storeAdapter.setItem(PICKER_KEY, key, STORE_TYPE.SESSION);\n    }\n\n    this._token = key;\n  }\n\n  /**\n   * Return information is inappbrowser flag is set\n   *\n   * @readonly\n   * @memberof CloudClient\n   */\n  private get isInAppBrowser() {\n    if (this.session\n      && this.session.prefetch\n      && this.session.prefetch.settings\n      && this.session.prefetch.settings.inapp_browser) {\n      return this.session.prefetch.settings.inapp_browser;\n    }\n\n    return false;\n  }\n\n  list(clouds: any, cancelTokenInput?: any, accept?: string[] | string) {\n    const payload: any = {\n      apikey: this.session.apikey,\n      clouds,\n      flow: 'web',\n      token: this.token,\n    };\n\n    if (accept) {\n      if (!Array.isArray(accept)) {\n        accept = [accept];\n      }\n      // filtering mimetypes in clouds\n      payload.accept = accept;\n    }\n\n    if (this.isInAppBrowser) {\n      payload.appurl = this.currentAppUrl();\n    }\n\n    if (this.session.policy && this.session.signature) {\n      payload.policy = this.session.policy;\n      payload.signature = this.session.signature;\n    }\n\n    let options: any = {};\n\n    if (cancelTokenInput) {\n      const cancelToken = new FsCancelToken();\n      cancelTokenInput.cancel = cancelToken.cancel.bind(cancelToken);\n      options.cancelToken = cancelToken;\n    }\n\n    return FsRequest.post(`${this.cloudApiUrl}/folder/list`, payload, options).then(res => {\n      if (res.data && res.data.token) {\n        this.token = res.data.token;\n      }\n\n      return res.data;\n    });\n  }\n\n  store(name: string, path: string, options: StoreParams = {}, customSource: any = {}, cancelTokenInput?: any, uploadTags: UploadTags = null) {\n    // Default to S3\n    if (options.location === undefined) {\n      options.location = 's3';\n    }\n\n    const payload: any = {\n      apikey: this.session.apikey,\n      token: this.token,\n      flow: 'web',\n      upload_tags: uploadTags ? uploadTags : undefined,\n      clouds: {\n        [name]: {\n          path,\n          store: removeEmpty(options),\n        },\n      },\n    };\n\n    if (name === 'customsource' && customSource.customSourcePath) {\n      payload.clouds.customsource.customSourcePath = customSource.customSourcePath;\n    }\n\n    if (name === 'customsource' && customSource.customSourceContainer) {\n      payload.clouds.customsource.customSourceContainer = customSource.customSourceContainer;\n    }\n\n    if (this.session.policy && this.session.signature) {\n      payload.policy = this.session.policy;\n      payload.signature = this.session.signature;\n    }\n\n    let requestOptions: any = {};\n\n    if (cancelTokenInput) {\n      const cancelToken = new FsCancelToken();\n      cancelTokenInput.cancel = cancelToken.cancel.bind(cancelToken);\n      requestOptions.cancelToken = cancelToken;\n    }\n\n    return FsRequest.post(`${this.cloudApiUrl}/store/`, payload, requestOptions).then(res => {\n      if (res.data && res.data.token) {\n        this.token = res.data.token;\n      }\n\n      if (res.data && res.data[name]) {\n        return res.data[name];\n      }\n\n      return res.data;\n    });\n  }\n\n  logout(name?: string) {\n    const payload: any = {\n      apikey: this.session.apikey,\n      flow: 'web',\n      token: this.token,\n    };\n\n    if (name) {\n      payload.clouds = { [name]: {} };\n    } else {\n      if (this.cache) {\n        // No name means logout of ALL clouds. Clear local session.\n        this.storeAdapter.removeItem(PICKER_KEY, STORE_TYPE.LOCAL);\n      }\n\n      if (this.isInAppBrowser) {\n        this.storeAdapter.removeItem(PICKER_KEY, STORE_TYPE.SESSION);\n      }\n    }\n\n    return FsRequest.post(`${this.cloudApiUrl}/auth/logout`, payload).then(res => {\n      if (res.data && res.data[name]) {\n        return res.data[name];\n      }\n      return res.data;\n    });\n  }\n\n  metadata(url: string, headers?: {[key: string]: string}) {\n    const payload: any = {\n      apikey: this.session.apikey,\n      url,\n      headers,\n    };\n\n    if (this.session.policy && this.session.signature) {\n      payload.policy = this.session.policy;\n      payload.signature = this.session.signature;\n    }\n\n    return FsRequest.post(`${this.cloudApiUrl}/metadata`, payload).then(res => res.data);\n  }\n\n  // OpenTok API Endpoints\n  tokInit(type: string) {\n    if (type !== 'video' && type !== 'audio') {\n      throw new FilestackError('Type must be one of video or audio.');\n    }\n    return FsRequest.post(`${this.cloudApiUrl}/recording/${type}/init`).then(res => res.data);\n  }\n\n  tokStart(type: string, key: string, sessionId: string) {\n    if (type !== 'video' && type !== 'audio') {\n      throw new FilestackError('Type must be one of video or audio.');\n    }\n    const payload = {\n      apikey: key,\n      session_id: sessionId,\n    };\n\n    return FsRequest.post(`${this.cloudApiUrl}/recording/${type}/start`, payload).then(res => res.data);\n  }\n\n  tokStop(type: string, key: string, sessionId: string, archiveId: string) {\n    if (type !== 'video' && type !== 'audio') {\n      throw new FilestackError('Type must be one of video or audio.');\n    }\n\n    const payload = {\n      apikey: key,\n      session_id: sessionId,\n      archive_id: archiveId,\n    };\n\n    return FsRequest.post(`${this.cloudApiUrl}/recording/${type}/stop`, payload).then(res => res.data);\n  }\n\n  private currentAppUrl() {\n    if (!window.URLSearchParams) {\n      return undefined;\n    }\n\n    // set init string for clouds backend,\n    // After this cloud service can make redirect back to current page url with selected tab for given cloud\n    // if param exists and its value is init, backend will fill it with cloud name\n    const searchParams = new URLSearchParams(window.location.search);\n    searchParams.set(CALLBACK_URL_KEY, 'init');\n\n    return `${window.location.protocol}//${window.location.host}${window.location.pathname}?${searchParams.toString()}`;\n  }\n}\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// import Debug from 'debug';\nimport { FilestackError } from './../../filestack_error';\nimport { Session, Security, Client } from './../client';\nimport { PickerOptions } from './../picker';\nimport { FsRequest } from '../request';\nimport { cleanUpCallbacks } from './../utils';\nimport * as cloneDeep from 'lodash.clonedeep';\n\n// const debug = Debug('fs:prefetch');\n\nexport type PrefetchSettings = {\n  inapp_browser?: boolean;\n};\n\nexport type PrefetchPermissions = {\n  intelligent_ingestion?: boolean;\n  whitelabel?: boolean;\n  transforms_ui?: boolean;\n  enhance?: boolean;\n  advanced_enhance?: boolean;\n};\n\nexport enum PrefetchEvents {\n  PICKER = 'picker',\n  TRANSFORM_UI = 'transform_ui',\n}\n\nexport type PrefetchOptions = {\n  pickerOptions?: PickerOptions;\n  settings?: Array<keyof PrefetchSettings>;\n  permissions?: Array<keyof PrefetchPermissions>;\n  events?: PrefetchEvents[];\n};\n\ninterface PrefetchRequest {\n  apikey: string;\n  security?: Security;\n  permissions?: Array<keyof PrefetchPermissions>;\n  settings?: Array<keyof PrefetchSettings>;\n  events?: PrefetchEvents[];\n  picker_config?: PickerOptions;\n}\n\nexport type PrefetchResponse = {\n  blocked?: boolean | string;\n  settings?: PrefetchSettings;\n  permissions?: PrefetchPermissions;\n  pickerOptions: PickerOptions;\n};\n\n/**\n * @private\n */\nexport class Prefetch {\n\n  private session: Session;\n\n  constructor(param: Session | Client) {\n    if (param instanceof Client) {\n      this.session = param.session;\n    } else {\n      this.session = param;\n    }\n  }\n\n  /**\n   * Returns filestack options from backend according to input params\n   *\n   * @param param0\n   */\n  async getConfig({ pickerOptions, settings, permissions, events }: PrefetchOptions): Promise<PrefetchResponse> {\n    let paramsToSend: PrefetchRequest = {\n      apikey: this.session.apikey,\n    };\n\n    if (this.session.policy && this.session.signature) {\n      paramsToSend.security = { policy: this.session.policy, signature: this.session.signature };\n    }\n\n    // if (this.session.prefetch && events) {\n    //   return FsRequest.post(`${this.session.urls.uploadApiUrl}/prefetch`, { ...paramsToSend, events }).then(() => this.session.prefetch);\n    // }\n\n    // we should always ask for this setting for picker\n    if (!settings) {\n      settings = ['inapp_browser'];\n    } else {\n      settings = settings.concat(['inapp_browser']);\n      // make arrray unique\n      settings = settings.filter((v, i) => settings.indexOf(v) === i);\n    }\n\n    let pickerOptionsToSend;\n    if (pickerOptions && Object.keys(pickerOptions).length) {\n      pickerOptionsToSend = cleanUpCallbacks(cloneDeep({ ...pickerOptions }));\n    }\n\n    paramsToSend = {\n      ...paramsToSend,\n      permissions,\n      settings,\n      picker_config: pickerOptionsToSend,\n      events,\n    };\n\n    this.session.prefetch = null;\n\n    return FsRequest.post(`${this.session.urls.uploadApiUrl}/prefetch`, paramsToSend).then((res) => {\n      /* istanbul ignore if */\n      if (res.status !== 200) {\n        throw new FilestackError('There is a problem with prefetch request');\n      }\n\n      let data = res.data;\n\n      // if backend not returning updated_config cay we take old config and return\n      if (data.updated_config) {\n        // reassign callback from old config to new one returned from backend\n        data.pickerOptions = this.reassignCallbacks(pickerOptions, data.updated_config || {});\n        delete data.updated_config;\n      } else {\n        data.pickerOptions = pickerOptions;\n      }\n\n      this.session.prefetch = data;\n\n      return data;\n    });\n  }\n\n  /**\n   * Reassign callbacks from old picker configuration\n   *\n   * @param objOld\n   * @param objTarget\n   */\n  private reassignCallbacks(objOld, objTarget) {\n    if (!objOld || Object.keys(objOld).length === 0) {\n      return objOld;\n    }\n\n    for (const k in objOld) {\n      if (typeof objOld[k] === 'function') {\n        objTarget[k] = objOld[k];\n      }\n\n      if (objOld[k] === Object(objOld[k])) {\n        objTarget[k] = this.reassignCallbacks(objOld[k], objTarget[k]);\n      }\n    }\n\n    return objTarget;\n  }\n}\n","/*\n * Copyright (c) 2018 by Filestack\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { loadModule, FILESTACK_MODULES } from '@filestack/loader';\nimport { FilestackError, FilestackErrorType } from './../filestack_error';\nimport { Client } from './client';\nimport { FSProgressEvent, UploadOptions, WorkflowConfig } from './api/upload/types';\nimport { getValidator, PickerParamsSchema } from './../schema';\n\nexport interface PickerInstance {\n  /**\n   * Close picker. This operation is idempotent.\n   */\n  close: () => Promise<void>;\n\n  /**\n   * Cancel picker uploads. This operation is idempotent.\n   */\n  cancel: () => Promise<void>;\n\n  /**\n   * Open picker. This operation is idempotent.\n   */\n  open: () => Promise<void>;\n\n  /**\n   * Specify a list of files to open in the picker for cropping\n   *\n   * ### Example\n   *\n   * ```js\n   * // <input id=\"fileSelect\" type=\"file\">\n   *\n   * const inputEl = document.getElementById('fileSelect');\n   * const picker = client.picker({\n   *   onUploadDone: res => console.log(res),\n   * });\n   *\n   * inputEl.addEventListener('change', (e) => {\n   *   picker.crop(e.target.files);\n   * });\n   *\n   * // Or pass an array of URL strings\n   * const urls = [\n   *   'https://d1wtqaffaaj63z.cloudfront.net/images/fox_in_forest1.jpg',\n   *   'https://d1wtqaffaaj63z.cloudfront.net/images/sail.jpg',\n   * ];\n   * picker.crop(urls);\n   * ```\n   */\n  crop: (files: any[]) => Promise<void>;\n}\n\nexport interface PickerCroppedData {\n  cropArea: {\n    /**\n     * [x, y]\n     */\n    position: [number, number];\n    /**\n     * [width, height]\n     */\n    size: [number, number];\n  };\n    /**\n     * [width, height]\n     */\n  originalImageSize: [number, number];\n}\n\nexport enum RotateDirection {\n  cw = 'CW',\n  ccw= 'CCW',\n}\n\nexport interface PickerRotatedData {\n  /**\n   * Amount rotated in degrees.\n   */\n  value: number;\n  /**\n   * Can be CW or CCW (clockwise / counter-clockwise)\n   */\n  direction: RotateDirection;\n}\n\nexport interface PickerFileMetadata {\n  /**\n   * The cloud container for the uploaded file.\n   */\n  container?: string;\n  /**\n   * Position and size information for cropped images.\n   */\n  cropped?: PickerCroppedData;\n  /**\n   * Name of the file.\n   */\n  filename: string;\n  /**\n   * Filestack handle for the uploaded file.\n   */\n  handle: string;\n  /**\n   * The hash-prefixed cloud storage path.\n   */\n  key?: string;\n  /**\n   * The MIME type of the file.\n   */\n  mimetype: string;\n  /**\n   * Properties of the local binary file. Also see the pick option `exposeOriginalFile` if you want the underlying `File` object.\n   */\n  originalFile?: object | File;\n  /**\n   * The origin of the file, e.g. /Folder/file.jpg.\n   */\n  originalPath: string;\n  /**\n   * Direction and value information for rotated images.\n   */\n  rotated?: PickerRotatedData;\n  /**\n   * Size in bytes of the uploaded file.\n   */\n  size: number;\n  /**\n   * The source from where the file was picked.\n   */\n  source: string;\n  /**\n   * Indicates Filestack transit status.\n   */\n  status?: string;\n  /**\n   * A uuid for tracking this file in callbacks.\n   */\n  uploadId: string;\n  /**\n   * The Filestack CDN URL for the uploaded file.\n   */\n  url: string;\n}\n\nexport interface CustomAuthTextOptions {\n  [key: string]: {\n    top?: string[],\n    bottom?: string[]\n  };\n}\n\nexport interface PickerResponse {\n  filesUploaded: PickerFileMetadata[];\n  filesFailed: PickerFileMetadata[];\n}\n\nexport interface PickerFileCallback {\n  (file: PickerFileMetadata): void | Promise<any>;\n}\nexport interface PickerFileWithTokenCallback {\n  (file: PickerFileMetadata, token?: {pause?: () => void, resume?: () => void, cancel?: () => void}): void | Promise<any>;\n}\n\nexport interface PickerFileCancelCallback {\n  (file: PickerFileMetadata): void;\n}\n\nexport interface PickerFileErrorCallback {\n  (file: PickerFileMetadata, error: Error): void;\n}\n\nexport interface PickerFileProgressCallback {\n  (file: PickerFileMetadata, event: FSProgressEvent): void;\n}\n\nexport interface PickerUploadStartedCallback {\n  (files: PickerFileMetadata[]): void;\n}\n\nexport interface PickerUploadDoneCallback {\n  (files: PickerResponse): void;\n}\n\nexport enum PickerDisplayMode {\n  inline = 'inline',\n  overlay = 'overlay',\n  dropPane = 'dropPane',\n}\n\nexport interface PickerDropPaneOptions {\n  /**\n   * Toggle the crop UI for dropped files.\n   */\n  cropFiles?: boolean;\n  /**\n   * Customize the text content in the drop pane.\n   */\n  customText?: string;\n  /**\n   * Disable the file input on click. This does not disable the `onClick` callback.\n   */\n  disableClick?: boolean;\n  /**\n   * Toggle the full-page drop zone overlay.\n   */\n  overlay?: boolean;\n  onDragEnter?: (evt: DragEvent) => void;\n  onDragLeave?: () => void;\n  onDragOver?: (evt: DragEvent) => void;\n  onDrop?: (evt: DragEvent) => void;\n  /**\n   * `onSuccess` must be used instead of `onUploadDone`. The drop pane uses its own callbacks for compatibility purposes. This might eventually change.\n   */\n  onSuccess?: (files: PickerFileMetadata[]) => void;\n  onError?: (files: PickerFileMetadata[]) => void;\n  onProgress?: (percent: number) => void;\n  onClick?: (evt: any) => void;\n  /**\n   * Toggle icon element in drop pane.\n   */\n  showIcon?: boolean;\n  /**\n   * Toggle upload progress display.\n   */\n  showProgress?: boolean;\n}\n\nexport interface PickerStoreOptions {\n  /**\n   * Location for stored file. One of 's3', 'gcs', 'azure', 'rackspace', or 'dropbox'.\n   */\n  location?: string;\n  /**\n   * Specify storage container.\n   */\n  container?: string;\n  /**\n   * Set container path. Indicate a folder by adding a trailing slash. Without a trailing slash all files will be stored to the same object.\n   */\n  path?: string;\n  /**\n   * Specify S3 region.\n   */\n  region?: string;\n  /**\n   * S3 container access. 'public' or 'private'.\n   */\n  access?: string;\n\n  /**\n   * Workflows ids to run after upload\n   */\n  workflows?: string[] | WorkflowConfig[];\n}\n\nexport interface PickerCustomText {\n  // Actions\n  Upload?: string;\n  'Upload more'?: string;\n  'Deselect All'?: string;\n  'View/Edit Selected'?: string;\n  'Sign Out'?: string;\n\n  // Source Labels\n  'My Device'?: string;\n  'Web Search'?: string;\n  'Take Photo'?: string;\n  'Link (URL)'?: string;\n  'Record Video'?: string;\n  'Record Audio'?: string;\n\n  // Custom Source\n  'Custom Source'?: string;\n\n  // Footer Text\n  Add?: string;\n  'more file'?: string;\n  'more files'?: string;\n\n  // Cloud\n  'Connect {providerName}'?: string;\n  'Select Files from {providerName}'?: string;\n  'You need to authenticate with {providerName}.'?: string;\n  'A new page will open to connect your account.'?: string;\n  'We only extract images and never modify or delete them.'?: string;\n  'To disconnect from {providerName} click \"Sign out\" button in the menu.'?: string;\n  'Sign in with Google'?: string;\n  'Go back'?: string;\n  'This folder is empty.'?: string;\n\n  // Summary\n  Files?: string;\n  Images?: string;\n  Uploaded?: string;\n  Uploading?: string;\n  Completed?: string;\n  Filter?: string;\n  'Cropped Images'?: string;\n  'Edited Images'?: string;\n  'Selected Files'?: string;\n  'Crop is required on images'?: string;\n\n  // Transform\n  Crop?: string;\n  Circle?: string;\n  Rotate?: string;\n  Mask?: string;\n  Revert?: string;\n  Edit?: string;\n  Reset?: string;\n  Done?: string;\n  Save?: string;\n  Next?: string;\n  'Edit Image'?: string;\n  'This image cannot be edited'?: string;\n\n  // Retry messaging\n  'Connection Lost'?: string;\n  'Failed While Uploading'?: string;\n  'Retrying in'?: string;\n  'Try again'?: string;\n  'Try now'?: string;\n\n  // Local File Source\n  'Drag and Drop, Copy and Paste Files'?: string;\n  'or Drag and Drop, Copy and Paste Files'?: string;\n  'Select Files to Upload'?: string;\n  'Select From'?: string;\n  'Drop your files anywhere'?: string;\n\n  // Input placeholders\n  'Enter a URL'?: string;\n  'Search images'?: string;\n\n  // Webcam Source\n  'Webcam Disabled'?: string;\n  'Webcam Not Supported'?: string;\n  'Please enable your webcam to take a photo.'?: string;\n  'Your current browser does not support webcam functionality.'?: string;\n  'We suggest using Chrome or Firefox.'?: string;\n\n  // Error Notifications\n  'File {displayName} is not an accepted file type. The accepted file types are {types}'?: string;\n  'File {displayName} is too big. The accepted file size is less than {roundFileSize}'?: string;\n  'Our file upload limit is {maxFiles} {filesText}'?: string;\n  'No search results found for \"{search}\"'?: string;\n  'An error occurred. Please try again.'?: string;\n}\n\nexport interface PickerOptions {\n  /**\n   * Restrict file types that are allowed to be picked. Formats accepted:\n   *  - .pdf <- any file extension\n   *  - image/jpeg <- any mime type commonly known by browsers\n   *  - image/* <- accept all types of images\n   *  - video/* <- accept all types of video files\n   *  - audio/* <- accept all types of audio files\n   *  - application/* <- accept all types of application files\n   *  - text/* <- accept all types of text files\n   */\n  accept?: string | string[];\n  /**\n   * Custom accept check function\n   * ```javascript\n   * acceptFn: (file, options) => {\n   *  return options.mimeFromMagicBytes(file.originalFile).then((res) => { // we can check mimetype from magic bytes\n   *    //console.log(options.mimeFromExtension(file.originalFile.name)); // or check extension from filestack extensions database\n   *    // throw new Error('Cannot accept that file') // we can throw exception to block file upload\n   *    // return Promise.reject('Cannot accept that file'') // or reject a promise\n   *    return Promise.resolve();\n   *  });\n   * }\n   * ```\n   */\n  acceptFn?: (PickerFileMetadata, PickerAcceptFnOptions) => Promise<string>;\n  /**\n   * Prevent modal close on upload failure and allow users to retry.\n   */\n  allowManualRetry?: boolean;\n  /**\n   *  Valid sources are:\n   *  - local_file_system - Default\n   *  - url - Default\n   *  - imagesearch - Default\n   *  - facebook - Default\n   *  - instagram - Default\n   *  - googledrive - Default\n   *  - dropbox - Default\n   *  - webcam - Uses device menu on mobile. Not currently supported in Safari and IE.\n   *  - video - Uses device menu on mobile. Not currently supported in Safari and IE.\n   *  - audio - Uses device menu on mobile. Not currently supported in Safari and IE.\n   *  - box\n   *  - github\n   *  - gmail\n   *  - googlephotos\n   *  - onedrive\n   *  - onedriveforbusiness\n   *  - customsource - Configure this in your Filestack Dev Portal.\n   *  - unsplash\n   */\n  fromSources?: string[];\n  /**\n   * Container where picker should be appended. Only relevant for `inline` and `dropPane` display modes.\n   */\n  container?: string | Node;\n\n  /**\n   * Turn on cleaning JPEG image exif. Method can keep image orientation or color profiles\n   * ```javascript\n   * cleanupImageExif: {\n   *   keepOrientation: true\n   *   keepICCandAPP: true\n   * }\n   * ```\n   */\n  cleanupImageExif?: boolean | {\n    keepOrientation?: boolean,\n    keepICCandAPP?: boolean\n  };\n  /**\n   * Customize the text on the cloud authentication screen in Picker.\n   * Use a cloud source name (see [[PickerOptions.fromSources]])\n   * or a 'default' as a key, then put your custom notice or consent\n   * to the 'top' or the 'bottom' key to show it respectivly above or under 'Connect button'.\n   *\n   * ```javascript\n   * customAuthText: {\n   *   // use it for every cloud authentication screen\n   *   default: {\n   *     top: [\n   *       'default top first line',\n   *       'default top second line'\n   *     ],\n   *     bottom: [\n   *       'default bottom first line',\n   *       'default bottom second line'\n   *     ]\n   *   },\n   *   // override a default bottom text for only gmail\n   *   gmail: {\n   *     bottom: [\n   *       'We need your permission to access your data and',\n   *       'process it with our machine learning system.'\n   *     ]\n   *   }\n   * }\n   * ```\n   */\n  customAuthText?: CustomAuthTextOptions;\n  /**\n   * Picker display mode, one of `'inline'`, `'overlay'`, `'dropPane'` - default is `'overlay'`.\n   */\n  displayMode?: PickerDisplayMode;\n  /**\n   * Max number of files to upload concurrently. Default is 4.\n   */\n  concurrency?: number;\n  /**\n   * Set the default container for your custom source.\n   */\n  customSourceContainer?: string;\n  /**\n   * Set the default path for your custom source container.\n   */\n  customSourcePath?: string;\n  /**\n   * Set the display name for the custom source.\n   */\n  customSourceName?: string;\n  /**\n   * Provide an object for mapping picker strings to your own strings.\n   * Strings surrounded by brackets, `{ foobar }`, are interpolated with runtime values.\n   * Source labels are also available to override, e.g. Facebook, Instagram, Dropbox, etc.\n   */\n  customText?: PickerCustomText;\n  /**\n   * set support email to display in case of error\n   */\n  supportEmail?: string;\n  /**\n   * When true removes the hash prefix on stored files.\n   */\n  disableStorageKey?: boolean;\n  /**\n   * When true removes ability to edit images.\n   */\n  disableTransformer?: boolean;\n  /**\n   * Disables local image thumbnail previews in the summary screen.\n   */\n  disableThumbnails?: boolean;\n  /**\n   * Configure the drop pane behavior, i.e. when `displayMode` is `dropPane`.\n   */\n  dropPane?: PickerDropPaneOptions;\n  /**\n   * When true the `originalFile` metadata will be the actual `File` object instead of a POJO\n   */\n  exposeOriginalFile?: boolean;\n  /**\n   * Toggle the drop zone to be active on all views. Default is active only on local file source.\n   */\n  globalDropZone?: boolean;\n  /**\n   * Hide the picker modal UI once uploading begins. Defaults to `false`.\n   */\n  hideModalWhenUploading?: boolean;\n\n  /**\n   * Specify image dimensions. e.g. [800, 600]. Only for JPEG, PNG, and BMP files.\n   * Local and cropped images will be resized (upscaled or downscaled) to the specified dimensions before uploading.\n   * The original height to width ratio is maintained. To resize all images based on the width, set [width, null], e.g. [800, null].\n   * For the height set [null, height], e.g. [null, 600].\n   */\n  imageDim?: [number, number];\n  /**\n   * Specify maximum image dimensions. e.g. [800, 600]. Only for JPEG, PNG, and BMP files.\n   * Images bigger than the specified dimensions will be resized to the maximum size while maintaining the original aspect ratio.\n   * The output will not be exactly 800x600 unless the imageMax matches the aspect ratio of the original image.\n   */\n  imageMax?: [number, number];\n  /**\n   * Specify minimum image dimensions. e.g. [800, 600]. Only for JPEG, PNG, and BMP files.\n   * Images smaller than the specified dimensions will be upscaled to the minimum size while maintaining the original aspect ratio.\n   * The output will not be exactly 800x600 unless the imageMin matches the aspect ratio of the original image.\n   */\n  imageMin?: [number, number];\n  /**\n   * Sets locale. Accepts: ca, da, de, en, es, fr, he, it, ja, ko, nl, no, pl, pt, sv, ru, vi, zh, tr\n   */\n  lang?: string;\n  /**\n   * Minimum number of files required to start uploading. Defaults to 1.\n   */\n  minFiles?: number;\n  /**\n   * Maximum number of files allowed to upload. Defaults to 1.\n   */\n  maxFiles?: number;\n  /**\n   * Restrict selected files to a maximum number of bytes. (e.g. 10 \\* 1024 \\* 1024 for 10MB limit).\n   */\n  maxSize?: number;\n\n  /**\n   * Default view type option for file browser\n   */\n  viewType?: 'grid' | 'list';\n\n  /**\n   * Timeout for error messages\n   */\n  errorsTimeout?: number;\n  /**\n   * Specify [width, height] in pixels of the desktop modal.\n   */\n  modalSize?: [number, number];\n  /**\n   * Called when all uploads in a pick are cancelled.\n   */\n  onCancel?: PickerUploadDoneCallback;\n  /**\n   * Called when the UI is exited.\n   */\n  onClose?: () => void;\n  /**\n   * Called when the UI is mounted.\n   * @param PickerInstance application handle\n   */\n  onOpen?: (handle: PickerInstance) => void;\n  /**\n   * Called whenever user selects a file.\n   * ### Example\n   *\n   * ```js\n   * // Using to veto file selection\n   * // If you throw any error in this function it will reject the file selection.\n   * // The error message will be displayed to the user as an alert.\n   * onFileSelected(file) {\n   *   if (file.size > 1000 * 1000) {\n   *     throw new Error('File too big, select something smaller than 1MB');\n   *   }\n   * }\n   *\n   * // Using to change selected file name\n   * // NOTE: This currently only works for local uploads\n   * onFileSelected(file) {\n   *   // It's important to return a new file by the end of this function.\n   *   return { ...file, name: 'foo' };\n   * }\n   * ```\n   *\n   * The callback function can also return a Promise to allow asynchronous validation logic.\n   * You can pass a file object to `resolve` for changing the file name, it will behave the same as when\n   * the file is returned from the non-async callback.\n   *\n   * ```js\n   * onFileSelected(file) {\n   *   return new Promise((resolve, reject) => {\n   *     // Do something async\n   *     resolve();\n   *     // Or reject the selection with reject()\n   *   });\n   * }\n   * ```\n   */\n  onFileSelected?: PickerFileCallback;\n  /**\n   * Called when a file upload has been canceled.\n   */\n  onFileUploadCancel?: PickerFileCancelCallback;\n  /**\n   * Called when a file begins uploading.\n   */\n  onFileUploadStarted?: PickerFileWithTokenCallback;\n  /**\n   * Called when a file is done uploading.\n   */\n  onFileUploadFinished?: PickerFileCallback;\n  /**\n   * Called when uploading a file fails.\n   */\n  onFileUploadFailed?: PickerFileErrorCallback;\n  /**\n   * Called during multi-part upload progress events. Local files only.\n   */\n  onFileUploadProgress?: PickerFileProgressCallback;\n  /**\n   * Called when file is cropped in picker\n   */\n  onFileCropped?: PickerFileCallback;\n  /**\n   * Called when uploading starts (user initiates uploading).\n   */\n  onUploadStarted?: PickerUploadStartedCallback;\n  /**\n   * Called when all files have been uploaded.\n   */\n  onUploadDone?: PickerUploadDoneCallback;\n\n  /**\n   * Define a unique id for the application mount point.\n   * May be useful for more advanced use cases.\n   * For example, if you wish to have more than one picker instance open at once,\n   * then each will need their own unique rootId.\n   *\n   * **Note:** This option is ignored when `displayMode` is `dropPane`.\n   */\n  rootId?: string;\n  /**\n   * Whether to start uploading automatically when maxFiles is hit. Defaults to `false`.\n   */\n  startUploadingWhenMaxFilesReached?: boolean;\n  /**\n   * Options for file storage.\n   */\n  storeTo?: PickerStoreOptions;\n  /**\n   * Specify options for images passed to the crop UI.\n   */\n  transformations?: PickerTransformationOptions;\n  /**\n   * Options for local file uploads.\n   */\n  uploadConfig?: UploadOptions;\n  /**\n   * Start uploading immediately on file selection. Defaults to `true`.\n   * @important The feature is can be enabled only if crop is disabled - disableTransformer: true\n   */\n  uploadInBackground?: boolean;\n  /**\n   * Sets the resolution of recorded video. One of \"320x240\", \"640x480\" or \"1280x720\". Default is `\"640x480\"`.\n   */\n  videoResolution?: string;\n  /**\n   * Use Sentry Breadcrumbs mechanism to log information about occured errors.\n   * It can override global objects like console, error etc. Defaults to `true`.\n   */\n  useSentryBreadcrumbs?: boolean;\n  /**\n   * Specify which Picker instance should respond to paste event.\n   * By default only hovered instance responds to event.\n   * @param {boolean = false} pasteToFirstInViewPort If none instance is hovered take first picker instance fully visible in viewport\n   * @param {boolean = false} pasteToFirstInstance If none instance is hovered take first picker instance that is initialized\n   * @pasteToFirstInViewPort is checked first\n   */\n  pasteMode?: {\n    pasteToFirstInViewPort?: boolean,\n    pasteToFirstInstance?: boolean\n  };\n}\n\nexport interface PickerCropOptions {\n  /**\n   * Maintain aspect ratio for crop selection. (e.g. 16/9, 800/600).\n   */\n  aspectRatio?: number;\n  /**\n   * Force all images to be cropped before uploading.\n   */\n  force?: boolean;\n}\n\nexport interface PickerTransformationOptions {\n  /**\n   * Enable crop. Defaults to `true`.\n   */\n  crop?: boolean | PickerCropOptions;\n  /**\n   * Enable circle crop. Disabled if crop.aspectRatio is defined and not 1. Converts to PNG. Defaults to `true`.\n   */\n  circle?: boolean;\n  /**\n   * Enable image rotation. Defaults to `true`.\n   */\n  rotate?: boolean;\n\n  /**\n   * Global force crop option. Can be use ie with circle\n   */\n  force?: boolean;\n}\n\nexport interface PickerAcceptFnOptions {\n  /**\n   * Provided accept string\n   */\n  accept: string[];\n  /**\n   * Accept string converted to mimetype\n   */\n  acceptMime: string[];\n  /**\n   * Mimetype based magic bytes\n   * {@link https://filestack.github.io/filestack-js/globals.html#getmimetype}\n   */\n  mimeFromMagicBytes: Promise<string>;\n  /**\n   * Mimetype based on file extension\n   * {@link https://filestack.github.io/filestack-js/globals.html#extensiontomime}\n   */\n  mimeFromExtension: string;\n}\n\n/**\n * @private\n * A synchronous-looking wrapper for loading the picker and calling its methods.\n * This is currently needed because the picker module is loaded asynchronously.\n * Eventually we should offer a bundle with the picker module included.\n */\nclass PickerLoader {\n\n  private _initialized: Promise<PickerInstance>;\n  constructor(client: Client, options?: PickerOptions) {\n    const validateRes = getValidator(PickerParamsSchema)(options);\n\n    if (validateRes.errors.length) {\n      throw new FilestackError(`Invalid picker params`, validateRes.errors, FilestackErrorType.VALIDATION);\n    }\n\n    this._initialized = this.loadModule(client, options);\n  }\n\n  async open(): Promise<void> {\n    const picker = await this._initialized;\n    await picker.open();\n  }\n\n  async crop(files: any[]): Promise<void> {\n    const picker = await this._initialized;\n    await picker.crop(files);\n  }\n\n  async close(): Promise<void> {\n    const picker = await this._initialized;\n    await picker.close();\n  }\n\n  async cancel(): Promise<void> {\n    const picker = await this._initialized;\n    await picker.cancel();\n  }\n\n  private async loadModule(client: Client, options?: PickerOptions): Promise<PickerInstance> {\n    const { session: { urls: { pickerUrl: url } } } = client;\n    const Picker = await loadModule(FILESTACK_MODULES.PICKER, url);\n    return new Picker(client, options);\n  }\n}\n\n/**\n * Loads and creates picker instance\n *\n * @private\n * @param client\n * @param options\n */\nexport const picker = (client: Client, options?: PickerOptions): PickerInstance => {\n  return new PickerLoader(client, options);\n};\n","/*\n * Copyright (c) 2018 by Filestack\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { EventEmitter } from 'eventemitter3';\nimport * as Sentry from '@sentry/minimal';\nimport { config, Hosts } from '../config';\nimport { FilestackError } from './../filestack_error';\nimport { metadata, MetadataOptions, remove, retrieve, RetrieveOptions, download } from './api/file';\nimport { transform, TransformOptions } from './api/transform';\nimport { storeURL } from './api/store';\nimport * as Utils from './utils';\nimport { Upload, InputFile, UploadOptions, StoreUploadOptions, UploadTags } from './api/upload';\nimport { preview, PreviewOptions } from './api/preview';\nimport { CloudClient } from './api/cloud';\nimport { Prefetch, PrefetchResponse, PrefetchOptions } from './api/prefetch';\nimport { FsResponse } from './request/types';\nimport { StoreParams } from './filelink';\n\nimport { picker, PickerInstance, PickerOptions } from './picker';\n\n/* istanbul ignore next */\nSentry.addBreadcrumb({ category: 'sdk', message: 'filestack-js-sdk scope' });\n\nexport interface Session {\n  apikey: string;\n  urls: Hosts;\n  cname?: string;\n  policy?: string;\n  signature?: string;\n  prefetch?: PrefetchResponse;\n}\n\nexport interface Security {\n  policy: string;\n  signature: string;\n}\n\nexport interface ClientOptions {\n  [option: string]: any;\n  /**\n   * Security object with policy and signature keys.\n   * Can be used to limit client capabilities and protect public URLs.\n   * It is intended to be used with server-side policy and signature generation.\n   * Read about [security policies](https://www.filestack.com/docs/concepts/security).\n   */\n  security?: Security;\n  /**\n   * Domain to use for all URLs. __Requires the custom CNAME addon__.\n   * If this is enabled then you must also set up your own OAuth applications\n   * for each cloud source you wish to use in the picker.\n   */\n  cname?: string;\n  /**\n   * Enable/disable caching of the cloud session token. Default is false.\n   * This ensures that users will be remembered on your domain when calling the cloud API from the browser.\n   * Please be aware that tokens stored in localStorage are accessible by other scripts on the same domain.\n   */\n  sessionCache?: boolean;\n\n  /**\n   * Enable forwarding error logs to sentry\n   * @default false\n   */\n  forwardErrors?: boolean;\n}\n\n/**\n * The Filestack client, the entry point for all public methods. Encapsulates session information.\n *\n * ### Example\n * ```js\n * // ES module\n * import * as filestack from 'filestack-js';\n * const client = filestack.init('apikey');\n * ```\n *\n * ```js\n * // UMD module in browser\n * <script src=\"https://static.filestackapi.com/filestack-js/3.x.x/filestack.min.js\"></script>\n * const client = filestack.init('apikey');\n * ```\n */\nexport class Client extends EventEmitter {\n  public session: Session;\n  private cloud: CloudClient;\n  private prefetchInstance: Prefetch;\n\n  private forwardErrors: boolean = true;\n\n  /**\n   * Returns filestack utils\n   *\n   * @readonly\n   * @memberof Client\n   */\n  get utils() {\n    return Utils;\n  }\n\n  constructor(apikey: string, private options?: ClientOptions) {\n    super();\n\n    /* istanbul ignore if */\n    if (options && options.forwardErrors) {\n      this.forwardErrors = options.forwardErrors;\n    }\n\n    if (!apikey || typeof apikey !== 'string' || apikey.length === 0) {\n      throw new Error('An apikey is required to initialize the Filestack client');\n    }\n    const { urls } = config;\n    this.session = { apikey, urls };\n\n    if (options) {\n      const { cname, security } = options;\n\n      this.setSecurity(security);\n      this.setCname(cname);\n    }\n\n    this.prefetchInstance = new Prefetch(this.session);\n    this.cloud = new CloudClient(this.session, options);\n  }\n\n  /**\n   * Make basic prefetch request to check permissions\n   *\n   * @param params\n   */\n  prefetch(params: PrefetchOptions) {\n    return this.prefetchInstance.getConfig(params);\n  }\n\n  /**\n   * Set security object\n   *\n   * @param {Security} security\n   * @memberof Client\n   */\n  setSecurity(security: Security) {\n    if (security && !(security.policy && security.signature)) {\n      throw new FilestackError('Both policy and signature are required for client security');\n    }\n\n    if (security && security.policy && security.signature) {\n      this.session.policy = security.policy;\n      this.session.signature = security.signature;\n    }\n  }\n\n  /**\n   * Set custom cname\n   *\n   * @param {string} cname\n   * @returns\n   * @memberof Client\n   */\n  setCname(cname: string) {\n    if (!cname || cname.length === 0) {\n      return;\n    }\n\n    this.session.cname = cname;\n    this.session.urls = Utils.resolveHost(this.session.urls, cname);\n  }\n\n  /**\n   * Clear all current cloud sessions in the picker.\n   * Optionally pass a cloud source name to only log out of that cloud source.\n   * This essentially clears the OAuth authorization codes from the Filestack session.\n   * @param name Optional cloud source name.\n   */\n  logout(name?: string) {\n    return this.cloud.logout(name);\n  }\n  /**\n   * Retrieve detailed data of stored files.\n   *\n   * ### Example\n   *\n   * ```js\n   * client\n   *   .metadata('DCL5K46FS3OIxb5iuKby')\n   *   .then((res) => {\n   *     console.log(res);\n   *   })\n   *   .catch((err) => {\n   *     console.log(err);\n   *   }));\n   * ```\n   * @see [File API - Metadata](https://www.filestack.com/docs/api/file#metadata).\n   * @param handle Valid Filestack handle.\n   * @param options Metadata fields to enable on response.\n   * @param security Optional security override.\n   */\n  metadata(handle: string, options?: MetadataOptions, security?: Security) {\n    /* istanbul ignore next */\n    return metadata(this.session, handle, options, security);\n  }\n  /**\n   * Construct a new picker instance.\n   */\n  picker(options?: PickerOptions): PickerInstance {\n    /* istanbul ignore next */\n    return picker(this, options);\n  }\n  /**\n   * Used for viewing files via Filestack handles or storage aliases, __requires Document Viewer addon to your Filestack application__.\n   * Opens document viewer in new window if id option is not provided.\n   *\n   * ### Example\n   *\n   * ```js\n   * // <div id=\"preview\"></div>\n   *\n   * client.preview('DCL5K46FS3OIxb5iuKby', { id: 'preview' });\n   * ```\n   * @param handle Valid Filestack handle.\n   * @param options Preview options\n   */\n  preview(handle: string, options?: PreviewOptions) {\n    /* istanbul ignore next */\n    return preview(this.session, handle, options);\n  }\n  /**\n   * Remove a file from storage and the Filestack system.\n   *\n   * __Requires a valid security policy and signature__. The policy and signature will be pulled from the client session, or it can be overridden with the security parameter.\n   *\n   * ### Example\n   *\n   * ```js\n   * client\n   *   .remove('DCL5K46FS3OIxb5iuKby')\n   *   .then((res) => {\n   *     console.log(res);\n   *   })\n   *   .catch((err) => {\n   *     console.log(err);\n   *   }));\n   * ```\n   * @see [File API - Delete](https://www.filestack.com/docs/api/file#delete)\n   * @param handle Valid Filestack handle.\n   * @param security Optional security override.\n   */\n  remove(handle: string, security?: Security): Promise<any> {\n    /* istanbul ignore next */\n    return remove(this.session, handle, false, security);\n  }\n  /**\n   * Remove a file **only** from the Filestack system. The file remains in storage.\n   *\n   * __Requires a valid security policy and signature__. The policy and signature will be pulled from the client session, or it can be overridden with the security parameter.\n   *\n   * ### Example\n   *\n   * ```js\n   * client\n   *   .removeMetadata('DCL5K46FS3OIxb5iuKby')\n   *   .then((res) => {\n   *     console.log(res);\n   *   })\n   *   .catch((err) => {\n   *     console.log(err);\n   *   }));\n   * ```\n   * @see [File API - Delete](https://www.filestack.com/docs/api/file#delete)\n   * @param handle Valid Filestack handle.\n   * @param security Optional security override.\n   */\n  removeMetadata(handle: string, security?: Security): Promise<any> {\n    /* istanbul ignore next */\n    return remove(this.session, handle, true, security);\n  }\n  /**\n   * Store a file from its URL.\n   *\n   * ### Example\n   *\n   * ```js\n   * client\n   *   .storeURL('https://d1wtqaffaaj63z.cloudfront.net/images/NY_199_E_of_Hammertown_2014.jpg')\n   *   .then(res => console.log(res));\n   * ```\n   * @see [File API - Store](https://www.filestack.com/docs/api/file#store)\n   * @param url       Valid URL to a file.\n   * @param options   Configure file storage.\n   * @param token     Optional control token to call .cancel()\n   * @param security  Optional security override.\n   * @param uploadTags Optional tags visible in webhooks.\n   * @param headers    Optional headers to send\n   * @param workflowIds    Optional workflowIds to send\n   */\n  storeURL(url: string, storeParams?: StoreParams, token?: any, security?: Security, uploadTags?: UploadTags, headers?: {[key: string]: string}, workflowIds?: string[]): Promise<Object> {\n    return storeURL({\n      session: this.session,\n      url,\n      storeParams,\n      token,\n      security,\n      uploadTags,\n      headers,\n      workflowIds,\n    });\n  }\n\n  /**\n   * Access files via their Filestack handles.\n   *\n   * If head option is provided - request headers are returned in promise\n   * If metadata option is provided - metadata object is returned in promise\n   * Otherwise file blob is returned\n   * Metadata and head options cannot be mixed\n   *\n   * ### Example\n   *\n   * ```js\n   * client.retrieve('fileHandle', {\n   *  metadata: true,\n   * }).then((response) => {\n   *  console.log(response);\n   * }).catch((err) => {\n   *  console.error(err);\n   * })\n   * ```\n   *\n   * @see [File API - Download](https://www.filestack.com/docs/api/file#download)\n   * @deprecated use metadata or download methods instead\n   * @param handle    Valid file handle\n   * @param options   RetrieveOptions\n   * @param security  Optional security override.\n   * @throws          Error\n   */\n  retrieve(handle: string, options?: RetrieveOptions, security?: Security): Promise<Object | Blob> {\n    /* istanbul ignore next */\n    return retrieve(this.session, handle, options, security);\n  }\n\n  /**\n   * Download file by handle\n   *\n   *\n   * ### Browser Example\n   *\n   * ```js\n   * client.download('fileHandle').then((response) => {\n   * const img = new Image();\n   * img.src = URL.createObjectURL(res.data)\n   * document.body.appendChild(img);\n   * }).catch((err) => {\n   *  console.error(err);\n   * })\n   * ```\n   *\n   * @see [File API - Download](https://www.filestack.com/docs/api/file#download)\n   * @param handle    Valid file handle\n   * @throws          Error\n   */\n  download(handle: string, security?: Security): Promise<FsResponse> {\n    /* istanbul ignore next */\n    return download(this.session, handle, security);\n  }\n\n  /**\n   * Interface to the Filestack [Processing API](https://www.filestack.com/docs/api/processing).\n   * Convert a URL, handle, or storage alias to another URL which links to the transformed file.\n   * You can optionally store the returned URL with client.storeURL.\n   *\n   * Transform params can be provided in camelCase or snakeCase style ie: partial_pixelate or partialPixelate\n   *\n   * ### Example\n   *\n   * ```js\n   * const transformedUrl = client.transform(url, {\n   *   crop: {\n   *     dim: [x, y, width, height],\n   *   },\n   *   vignette: {\n   *     blurmode: 'gaussian',\n   *     amount: 50,\n   *   },\n   *   flip: true,\n   *   partial_pixelate: {\n   *     objects: [[10, 20, 200, 250], [275, 91, 500, 557]],\n   *   },\n   * };\n   *\n   * // optionally store the new URL\n   * client.storeURL(transformedUrl).then(res => console.log(res));\n   * ```\n   * @see [Filestack Processing API](https://www.filestack.com/docs/api/processing)\n   * @param url     Single or multiple valid URLs (http(s)://), file handles, or storage aliases (src://) to an image.\n   * @param options Transformations are applied in the order specified by this object.\n   * @param b64     Use new more safe format for generating transforms url (default=false) Note: If there will be any issues with url please test it with enabled b64 support\n   * @returns       A new URL that points to the transformed resource.\n   */\n  transform(url: string | string[], options: TransformOptions, b64: boolean = false) {\n    /* istanbul ignore next */\n    return transform(this.session, url, options, b64);\n  }\n\n  /**\n   * Initiates a multi-part upload flow. Use this for Filestack CIN and FII uploads.\n   *\n   * In Node runtimes the file argument is treated as a file path.\n   * Uploading from a Node buffer is not yet implemented.\n   *\n   * ### Example\n   *\n   * ```js\n   * const token = {};\n   * const onRetry = (obj) => {\n   *   console.log(`Retrying ${obj.location} for ${obj.filename}. Attempt ${obj.attempt} of 10.`);\n   * };\n   *\n   * client.upload(file, { onRetry }, { filename: 'foobar.jpg' }, token)\n   *   .then(res => console.log(res));\n   *\n   * client.upload({file, name}, { onRetry }, { filename: 'foobar.jpg' }, token)\n   *   .then(res => console.log(res));\n   *\n   * token.pause();  // Pause flow\n   * token.resume(); // Resume flow\n   * token.cancel(); // Cancel flow (rejects)\n   * ```\n   * @param {InputFile}    file           Must be a valid [File | Blob | Buffer | string]\n   * @param uploadOptions  Uploader options.\n   * @param storeOptions   Storage options.\n   * @param token          A control token that can be used to call cancel(), pause(), and resume().\n   * @param security       Optional security policy and signature override.\n   *\n   * @returns {Promise}\n   */\n  upload(file: InputFile, options?: UploadOptions, storeOptions?: StoreUploadOptions, token?: any, security?: Security) {\n    let upload = new Upload(options, storeOptions);\n    upload.setSession(this.session);\n\n    if (token) {\n      upload.setToken(token);\n    }\n\n    if (security) {\n      upload.setSecurity(security);\n    }\n\n    upload.on('start', () => this.emit('upload.start'));\n    /* istanbul ignore next */\n    upload.on('error', e => {\n      if (this.forwardErrors) {\n        Sentry.withScope(scope => {\n          scope.setTag('filestack-apikey', this.session.apikey);\n          scope.setTag('filestack-version', Utils.getVersion());\n          scope.setExtra('filestack-options', this.options);\n          scope.setExtras({ uploadOptions: options, storeOptions, details: e.details });\n          e.message = `FS-${e.message}`;\n\n          Sentry.captureException(e);\n        });\n      }\n\n      this.emit('upload.error', e);\n    });\n\n    return upload.upload(file);\n  }\n\n  /**\n   * Initiates a multi-part upload flow. Use this for Filestack CIN and FII uploads.\n   *\n   * In Node runtimes the file argument is treated as a file path.\n   * Uploading from a Node buffer is not yet implemented.\n   *\n   * ### Example\n   *\n   * ```js\n   * const token = {};\n   * const onRetry = (obj) => {\n   *   console.log(`Retrying ${obj.location} for ${obj.filename}. Attempt ${obj.attempt} of 10.`);\n   * };\n   *\n   * client.multiupload([file], { onRetry }, token)\n   *   .then(res => console.log(res));\n   *\n   * client.multiupload([{file, name}], { onRetry }, token)\n   *   .then(res => console.log(res));\n   *\n   * token.pause();  // Pause flow\n   * token.resume(); // Resume flow\n   * token.cancel(); // Cancel flow (rejects)\n   * ```\n   * @param {InputFile[]}  file           Must be a valid [File | Blob | Buffer | string (base64)]\n   * @param uploadOptions  Upload options.\n   * @param storeOptions   Storage options.\n   * @param token          A control token that can be used to call cancel(), pause(), and resume().\n   * @param security       Optional security policy and signature override.\n   *\n   * @returns {Promise}\n   */\n  multiupload(file: InputFile[], options?: UploadOptions, storeOptions?: StoreUploadOptions, token?: any, security?: Security) {\n    let upload = new Upload(options, storeOptions);\n\n    upload.setSession(this.session);\n\n    if (token) {\n      upload.setToken(token);\n    }\n\n    if (security) {\n      upload.setSecurity(security);\n    }\n\n    upload.on('start', () => this.emit('upload.start'));\n    /* istanbul ignore next */\n    upload.on('error', e => {\n      Sentry.withScope(scope => {\n        scope.setTag('filestack-apikey', this.session.apikey);\n        scope.setTag('filestack-version', Utils.getVersion());\n        scope.setExtra('filestack-options', this.options);\n        scope.setExtras(e.details);\n        scope.setExtras({ uploadOptions: options, storeOptions });\n        Sentry.captureException(e);\n      });\n\n      this.emit('upload.error', e);\n    });\n\n    return upload.multiupload(file);\n  }\n}\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Security, Session } from '../client';\nimport { Filelink, StoreParams } from './../filelink';\nimport { FilestackError } from './../../filestack_error';\nimport { getValidator, StoreParamsSchema } from './../../schema';\nimport { FsRequest, FsCancelToken } from '../request';\nimport { UploadTags } from './upload/file';\n\nexport type StoreUrlParams = {\n  session: Session;\n  url?: string;\n  storeParams?: StoreParams;\n  token?: any;\n  security?: Security;\n  uploadTags?: UploadTags;\n  headers?: {[key: string]: string},\n  workflowIds?: string[]\n};\n\n/**\n * Store given url with options and\n *\n * @param session\n * @param url\n * @param storeOpts\n * @param token\n * @param security\n * @param uploadTags\n * @param workflowIds\n */\nexport const storeURL = ({\n  session,\n  url,\n  storeParams,\n  token,\n  security,\n  uploadTags,\n  headers,\n  workflowIds,\n}: StoreUrlParams): Promise<any> => {\n  if (!url || typeof url !== 'string') {\n    return Promise.reject(new FilestackError('url is required for storeURL'));\n  }\n\n  const validateRes = getValidator(StoreParamsSchema)(storeParams);\n\n  if (validateRes.errors.length) {\n    return Promise.reject(new FilestackError(`Invalid store params`, validateRes.errors));\n  }\n\n  session.policy = security && security.policy || session.policy;\n  session.signature = security && security.signature || session.signature;\n\n  const filelink = new Filelink(url, session.apikey);\n  filelink.store(storeParams);\n\n  if (session.policy && session.signature) {\n    filelink.security({\n      policy: session.policy,\n      signature: session.signature,\n    });\n  }\n\n  let options: any = {};\n\n  if (token) {\n    const cancelToken = new FsCancelToken();\n    token.cancel = cancelToken.cancel.bind(cancelToken);\n    options.cancelToken = cancelToken;\n  }\n\n  let sources: any = [ url ];\n\n  if (headers) {\n    sources = [{\n      source: url,\n      headers,\n    }];\n  }\n\n  if (workflowIds && workflowIds.length > 0) {\n    filelink.addTask('store', { workflows: workflowIds });\n  }\n\n  return FsRequest.post(`${session.urls.processUrl}/process`, {\n    apikey: session.apikey,\n    sources,\n    tasks: filelink.getTasks(),\n    upload_tags: uploadTags,\n  }, options).then((res) => {\n    if (res.data && res.data.handle) {\n      if (res.data.upload_tags) {\n        res.data.uploadTags = res.data.upload_tags;\n        delete res.data.upload_tags;\n      }\n\n      return { ...res.data, mimetype: res.data.type };\n    }\n\n    throw new FilestackError(`Invalid store response ${JSON.stringify(res.data)}`);\n  });\n};\n","/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerModule, FILESTACK_MODULES } from '@filestack/loader';\nimport { SecurityOptions, getSecurity, validateWebhookSignature, WebhookValidatePayload } from './lib/api/security';\nimport { Client, ClientOptions, Security } from './lib/client';\nimport { PickerOptions, PickerInstance, PickerUploadDoneCallback, PickerFileMetadata, PickerResponse, PickerDisplayMode } from './lib/picker';\nimport { TransformSchema } from './schema/transforms.schema';\nimport { TransformOptions } from './lib/api/transform';\nimport { RetrieveOptions, MetadataOptions } from './lib/api/file';\nimport { UploadTags } from './lib/api/upload/file';\nimport { InputFile } from './lib/api/upload/file_tools';\nimport { UploadOptions } from './lib/api/upload/types';\nimport { StoreUploadOptions } from './lib/api/upload';\nimport { PreviewOptions } from './lib/api/preview';\nimport { PrefetchOptions, PrefetchResponse, PrefetchPermissions, PrefetchEvents } from './lib/api/prefetch';\nimport { FilestackError } from './filestack_error';\nimport { getMimetype } from './lib/utils/index';\n\n/**\n * Initialize client with given config\n *\n * @param apikey\n * @param options\n */\nexport const Filestack = (apikey: string, options?: ClientOptions): Client => {\n  return new Client(apikey, options);\n};\n\n// This will be deprecated in feature use\nexport const init = Filestack;\n\n/**\n * filestack-js version. Interpolated at build time.\n */\nexport const version = '@{VERSION}';\n\nregisterModule(FILESTACK_MODULES.FILESTACK_SDK, Filestack, { version: '@{VERSION}' });\n\nexport * from './lib/api/transform';\nexport * from './lib/filelink';\nexport * from './filestack_error';\nexport * from './lib/request';\nexport * from './lib/utils';\n\nexport {\n  UploadTags,\n  TransformSchema,\n  SecurityOptions,\n  getSecurity,\n  validateWebhookSignature,\n  WebhookValidatePayload,\n  ClientOptions,\n  PickerOptions,\n  PickerInstance,\n  Security,\n  TransformOptions,\n  RetrieveOptions,\n  InputFile,\n  UploadOptions,\n  StoreUploadOptions,\n  MetadataOptions,\n  PreviewOptions,\n  PickerUploadDoneCallback,\n  PickerFileMetadata,\n  PickerResponse,\n  Client,\n  FilestackError,\n  PickerDisplayMode,\n  getMimetype,\n  PrefetchOptions,\n  PrefetchResponse,\n  PrefetchPermissions,\n  PrefetchEvents\n};\n","import { getGlobalObject } from './misc';\nimport { dynamicRequire, isNodeEnv } from './node';\n\n/**\n * An object that can return the current timestamp in seconds since the UNIX epoch.\n */\ninterface TimestampSource {\n  nowSeconds(): number;\n}\n\n/**\n * A TimestampSource implementation for environments that do not support the Performance Web API natively.\n *\n * Note that this TimestampSource does not use a monotonic clock. A call to `nowSeconds` may return a timestamp earlier\n * than a previously returned value. We do not try to emulate a monotonic behavior in order to facilitate debugging. It\n * is more obvious to explain \"why does my span have negative duration\" than \"why my spans have zero duration\".\n */\nconst dateTimestampSource: TimestampSource = {\n  nowSeconds: () => Date.now() / 1000,\n};\n\n/**\n * A partial definition of the [Performance Web API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Performance}\n * for accessing a high resolution monotonic clock.\n */\ninterface Performance {\n  /**\n   * The millisecond timestamp at which measurement began, measured in Unix time.\n   */\n  timeOrigin: number;\n  /**\n   * Returns the current millisecond timestamp, where 0 represents the start of measurement.\n   */\n  now(): number;\n}\n\n/**\n * Returns a wrapper around the native Performance API browser implementation, or undefined for browsers that do not\n * support the API.\n *\n * Wrapping the native API works around differences in behavior from different browsers.\n */\nfunction getBrowserPerformance(): Performance | undefined {\n  const { performance } = getGlobalObject<Window>();\n  if (!performance || !performance.now) {\n    return undefined;\n  }\n\n  // Replace performance.timeOrigin with our own timeOrigin based on Date.now().\n  //\n  // This is a partial workaround for browsers reporting performance.timeOrigin such that performance.timeOrigin +\n  // performance.now() gives a date arbitrarily in the past.\n  //\n  // Additionally, computing timeOrigin in this way fills the gap for browsers where performance.timeOrigin is\n  // undefined.\n  //\n  // The assumption that performance.timeOrigin + performance.now() ~= Date.now() is flawed, but we depend on it to\n  // interact with data coming out of performance entries.\n  //\n  // Note that despite recommendations against it in the spec, browsers implement the Performance API with a clock that\n  // might stop when the computer is asleep (and perhaps under other circumstances). Such behavior causes\n  // performance.timeOrigin + performance.now() to have an arbitrary skew over Date.now(). In laptop computers, we have\n  // observed skews that can be as long as days, weeks or months.\n  //\n  // See https://github.com/getsentry/sentry-javascript/issues/2590.\n  //\n  // BUG: despite our best intentions, this workaround has its limitations. It mostly addresses timings of pageload\n  // transactions, but ignores the skew built up over time that can aversely affect timestamps of navigation\n  // transactions of long-lived web pages.\n  const timeOrigin = Date.now() - performance.now();\n\n  return {\n    now: () => performance.now(),\n    timeOrigin,\n  };\n}\n\n/**\n * Returns the native Performance API implementation from Node.js. Returns undefined in old Node.js versions that don't\n * implement the API.\n */\nfunction getNodePerformance(): Performance | undefined {\n  try {\n    const perfHooks = dynamicRequire(module, 'perf_hooks') as { performance: Performance };\n    return perfHooks.performance;\n  } catch (_) {\n    return undefined;\n  }\n}\n\n/**\n * The Performance API implementation for the current platform, if available.\n */\nconst platformPerformance: Performance | undefined = isNodeEnv() ? getNodePerformance() : getBrowserPerformance();\n\nconst timestampSource: TimestampSource =\n  platformPerformance === undefined\n    ? dateTimestampSource\n    : {\n        nowSeconds: () => (platformPerformance.timeOrigin + platformPerformance.now()) / 1000,\n      };\n\n/**\n * Returns a timestamp in seconds since the UNIX epoch using the Date API.\n */\nexport const dateTimestampInSeconds = dateTimestampSource.nowSeconds.bind(dateTimestampSource);\n\n/**\n * Returns a timestamp in seconds since the UNIX epoch using either the Performance or Date APIs, depending on the\n * availability of the Performance API.\n *\n * See `usingPerformanceAPI` to test whether the Performance API is used.\n *\n * BUG: Note that because of how browsers implement the Performance API, the clock might stop when the computer is\n * asleep. This creates a skew between `dateTimestampInSeconds` and `timestampInSeconds`. The\n * skew can grow to arbitrary amounts like days, weeks or months.\n * See https://github.com/getsentry/sentry-javascript/issues/2590.\n */\nexport const timestampInSeconds = timestampSource.nowSeconds.bind(timestampSource);\n\n// Re-exported with an old name for backwards-compatibility.\nexport const timestampWithMs = timestampInSeconds;\n\n/**\n * A boolean that is true when timestampInSeconds uses the Performance API to produce monotonic timestamps.\n */\nexport const usingPerformanceAPI = platformPerformance !== undefined;\n\n/**\n * The number of milliseconds since the UNIX epoch. This value is only usable in a browser, and only when the\n * performance API is available.\n */\nexport const browserPerformanceTimeOrigin = ((): number | undefined => {\n  const { performance } = getGlobalObject<Window>();\n  if (!performance) {\n    return undefined;\n  }\n  if (performance.timeOrigin) {\n    return performance.timeOrigin;\n  }\n  // While performance.timing.navigationStart is deprecated in favor of performance.timeOrigin, performance.timeOrigin\n  // is not as widely supported. Namely, performance.timeOrigin is undefined in Safari as of writing.\n  // Also as of writing, performance.timing is not available in Web Workers in mainstream browsers, so it is not always\n  // a valid fallback. In the absence of an initial time provided by the browser, fallback to the current time from the\n  // Date API.\n  // eslint-disable-next-line deprecation/deprecation\n  return (performance.timing && performance.timing.navigationStart) || Date.now();\n})();\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { ExtendedError, WrappedFunction } from '@sentry/types';\n\nimport { htmlTreeAsString } from './browser';\nimport { isElement, isError, isEvent, isInstanceOf, isPlainObject, isPrimitive, isSyntheticEvent } from './is';\nimport { Memo } from './memo';\nimport { getFunctionName } from './stacktrace';\nimport { truncate } from './string';\n\n/**\n * Wrap a given object method with a higher-order function\n *\n * @param source An object that contains a method to be wrapped.\n * @param name A name of method to be wrapped.\n * @param replacementFactory A function that should be used to wrap a given method, returning the wrapped method which\n * will be substituted in for `source[name]`.\n * @returns void\n */\nexport function fill(source: { [key: string]: any }, name: string, replacementFactory: (...args: any[]) => any): void {\n  if (!(name in source)) {\n    return;\n  }\n\n  const original = source[name] as () => any;\n  const wrapped = replacementFactory(original) as WrappedFunction;\n\n  // Make sure it's a function first, as we need to attach an empty prototype for `defineProperties` to work\n  // otherwise it'll throw \"TypeError: Object.defineProperties called on non-object\"\n  if (typeof wrapped === 'function') {\n    try {\n      wrapped.prototype = wrapped.prototype || {};\n      Object.defineProperties(wrapped, {\n        __sentry_original__: {\n          enumerable: false,\n          value: original,\n        },\n      });\n    } catch (_Oo) {\n      // This can throw if multiple fill happens on a global object like XMLHttpRequest\n      // Fixes https://github.com/getsentry/sentry-javascript/issues/2043\n    }\n  }\n\n  source[name] = wrapped;\n}\n\n/**\n * Encodes given object into url-friendly format\n *\n * @param object An object that contains serializable values\n * @returns string Encoded\n */\nexport function urlEncode(object: { [key: string]: any }): string {\n  return Object.keys(object)\n    .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(object[key])}`)\n    .join('&');\n}\n\n/**\n * Transforms any object into an object literal with all its attributes\n * attached to it.\n *\n * @param value Initial source that we have to transform in order for it to be usable by the serializer\n */\nfunction getWalkSource(\n  value: any,\n): {\n  [key: string]: any;\n} {\n  if (isError(value)) {\n    const error = value as ExtendedError;\n    const err: {\n      [key: string]: any;\n      stack: string | undefined;\n      message: string;\n      name: string;\n    } = {\n      message: error.message,\n      name: error.name,\n      stack: error.stack,\n    };\n\n    for (const i in error) {\n      if (Object.prototype.hasOwnProperty.call(error, i)) {\n        err[i] = error[i];\n      }\n    }\n\n    return err;\n  }\n\n  if (isEvent(value)) {\n    /**\n     * Event-like interface that's usable in browser and node\n     */\n    interface SimpleEvent {\n      [key: string]: unknown;\n      type: string;\n      target?: unknown;\n      currentTarget?: unknown;\n    }\n\n    const event = value as SimpleEvent;\n\n    const source: {\n      [key: string]: any;\n    } = {};\n\n    source.type = event.type;\n\n    // Accessing event.target can throw (see getsentry/raven-js#838, #768)\n    try {\n      source.target = isElement(event.target)\n        ? htmlTreeAsString(event.target)\n        : Object.prototype.toString.call(event.target);\n    } catch (_oO) {\n      source.target = '<unknown>';\n    }\n\n    try {\n      source.currentTarget = isElement(event.currentTarget)\n        ? htmlTreeAsString(event.currentTarget)\n        : Object.prototype.toString.call(event.currentTarget);\n    } catch (_oO) {\n      source.currentTarget = '<unknown>';\n    }\n\n    if (typeof CustomEvent !== 'undefined' && isInstanceOf(value, CustomEvent)) {\n      source.detail = event.detail;\n    }\n\n    for (const i in event) {\n      if (Object.prototype.hasOwnProperty.call(event, i)) {\n        source[i] = event;\n      }\n    }\n\n    return source;\n  }\n\n  return value as {\n    [key: string]: any;\n  };\n}\n\n/** Calculates bytes size of input string */\nfunction utf8Length(value: string): number {\n  // eslint-disable-next-line no-bitwise\n  return ~-encodeURI(value).split(/%..|./).length;\n}\n\n/** Calculates bytes size of input object */\nfunction jsonSize(value: any): number {\n  return utf8Length(JSON.stringify(value));\n}\n\n/** JSDoc */\nexport function normalizeToSize<T>(\n  object: { [key: string]: any },\n  // Default Node.js REPL depth\n  depth: number = 3,\n  // 100kB, as 200kB is max payload size, so half sounds reasonable\n  maxSize: number = 100 * 1024,\n): T {\n  const serialized = normalize(object, depth);\n\n  if (jsonSize(serialized) > maxSize) {\n    return normalizeToSize(object, depth - 1, maxSize);\n  }\n\n  return serialized as T;\n}\n\n/**\n * Transform any non-primitive, BigInt, or Symbol-type value into a string. Acts as a no-op on strings, numbers,\n * booleans, null, and undefined.\n *\n * @param value The value to stringify\n * @returns For non-primitive, BigInt, and Symbol-type values, a string denoting the value's type, type and value, or\n *  type and `description` property, respectively. For non-BigInt, non-Symbol primitives, returns the original value,\n *  unchanged.\n */\nfunction serializeValue(value: any): any {\n  const type = Object.prototype.toString.call(value);\n\n  // Node.js REPL notation\n  if (typeof value === 'string') {\n    return value;\n  }\n  if (type === '[object Object]') {\n    return '[Object]';\n  }\n  if (type === '[object Array]') {\n    return '[Array]';\n  }\n\n  const normalized = normalizeValue(value);\n  return isPrimitive(normalized) ? normalized : type;\n}\n\n/**\n * normalizeValue()\n *\n * Takes unserializable input and make it serializable friendly\n *\n * - translates undefined/NaN values to \"[undefined]\"/\"[NaN]\" respectively,\n * - serializes Error objects\n * - filter global objects\n */\nfunction normalizeValue<T>(value: T, key?: any): T | string {\n  if (key === 'domain' && value && typeof value === 'object' && ((value as unknown) as { _events: any })._events) {\n    return '[Domain]';\n  }\n\n  if (key === 'domainEmitter') {\n    return '[DomainEmitter]';\n  }\n\n  if (typeof (global as any) !== 'undefined' && (value as unknown) === global) {\n    return '[Global]';\n  }\n\n  if (typeof (window as any) !== 'undefined' && (value as unknown) === window) {\n    return '[Window]';\n  }\n\n  if (typeof (document as any) !== 'undefined' && (value as unknown) === document) {\n    return '[Document]';\n  }\n\n  // React's SyntheticEvent thingy\n  if (isSyntheticEvent(value)) {\n    return '[SyntheticEvent]';\n  }\n\n  if (typeof value === 'number' && value !== value) {\n    return '[NaN]';\n  }\n\n  if (value === void 0) {\n    return '[undefined]';\n  }\n\n  if (typeof value === 'function') {\n    return `[Function: ${getFunctionName(value)}]`;\n  }\n\n  // symbols and bigints are considered primitives by TS, but aren't natively JSON-serilaizable\n\n  if (typeof value === 'symbol') {\n    return `[${String(value)}]`;\n  }\n\n  if (typeof value === 'bigint') {\n    return `[BigInt: ${String(value)}]`;\n  }\n\n  return value;\n}\n\n/**\n * Walks an object to perform a normalization on it\n *\n * @param key of object that's walked in current iteration\n * @param value object to be walked\n * @param depth Optional number indicating how deep should walking be performed\n * @param memo Optional Memo class handling decycling\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function walk(key: string, value: any, depth: number = +Infinity, memo: Memo = new Memo()): any {\n  // If we reach the maximum depth, serialize whatever has left\n  if (depth === 0) {\n    return serializeValue(value);\n  }\n\n  /* eslint-disable @typescript-eslint/no-unsafe-member-access */\n  // If value implements `toJSON` method, call it and return early\n  if (value !== null && value !== undefined && typeof value.toJSON === 'function') {\n    return value.toJSON();\n  }\n  /* eslint-enable @typescript-eslint/no-unsafe-member-access */\n\n  // If normalized value is a primitive, there are no branches left to walk, so we can just bail out, as theres no point in going down that branch any further\n  const normalized = normalizeValue(value, key);\n  if (isPrimitive(normalized)) {\n    return normalized;\n  }\n\n  // Create source that we will use for next itterations, either objectified error object (Error type with extracted keys:value pairs) or the input itself\n  const source = getWalkSource(value);\n\n  // Create an accumulator that will act as a parent for all future itterations of that branch\n  const acc = Array.isArray(value) ? [] : {};\n\n  // If we already walked that branch, bail out, as it's circular reference\n  if (memo.memoize(value)) {\n    return '[Circular ~]';\n  }\n\n  // Walk all keys of the source\n  for (const innerKey in source) {\n    // Avoid iterating over fields in the prototype if they've somehow been exposed to enumeration.\n    if (!Object.prototype.hasOwnProperty.call(source, innerKey)) {\n      continue;\n    }\n    // Recursively walk through all the child nodes\n    (acc as { [key: string]: any })[innerKey] = walk(innerKey, source[innerKey], depth - 1, memo);\n  }\n\n  // Once walked through all the branches, remove the parent from memo storage\n  memo.unmemoize(value);\n\n  // Return accumulated values\n  return acc;\n}\n\n/**\n * normalize()\n *\n * - Creates a copy to prevent original input mutation\n * - Skip non-enumerablers\n * - Calls `toJSON` if implemented\n * - Removes circular references\n * - Translates non-serializeable values (undefined/NaN/Functions) to serializable format\n * - Translates known global objects/Classes to a string representations\n * - Takes care of Error objects serialization\n * - Optionally limit depth of final output\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function normalize(input: any, depth?: number): any {\n  try {\n    return JSON.parse(JSON.stringify(input, (key: string, value: any) => walk(key, value, depth)));\n  } catch (_oO) {\n    return '**non-serializable**';\n  }\n}\n\n/**\n * Given any captured exception, extract its keys and create a sorted\n * and truncated list that will be used inside the event message.\n * eg. `Non-error exception captured with keys: foo, bar, baz`\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function extractExceptionKeysForMessage(exception: any, maxLength: number = 40): string {\n  const keys = Object.keys(getWalkSource(exception));\n  keys.sort();\n\n  if (!keys.length) {\n    return '[object has no keys]';\n  }\n\n  if (keys[0].length >= maxLength) {\n    return truncate(keys[0], maxLength);\n  }\n\n  for (let includedKeys = keys.length; includedKeys > 0; includedKeys--) {\n    const serialized = keys.slice(0, includedKeys).join(', ');\n    if (serialized.length > maxLength) {\n      continue;\n    }\n    if (includedKeys === keys.length) {\n      return serialized;\n    }\n    return truncate(serialized, maxLength);\n  }\n\n  return '';\n}\n\n/**\n * Given any object, return the new object with removed keys that value was `undefined`.\n * Works recursively on objects and arrays.\n */\nexport function dropUndefinedKeys<T>(val: T): T {\n  if (isPlainObject(val)) {\n    const obj = val as { [key: string]: any };\n    const rv: { [key: string]: any } = {};\n    for (const key of Object.keys(obj)) {\n      if (typeof obj[key] !== 'undefined') {\n        rv[key] = dropUndefinedKeys(obj[key]);\n      }\n    }\n    return rv as T;\n  }\n\n  if (Array.isArray(val)) {\n    return (val as any[]).map(dropUndefinedKeys) as any;\n  }\n\n  return val;\n}\n"],"sourceRoot":""}